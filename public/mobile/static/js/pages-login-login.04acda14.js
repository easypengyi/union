(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"0ed9":function(e,t,n){var i=n("3770");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("62c2fb6e",i,!0,{sourceMap:!1,shadowMode:!1})},"17db":function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,"@charset \"UTF-8\";\n/* 颜色变量 */\n/** S Font's size **/\n/** E Font's size **/[data-v-2721d9c6]:export{red_theme:#ff2c3c;orange_theme:#f7971e;pink_theme:#fa444d;gold_theme:#e0a356;blue_theme:#2f80ed;green_theme:#2ec840}uni-page-body[data-v-2721d9c6]{background-color:#fff;padding:0}.login[data-v-2721d9c6]{height:100vh;padding-top:%?80?%;display:flex;flex-direction:column;align-items:center;text-align:center}.login .logo[data-v-2721d9c6]{height:%?126?%;margin-bottom:%?40?%}.login .acount-login[data-v-2721d9c6],\n.login .other-login[data-v-2721d9c6]{width:calc(100% - %?80?%)}.login .acount-login .input[data-v-2721d9c6],\n.login .other-login .input[data-v-2721d9c6]{padding-top:%?20?%}.login .acount-login .login-btn[data-v-2721d9c6],\n.login .other-login .login-btn[data-v-2721d9c6]{margin:%?80?% 0 %?50?%}.red_theme .login .acount-login .login-btn[data-v-2721d9c6], .red_theme\n.login .other-login .login-btn[data-v-2721d9c6]{background-color:#ff2c3c}.orange_theme .login .acount-login .login-btn[data-v-2721d9c6], .orange_theme\n.login .other-login .login-btn[data-v-2721d9c6]{background-color:#f7971e}.pink_theme .login .acount-login .login-btn[data-v-2721d9c6], .pink_theme\n.login .other-login .login-btn[data-v-2721d9c6]{background-color:#fa444d}.gold_theme .login .acount-login .login-btn[data-v-2721d9c6], .gold_theme\n.login .other-login .login-btn[data-v-2721d9c6]{background-color:#e0a356}.blue_theme .login .acount-login .login-btn[data-v-2721d9c6], .blue_theme\n.login .other-login .login-btn[data-v-2721d9c6]{background-color:#2f80ed}.green_theme .login .acount-login .login-btn[data-v-2721d9c6], .green_theme\n.login .other-login .login-btn[data-v-2721d9c6]{background-color:#2ec840}.login .acount-login .forget-btn[data-v-2721d9c6],\n.login .other-login .forget-btn[data-v-2721d9c6]{border-left:1px solid #e5e5e5}.login .acount-login .sms-btn[data-v-2721d9c6],\n.login .other-login .sms-btn[data-v-2721d9c6]{text-align:center;border:1px solid;width:%?176?%;height:%?60?%;line-height:%?60?%;border-radius:%?60?%}.red_theme .login .acount-login .sms-btn[data-v-2721d9c6], .red_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{color:#ff2c3c}.orange_theme .login .acount-login .sms-btn[data-v-2721d9c6], .orange_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{color:#f7971e}.pink_theme .login .acount-login .sms-btn[data-v-2721d9c6], .pink_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{color:#fa444d}.gold_theme .login .acount-login .sms-btn[data-v-2721d9c6], .gold_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{color:#e0a356}.blue_theme .login .acount-login .sms-btn[data-v-2721d9c6], .blue_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{color:#2f80ed}.green_theme .login .acount-login .sms-btn[data-v-2721d9c6], .green_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{color:#2ec840}.red_theme .login .acount-login .sms-btn[data-v-2721d9c6], .red_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{border-color:#ff2c3c}.orange_theme .login .acount-login .sms-btn[data-v-2721d9c6], .orange_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{border-color:#f7971e}.pink_theme .login .acount-login .sms-btn[data-v-2721d9c6], .pink_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{border-color:#fa444d}.gold_theme .login .acount-login .sms-btn[data-v-2721d9c6], .gold_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{border-color:#e0a356}.blue_theme .login .acount-login .sms-btn[data-v-2721d9c6], .blue_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{border-color:#2f80ed}.green_theme .login .acount-login .sms-btn[data-v-2721d9c6], .green_theme\n.login .other-login .sms-btn[data-v-2721d9c6]{border-color:#2ec840}.login .acount-login .wx-login[data-v-2721d9c6],\n.login .other-login .wx-login[data-v-2721d9c6]{margin-top:%?60?%}.login .acount-login .wx-login .image[data-v-2721d9c6],\n.login .other-login .wx-login .image[data-v-2721d9c6]{margin-top:%?40?%;width:%?80?%;height:%?80?%}.red_theme .login .agreement[data-v-2721d9c6]{color:#ff2c3c}.orange_theme .login .agreement[data-v-2721d9c6]{color:#f7971e}.pink_theme .login .agreement[data-v-2721d9c6]{color:#fa444d}.gold_theme .login .agreement[data-v-2721d9c6]{color:#e0a356}.blue_theme .login .agreement[data-v-2721d9c6]{color:#2f80ed}.green_theme .login .agreement[data-v-2721d9c6]{color:#2ec840}body.?%PAGE?%[data-v-2721d9c6]{background-color:#fff}",""]),e.exports=t},3770:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,"@charset \"UTF-8\";\n/* 颜色变量 */\n/** S Font's size **/\n/** E Font's size **/[data-v-4a6052c7]:export{red_theme:#ff2c3c;orange_theme:#f7971e;pink_theme:#fa444d;gold_theme:#e0a356;blue_theme:#2f80ed;green_theme:#2ec840}.u-divider[data-v-4a6052c7]{width:100%;position:relative;text-align:center;display:flex;flex-direction:row;justify-content:center;align-items:center;overflow:hidden;flex-direction:row}.u-divider-line[data-v-4a6052c7]{border-bottom:1px solid #e4e7ed;-webkit-transform:scaleY(.5);transform:scaleY(.5);-webkit-transform-origin:center;transform-origin:center}.u-divider-line--bordercolor--primary[data-v-4a6052c7]{border-color:#2979ff}.u-divider-line--bordercolor--success[data-v-4a6052c7]{border-color:#19be6b}.u-divider-line--bordercolor--error[data-v-4a6052c7]{border-color:#2979ff}.u-divider-line--bordercolor--info[data-v-4a6052c7]{border-color:#909399}.u-divider-line--bordercolor--warning[data-v-4a6052c7]{border-color:#f90}.u-divider-text[data-v-4a6052c7]{white-space:nowrap;padding:0 %?16?%;display:inline-flex}",""]),e.exports=t},4695:function(e,t,n){"use strict";n.r(t);var i=n("f1a3"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"785b":function(e,t,n){"use strict";n.r(t);var i=n("f90a"),o=n.n(i);for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);t["default"]=o.a},"8a90":function(e,t,n){"use strict";n.r(t);var i=n("a293"),o=n("4695");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("a2c3");var r,l=n("f0c5"),c=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"2721d9c6",null,!1,i["a"],r);t["default"]=c.exports},a101:function(e,t,n){var i=n("17db");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=n("4f06").default;o("0a479458",i,!0,{sourceMap:!1,shadowMode:!1})},a293:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var i={uField:n("acb3").default,uVerificationCode:n("929fd").default,uDivider:n("cf82").default},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"pages",class:e.themeName},[n("v-uni-view",{staticClass:"login"},[n("v-uni-image",{staticClass:"logo",attrs:{src:e.appConfig.logo,mode:"heightFix"}}),n("v-uni-view",{staticClass:"acount-login"},[n("v-uni-view",{staticClass:"input"},[n("u-field",{attrs:{"label-width":"0",placeholder:"请输入手机号","input-border":!1},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1),n("v-uni-view",{staticClass:"input"},[1==e.loginType?n("u-field",{attrs:{"label-width":"0",type:"password","password-icon":!1,placeholder:"请输入密码","input-border":!1},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[n("v-uni-view",{staticClass:"forget-btn p-l-20",attrs:{slot:"right"},slot:"right"},[n("router-link",{attrs:{to:"/pages/forget_pwd/forget_pwd"}},[e._v("忘记密码")])],1)],1):e._e(),2==e.loginType?n("u-field",{attrs:{"label-width":"0",placeholder:"请输入验证码","input-border":!1},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},[n("v-uni-view",{attrs:{slot:"right"},slot:"right"},[n("v-uni-view",{staticClass:"sms-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.sendSMS.apply(void 0,arguments)}}},[n("u-verification-code",{ref:"uCode",attrs:{"unique-key":"login"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.codeChange.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"xs"},[e._v(e._s(e.codeTips))])],1)],1)],1):e._e()],1),n("v-uni-button",{staticClass:"login-btn white br60",attrs:{size:"lg"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.loginFun.apply(void 0,arguments)}}},[e._v("登录")]),n("v-uni-view",{staticClass:"flex row-between"},[n("v-uni-view",[e.hasLoginWay(1)&&2==e.loginType?n("v-uni-view",{staticClass:"lighter",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeLoginType.apply(void 0,arguments)}}},[e._v("手机号密码登录")]):e._e(),e.hasLoginWay(2)&&1==e.loginType?n("v-uni-view",{staticClass:"lighter",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.changeLoginType.apply(void 0,arguments)}}},[e._v("短信验证码登录")]):e._e()],1),e.isPhoneRegister?n("router-link",{staticClass:"lighter",attrs:{to:"/pages/register/register"}},[e._v("注册账号")]):e._e()],1)],1),n("v-uni-view",{staticClass:"other-login flex-col flex-1"},[n("v-uni-view",{staticClass:"flex-1 wx-login"},[e.isOaWxAuth&&e.isWeixin?n("v-uni-view",[n("u-divider",[e._v("其他登录方式")]),n("v-uni-view",{staticClass:"inline",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCodeUrl.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"image",attrs:{src:"/static/images/icon_wechat.png"}}),n("v-uni-view",{staticClass:"sm"},[e._v("微信登录")])],1)],1):e._e()],1),n("v-uni-view",{staticClass:"m-b-40 sm flex row-center"},[e._v("已阅读并同意"),n("router-link",{attrs:{"data-theme":"",to:"/bundle/pages/server_explan/server_explan?type=1"}},[n("v-uni-view",{staticClass:"agreement"},[e._v("《服务协议》")])],1),e._v("和"),n("router-link",{attrs:{to:"/bundle/pages/server_explan/server_explan?type=2"}},[n("v-uni-view",{staticClass:"agreement"},[e._v("《隐私协议》")])],1)],1)],1)],1)],1)},a=[]},a2c3:function(e,t,n){"use strict";var i=n("a101"),o=n.n(i);o.a},bb7c:function(e,t,n){"use strict";var i=n("0ed9"),o=n.n(i);o.a},cf82:function(e,t,n){"use strict";n.r(t);var i=n("ebf3"),o=n("785b");for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n("bb7c");var r,l=n("f0c5"),c=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"4a6052c7",null,!1,i["a"],r);t["default"]=c.exports},ebf3:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i}));var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"u-divider",style:{height:"auto"==e.height?"auto":e.height+"rpx",backgroundColor:e.bgColor,marginBottom:e.marginBottom+"rpx",marginTop:e.marginTop+"rpx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.click.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"u-divider-line",class:[e.type?"u-divider-line--bordercolor--"+e.type:""],style:[e.lineStyle]}),e.useSlot?n("v-uni-view",{staticClass:"u-divider-text",style:{color:e.color,fontSize:e.fontSize+"rpx"}},[e._t("default")],2):e._e(),n("v-uni-view",{staticClass:"u-divider-line",class:[e.type?"u-divider-line--bordercolor--"+e.type:""],style:[e.lineStyle]})],1)},a=[]},f1a3:function(e,t,n){"use strict";var i=n("4ea4");n("45fc"),n("d3b7"),n("ac1f"),n("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("ade3")),a=i(n("3835"));n("96cf");var r,l=i(n("1da1")),c=i(n("5530")),d=n("26cb"),s=n("68da"),u=i(n("fd0a")),g=n("4d79"),f=i(n("df6d")),h=n("1cb6"),v=n("7627"),p={ACCOUNT:1,SMS_CODE:2},m={data:function(){return{password:"",account:"",code:"",loginType:"",isWeixin:"",codeTips:""}},methods:(0,c.default)((0,c.default)((0,c.default)({},(0,d.mapMutations)(["login"])),(0,d.mapActions)(["getUser"])),{},{mnpLogin:function(){var e=this;return(0,l.default)(regeneratorRuntime.mark((function t(){var n,i,o,a,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,v.getUserProfile)();case 2:return n=t.sent,i=n.userInfo,o=i.avatarUrl,a=i.nickName,i.gender,uni.showLoading({title:"登录中...",mask:!0}),t.next=10,(0,v.getCode)();case 10:return r=t.sent,t.next=13,(0,s.apiAuthLogin)({code:r,nickname:a,headimgurl:o});case 13:l=t.sent,e.loginHandle(l);case 15:case"end":return t.stop()}}),t)})))()},getCodeUrl:function(){u.default.getWxUrl()},oaLogin:function(e){var t=this;return(0,l.default)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,u.default.authLogin(e);case 4:i=n.sent,t.loginHandle(i);case 6:case"end":return n.stop()}}),n)})))()},oaAutoLogin:function(){var e=this.$Route.query.code;if(this.isWeixin=(0,g.isWeixinClient)(),!this.isLogin)return e?this.oaLogin(e):void(this.isWeixin&&this.isOaWxAutoLogin&&this.getCodeUrl());uni.switchTab({url:"/pages/index/index"})},appLogin:function(){var e=this;return(0,l.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.login({provider:"weixin",success:function(t){uni.showLoading({title:"登录中...",mask:!0});var n=t.authResult,i=n.openid,o=n.access_token;(0,s.apiAppWxLogin)({openid:i,access_token:o}).then((function(t){e.loginHandle(t)})).finally((function(e){uni.hideLoading()}))}});case 1:case"end":return t.stop()}}),t)})))()},loginFun:function(){var e=this;return(0,l.default)(regeneratorRuntime.mark((function t(){var n,i,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.account,i=e.password,e.telephone,o=e.code,a=e.loginType,n){t.next=4;break}return e.$toast({title:"请输入手机号"}),t.abrupt("return");case 4:if(1!=e.loginType||i){t.next=7;break}return e.$toast({title:"请输入密码"}),t.abrupt("return");case 7:if(2!=e.loginType||o){t.next=10;break}return e.$toast({title:"请输入验证码"}),t.abrupt("return");case 10:(0,s.apiAccountLogin)({scene:a,account:n,password:1==a?i:"",code:2==a?o:""}).then((function(t){e.loginHandle(t)}));case 11:case"end":return t.stop()}}),t)})))()},loginHandle:function(e){var t=this;return(0,l.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.login(e),t.getUser(),uni.hideLoading(),!t.isBindMobile||e.mobile){n.next=5;break}return n.abrupt("return",t.$Router.replace("/pages/bind_mobile/bind_mobile"));case 5:t.goBack();case 6:case"end":return n.stop()}}),n)})))()},goBack:function(){getCurrentPages().length>1?this.$Router.back(1,{success:function(){var e=(0,g.currentPage)(),t=e.onLoad,n=e.options;t&&t(n)}}):f.default.get(h.BACK_URL)?this.$Router.replace(f.default.get(h.BACK_URL)):this.$Router.replaceAll("/pages/index/index"),f.default.remove(h.BACK_URL)},changeLoginType:function(){this.loginType==p.ACCOUNT?this.loginType=p.SMS_CODE:this.loginType==p.SMS_CODE&&(this.loginType=p.ACCOUNT)},sendSMS:function(){var e=this;this.$refs.uCode.canGetCode&&(this.account?(0,s.apiLoginCaptcha)({mobile:this.account}).then((function(t){e.$refs.uCode.start()})):this.$toast({title:"请输入手机号"}))},codeChange:function(e){this.codeTips=e},ttLogin:function(){var e=this;return(0,l.default)(regeneratorRuntime.mark((function t(){var n,i,o,r,l,c,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,v.getCode)();case 2:return n=t.sent,t.next=5,uni.getUserInfo();case 5:if(i=t.sent,o=(0,a.default)(i,2),o[0],r=o[1],r){t.next=12;break}return e.openSetting(),t.abrupt("return");case 12:l=r.userInfo,c=l.avatarUrl,d=l.nickName,uni.showLoading({title:"登录中..."}),(0,s.apiToutiaoAuthLogin)({code:n,avatarUrl:c,nickName:d}).then((function(t){e.loginHandle(t)})).catch((function(e){console.log(e),uni.hideLoading()}));case 15:case"end":return t.stop()}}),t)})))()},openSetting:function(){uni.showModal({title:"温馨提示",content:"您已拒绝授权，是否前往设置打开个人信息授权？",confirmColor:this.themeColor,success:function(e){e.confirm&&uni.openSetting()}})}}),computed:(r={isPhoneRegister:function(){var e=this.appConfig.register_way;return!!e&&e.some((function(e){return 1==e}))},isBindMobile:function(){var e=this.appConfig.coerce_mobile;return e},loginWay:function(){var e=this.appConfig.login_way;return!!e&&(this.loginType=e[0]||"",e)},hasLoginWay:function(){var e=this;return function(t){return e.loginWay&&e.loginWay.some((function(e){return e==t}))}},isMnpWxAuth:function(){var e=this.appConfig.mnp_wechat_auth;return e}},(0,o.default)(r,"isMnpWxAuth",(function(){var e=this.appConfig.mnp_wechat_auth;return e})),(0,o.default)(r,"isOaWxAuth",(function(){var e=this.appConfig.h5_wechat_auth;return e})),(0,o.default)(r,"isAPPWxAuth",(function(){var e=this.appConfig.app_wechat_auth;return e})),(0,o.default)(r,"isOaWxAutoLogin",(function(){var e=this.appConfig.h5_auto_wechat_auth;return e})),(0,o.default)(r,"isToutiaoAuth",(function(){var e=this.appConfig.toutiao_auth;return e})),r),onLoad:function(){this.mnpLogin=(0,g.trottle)(this.mnpLogin),this.appLogin=(0,g.trottle)(this.appLogin),this.getCodeUrl=(0,g.trottle)(this.getCodeUrl),this.ttLogin=(0,g.trottle)(this.ttLogin),this.oaAutoLogin()},onUnload:function(){}};t.default=m},f90a:function(e,t,n){"use strict";n("c975"),n("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"u-divider",props:{halfWidth:{type:[Number,String],default:150},borderColor:{type:String,default:"#dcdfe6"},type:{type:String,default:"primary"},color:{type:String,default:"#909399"},fontSize:{type:[Number,String],default:26},bgColor:{type:String,default:"#ffffff"},height:{type:[Number,String],default:"auto"},marginTop:{type:[String,Number],default:0},marginBottom:{type:[String,Number],default:0},useSlot:{type:Boolean,default:!0}},computed:{lineStyle:function(){var e={};return-1!=String(this.halfWidth).indexOf("%")?e.width=this.halfWidth:e.width=this.halfWidth+"rpx",this.borderColor&&(e.borderColor=this.borderColor),e}},methods:{click:function(){this.$emit("click")}}};t.default=i}}]);