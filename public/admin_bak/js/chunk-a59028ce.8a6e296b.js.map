{"version":3,"sources":["webpack:///./node_modules/echarts/lib/chart/pie/pieLayout.js","webpack:///./node_modules/echarts/lib/chart/pie/labelLayout.js","webpack:///./node_modules/echarts/lib/chart/pie/PieView.js","webpack:///./node_modules/echarts/lib/chart/pie/PieSeries.js","webpack:///./node_modules/echarts/lib/chart/pie/install.js","webpack:///./node_modules/echarts/lib/visual/LegendVisualProvider.js","webpack:///./node_modules/echarts/lib/chart/helper/pieHelper.js","webpack:///./node_modules/echarts/lib/processor/dataFilter.js","webpack:///./node_modules/echarts/lib/chart/helper/createListSimply.js"],"names":["PI2","Math","PI","RADIAN","getViewRect","seriesModel","api","getBoxLayoutParams","width","getWidth","height","getHeight","pieLayout","seriesType","ecModel","eachSeriesByType","data","getData","valueDim","mapDimension","viewRect","center","get","radius","size","min","cx","x","cy","y","r0","r","startAngle","minAngle","validDataCount","each","value","isNaN","sum","getSum","unitRadian","clockwise","roseType","stillShowZeroSum","extent","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","dir","setLayout","idx","angle","setItemLayout","NaN","endAngle","angle_1","layout_1","getItemLayout","layout_2","adjustSingleSide","list","viewWidth","viewHeight","viewLeft","viewTop","farthestX","length","len","i","position","labelAlignTo","dx","label","linePoints","recalculateX","recalculateXOnSemiToAlignOnEllipseCurve","semi","rB","rB2","item","dy","abs","rA","rA2","sqrt","len2","items","topSemi","maxY","bottomSemi","push","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","Number","MAX_VALUE","rightmostX","isPositionCenter","max","layout","isAlignToEdge","realTextWidth","rect","targetTextWidth","labelDistance","edgeDistance","bleedMargin","style","dist","sectorShape","pieLabelLayout","hasLabelRotate","minShowLabelRadian","getLayout","setNotShow","el","ignore","isLabelShown","key","states","sector","getItemGraphicEl","shape","getTextContent","labelLine","getTextGuideLine","itemModel","getItemModel","labelModel","getModel","labelPosition","labelLineModel","labelLineLen","labelLineLen2","textX","textY","textAlign","midAngle","nx","cos","ny","sin","labelRotate","isLabelInside","x1","y1","x2","y2","x3","y3","rotate","rotation","setStyle","verticalAlign","align","selectState","select","textRect","getBoundingRect","clone","applyTransform","getComputedTransform","margin","minTurnAngle","maxSurfaceAngle","surfaceNormal","Point","setTextConfig","inside","notShowLabel","setShape","points","__hostTarget","textGuideLineConfig","anchor","_super","PiePiece","_this","call","this","z2","text","setTextContent","updateData","prototype","firstCreate","hostModel","emphasisModel","animationType","getShallow","graphic","useStyle","getItemVisual","offset","cursorStyle","attr","_updateLabel","ensureState","labelText","visualColor","fill","visualOpacity","opacity","labelFetcher","labelDataIndex","inheritColor","defaultOpacity","defaultText","getFormattedLabel","getName","removeTextGuideLine","polyline","setTextGuideLine","stroke","PieView","apply","arguments","ignoreLabelLineUpdate","init","sectorGroup","_sectorGroup","render","payload","oldData","_data","group","count","s","diff","add","piePiece","setItemGraphicEl","update","newIdx","oldIdx","off","remove","execute","dispose","containPoint","point","itemLayout","type","Chart","PieSeriesModel","useColorPaletteOnData","option","legendVisualProvider","LegendVisualProvider","getRawData","_defaultLabelLine","mergeOption","getInitialData","createListSimply","coordDimensions","encodeDefaulter","getDataParams","dataIndex","params","valueList","percent","$vars","model","labelLineNormalOpt","labelLineEmphasisOpt","emphasis","show","defaultOption","zlevel","z","legendHoverLink","minShowLabelAngle","selectedOffset","percentPrecision","left","top","right","bottom","overflow","alignTo","distanceToLabelLine","length2","smooth","lineStyle","itemStyle","borderWidth","labelLayout","hideOverlap","scale","scaleSize","avoidLabelOverlap","animationDuration","animationTypeUpdate","animationEasingUpdate","animationDurationUpdate","animationEasing","Series","PieSeries","install","registers","registerChartView","registerSeriesModel","registerAction","registerLayout","registerProcessor","dataFilter","getDataWithEncodedVisual","_getDataWithEncodedVisual","_getRawData","getAllNames","rawData","mapArray","containName","name","indexOfName","dataWithEncodedVisual","getSectorCornerRadius","cornerRadius","innerCornerRadius","reset","legendModels","findComponents","mainType","filterSelf","isSelected","opt","nameList","source","getSource","dimensionsInfo","initData"],"mappings":"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","file":"js/chunk-a59028ce.8a6e296b.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { parsePercent, linearMap } from '../../util/number';\nimport * as layout from '../../util/layout';\nimport * as zrUtil from 'zrender/lib/core/util';\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nexport default function pieLayout(seriesType, ecModel, api) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = parsePercent(viewRect.width, api.getWidth());\n    var height = parsePercent(viewRect.height, api.getHeight());\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width) + viewRect.x;\n    var cy = parsePercent(center[1], height) + viewRect.y;\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.setLayout({\n      viewRect: viewRect,\n      r: r\n    });\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle_1 = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_1 = data.getItemLayout(idx);\n            layout_1.angle = angle_1;\n            layout_1.startAngle = startAngle + dir * idx * angle_1;\n            layout_1.endAngle = startAngle + dir * (idx + 1) * angle_1;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout_2 = data.getItemLayout(idx);\n            var angle = layout_2.angle === minAngle ? minAngle : value * unitRadian;\n            layout_2.startAngle = currentAngle;\n            layout_2.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nimport { parsePercent } from '../../util/number';\nimport { Point } from '../../util/graphic';\nimport { each } from 'zrender/lib/core/util';\nimport { limitTurnAngle, limitSurfaceAngle } from '../../label/labelGuideHelper';\nimport { shiftLayoutOnY } from '../../label/labelLayoutHelper';\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  if (list.length < 2) {\n    return;\n  }\n\n  ;\n\n  function recalculateXOnSemiToAlignOnEllipseCurve(semi) {\n    var rB = semi.rB;\n    var rB2 = rB * rB;\n\n    for (var i = 0; i < semi.list.length; i++) {\n      var item = semi.list[i];\n      var dy = Math.abs(item.label.y - cy); // horizontal r is always same with original r because x is not changed.\n\n      var rA = r + item.len;\n      var rA2 = rA * rA; // Use ellipse implicit function to calculate x\n\n      var dx = Math.sqrt((1 - Math.abs(dy * dy / rB2)) * rA2);\n      item.label.x = cx + (dx + item.len2) * dir;\n    }\n  } // Adjust X based on the shifted y. Make tight labels aligned on an ellipse curve.\n\n\n  function recalculateX(items) {\n    // Extremes of\n    var topSemi = {\n      list: [],\n      maxY: 0\n    };\n    var bottomSemi = {\n      list: [],\n      maxY: 0\n    };\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var item = items[i];\n      var semi = item.label.y > cy ? bottomSemi : topSemi;\n      var dy = Math.abs(item.label.y - cy);\n\n      if (dy > semi.maxY) {\n        var dx = item.label.x - cx - item.len2 * dir; // horizontal r is always same with original r because x is not changed.\n\n        var rA = r + item.len; // Canculate rB based on the topest / bottemest label.\n\n        var rB = Math.abs(dx) < rA ? Math.sqrt(dy * dy / (1 - dx * dx / rA / rA)) : rA;\n        semi.rB = rB;\n        semi.maxY = dy;\n      }\n\n      semi.list.push(item);\n    }\n\n    recalculateXOnSemiToAlignOnEllipseCurve(topSemi);\n    recalculateXOnSemiToAlignOnEllipseCurve(bottomSemi);\n  }\n\n  var len = list.length;\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].label.x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].label.x = farthestX;\n    }\n  }\n\n  if (shiftLayoutOnY(list, viewTop, viewTop + viewHeight)) {\n    recalculateX(list);\n  }\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var label = labelLayoutList[i].label;\n\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (label.x < cx) {\n      leftmostX = Math.min(leftmostX, label.x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, label.x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n\n    if (isPositionCenter(layout)) {\n      continue;\n    }\n\n    var linePoints = layout.linePoints;\n\n    if (linePoints) {\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var realTextWidth = layout.rect.width;\n      var targetTextWidth = void 0;\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.edgeDistance;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.edgeDistance - linePoints[2][0] - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          targetTextWidth = label.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - label.x - layout.bleedMargin;\n        }\n      }\n\n      if (targetTextWidth < layout.rect.width) {\n        // TODOTODO\n        // layout.text = textContain.truncateText(layout.text, targetTextWidth, layout.font);\n        layout.label.style.width = targetTextWidth;\n\n        if (layout.labelAlignTo === 'edge') {\n          realTextWidth = targetTextWidth; // realTextWidth = textContain.getWidth(layout.text, layout.font);\n        }\n      }\n\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (label.x < cx) {\n          linePoints[2][0] = viewLeft + layout.edgeDistance + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.edgeDistance - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (label.x < cx) {\n          linePoints[2][0] = label.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = label.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = label.y;\n    }\n  }\n}\n\nfunction isPositionCenter(sectorShape) {\n  // Not change x for center label\n  return sectorShape.position === 'center';\n}\n\nexport default function pieLabelLayout(seriesModel) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  var viewRect = data.getLayout('viewRect');\n  var r = data.getLayout('r');\n  var viewWidth = viewRect.width;\n  var viewLeft = viewRect.x;\n  var viewTop = viewRect.y;\n  var viewHeight = viewRect.height;\n\n  function setNotShow(el) {\n    el.ignore = true;\n  }\n\n  function isLabelShown(label) {\n    if (!label.ignore) {\n      return true;\n    }\n\n    for (var key in label.states) {\n      if (label.states[key].ignore === false) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  data.each(function (idx) {\n    var sector = data.getItemGraphicEl(idx);\n    var sectorShape = sector.shape;\n    var label = sector.getTextContent();\n    var labelLine = sector.getTextGuideLine();\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get(['emphasis', 'label', 'position']);\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var edgeDistance = parsePercent(labelModel.get('edgeDistance'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (Math.abs(sectorShape.endAngle - sectorShape.startAngle) < minShowLabelRadian) {\n      each(label.states, setNotShow);\n      label.ignore = true;\n      return;\n    }\n\n    if (!isLabelShown(label)) {\n      return;\n    }\n\n    var midAngle = (sectorShape.startAngle + sectorShape.endAngle) / 2;\n    var nx = Math.cos(midAngle);\n    var ny = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = sectorShape.cx;\n    cy = sectorShape.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = sectorShape.cx;\n      textY = sectorShape.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * nx : sectorShape.r * nx) + cx;\n      var y1 = (isLabelInside ? (sectorShape.r + sectorShape.r0) / 2 * ny : sectorShape.r * ny) + cy;\n      textX = x1 + nx * 3;\n      textY = y1 + ny * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + nx * (labelLineLen + r - sectorShape.r);\n        var y2 = y1 + ny * (labelLineLen + r - sectorShape.r);\n        var x3 = x2 + (nx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = nx < 0 ? viewLeft + edgeDistance : viewLeft + viewWidth - edgeDistance;\n        } else {\n          textX = x3 + (nx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? nx > 0 ? 'right' : 'left' : nx > 0 ? 'left' : 'right';\n    }\n\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else {\n      labelRotate = rotate ? nx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    }\n\n    hasLabelRotate = !!labelRotate;\n    label.x = textX;\n    label.y = textY;\n    label.rotation = labelRotate;\n    label.setStyle({\n      verticalAlign: 'middle'\n    }); // Not sectorShape the inside label\n\n    if (!isLabelInside) {\n      var textRect = label.getBoundingRect().clone();\n      textRect.applyTransform(label.getComputedTransform()); // Text has a default 1px stroke. Exclude this.\n\n      var margin = (label.style.margin || 0) + 2.1;\n      textRect.y -= margin / 2;\n      textRect.height += margin;\n      labelLayoutList.push({\n        label: label,\n        labelLine: labelLine,\n        position: labelPosition,\n        len: labelLineLen,\n        len2: labelLineLen2,\n        minTurnAngle: labelLineModel.get('minTurnAngle'),\n        maxSurfaceAngle: labelLineModel.get('maxSurfaceAngle'),\n        surfaceNormal: new Point(nx, ny),\n        linePoints: linePoints,\n        textAlign: textAlign,\n        labelDistance: labelDistance,\n        labelAlignTo: labelAlignTo,\n        edgeDistance: edgeDistance,\n        bleedMargin: bleedMargin,\n        rect: textRect\n      });\n    } else {\n      label.setStyle({\n        align: textAlign\n      });\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    sector.setTextConfig({\n      inside: isLabelInside\n    });\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n    var label = layout.label;\n    var labelLine = layout.labelLine;\n    var notShowLabel = isNaN(label.x) || isNaN(label.y);\n\n    if (label) {\n      label.setStyle({\n        align: layout.textAlign\n      });\n\n      if (notShowLabel) {\n        each(label.states, setNotShow);\n        label.ignore = true;\n      }\n\n      var selectState = label.states.select;\n\n      if (selectState) {\n        selectState.x += label.x;\n        selectState.y += label.y;\n      }\n    }\n\n    if (labelLine) {\n      var linePoints = layout.linePoints;\n\n      if (notShowLabel || !linePoints) {\n        each(labelLine.states, setNotShow);\n        labelLine.ignore = true;\n      } else {\n        limitTurnAngle(linePoints, layout.minTurnAngle);\n        limitSurfaceAngle(linePoints, layout.surfaceNormal, layout.maxSurfaceAngle);\n        labelLine.setShape({\n          points: linePoints\n        }); // Set the anchor to the midpoint of sector\n\n        label.__hostTarget.textGuideLineConfig = {\n          anchor: new Point(linePoints[0][0], linePoints[0][1])\n        };\n      }\n    }\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __assign, __extends } from \"tslib\";\nimport { extend, retrieve3 } from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport ChartView from '../../view/Chart';\nimport labelLayout from './labelLayout';\nimport { setLabelLineStyle, getLabelLineStatesModels } from '../../label/labelGuideHelper';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport { getSectorCornerRadius } from '../helper/pieHelper';\n/**\n * Piece of pie including Sector, Label, LabelLine\n */\n\nvar PiePiece =\n/** @class */\nfunction (_super) {\n  __extends(PiePiece, _super);\n\n  function PiePiece(data, idx, startAngle) {\n    var _this = _super.call(this) || this;\n\n    _this.z2 = 2;\n    var text = new graphic.Text();\n\n    _this.setTextContent(text);\n\n    _this.updateData(data, idx, startAngle, true);\n\n    return _this;\n  }\n\n  PiePiece.prototype.updateData = function (data, idx, startAngle, firstCreate) {\n    var sector = this;\n    var seriesModel = data.hostModel;\n    var itemModel = data.getItemModel(idx);\n    var emphasisModel = itemModel.getModel('emphasis');\n    var layout = data.getItemLayout(idx);\n    var sectorShape = extend(getSectorCornerRadius(itemModel.getModel('itemStyle'), layout) || {}, layout); // Ignore NaN data.\n\n    if (isNaN(sectorShape.startAngle)) {\n      // Use NaN shape to avoid drawing shape.\n      sector.setShape(sectorShape);\n      return;\n    }\n\n    if (firstCreate) {\n      sector.setShape(sectorShape);\n      var animationType = seriesModel.getShallow('animationType');\n\n      if (animationType === 'scale') {\n        sector.shape.r = layout.r0;\n        graphic.initProps(sector, {\n          shape: {\n            r: layout.r\n          }\n        }, seriesModel, idx);\n      } // Expansion\n      else {\n          if (startAngle != null) {\n            sector.setShape({\n              startAngle: startAngle,\n              endAngle: startAngle\n            });\n            graphic.initProps(sector, {\n              shape: {\n                startAngle: layout.startAngle,\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          } else {\n            sector.shape.endAngle = layout.startAngle;\n            graphic.updateProps(sector, {\n              shape: {\n                endAngle: layout.endAngle\n              }\n            }, seriesModel, idx);\n          }\n        }\n    } else {\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n\n    sector.useStyle(data.getItemVisual(idx, 'style'));\n    setStatesStylesFromModel(sector, itemModel);\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var offset = seriesModel.get('selectedOffset');\n    var dx = Math.cos(midAngle) * offset;\n    var dy = Math.sin(midAngle) * offset;\n    var cursorStyle = itemModel.getShallow('cursor');\n    cursorStyle && sector.attr('cursor', cursorStyle);\n\n    this._updateLabel(seriesModel, data, idx);\n\n    sector.ensureState('emphasis').shape = __assign({\n      r: layout.r + (emphasisModel.get('scale') ? emphasisModel.get('scaleSize') || 0 : 0)\n    }, getSectorCornerRadius(emphasisModel.getModel('itemStyle'), layout));\n    extend(sector.ensureState('select'), {\n      x: dx,\n      y: dy,\n      shape: getSectorCornerRadius(itemModel.getModel(['select', 'itemStyle']), layout)\n    });\n    extend(sector.ensureState('blur'), {\n      shape: getSectorCornerRadius(itemModel.getModel(['blur', 'itemStyle']), layout)\n    });\n    var labelLine = sector.getTextGuideLine();\n    var labelText = sector.getTextContent();\n    labelLine && extend(labelLine.ensureState('select'), {\n      x: dx,\n      y: dy\n    }); // TODO: needs dx, dy in zrender?\n\n    extend(labelText.ensureState('select'), {\n      x: dx,\n      y: dy\n    });\n    enableHoverEmphasis(this, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n  };\n\n  PiePiece.prototype._updateLabel = function (seriesModel, data, idx) {\n    var sector = this;\n    var itemModel = data.getItemModel(idx);\n    var labelLineModel = itemModel.getModel('labelLine');\n    var style = data.getItemVisual(idx, 'style');\n    var visualColor = style && style.fill;\n    var visualOpacity = style && style.opacity;\n    setLabelStyle(sector, getLabelStatesModels(itemModel), {\n      labelFetcher: data.hostModel,\n      labelDataIndex: idx,\n      inheritColor: visualColor,\n      defaultOpacity: visualOpacity,\n      defaultText: seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx)\n    });\n    var labelText = sector.getTextContent(); // Set textConfig on sector.\n\n    sector.setTextConfig({\n      // reset position, rotation\n      position: null,\n      rotation: null\n    }); // Make sure update style on labelText after setLabelStyle.\n    // Because setLabelStyle will replace a new style on it.\n\n    labelText.attr({\n      z2: 10\n    });\n    var labelPosition = seriesModel.get(['label', 'position']);\n\n    if (labelPosition !== 'outside' && labelPosition !== 'outer') {\n      sector.removeTextGuideLine();\n    } else {\n      var polyline = this.getTextGuideLine();\n\n      if (!polyline) {\n        polyline = new graphic.Polyline();\n        this.setTextGuideLine(polyline);\n      } // Default use item visual color\n\n\n      setLabelLineStyle(this, getLabelLineStatesModels(itemModel), {\n        stroke: visualColor,\n        opacity: retrieve3(labelLineModel.get(['lineStyle', 'opacity']), visualOpacity, 1)\n      });\n    }\n  };\n\n  return PiePiece;\n}(graphic.Sector); // Pie view\n\n\nvar PieView =\n/** @class */\nfunction (_super) {\n  __extends(PieView, _super);\n\n  function PieView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.ignoreLabelLineUpdate = true;\n    return _this;\n  }\n\n  PieView.prototype.init = function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  };\n\n  PieView.prototype.render = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var startAngle; // First render\n\n    if (!oldData && data.count() > 0) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape && shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      if (shape) {\n        startAngle = shape.startAngle;\n      }\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx, startAngle);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx, startAngle);\n      piePiece.off('click');\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      graphic.removeElementWithFadeOut(piePiece, seriesModel, idx);\n    }).execute();\n    labelLayout(seriesModel); // Always use initial animation.\n\n    if (seriesModel.get('animationTypeUpdate') !== 'expansion') {\n      this._data = data;\n    }\n  };\n\n  PieView.prototype.dispose = function () {};\n\n  PieView.prototype.containPoint = function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  };\n\n  PieView.type = 'pie';\n  return PieView;\n}(ChartView);\n\nexport default PieView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createListSimply from '../helper/createListSimply';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as modelUtil from '../../util/model';\nimport { getPercentWithPrecision } from '../../util/number';\nimport { makeSeriesEncodeForNameBased } from '../../data/helper/sourceHelper';\nimport LegendVisualProvider from '../../visual/LegendVisualProvider';\nimport SeriesModel from '../../model/Series';\n\nvar PieSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(PieSeriesModel, _super);\n\n  function PieSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.useColorPaletteOnData = true;\n    return _this;\n  }\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.init = function (option) {\n    _super.prototype.init.apply(this, arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n\n    this._defaultLabelLine(option);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.mergeOption = function () {\n    _super.prototype.mergeOption.apply(this, arguments);\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getInitialData = function () {\n    return createListSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  };\n  /**\n   * @overwrite\n   */\n\n\n  PieSeriesModel.prototype.getDataParams = function (dataIndex) {\n    var data = this.getData();\n\n    var params = _super.prototype.getDataParams.call(this, dataIndex); // FIXME toFixed?\n\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  };\n\n  PieSeriesModel.prototype._defaultLabelLine = function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  };\n\n  PieSeriesModel.type = 'series.pie';\n  PieSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // color: 'inherit',\n      // If rotate around circle\n      rotate: 0,\n      show: true,\n      overflow: 'truncate',\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      edgeDistance: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见TEXTSTYLE\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      minTurnAngle: 90,\n      maxSurfaceAngle: 90,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1\n    },\n    labelLayout: {\n      // Hide the overlapped label.\n      hideOverlap: true\n    },\n    emphasis: {\n      scale: true,\n      scaleSize: 5\n    },\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    animationDuration: 1000,\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasingUpdate: 'cubicInOut',\n    animationDurationUpdate: 500,\n    animationEasing: 'cubicInOut'\n  };\n  return PieSeriesModel;\n}(SeriesModel);\n\nexport default PieSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { createLegacyDataSelectAction } from '../../legacy/dataSelectAction';\nimport pieLayout from '../pie/pieLayout';\nimport dataFilter from '../../processor/dataFilter';\nimport { curry } from 'zrender/lib/core/util';\nimport PieView from './PieView';\nimport PieSeriesModel from './PieSeries';\nexport function install(registers) {\n  registers.registerChartView(PieView);\n  registers.registerSeriesModel(PieSeriesModel);\n  createLegacyDataSelectAction('pie', registers.registerAction);\n  registers.registerLayout(curry(pieLayout, 'pie'));\n  registers.registerProcessor(dataFilter('pie'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n */\nvar LegendVisualProvider =\n/** @class */\nfunction () {\n  function LegendVisualProvider( // Function to get data after filtered. It stores all the encoding info\n  getDataWithEncodedVisual, // Function to get raw data before filtered.\n  getRawData) {\n    this._getDataWithEncodedVisual = getDataWithEncodedVisual;\n    this._getRawData = getRawData;\n  }\n\n  LegendVisualProvider.prototype.getAllNames = function () {\n    var rawData = this._getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  LegendVisualProvider.prototype.containName = function (name) {\n    var rawData = this._getRawData();\n\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  LegendVisualProvider.prototype.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  LegendVisualProvider.prototype.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = this._getDataWithEncodedVisual();\n\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n\n  return LegendVisualProvider;\n}();\n\nexport default LegendVisualProvider;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\nimport { parsePercent } from 'zrender/lib/contain/text';\nexport function getSectorCornerRadius(model, shape) {\n  var cornerRadius = model.get('borderRadius');\n\n  if (cornerRadius == null) {\n    return null;\n  }\n\n  if (!isArray(cornerRadius)) {\n    cornerRadius = [cornerRadius, cornerRadius];\n  }\n\n  return {\n    innerCornerRadius: parsePercent(cornerRadius[0], shape.r0),\n    cornerRadius: parsePercent(cornerRadius[1], shape.r)\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function dataFilter(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          // @ts-ignore FIXME: LegendModel\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport createDimensions from '../../data/helper/createDimensions';\nimport List from '../../data/List';\nimport { extend, isArray } from 'zrender/lib/core/util';\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n */\n\nexport default function createListSimply(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}"],"sourceRoot":""}