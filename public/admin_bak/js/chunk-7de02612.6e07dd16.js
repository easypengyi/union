(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7de02612"],{"3d74":function(t,i,e){"use strict";e("d5fd")},4072:function(t,i,e){"use strict";e.d(i,"f",(function(){return n})),e.d(i,"z",(function(){return a})),e.d(i,"A",(function(){return s})),e.d(i,"m",(function(){return o})),e.d(i,"l",(function(){return u})),e.d(i,"k",(function(){return d})),e.d(i,"n",(function(){return l})),e.d(i,"u",(function(){return c})),e.d(i,"t",(function(){return b})),e.d(i,"c",(function(){return f})),e.d(i,"d",(function(){return _})),e.d(i,"e",(function(){return m})),e.d(i,"v",(function(){return p})),e.d(i,"y",(function(){return h})),e.d(i,"b",(function(){return g})),e.d(i,"a",(function(){return v})),e.d(i,"g",(function(){return w})),e.d(i,"i",(function(){return D})),e.d(i,"j",(function(){return x})),e.d(i,"s",(function(){return y})),e.d(i,"q",(function(){return $})),e.d(i,"r",(function(){return k})),e.d(i,"o",(function(){return C})),e.d(i,"p",(function(){return S})),e.d(i,"w",(function(){return j})),e.d(i,"h",(function(){return z})),e.d(i,"x",(function(){return O}));var r=e("f175"),n=function(){return r["a"].get("/distribution.distribution_data/dataCenter")},a=function(){return r["a"].get("/distribution.distribution_data/topMemberEarnings")},s=function(){return r["a"].get("/distribution.distribution_data/topMemberFans")},o=function(t){return r["a"].get("/distribution.distribution_goods/lists",{params:t})},u=function(t){return r["a"].post("/distribution.distribution_goods/join",t)},d=function(t){return r["a"].get("/distribution.distribution_goods/detail",{params:t})},l=function(t){return r["a"].post("/distribution.distribution_goods/set",t)},c=function(t){return r["a"].get("/distribution.distribution_member/lists",{params:t})},b=function(t){return r["a"].get("/distribution.distribution_apply/detail",{params:t})},f=function(t){return r["a"].get("/distribution.distribution_apply/lists",{params:t})},_=function(t){return r["a"].post("/distribution.distribution_apply/pass",t)},m=function(t){return r["a"].post("/distribution.distribution_apply/refuse",t)},p=function(t){return r["a"].post("/distribution.distribution_member/open",t)},h=function(t){return r["a"].post("/distribution.distribution_member/freeze",t)},g=function(t){return r["a"].get("/distribution.distribution_member/adjustLevelInfo",{params:t})},v=function(t){return r["a"].post("/distribution.distribution_member/adjustLevel",t)},w=function(t){return r["a"].get("/distribution.distribution_member/detail",{params:t})},D=function(t){return r["a"].get("/distribution.distribution_member/getFans",{params:t})},x=function(t){return r["a"].get("/distribution.distribution_member/getFansLists",{params:t})},y=function(t){return r["a"].get("/distribution.distribution_level/lists",t)},$=function(t){return r["a"].get("/distribution.distribution_level/detail",{params:t})},k=function(t){return r["a"].post("/distribution.distribution_level/edit",t)},C=function(t){return r["a"].post("/distribution.distribution_level/add",t)},S=function(t){return r["a"].post("/distribution.distribution_level/delete",t)},j=function(t){return r["a"].get("/distribution.distribution_order_goods/lists",{params:t})},z=function(t){return r["a"].get("/distribution.distribution_config/getConfig",{params:t})},O=function(t){return r["a"].post("/distribution.distribution_config/setConfig",t)}},a4f6:function(t,i,e){"use strict";e.r(i);var r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"ls-coupon-edit"},[e("div",{staticClass:"ls-card ls-coupon-edit__header"},[e("el-page-header",{attrs:{content:"设置分销佣金"},on:{back:function(i){return t.$router.go(-1)}}})],1),e("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10"},[e("div",{staticClass:"nr weight-500 m-b-20"},[t._v("商品信息")]),e("el-form",{ref:"distributionData",attrs:{model:t.distributionData,"label-width":"120px",size:"small"}},[e("el-form-item",{attrs:{label:"商品编号",prop:"",required:""}},[[t._v(" "+t._s(t.distributionData.id)+" ")]],2),e("el-form-item",{attrs:{label:"商品图片",prop:"",required:""}},[[e("el-image",{staticClass:"flex-none",staticStyle:{width:"58px",height:"58px"},attrs:{src:t.distributionData.image}})]],2),e("el-form-item",{attrs:{label:"商品名称",prop:"",required:""}},[[t._v(" "+t._s(t.distributionData.name)+" ")]],2)],1)],1),e("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10 m-b-50"},[e("div",{staticClass:"nr weight-500 m-b-20"},[t._v("佣金设置")]),e("el-form",{ref:"distributionData",attrs:{model:t.distributionData,"label-width":"120px",size:"small"}},[e("el-form-item",{attrs:{label:"分销状态",required:""}},[e("el-radio",{attrs:{label:1},model:{value:t.distributionData.is_distribution,callback:function(i){t.$set(t.distributionData,"is_distribution",i)},expression:"distributionData.is_distribution"}},[t._v("参与分销")]),e("el-radio",{attrs:{label:0},model:{value:t.distributionData.is_distribution,callback:function(i){t.$set(t.distributionData,"is_distribution",i)},expression:"distributionData.is_distribution"}},[t._v("不参与分销")]),e("span",{staticClass:"desc"},[t._v("是否参与分销，选择不参与分销将不产生分销佣金")])],1),e("el-form-item",{attrs:{label:"佣金规则",required:""}},[e("el-radio",{attrs:{label:1},model:{value:t.distributionData.rule,callback:function(i){t.$set(t.distributionData,"rule",i)},expression:"distributionData.rule"}},[t._v("默认分销等级佣金规则")]),e("el-radio",{attrs:{label:2},model:{value:t.distributionData.rule,callback:function(i){t.$set(t.distributionData,"rule",i)},expression:"distributionData.rule"}},[t._v("单独设置")]),e("el-table",{ref:"paneTable",staticClass:"m-t-24",staticStyle:{width:"100%"},attrs:{"cell-style":{background:"#fff"},data:t.distributionData.ratio_data,size:"mini"}},[e("el-table-column",{attrs:{prop:"name_desc",label:"分销等级","min-width":"140"}}),e("el-table-column",{attrs:{label:"商品规格","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:t.row.items,"show-header":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"spec_value_str"}})],1)]}}])}),e("el-table-column",{attrs:{label:"价格","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:t.row.items,"show-header":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"sell_price"}})],1)]}}])}),e("el-table-column",{attrs:{label:"自购佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:i.row.items,"show-header":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"self_ratio"},scopedSlots:t._u([{key:"default",fn:function(r){return[1==t.distributionData.rule?e("span",[t._v(t._s(r.row.self_ratio))]):e("el-input",{staticStyle:{width:"50px",height:"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[i.$index].items[r.$index].self_ratio,callback:function(e){t.$set(t.distributionData.ratio_data[i.$index].items[r.$index],"self_ratio",e)},expression:"distributionData.ratio_data[scope.$index].items[scopes.$index].self_ratio"}})]}}],null,!0)})],1)]}}])}),e("el-table-column",{attrs:{label:"一级佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:i.row.items,"show-header":!1,"highlight-current-row":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"first_ratio"},scopedSlots:t._u([{key:"default",fn:function(r){return[1==t.distributionData.rule?e("span",[t._v(t._s(r.row.first_ratio))]):e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[i.$index].items[r.$index].first_ratio,callback:function(e){t.$set(t.distributionData.ratio_data[i.$index].items[r.$index],"first_ratio",e)},expression:"distributionData.ratio_data[scope.$index].items[scopes.$index].first_ratio"}})]}}],null,!0)})],1)]}}])}),e("el-table-column",{attrs:{label:"二级佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:i.row.items,"show-header":!1,size:"mini"}},[e("el-table-column",{attrs:{prop:"second_ratio"},scopedSlots:t._u([{key:"default",fn:function(r){return[1==t.distributionData.rule?e("span",[t._v(t._s(r.row.second_ratio))]):e("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[i.$index].items[r.$index].second_ratio,callback:function(e){t.$set(t.distributionData.ratio_data[i.$index].items[r.$index],"second_ratio",e)},expression:"distributionData.ratio_data[scope.$index].items[scopes.$index].second_ratio"}})]}}],null,!0)})],1)]}}])})],1)],1)],1)],1),e("div",{staticClass:"ls-coupon-edit__footer bg-white ls-fixed-footer"},[e("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},[e("el-button",{attrs:{size:"small"},on:{click:function(i){return t.$router.go(-1)}}},[t._v("取消")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.submit("distributionData")}}},[t._v("保存")])],1)])])},n=[],a=e("5530"),s=e("d4ec"),o=e("bee2"),u=e("262e"),d=e("2caf"),l=(e("d81d"),e("b64b"),e("9ab4")),c=e("1b40"),b=e("4072"),f=function(t){Object(u["a"])(e,t);var i=Object(d["a"])(e);function e(){var t;return Object(s["a"])(this,e),t=i.apply(this,arguments),t.distributionData={ratio_data:[{level_id:1,item_id:1,self_ratio:10,first_ratio:10,second_ratio:10},{level_id:1,item_id:2,self_ratio:20,first_ratio:20,second_ratio:20},{level_id:4,item_id:1,self_ratio:30,first_ratio:30,second_ratio:30}],id:"",goods_id:"",rule:1,is_distribution:[]},t.goodsSelectData=[],t.rules={name:[{required:!0,message:"请输入优惠券名称",trigger:["blur","change"]}],money:[{required:!0,message:"请输入优惠券面额",trigger:["blur","change"]}],send_total:[{required:!0,message:"请输入发放数量",trigger:["blur","change"]}]},t}return Object(o["a"])(e,[{key:"submit",value:function(t){var i=this,e=this.$refs[t];e.validate((function(t){t&&i.couponAdd()}))}},{key:"base",value:function(t){var i={goods_id:t.id||t.goods_id,is_distribution:t.is_distribution,rule:t.rule,ratio_data:[]};return Object.keys(t.ratio_data).map((function(e,r){for(var n=0;n<t.ratio_data[r].items.length;n++){var a=t.ratio_data[r].items[n];console.log(a),i.ratio_data.push({level_id:a.level_id,item_id:a.item_id,self_ratio:a.self_ratio,first_ratio:a.first_ratio,second_ratio:a.second_ratio})}})),i}},{key:"couponAdd",value:function(){var t=this,i=this.base(this.distributionData);Object(b["n"])(Object(a["a"])({},i)).then((function(i){t.$message.success("设置成功!"),setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("设置失败!")}))}},{key:"getCouponInfo",value:function(){var t=this;Object(b["k"])({id:this.id}).then((function(i){t.distributionData=Object(a["a"])({},i)}))}},{key:"created",value:function(){this.id=this.$route.query.id,this.id&&this.getCouponInfo()}}]),e}(c["e"]);f=Object(l["a"])([c["a"]],f);var _=f,m=_,p=(e("3d74"),e("2877")),h=Object(p["a"])(m,r,n,!1,null,"e3380100",null);i["default"]=h.exports},d5fd:function(t,i,e){},d81d:function(t,i,e){"use strict";var r=e("23e7"),n=e("b727").map,a=e("1dde"),s=a("map");r({target:"Array",proto:!0,forced:!s},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-7de02612.6e07dd16.js.map