(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d64ddda"],{"0769":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lucky-draw-edit"},[i("div",{staticClass:"ls-card"},["details"==t.type?i("el-page-header",{attrs:{content:"抽奖活动详情"},on:{back:function(e){return t.$router.go(-1)}}}):i("el-page-header",{attrs:{content:"add"===t.mode?"新增抽奖活动":"编辑抽奖活动"},on:{back:function(e){return t.$router.go(-1)}}})],1),i("el-form",{ref:"formRef",attrs:{rules:t.formRules,model:t.form,"label-width":"120px",size:"small",disabled:"details"==t.type}},[i("div",{staticClass:"ls-card m-t-16"},[i("div",{staticClass:"card-title"},[t._v(" 基本设置 ")]),i("div",{staticClass:"card-content m-t-24"},[i("el-form-item",{attrs:{label:"活动名称",prop:"",required:""}},[i("el-input",{attrs:{placeholder:"请输入活动名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"活动时间",required:""}},[i("date-picker",{attrs:{type:"datetimerange","start-time":t.form.start_time,"end-time":t.form.end_time},on:{"update:startTime":function(e){return t.$set(t.form,"start_time",e)},"update:start-time":function(e){return t.$set(t.form,"start_time",e)},"update:endTime":function(e){return t.$set(t.form,"end_time",e)},"update:end-time":function(e){return t.$set(t.form,"end_time",e)}}})],1),i("el-form-item",{attrs:{label:"活动备注",prop:"remark"}},[i("el-input",{staticClass:"ls-input-textarea",attrs:{placeholder:"请输入活动备注",type:"textarea",rows:3,disabled:1==t.status},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)]),i("div",{staticClass:"ls-card m-t-16"},[i("div",{staticClass:"card-title"},[t._v(" 活动设置 ")]),i("div",{staticClass:"card-content m-t-24"},[i("el-form-item",{attrs:{label:"消耗积分",prop:"",required:""}},[i("el-input",{attrs:{placeholder:"请输入消耗积分",disabled:1==t.status},model:{value:t.form.need_integral,callback:function(e){t.$set(t.form,"need_integral",e)},expression:"form.need_integral"}}),i("div",{staticClass:"muted xs"},[t._v("每次抽奖消耗的积分数量")])],1),i("el-form-item",{attrs:{label:"抽奖次数",prop:"frequency_type",required:""}},[i("div",{},[i("el-radio",{staticClass:"m-r-16",attrs:{label:0,disabled:1==t.status},model:{value:t.form.frequency_type,callback:function(e){t.$set(t.form,"frequency_type",e)},expression:"form.frequency_type"}},[t._v("不限制抽奖次数")])],1),i("div",{},[i("el-radio",{attrs:{label:1,disabled:1==t.status},model:{value:t.form.frequency_type,callback:function(e){t.$set(t.form,"frequency_type",e)},expression:"form.frequency_type"}},[i("span",{staticClass:"m-r-5"},[t._v("每人每天抽奖不超过")]),i("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入抽奖次数",disabled:1==t.status},model:{value:t.form.frequency,callback:function(e){t.$set(t.form,"frequency",e)},expression:"form.frequency"}}),i("span",{staticClass:"m-l-5"},[t._v("次")])],1)],1)]),i("el-form-item",{attrs:{label:"抽奖奖品",prop:"prizes",required:""}},[i("div",{staticClass:"muted xs"},[t._v("需要设置8个奖品。抽中概率总和不能超过100%，未中奖类型的抽中概率无需填写")]),i("div",{staticClass:"list-table m-t-16"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:!1,expression:"false"}],staticStyle:{width:"100%"},attrs:{data:t.form.prizes,size:"mini","header-cell-style":{background:"#f5f8ff"}}},[i("el-table-column",{attrs:{prop:"",label:"位置"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{},[t._v(" "+t._s(e.$index+1)+" ")])]}}])}),i("el-table-column",{attrs:{prop:"name",label:"奖品名称"}}),i("el-table-column",{attrs:{label:"奖品图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.image?i("div",{staticClass:"flex"},[i("el-image",{staticStyle:{width:"34px",height:"34px"},attrs:{src:e.row.image}})],1):t._e()]}}])}),i("el-table-column",{attrs:{prop:"type_desc",label:"奖品类型"}}),i("el-table-column",{attrs:{prop:"num",label:"奖品数量"}}),"add"==t.mode?i("el-table-column",{attrs:{prop:"probability",label:"中奖概率"}}):t._e(),"edit"==t.mode?i("el-table-column",{attrs:{prop:"probability_desc",label:"中奖概率"}}):t._e(),i("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("ls-lucky-draw-change",{attrs:{title:"编辑奖品",val:e.row,index:e.$index,status:t.status,mode:t.mode},on:{setPrize:t.setPrize}},[i("el-button",{attrs:{slot:"trigger",type:"text",size:"small",disabled:1==t.status},slot:"trigger"},[t._v(" 编辑")])],1)]}}])})],1)],1)]),i("el-form-item",{attrs:{label:"抽奖规则",prop:"",required:""}},[i("el-input",{staticClass:"ls-input-textarea",attrs:{placeholder:"请输入抽奖规则",type:"textarea",rows:3,disabled:1==t.status},model:{value:t.form.rule,callback:function(e){t.$set(t.form,"rule",e)},expression:"form.rule"}})],1),i("el-form-item",{attrs:{label:"中奖名单",prop:"show_winning_list",required:""}},[i("div",{staticClass:"flex"},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":t.styleConfig.primary,"inactive-color":"#f4f4f5",disabled:1==t.status},model:{value:t.form.show_winning_list,callback:function(e){t.$set(t.form,"show_winning_list",e)},expression:"form.show_winning_list"}}),i("span",{staticClass:"m-l-16"},[t._v(t._s(t.form.show_winning_list?"显示":"隐藏"))])],1)])],1)])]),i("div",{staticClass:"bg-white ls-fixed-footer"},[i("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary",disabled:"details"==t.type},on:{click:function(e){return t.onSubmit()}}},[t._v("保存")])],1)])],1)},r=[],l=i("d4ec"),s=i("bee2"),n=i("262e"),o=i("2caf"),c=i("9ab4"),u=i("1b40"),d=i("131b"),p=i("4201"),m=i("3c50"),f=i("5f8a"),b=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"ls-dialog__trigger",on:{click:t.onTrigger}},[t._t("trigger")],2),i("el-dialog",{attrs:{"coustom-class":"ls-dialog__content",title:t.title,visible:t.visible,width:t.width,top:t.top,"append-to-body":!0,center:"","before-close":t.close,"close-on-click-modal":!0,modal:!0}},[i("div",{staticClass:"dialog-content"},[i("el-form",{ref:"valueRef",attrs:{rules:t.valueRules,model:t.form,"label-width":"120px",size:"small",disabled:1==t.status}},[i("el-form-item",{attrs:{label:"奖品名称",required:""}},[i("el-input",{staticClass:"ls-input",staticStyle:{width:"300px"},attrs:{placeholder:"请输入奖品名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"奖品图片",required:""}},[i("div",{},[i("material-select",{attrs:{limit:1},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}}),i("div",{staticClass:"muted xs m-r-16"},[t._v("建议尺寸：100*100")])],1)]),i("el-form-item",{attrs:{label:"奖品类型",required:""}},[i("el-radio-group",{staticClass:"m-r-16 ",model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[i("el-radio",{attrs:{label:0}},[t._v("未中奖")]),i("el-radio",{attrs:{label:1}},[t._v("积分")]),i("el-radio",{attrs:{label:2}},[t._v("优惠券")]),i("el-radio",{attrs:{label:3}},[t._v("余额")])],1),1==t.form.type?i("div",{},[i("el-input",{staticClass:"ls-input",staticStyle:{width:"300px"},attrs:{placeholder:"请输入积分"},model:{value:t.form.type_value,callback:function(e){t.$set(t.form,"type_value",e)},expression:"form.type_value"}},[i("template",{slot:"append"},[t._v("积分")])],2)],1):t._e(),3==t.form.type?i("div",{},[i("el-input",{staticClass:"ls-input",staticStyle:{width:"300px"},attrs:{placeholder:"请输入金额"},model:{value:t.form.type_value,callback:function(e){t.$set(t.form,"type_value",e)},expression:"form.type_value"}},[i("template",{slot:"append"},[t._v("元")])],2),i("div",{staticClass:"muted xs"},[t._v("余额发放至用户钱包余额")])],1):t._e(),2==t.form.type?i("div",{staticClass:"flex"},[i("el-select",{staticClass:"ls-select",attrs:{placeholder:"全部"},model:{value:t.form.type_value,callback:function(e){t.$set(t.form,"type_value",e)},expression:"form.type_value"}},t._l(t.coupon,(function(t,e){return i("div",{key:e},[i("el-option",{attrs:{label:t.name,value:t.id}})],1)})),0),i("div",{staticClass:"m-l-10"},[i("router-link",{staticClass:"m-r-10",attrs:{target:"_blank",to:"/coupon/edit"}},[i("el-button",{attrs:{type:"text",size:"small"}},[t._v("新建优惠券")])],1),i("el-button",{attrs:{size:"small",type:"text"},on:{click:t.couponLists}},[t._v("刷新")])],1)],1):t._e()],1),0!=t.form.type?i("el-form-item",{attrs:{label:"奖品数量",required:""}},[i("el-input",{staticClass:"ls-input",staticStyle:{width:"300px"},attrs:{placeholder:"请输入奖品数量"},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1):t._e(),0!=t.form.type?i("el-form-item",{attrs:{label:"抽中概率",required:""}},["add"==t.mode?i("el-input",{staticClass:"ls-input",staticStyle:{width:"300px"},attrs:{placeholder:"请输入抽中概率"},model:{value:t.form.probability,callback:function(e){t.$set(t.form,"probability",e)},expression:"form.probability"}},[i("template",{slot:"append"},[t._v("%")])],2):t._e(),"edit"==t.mode?i("el-input",{staticClass:"ls-input",staticStyle:{width:"300px"},attrs:{placeholder:"请输入抽中概率"},model:{value:t.form.probability_desc,callback:function(e){t.$set(t.form,"probability_desc",e)},expression:"form.probability_desc"}},[i("template",{slot:"append"},[t._v("%")])],2):t._e(),i("div",{staticClass:"muted xs"},[t._v("概率不能超过100%，可保留两位小数")])],1):t._e(),i("el-form-item",{attrs:{label:"抽中提示语",required:""}},[i("el-input",{staticClass:"ls-input",staticStyle:{width:"300px"},attrs:{placeholder:"请输入抽中提示语"},model:{value:t.form.tips,callback:function(e){t.$set(t.form,"tips",e)},expression:"form.tips"}})],1)],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary",disabled:1==t.status},on:{click:t.onSubimt}},[t._v("确认")])],1)])],1)},y=[],v=i("0cbf"),h=i("b3ad"),g=i("6ddb"),_=function(t){Object(n["a"])(i,t);var e=Object(o["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.visible=!1,t.form={name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0},t.coupon=[],t.valueRules={},t}return Object(s["a"])(i,[{key:"getValue",value:function(t){console.log("val",t),this.form=Object(g["c"])(t),console.log(this.form)}},{key:"getProbability",value:function(t){"edit"==this.mode&&(this.form.probability=1*t)}},{key:"getType",value:function(t){0==t?this.form.type_desc="未中奖":1==t?this.form.type_desc="积分":2==t?this.form.type_desc="优惠券":3==t&&(this.form.type_desc="余额")}},{key:"goToCouponEdit",value:function(){window.open("/admin/coupon/edit","_blank")}},{key:"couponLists",value:function(){var t=this;Object(v["g"])({status:2,get_type:2}).then((function(e){console.log("res",e),t.coupon=e.lists}))}},{key:"onSubimt",value:function(){this.form.type_value=1*this.form.type_value,this.$emit("setPrize",this.form,this.index),this.visible=!1}},{key:"onTrigger",value:function(){this.couponLists(),this.visible=!0}},{key:"close",value:function(){this.visible=!1}}]),i}(u["e"]);Object(c["a"])([Object(u["c"])()],_.prototype,"index",void 0),Object(c["a"])([Object(u["c"])()],_.prototype,"val",void 0),Object(c["a"])([Object(u["c"])()],_.prototype,"status",void 0),Object(c["a"])([Object(u["c"])()],_.prototype,"mode",void 0),Object(c["a"])([Object(u["c"])({default:"编辑奖品"})],_.prototype,"title",void 0),Object(c["a"])([Object(u["c"])({default:"700px"})],_.prototype,"width",void 0),Object(c["a"])([Object(u["c"])({default:"20vh"})],_.prototype,"top",void 0),Object(c["a"])([Object(u["f"])("val",{immediate:!0})],_.prototype,"getValue",null),Object(c["a"])([Object(u["f"])("form.probability_desc",{immediate:!0})],_.prototype,"getProbability",null),Object(c["a"])([Object(u["f"])("form.type",{immediate:!0})],_.prototype,"getType",null),_=Object(c["a"])([Object(u["a"])({components:{MaterialSelect:h["a"]}})],_);var k=_,w=k,O=(i("72eb"),i("2877")),j=Object(O["a"])(w,b,y,!1,null,"3c1337dc",null),x=j.exports,C=function(t){Object(n["a"])(i,t);var e=Object(o["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.mode=p["f"]["ADD"],t.identity=null,t.status=null,t.type="",t.prizeType=0,t.form={name:"",start_time:"",end_time:"",need_integral:0,frequency_type:0,frequency:0,rule:"",show_winning_list:0,remark:"",prizes:[{}]},t.formRules={},t.lists=[{name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0},{name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0},{name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0},{name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0},{name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0},{name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0},{name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0},{name:"",image:"",type:0,type_value:0,type_desc:"",num:0,probability:0,tips:"",status:"",probability_desc:0}],t}return Object(s["a"])(i,[{key:"setPrize",value:function(t,e){console.log(t,e),this.$set(this.form.prizes,e,Object(g["c"])(t)),this.$forceUpdate()}},{key:"onSubmit",value:function(){this.mode==p["f"]["ADD"]?this.luckyDrawAdd():this.mode==p["f"]["EDIT"]&&this.luckyDrawEdit()}},{key:"luckyDrawDetail",value:function(){var t=this;Object(d["c"])({id:this.identity}).then((function(e){console.log("res",e),e.start_time=e.start_time_desc,e.end_time=e.end_time_desc,t.form=e}))}},{key:"luckyDrawEdit",value:function(){var t=this;Object(d["d"])(this.form).then((function(e){setTimeout((function(){t.$router.go(-1)}),500)})).catch((function(t){console.log("err",t)}))}},{key:"luckyDrawAdd",value:function(){var t=this;Object(d["a"])(this.form).then((function(e){setTimeout((function(){t.$router.go(-1)}),500)})).catch((function(t){console.log("err",t)}))}},{key:"created",value:function(){var t=this.$route.query;t.mode&&(this.mode=t.mode),this.mode===p["f"]["EDIT"]?(this.identity=1*t.id,this.status=t.status,this.type=t.type,this.luckyDrawDetail()):this.form.prizes=this.lists}}]),i}(u["e"]);C=Object(c["a"])([Object(u["a"])({components:{LsPagination:m["a"],DatePicker:f["a"],LsLuckyDrawChange:x}})],C);var $=C,D=$,T=(i("f511"),Object(O["a"])(D,a,r,!1,null,"b5438338",null));e["default"]=T.exports},"0cbf":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"e",(function(){return l})),i.d(e,"g",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"h",(function(){return o})),i.d(e,"l",(function(){return c})),i.d(e,"k",(function(){return u})),i.d(e,"d",(function(){return d})),i.d(e,"f",(function(){return p})),i.d(e,"m",(function(){return m})),i.d(e,"i",(function(){return f})),i.d(e,"n",(function(){return b})),i.d(e,"j",(function(){return y})),i.d(e,"b",(function(){return v}));var a=i("f175"),r=function(t){return a["a"].post("/marketing.coupon/add",t)},l=function(t){return a["a"].post("/marketing.coupon/edit",t)},s=function(t){return a["a"].get("/marketing.coupon/lists",{params:t})},n=function(t){return a["a"].post("/marketing.coupon/delete",t)},o=function(t){return a["a"].post("/marketing.coupon/open",t)},c=function(t){return a["a"].post("/marketing.coupon/stop",t)},u=function(t){return a["a"].post("/marketing.coupon/sort",t)},d=function(t){return a["a"].get("/marketing.coupon/detail",{params:{id:t}})},p=function(t){return a["a"].get("/marketing.coupon/info",{params:{id:t}})},m=function(){return a["a"].get("/marketing.coupon/survey")},f=function(t){return a["a"].get("/marketing.coupon/record",{params:t})},b=function(t){return a["a"].post("/marketing.coupon/void",t)},y=function(t){return a["a"].post("/marketing.coupon/send",t)},v=function(t){return a["a"].get("/marketing.coupon/commonLists",{params:t})}},"131b":function(t,e,i){"use strict";i.d(e,"g",(function(){return r})),i.d(e,"b",(function(){return l})),i.d(e,"e",(function(){return s})),i.d(e,"i",(function(){return n})),i.d(e,"d",(function(){return o})),i.d(e,"c",(function(){return c})),i.d(e,"a",(function(){return u})),i.d(e,"f",(function(){return d})),i.d(e,"h",(function(){return p}));var a=i("f175"),r=function(t){return a["a"].get("/lucky_draw.lucky_draw/lists",{params:t})},l=function(t){return a["a"].post("/lucky_draw.lucky_draw/delete",t)},s=function(t){return a["a"].post("/lucky_draw.lucky_draw/end",t)},n=function(t){return a["a"].post("/lucky_draw.lucky_draw/start",t)},o=function(t){return a["a"].post("lucky_draw.lucky_draw/edit",t)},c=function(t){return a["a"].get("/lucky_draw.lucky_draw/detail",{params:t})},u=function(t){return a["a"].post("lucky_draw.lucky_draw/add",t)},d=function(){return a["a"].get("lucky_draw.lucky_draw/getPrizeType")},p=function(t){return a["a"].get("lucky_draw.lucky_draw/record",{params:t})}},"31d6":function(t,e,i){},"568b":function(t,e,i){"use strict";i("31d6")},"5f8a":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-date-picker",{attrs:{type:t.type,"picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.changeDate},model:{value:t.pickerValue,callback:function(e){t.pickerValue=e},expression:"pickerValue"}})},r=[],l=i("d4ec"),s=i("bee2"),n=i("262e"),o=i("2caf"),c=i("9ab4"),u=i("1b40"),d=function(t){Object(n["a"])(i,t);var e=Object(o["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.pickerValue=[],t.pickerOptions={shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-6048e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-2592e6),t.$emit("pick",[i,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,i=new Date;i.setTime(i.getTime()-7776e6),t.$emit("pick",[i,e])}}]},t}return Object(s["a"])(i,[{key:"changeDate",value:function(){var t=this.pickerValue?this.pickerValue:this.pickerValue=["",""];this.$emit("update:start-time",t[0]),this.$emit("update:end-time",t[1])}},{key:"handleStartTime",value:function(t){!this.pickerValue&&(this.pickerValue=[]),this.$set(this.pickerValue,0,t)}},{key:"handleEndTime",value:function(t){!this.pickerValue&&(this.pickerValue=[]),this.$set(this.pickerValue,1,t)}}]),i}(u["e"]);Object(c["a"])([Object(u["c"])()],d.prototype,"startTime",void 0),Object(c["a"])([Object(u["c"])()],d.prototype,"endTime",void 0),Object(c["a"])([Object(u["c"])({default:"datetimerange"})],d.prototype,"type",void 0),Object(c["a"])([Object(u["f"])("startTime",{immediate:!0})],d.prototype,"handleStartTime",null),Object(c["a"])([Object(u["f"])("endTime",{immediate:!0})],d.prototype,"handleEndTime",null),d=Object(c["a"])([u["a"]],d);var p=d,m=p,f=i("2877"),b=Object(f["a"])(m,a,r,!1,null,null,null);e["a"]=b.exports},"72eb":function(t,e,i){"use strict";i("ca3c")},"92df":function(t,e,i){},b3ad:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():i("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[i("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(e,a){return i("div",{key:e+a,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,a)}}},[t.$scopedSlots.preview?i("div",[t._t("preview",null,{item:t.imageUri(e)})],2):i("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(e)},size:t.size}}),t.enableDelete?i("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(a)}}}):t._e()],1)})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?i("div",[t._t("upload")],2):i("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():i("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),i("div",{staticClass:"material-wrap"},[i("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},r=[],l=i("d4ec"),s=i("bee2"),n=i("262e"),o=i("2caf"),c=(i("d81d"),i("a434"),i("99af"),i("9ab4")),u=i("1b40"),d=i("0a6d"),p=i("c6fe"),m=i("e915"),f=i("b76a"),b=i.n(f),y=function(t){Object(n["a"])(i,t);var e=Object(o["a"])(i);function i(){var t;return Object(l["a"])(this,i),t=e.apply(this,arguments),t.isAdd=!0,t.fileList=[],t}return Object(s["a"])(i,[{key:"showUpload",get:function(){var t=this.fileList,e=this.limit;return e-t.length>0}},{key:"meterialLimit",get:function(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}},{key:"tipsText",get:function(){switch(this.type){case"image":return"图片";case"video":return"视频"}}},{key:"imageUri",get:function(){var t=this;return function(e){return t.enableDomain?e:t.$getImageUri(e)}}},{key:"valueChange",value:function(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}},{key:"showDialog",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1?arguments[1]:void 0;this.disabled||(this.isAdd=e,void 0!==i&&(this.currentIndex=i),null===(t=this.$refs.materialDialog)||void 0===t||t.onTrigger())}},{key:"selectChange",value:function(t){this.select=t}},{key:"handleConfirm",value:function(){var t=this;this.$refs.material.clearSelectList();var e=this.select.map((function(e){return t.enableDomain?e.uri:e.url}));this.isAdd?this.fileList=this.fileList.concat(e):this.fileList.splice(this.currentIndex,1,e.shift()),this.handleChange()}},{key:"delImage",value:function(t){this.fileList.splice(t,1),this.handleChange()}},{key:"handleChange",value:function(){var t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}}]),i}(u["e"]);Object(c["a"])([Object(u["c"])({default:function(){return[]}})],y.prototype,"value",void 0),Object(c["a"])([Object(u["c"])({default:1})],y.prototype,"limit",void 0),Object(c["a"])([Object(u["c"])({default:"100"})],y.prototype,"size",void 0),Object(c["a"])([Object(u["c"])({default:!1})],y.prototype,"disabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],y.prototype,"dragDisabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],y.prototype,"hiddenTrigger",void 0),Object(c["a"])([Object(u["c"])({default:"image"})],y.prototype,"type",void 0),Object(c["a"])([Object(u["c"])({default:"transparent"})],y.prototype,"uploadBg",void 0),Object(c["a"])([Object(u["c"])({default:!0})],y.prototype,"enableDomain",void 0),Object(c["a"])([Object(u["c"])({default:!0})],y.prototype,"enableDelete",void 0),Object(c["a"])([Object(u["f"])("value",{immediate:!0})],y.prototype,"valueChange",null),y=Object(c["a"])([Object(u["a"])({components:{LsDialog:d["a"],LsMaterial:p["a"],Draggable:b.a,FileItem:m["a"]}})],y);var v=y,h=v,g=(i("568b"),i("2877")),_=Object(g["a"])(h,a,r,!1,null,"1503bff6",null);e["a"]=_.exports},ca3c:function(t,e,i){},f511:function(t,e,i){"use strict";i("92df")}}]);
//# sourceMappingURL=chunk-2d64ddda.1bdd73f3.js.map