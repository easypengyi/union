(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1d15e7e"],{"5cf7":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"area-select"},[a("el-cascader",{style:{width:t.width},attrs:{options:t.options},model:{value:t.areaValue,callback:function(e){t.areaValue=e},expression:"areaValue"}})],1)},s=[],n=a("d4ec"),r=a("bee2"),c=a("262e"),l=a("2caf"),o=a("9ab4"),u=a("0463"),d=a("1b40"),m=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.options=u["a"],t}return Object(r["a"])(a,[{key:"areaValue",get:function(){return[this.province,this.city,this.district]},set:function(t){this.$emit("update:province",t[0]),this.$emit("update:city",t[1]),this.$emit("update:district",t[2])}}]),a}(d["e"]);Object(o["a"])([Object(d["c"])()],m.prototype,"province",void 0),Object(o["a"])([Object(d["c"])()],m.prototype,"city",void 0),Object(o["a"])([Object(d["c"])()],m.prototype,"district",void 0),Object(o["a"])([Object(d["c"])({default:"380px"})],m.prototype,"width",void 0),m=Object(o["a"])([d["a"]],m);var p=m,f=p,b=a("2877"),h=Object(b["a"])(f,i,s,!1,null,null,null);e["a"]=h.exports},"5f8a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-date-picker",{attrs:{type:t.type,"picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.changeDate},model:{value:t.pickerValue,callback:function(e){t.pickerValue=e},expression:"pickerValue"}})},s=[],n=a("d4ec"),r=a("bee2"),c=a("262e"),l=a("2caf"),o=a("9ab4"),u=a("1b40"),d=function(t){Object(c["a"])(a,t);var e=Object(l["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.apply(this,arguments),t.pickerValue=[],t.pickerOptions={shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},t}return Object(r["a"])(a,[{key:"changeDate",value:function(){var t=this.pickerValue?this.pickerValue:this.pickerValue=["",""];this.$emit("update:start-time",t[0]),this.$emit("update:end-time",t[1])}},{key:"handleStartTime",value:function(t){!this.pickerValue&&(this.pickerValue=[]),this.$set(this.pickerValue,0,t)}},{key:"handleEndTime",value:function(t){!this.pickerValue&&(this.pickerValue=[]),this.$set(this.pickerValue,1,t)}}]),a}(u["e"]);Object(o["a"])([Object(u["c"])()],d.prototype,"startTime",void 0),Object(o["a"])([Object(u["c"])()],d.prototype,"endTime",void 0),Object(o["a"])([Object(u["c"])({default:"datetimerange"})],d.prototype,"type",void 0),Object(o["a"])([Object(u["f"])("startTime",{immediate:!0})],d.prototype,"handleStartTime",null),Object(o["a"])([Object(u["f"])("endTime",{immediate:!0})],d.prototype,"handleEndTime",null),d=Object(o["a"])([u["a"]],d);var m=d,p=m,f=a("2877"),b=Object(f["a"])(p,i,s,!1,null,null,null);e["a"]=b.exports},a713:function(t,e,a){"use strict";a("bd5b")},afc6:function(t,e,a){"use strict";a.d(e,"g",(function(){return s})),a.d(e,"d",(function(){return n})),a.d(e,"i",(function(){return r})),a.d(e,"c",(function(){return c})),a.d(e,"f",(function(){return l})),a.d(e,"e",(function(){return o})),a.d(e,"a",(function(){return u})),a.d(e,"j",(function(){return d})),a.d(e,"h",(function(){return m})),a.d(e,"b",(function(){return p}));var i=a("f175"),s=function(t){return i["a"].get("/marketing.team/lists",{params:t})},n=function(t){return i["a"].post("/marketing.team/delete",t)},r=function(t){return i["a"].post("/marketing.team/stop",t)},c=function(t){return i["a"].post("/marketing.team/open",t)},l=function(t){return i["a"].post("/marketing.team/edit",t)},o=function(t){return i["a"].get("/marketing.team/detail",{params:t})},u=function(t){return i["a"].post("/marketing.team/add",t)},d=function(t){return i["a"].get("/marketing.team/survey",{params:t})},m=function(t){return i["a"].get("/marketing.team/record",{params:t})},p=function(t){return i["a"].post("/marketing.team/cancel",t)}},bd5b:function(t,e,a){},c740:function(t,e,a){"use strict";var i=a("23e7"),s=a("b727").findIndex,n=a("44d2"),r="findIndex",c=!0;r in[]&&Array(1)[r]((function(){c=!1})),i({target:"Array",proto:!0,forced:c},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(r)},d81d:function(t,e,a){"use strict";var i=a("23e7"),s=a("b727").map,n=a("1dde"),r=n("map");i({target:"Array",proto:!0,forced:!r},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},fa14:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ls-team-edit"},[a("div",{staticClass:"ls-card ls-team-edit__header"},[0==t.status?a("el-page-header",{attrs:{content:"拼团活动详情"},on:{back:function(e){return t.$router.go(-1)}}}):a("el-page-header",{attrs:{content:t.id?"编辑拼团活动":"新增拼团活动"},on:{back:function(e){return t.$router.go(-1)}}})],1),a("div",{staticClass:"ls-card ls-team-edit__form m-t-10"},[a("div",{staticClass:"lg weight-500 m-b-20"},[t._v("基本信息")]),a("el-form",{ref:"teamList",attrs:{model:t.teamList,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"活动名称",required:""}},[a("el-input",{staticClass:"ls-input",attrs:{disabled:2!=t.status&&t.disabled,placeholder:"请输入活动名称",size:"small"},model:{value:t.teamList.name,callback:function(e){t.$set(t.teamList,"name",e)},expression:"teamList.name"}})],1),a("el-form-item",{attrs:{label:"活动时间",required:""}},[a("date-picker",{attrs:{type:"datetimerange",disabled:2!=t.status&&t.disabled,"start-time":t.teamList.start_time,"end-time":t.teamList.end_time},on:{"update:startTime":function(e){return t.$set(t.teamList,"start_time",e)},"update:start-time":function(e){return t.$set(t.teamList,"start_time",e)},"update:endTime":function(e){return t.$set(t.teamList,"end_time",e)},"update:end-time":function(e){return t.$set(t.teamList,"end_time",e)}}}),a("span",{staticClass:"desc"},[t._v("拼团活动开始和结束时间，可以手动提前结束活动")])],1),a("el-form-item",{attrs:{label:"活动说明"}},[a("el-input",{staticClass:"m-t-10",staticStyle:{width:"530px"},attrs:{disabled:2!=t.status&&t.disabled,type:"textarea",rows:7,placeholder:"请输入活动说明"},model:{value:t.teamList.explain,callback:function(e){t.$set(t.teamList,"explain",e)},expression:"teamList.explain"}})],1)],1)],1),a("div",{staticClass:"ls-card ls-team-edit__form m-t-10"},[a("div",{staticClass:"lg weight-500 m-b-20"},[t._v("活动商品")]),a("el-form",{ref:"teamList",attrs:{model:t.teamList,"label-width":"120px",size:"small",disabled:2!=t.status&&t.disabled}},[a("el-form-item",{attrs:{label:"拼团商品"}},[a("goods-select",{attrs:{mode:"table","is-spec":!0,limit:25,extend:{name:"拼团",price:[{title:"拼团价格",key:"team_price"}]}},model:{value:t.selectGoods,callback:function(e){t.selectGoods=e},expression:"selectGoods"}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("选择拼团商品")])],1)],1)],1)],1),a("div",{staticClass:"ls-card ls-team-edit__form m-t-10"},[a("div",{staticClass:"lg weight-500 m-b-20"},[t._v("活动规则")]),a("el-form",{ref:"teamList",attrs:{model:t.teamList,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"成团有效期",required:""}},[a("el-input",{staticClass:"ls-input",attrs:{disabled:t.disabled,placeholder:"请输入成团有效期"},model:{value:t.teamList.effective_time,callback:function(e){t.$set(t.teamList,"effective_time",e)},expression:"teamList.effective_time"}},[a("template",{slot:"append"},[t._v("分钟")])],2),a("span",{staticClass:"desc"},[t._v("开团后的成团有效期，超出时间还未成团则拼团失败")])],1),a("el-form-item",{attrs:{label:"成团人数",required:""}},[a("el-input",{staticClass:"ls-input",attrs:{disabled:t.disabled,placeholder:"请输入成团人数"},model:{value:t.teamList.people_num,callback:function(e){t.$set(t.teamList,"people_num",e)},expression:"teamList.people_num"}},[a("template",{slot:"append"},[t._v("人")])],2),a("span",{staticClass:"desc"},[t._v("设置商品拼团人数，最少两人成团")])],1),a("el-form-item",{attrs:{label:"虚拟成团",required:""}},[a("el-radio",{attrs:{border:"",disabled:t.disabled,label:1},model:{value:t.teamList.is_automatic,callback:function(e){t.$set(t.teamList,"is_automatic",e)},expression:"teamList.is_automatic"}},[t._v("开启")]),a("el-radio",{attrs:{border:"",disabled:t.disabled,label:0},model:{value:t.teamList.is_automatic,callback:function(e){t.$set(t.teamList,"is_automatic",e)},expression:"teamList.is_automatic"}},[t._v("关闭")]),a("span",{staticClass:"desc"},[t._v("开启虚拟成团后，在成团有效期内人数不够的团，系统会虚拟用户使拼团成功。虚拟用户不生成订单，只需对买家发货。")])],1),a("el-form-item",{attrs:{label:"每单限制",required:""}},[a("el-radio-group",{model:{value:t.teamList.max_buy,callback:function(e){t.$set(t.teamList,"max_buy",e)},expression:"teamList.max_buy"}},[a("div",{staticClass:"m-t-10"},[a("el-radio",{attrs:{border:"",disabled:t.disabled,label:0}},[t._v("不限制")])],1),a("div",{staticClass:"m-t-24 flex"},[a("el-radio",{attrs:{border:"",disabled:t.disabled,label:0==t.teamList.max_buy?1:t.teamList.max_buy}},[t._v(" 限制 ")]),a("el-input",{attrs:{disabled:t.disabled||0==t.teamList.max_buy,size:"small"},on:{change:t.buyBuy2},model:{value:t.teamList.max_buy,callback:function(e){t.$set(t.teamList,"max_buy",e)},expression:"teamList.max_buy"}},[a("template",{slot:"append"},[t._v("件")])],2)],1)]),a("span",{staticClass:"desc"},[t._v("每件商品单笔订单最多购买的件数。起购限制会影响每单限制，请合理设置。")])],1)],1)],1),a("div",{staticClass:"ls-team-edit__footer bg-white ls-fixed-footer"},[a("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),a("el-button",{attrs:{size:"small",disabled:2!=t.status&&t.disabled,type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("保存")])],1)])])},s=[],n=a("5530"),r=a("d4ec"),c=a("bee2"),l=a("262e"),o=a("2caf"),u=(a("d81d"),a("9ab4")),d=a("1b40"),m=a("5cf7"),p=a("f50c"),f=a("5f8a"),b=a("afc6"),h=function(t){Object(l["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.disabled=!1,t.status=0,t.teamList={name:"",min_buy:1,max_buy:1,people_num:"",is_coupon:1,is_distribution:1,is_automatic:1,goods:[],explain:"",effective_time:"",start_time:"",end_time:""},t.selectGoods=[],t}return Object(c["a"])(a,[{key:"selectGoodsChange",value:function(t){this.teamList.goods=t.map((function(t){return{goods_id:t.id,items:t.item.map((function(t){return{item_id:t.id,team_price:t.team_price}}))}}))}},{key:"checkGoods",value:function(){var t=this.teamList.goods;if(!t.length)return this.$message.error("请选择拼团商品"),!1;for(var e=0;e<t.length;e++)for(var a=0;a<t[e].items.length;a++)if(!t[e].items[a].team_price)return this.$message.error("请输入商品拼团价"),!1;return!0}},{key:"buyBuy",value:function(t){""===t.detail&&(this.teamList.min_buy=0)}},{key:"buyBuy2",value:function(t){""===t&&(this.teamList.max_buy=0)}},{key:"submit",value:function(){this.checkGoods()&&(this.id?this.teamEdit():this.teamAdd())}},{key:"teamEdit",value:function(){var t=this;Object(b["f"])(Object(n["a"])({},this.teamList)).then((function(e){setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("修改失败!")}))}},{key:"teamAdd",value:function(){var t=this;Object(b["a"])(Object(n["a"])({},this.teamList)).then((function(e){setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("添加失败!")}))}},{key:"getteamDetail",value:function(){var t=this;Object(b["e"])({id:this.id}).then((function(e){t.teamList=e,t.selectGoods=e.goods}))}},{key:"created",value:function(){this.status=this.$route.query.status,this.disabled="true"==this.$route.query.disabled,this.id=this.$route.query.id,this.id&&this.getteamDetail()}}]),a}(d["e"]);Object(u["a"])([Object(d["f"])("selectGoods",{deep:!0})],h.prototype,"selectGoodsChange",null),h=Object(u["a"])([Object(d["a"])({components:{AreaSelect:m["a"],GoodsSelect:p["a"],DatePicker:f["a"]}})],h);var v=h,_=v,y=(a("a713"),a("2877")),k=Object(y["a"])(_,i,s,!1,null,"f93fd89e",null);e["default"]=k.exports}}]);
//# sourceMappingURL=chunk-f1d15e7e.2dc6fbf7.js.map