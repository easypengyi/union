(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62b76fb2"],{"31d6":function(t,e,a){},"38d9":function(t,e,a){},"550c":function(t,e,a){"use strict";a("38d9")},"568b":function(t,e,a){"use strict";a("31d6")},"5ef8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ls-card"},[a("el-page-header",{attrs:{content:"设置支付方式"},on:{back:function(e){return t.$router.go(-1)}}})],1),a("div",{staticClass:"ls-card m-t-24 m-b-60"},[a("div",{staticClass:"nr m-b-30 card-title"},[t._v("支付信息")]),a("el-form",{ref:"paymentConfigData",staticClass:"m-l-24",attrs:{"hide-required-asterisk":!1,rules:t.rules,model:t.paymentConfigData,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"支付方式","label-position":"right"}},[a("el-input",{staticClass:"ls-input",attrs:{disabled:!0},model:{value:t.PayWay,callback:function(e){t.PayWay=e},expression:"PayWay"}})],1),a("el-form-item",{attrs:{label:"显示名称",prop:"name","label-position":"right"}},[a("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.name,callback:function(e){t.$set(t.paymentConfigData,"name",e)},expression:"paymentConfigData.name"}})],1),a("el-form-item",{attrs:{label:"显示图标",prop:"icon","label-position":"right"}},[a("material-select",{attrs:{limit:1,disabled:!1},model:{value:t.paymentConfigData.icon,callback:function(e){t.$set(t.paymentConfigData,"icon",e)},expression:"paymentConfigData.icon"}}),a("span",{staticClass:"desc"},[t._v("建议尺寸：152*42像素，支持jpg，jpeg，png格式")])],1),2==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{prop:"interface_version",label:"微信支付接口版本","label-position":"right"}},[a("el-radio-group",{model:{value:t.paymentConfigData.interface_version,callback:function(e){t.$set(t.paymentConfigData,"interface_version",e)},expression:"paymentConfigData.interface_version"}},[a("el-radio",{attrs:{label:t.paymentConfigData.interface_version}})],1),a("span",{staticClass:"desc"},[t._v("暂时只支持V2版本")])],1):t._e(),2==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"商户类型",prop:"merchant_type","label-position":"right"}},[a("el-radio-group",{model:{value:t.paymentConfigData.merchant_type,callback:function(e){t.$set(t.paymentConfigData,"merchant_type",e)},expression:"paymentConfigData.merchant_type"}},[a("el-radio",{attrs:{label:t.paymentConfigData.merchant_type}},[t._v("普通商户")])],1),a("span",{staticClass:"desc"},[t._v("暂时只支持普通商户类型，服务商户类型模式暂不支持")])],1):t._e(),2==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"微信支付商户号",prop:"mch_id","label-position":"right"}},[a("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.mch_id,callback:function(e){t.$set(t.paymentConfigData,"mch_id",e)},expression:"paymentConfigData.mch_id"}}),a("span",{staticClass:"desc"},[t._v("微信支付商户号（MCHID）")])],1):t._e(),2==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"商户API密钥",prop:"pay_sign_key","label-position":"right"}},[a("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.pay_sign_key,callback:function(e){t.$set(t.paymentConfigData,"pay_sign_key",e)},expression:"paymentConfigData.pay_sign_key"}}),a("span",{staticClass:"desc"},[t._v("微信支付商户API密钥（paySignKey）")])],1):t._e(),2==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"微信支付证书",prop:"apiclient_cert","label-position":"right"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"textarea"},model:{value:t.paymentConfigData.apiclient_cert,callback:function(e){t.$set(t.paymentConfigData,"apiclient_cert",e)},expression:"paymentConfigData.apiclient_cert"}}),a("span",{staticClass:"desc"},[t._v("微信支付证书，前往微信商家平台生成并黏贴至此处")])],1):t._e(),2==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"微信支付证书密钥",prop:"apiclient_key","label-position":"right"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"textarea"},model:{value:t.paymentConfigData.apiclient_key,callback:function(e){t.$set(t.paymentConfigData,"apiclient_key",e)},expression:"paymentConfigData.apiclient_key"}}),a("span",{staticClass:"desc"},[t._v("微信支付证书密钥，前往微信商家平台生成并黏贴至此处")])],1):t._e(),2==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"支付授权目录","label-position":"right"}},[a("div",[t._v(" http://xxx.com/pay/ "),a("span",{staticClass:"copy",on:{click:t.onCopy}},[t._v("复制")])]),a("span",{staticClass:"desc"},[t._v("支付授权目录仅用于参考，复制后前往微信商家平台填写")])]):t._e(),3==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"模式",prop:"pattern","label-position":"right"}},[a("el-radio-group",{model:{value:t.paymentConfigData.pattern,callback:function(e){t.$set(t.paymentConfigData,"pattern",e)},expression:"paymentConfigData.pattern"}},[a("el-radio",{attrs:{label:t.paymentConfigData.pattern}},[t._v("普通模式")])],1),a("span",{staticClass:"desc"},[t._v("暂时仅支持支付宝普通模式")])],1):t._e(),3==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"商户类型",prop:"merchant_type","label-position":"right"}},[a("el-radio-group",{model:{value:t.paymentConfigData.merchant_type,callback:function(e){t.$set(t.paymentConfigData,"merchant_type",e)},expression:"paymentConfigData.merchant_type"}},[a("el-radio",{attrs:{label:t.paymentConfigData.merchant_type}},[t._v("普通商户")])],1),a("span",{staticClass:"desc"},[t._v("暂时只支持普通商户类型，服务商户类型模式暂不支持")])],1):t._e(),3==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"应用ID",prop:"app_id","label-position":"right"}},[a("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.app_id,callback:function(e){t.$set(t.paymentConfigData,"app_id",e)},expression:"paymentConfigData.app_id"}})],1):t._e(),3==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"应用私钥",prop:"private_key","label-position":"right"}},[a("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.private_key,callback:function(e){t.$set(t.paymentConfigData,"private_key",e)},expression:"paymentConfigData.private_key"}})],1):t._e(),3==t.paymentConfigData.pay_way?a("el-form-item",{attrs:{label:"支付宝公钥",prop:"ali_public_key","label-position":"right"}},[a("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.ali_public_key,callback:function(e){t.$set(t.paymentConfigData,"ali_public_key",e)},expression:"paymentConfigData.ali_public_key"}})],1):t._e(),a("el-form-item",{attrs:{label:"排序",prop:"sort","label-position":"right"}},[a("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.sort,callback:function(e){t.$set(t.paymentConfigData,"sort",t._n(e))},expression:"paymentConfigData.sort"}}),a("span",{staticClass:"desc"},[t._v("排序值越小，排序越前")])],1)],1)],1),a("div",{staticClass:"bg-white ls-fixed-footer"},[a("div",{staticClass:"row-center flex m-t-15"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("paymentConfigData")}}},[t._v("保存")])],1)])])},n=[],s=a("5530"),l=a("d4ec"),r=a("bee2"),o=a("262e"),c=a("2caf"),p=(a("4e82"),a("a9e3"),a("9ab4")),u=a("1b40"),m=a("6460"),f=a("b3ad"),y=function(t){Object(o["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.identity=0,t.status="",t.paymentConfigData={name:"",icon:"",sort:"",remark:"",merchant_type:"",interface_version:"v2",mch_id:"",pay_sign_key:"",apiclient_cert:"",apiclient_key:"",pattern:"",app_id:"",private_key:"",ali_public_key:""},t.rules={name:[{required:!0,message:"请输入显示名称",trigger:"blur"}],icon:[{required:!0,message:"请输入上传图标",trigger:"change"}],mch_id:[{required:!0,message:"请输入微信支付商户号",trigger:"blur"}],pay_sign_key:[{required:!0,message:"请输入微信商户支付API密钥",trigger:"blur"}],apiclient_cert:[{required:!0,message:"请输入微信支付证书",trigger:"blur"}],apiclient_key:[{required:!0,message:"请输入微信支付证书密钥",trigger:"blur"}],private_key:[{required:!0,message:"请输入支付宝公钥",trigger:"blur"}],ali_public_key:[{required:!0,message:"请输入应用私钥",trigger:"blur"}],app_id:[{required:!0,message:"请输入应用ID",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",pattern:!1,message:"请输入正确的排序",trigger:"blur"}]},t}return Object(r["a"])(a,[{key:"getPaymentConfigDetail",value:function(){var t=this;Object(m["a"])({id:this.identity}).then((function(e){var a=Object(s["a"])(Object(s["a"])({},e.config),e);delete a.config,2==a.pay_way&&(a.interface_version="v2"),3==a.pay_way&&(a.mode="normal_mode"),a.merchant_type="ordinary_merchant",t.paymentConfigData=a})).catch((function(){t.$message.error("数据初始化失败，请刷新重载！")}))}},{key:"onSubmit",value:function(t){var e=this,a=this.$refs[t];a.validate((function(t){if(t)return e.paymentConfigData.sort<=0?e.$message.error("请输入正整数"):void e.handlePayConfigEdit()}))}},{key:"handlePayConfigEdit",value:function(){var t=this,e=this.paymentConfigData,a=this.identity;Object(m["c"])(Object(s["a"])(Object(s["a"])({},e),{},{id:a})).then((function(){setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("保存失败!")}))}},{key:"onCopy",value:function(){var t=document.createElement("input");t.value="http://xxx.com/pay/",document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.style.display="none",this.$message({message:"复制成功",type:"success"})}},{key:"created",value:function(){var t=this.$route.query;this.identity=t.id,this.getPaymentConfigDetail()}},{key:"PayWay",get:function(){var t=Number(this.paymentConfigData.pay_way);switch(t){case 1:return"余额支付";case 2:return"微信支付";case 3:return"支付宝支付";case 4:return"字节支付"}}}]),a}(u["e"]);y=Object(p["a"])([Object(u["a"])({components:{MaterialSelect:f["a"]}})],y);var g=y,d=g,b=(a("550c"),a("2877")),_=Object(b["a"])(d,i,n,!1,null,"0830f0b2",null);e["default"]=_.exports},6460:function(t,e,a){"use strict";a.d(e,"d",(function(){return n})),a.d(e,"e",(function(){return s})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o}));var i=a("f175"),n=function(){return i["a"].get("/settings.pay.pay_way/getPayWay")},s=function(t){return i["a"].post("/settings.pay.pay_way/setPayWay",t)},l=function(t){return i["a"].post("/settings.pay.pay_config/setConfig",t)},r=function(t){return i["a"].get("/settings.pay.pay_config/getConfig",{params:t})},o=function(){return i["a"].get("/settings.pay.pay_config/lists")}},b3ad:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():a("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[a("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(e,i){return a("div",{key:e+i,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,i)}}},[t.$scopedSlots.preview?a("div",[t._t("preview",null,{item:t.imageUri(e)})],2):a("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(e)},size:t.size}}),t.enableDelete?a("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(i)}}}):t._e()],1)})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?a("div",[t._t("upload")],2):a("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():a("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),a("div",{staticClass:"material-wrap"},[a("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},n=[],s=a("d4ec"),l=a("bee2"),r=a("262e"),o=a("2caf"),c=(a("d81d"),a("a434"),a("99af"),a("9ab4")),p=a("1b40"),u=a("0a6d"),m=a("c6fe"),f=a("e915"),y=a("b76a"),g=a.n(y),d=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(s["a"])(this,a),t=e.apply(this,arguments),t.isAdd=!0,t.fileList=[],t}return Object(l["a"])(a,[{key:"showUpload",get:function(){var t=this.fileList,e=this.limit;return e-t.length>0}},{key:"meterialLimit",get:function(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}},{key:"tipsText",get:function(){switch(this.type){case"image":return"图片";case"video":return"视频"}}},{key:"imageUri",get:function(){var t=this;return function(e){return t.enableDomain?e:t.$getImageUri(e)}}},{key:"valueChange",value:function(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}},{key:"showDialog",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0;this.disabled||(this.isAdd=e,void 0!==a&&(this.currentIndex=a),null===(t=this.$refs.materialDialog)||void 0===t||t.onTrigger())}},{key:"selectChange",value:function(t){this.select=t}},{key:"handleConfirm",value:function(){var t=this;this.$refs.material.clearSelectList();var e=this.select.map((function(e){return t.enableDomain?e.uri:e.url}));this.isAdd?this.fileList=this.fileList.concat(e):this.fileList.splice(this.currentIndex,1,e.shift()),this.handleChange()}},{key:"delImage",value:function(t){this.fileList.splice(t,1),this.handleChange()}},{key:"handleChange",value:function(){var t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}}]),a}(p["e"]);Object(c["a"])([Object(p["c"])({default:function(){return[]}})],d.prototype,"value",void 0),Object(c["a"])([Object(p["c"])({default:1})],d.prototype,"limit",void 0),Object(c["a"])([Object(p["c"])({default:"100"})],d.prototype,"size",void 0),Object(c["a"])([Object(p["c"])({default:!1})],d.prototype,"disabled",void 0),Object(c["a"])([Object(p["c"])({default:!1})],d.prototype,"dragDisabled",void 0),Object(c["a"])([Object(p["c"])({default:!1})],d.prototype,"hiddenTrigger",void 0),Object(c["a"])([Object(p["c"])({default:"image"})],d.prototype,"type",void 0),Object(c["a"])([Object(p["c"])({default:"transparent"})],d.prototype,"uploadBg",void 0),Object(c["a"])([Object(p["c"])({default:!0})],d.prototype,"enableDomain",void 0),Object(c["a"])([Object(p["c"])({default:!0})],d.prototype,"enableDelete",void 0),Object(c["a"])([Object(p["f"])("value",{immediate:!0})],d.prototype,"valueChange",null),d=Object(c["a"])([Object(p["a"])({components:{LsDialog:u["a"],LsMaterial:m["a"],Draggable:g.a,FileItem:f["a"]}})],d);var b=d,_=b,h=(a("568b"),a("2877")),v=Object(h["a"])(_,i,n,!1,null,"1503bff6",null);e["a"]=v.exports}}]);
//# sourceMappingURL=chunk-62b76fb2.f7edbece.js.map