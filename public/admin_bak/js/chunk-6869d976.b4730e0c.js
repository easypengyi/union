(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6869d976"],{"0465":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"ls-card"},[i("el-page-header",{attrs:{content:t.identity?"编辑小票模版":"新增小票模版"},on:{back:function(e){return t.$router.go(-1)}}})],1),i("div",{staticClass:"flex col-top"},[i("div",{staticClass:"ls-card m-t-24 m-b-60 m-r-24"},[i("div",{staticClass:"title"},[t._v("基本信息")]),i("el-form",{ref:"printData",staticClass:"m-l-24",staticStyle:{width:"500px"},attrs:{"hide-required-asterisk":!1,rules:t.rules,model:t.printData,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"模版名称",prop:"template_name","label-position":"right"}},[i("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入模版名称"},model:{value:t.printData.template_name,callback:function(e){t.$set(t.printData,"template_name",e)},expression:"printData.template_name"}})],1),i("el-form-item",{attrs:{label:"小票名称",prop:"ticket_name","label-position":"right"}},[i("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入小票名称"},model:{value:t.printData.ticket_name,callback:function(e){t.$set(t.printData,"ticket_name",e)},expression:"printData.ticket_name"}})],1),i("el-form-item",{attrs:{label:"商城名称","label-position":"right",required:""}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":t.styleConfig.primary,"inactive-color":"#f4f4f5"},model:{value:t.printData.show_shop_name,callback:function(e){t.$set(t.printData,"show_shop_name",e)},expression:"printData.show_shop_name"}}),i("span",{staticClass:"muted m-l-20"},[t._v("隐藏和显示商城名称，默认显示")])],1),i("el-form-item",{attrs:{label:"自提门店","label-position":"right",required:""}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.selffetch_shop.shop_name,callback:function(e){t.$set(t.printData.selffetch_shop,"shop_name",e)},expression:"printData.selffetch_shop.shop_name"}},[t._v("自提门店 ")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.selffetch_shop.contacts,callback:function(e){t.$set(t.printData.selffetch_shop,"contacts",e)},expression:"printData.selffetch_shop.contacts"}},[t._v("联系人 ")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.selffetch_shop.shop_address,callback:function(e){t.$set(t.printData.selffetch_shop,"shop_address",e)},expression:"printData.selffetch_shop.shop_address"}},[t._v(" 门店地址 ")]),i("span",{staticClass:"desc"},[t._v("门店自提时，勾选需要显示的门店信息")])],1),i("el-form-item",{attrs:{label:"买家留言","label-position":"right",required:""}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":t.styleConfig.primary,"inactive-color":"#f4f4f5"},model:{value:t.printData.show_buyer_message,callback:function(e){t.$set(t.printData,"show_buyer_message",e)},expression:"printData.show_buyer_message"}}),i("span",{staticClass:"muted m-l-20"},[t._v("隐藏和显示买家留言，默认显示")])],1),i("el-form-item",{attrs:{label:"收货信息","label-position":"right",required:""}},[i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.consignee_info.name,callback:function(e){t.$set(t.printData.consignee_info,"name",e)},expression:"printData.consignee_info.name"}},[t._v("收货人 ")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.consignee_info.mobile,callback:function(e){t.$set(t.printData.consignee_info,"mobile",e)},expression:"printData.consignee_info.mobile"}},[t._v("联系方式 ")]),i("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.consignee_info.address,callback:function(e){t.$set(t.printData.consignee_info,"address",e)},expression:"printData.consignee_info.address"}},[t._v("收货地址 ")]),i("span",{staticClass:"desc"},[t._v("门店自提时，勾选需要显示的门店信息")])],1),i("el-form-item",{attrs:{label:"二维码","label-position":"right",required:""}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":t.styleConfig.primary,"inactive-color":"#f4f4f5"},model:{value:t.printData.show_qrcode,callback:function(e){t.$set(t.printData,"show_qrcode",e)},expression:"printData.show_qrcode"}}),i("span",{staticClass:"muted m-l-20"},[t._v("关闭和开启打印小票尾部二维码，默认关闭")])],1),i("el-form-item",{attrs:{label:"二维码链接","label-position":"right"}},[i("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入二维码链接"},model:{value:t.printData.qrcode_content,callback:function(e){t.$set(t.printData,"qrcode_content",e)},expression:"printData.qrcode_content"}})],1),i("el-form-item",{attrs:{label:"二维码名称","label-position":"right"}},[i("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入二维码名称"},model:{value:t.printData.qrcode_name,callback:function(e){t.$set(t.printData,"qrcode_name",e)},expression:"printData.qrcode_name"}})],1),i("el-form-item",{attrs:{label:"底部信息",prop:"bottom","label-position":"right",required:""}},[i("el-input",{staticClass:"ls-input",attrs:{placeholder:"谢谢惠顾，欢迎下次光临"},model:{value:t.printData.bottom,callback:function(e){t.$set(t.printData,"bottom",e)},expression:"printData.bottom"}})],1)],1)],1),i("div",{staticClass:"ls-card m-b-60 m-t-24"},[i("div",{staticClass:"title"},[t._v("小票预览")]),i("div",{staticClass:"phone"},[i("div",{staticClass:"bb flex row-center sm m-t-5 p-b-12"},[t._v(t._s(t.printData.ticket_name||"小票名称"))]),t.printData.show_shop_name?i("div",{staticClass:"bb flex row-center m-t-12 xl p-b-12"},[t._v("商城名称")]):t._e(),t._m(0),t._m(1),t._m(2),t.handleShopInfo?i("div",{staticClass:"bb p-b-12 p-l-10 p-r-10"},[i("div",{staticClass:"bold m-t-12 weight-500"},[t._v("门店信息")]),t.printData.selffetch_shop.shop_name?i("div",{staticClass:"m-t-12"},[t._v(" 自提门店: 商业街店铺 ")]):t._e(),t.printData.selffetch_shop.contacts?i("div",{staticClass:"m-t-12"},[t._v(" 联系人: 刘先生 ")]):t._e(),t.printData.selffetch_shop.shop_address?i("div",{staticClass:"m-t-12"},[t._v(" 门店地址: 广东省番禺区 小店街 ")]):t._e()]):t._e(),t.handleUserInfo?i("div",{staticClass:"bb p-b-12 p-l-10 p-r-10"},[i("div",{staticClass:"bold m-t-12 weight-500"},[t._v("买家信息")]),t.printData.consignee_info.name?i("div",{staticClass:"m-t-12"},[t._v(" 收货人: 米先生 ")]):t._e(),t.printData.consignee_info.mobile?i("div",{staticClass:"m-t-12"},[t._v(" 联系方式: 18778786555 ")]):t._e(),t.printData.consignee_info.address?i("div",{staticClass:"m-t-12 "},[t._v(" 收货地址: 山西省 太原市 小区店 创业街 ")]):t._e()]):t._e(),t.printData.show_buyer_message?i("div",{staticClass:"m-t-12 p-b-12 bb p-l-10"},[t._v(" 买家留言: 请发申通快递，谢谢 ")]):t._e(),t.printData.show_qrcode?i("div",{staticClass:"flex row-center bb m-t-12 p-b-12"},[i("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:a("11087")}})]):t._e(),i("div",{staticClass:"m-t-12 p-b-5 flex row-center"},[t._v(" "+t._s(t.printData.bottom)+" ")])])])]),i("div",{staticClass:"bg-white ls-fixed-footer"},[i("div",{staticClass:"row-center flex m-t-12"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("printData")}}},[t._v("保存")])],1)])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sm bb p-l-10"},[a("div",{staticClass:"m-t-12"},[t._v("订单编号: MWE20012345738754657834")]),a("div",{staticClass:"m-t-12"},[t._v("支付方式: 微信支付")]),a("div",{staticClass:"m-t-12 p-b-12"},[t._v("配送方式: 门店自提")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bb p-l-10 p-r-10"},[a("div",{staticClass:"m-t-12 flex row-between"},[a("div",[t._v("商品名称")]),a("div",[t._v("数量")]),a("div",[t._v("金额")])]),a("div",{staticClass:"m-t-12 flex row-between"},[a("div",[t._v("男子运动鞋")]),a("div",[t._v("2")]),a("div",[t._v("¥2987")])]),a("div",{staticClass:"m-t-12 flex row-between"},[a("div",[t._v("白色休闲鞋")]),a("div",[t._v("4")]),a("div",[t._v("¥2463")])]),a("div",{staticClass:"m-t-12 p-b-12  flex row-between"},[a("div",[t._v("运费")]),a("div",[t._v("¥5.00")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-l-10 p-r-10 bb"},[a("div",{staticClass:"m-t-12 flex row-between"},[a("div",[t._v("订单原价")]),a("div",[t._v("¥5455.00")])]),a("div",{staticClass:"m-t-12 flex row-between"},[a("div",[t._v("优惠金额")]),a("div",[t._v("¥0.00")])]),a("div",{staticClass:"m-t-12 p-b-12  flex row-between"},[a("div",[t._v("实付金额")]),a("div",[t._v("¥5455.00")])])])}],r=a("5530"),s=a("1da1"),l=a("d4ec"),o=a("bee2"),c=a("262e"),p=a("2caf"),d=(a("7db0"),a("96cf"),a("9ab4")),u=a("1b40"),f=a("c136"),m=a("b3ad"),v=function(t){Object(c["a"])(a,t);var e=Object(p["a"])(a);function a(){var t;return Object(l["a"])(this,a),t=e.apply(this,arguments),t.identity=1,t.printData={template_name:"",ticket_name:"",show_shop_name:1,template_id:0,selffetch_shop:{shop_name:1,contacts:1,shop_address:1},show_buyer_message:1,consignee_info:{name:1,mobile:1,address:1},show_qrcode:1,bottom:"谢谢惠顾，欢迎下次光临",qrcode_name:"",qrcode_content:""},t.rules={template_name:[{required:!0,message:"请输入打印机名称",trigger:"blur"}],ticket_name:[{required:!0,message:"输入小票名称",trigger:"blur"}],bottom:[{required:!0,message:"请输入底部信息",trigger:"blur"}],qrcode_content:[{required:!0,message:"请输入二维码链接",trigger:"blur"}],qrcode_name:[{required:!0,message:"请输入二维码名称",trigger:"blur"}]},t}return Object(o["a"])(a,[{key:"getTemplateDetail",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["l"])({id:this.identity});case 2:e=t.sent,this.printData=e;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onSubmit",value:function(t){var e=this,a=this.$refs[t];a.validate((function(t){t&&(e.identity?e.handleTemplateEdit():e.handleTemplateAdd())}))}},{key:"handleTemplateAdd",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.printData,t.next=3,Object(f["b"])(Object(r["a"])({},e));case 3:this.$router.back();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"handleTemplateEdit",value:function(){var t=this,e=this.printData,a=this.identity;Object(f["g"])(Object(r["a"])(Object(r["a"])({},e),{},{id:a})).then((function(){setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("编辑失败!")}))}},{key:"created",value:function(){var t=this.$route.query;this.identity=t.id,this.identity&&this.getTemplateDetail()}},{key:"handleShopInfo",get:function(){var t=[],e=this.printData.selffetch_shop;for(var a in e)t.push(e[a]);var i=t.find((function(t){return 1==t}));return void 0!=i}},{key:"handleUserInfo",get:function(){var t=[],e=this.printData.consignee_info;for(var a in e)t.push(e[a]);var i=t.find((function(t){return 1==t}));return void 0!=i}}]),a}(u["e"]);v=Object(d["a"])([Object(u["a"])({components:{MaterialSelect:m["a"]}})],v);var h=v,b=h,_=(a("0d85"),a("2877")),g=Object(_["a"])(b,i,n,!1,null,"2fb201cd",null);e["default"]=g.exports},"0d85":function(t,e,a){"use strict";a("27a4")},11087:function(t,e,a){t.exports=a.p+"img/qr_code.e6b2ad1c.png"},"27a4":function(t,e,a){},"31d6":function(t,e,a){},"568b":function(t,e,a){"use strict";a("31d6")},b3ad:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():a("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[a("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(e,i){return a("div",{key:e+i,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,i)}}},[t.$scopedSlots.preview?a("div",[t._t("preview",null,{item:t.imageUri(e)})],2):a("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(e)},size:t.size}}),t.enableDelete?a("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(i)}}}):t._e()],1)})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?a("div",[t._t("upload")],2):a("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():a("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),a("div",{staticClass:"material-wrap"},[a("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},n=[],r=a("d4ec"),s=a("bee2"),l=a("262e"),o=a("2caf"),c=(a("d81d"),a("a434"),a("99af"),a("9ab4")),p=a("1b40"),d=a("0a6d"),u=a("c6fe"),f=a("e915"),m=a("b76a"),v=a.n(m),h=function(t){Object(l["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.isAdd=!0,t.fileList=[],t}return Object(s["a"])(a,[{key:"showUpload",get:function(){var t=this.fileList,e=this.limit;return e-t.length>0}},{key:"meterialLimit",get:function(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}},{key:"tipsText",get:function(){switch(this.type){case"image":return"图片";case"video":return"视频"}}},{key:"imageUri",get:function(){var t=this;return function(e){return t.enableDomain?e:t.$getImageUri(e)}}},{key:"valueChange",value:function(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}},{key:"showDialog",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0;this.disabled||(this.isAdd=e,void 0!==a&&(this.currentIndex=a),null===(t=this.$refs.materialDialog)||void 0===t||t.onTrigger())}},{key:"selectChange",value:function(t){this.select=t}},{key:"handleConfirm",value:function(){var t=this;this.$refs.material.clearSelectList();var e=this.select.map((function(e){return t.enableDomain?e.uri:e.url}));this.isAdd?this.fileList=this.fileList.concat(e):this.fileList.splice(this.currentIndex,1,e.shift()),this.handleChange()}},{key:"delImage",value:function(t){this.fileList.splice(t,1),this.handleChange()}},{key:"handleChange",value:function(){var t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}}]),a}(p["e"]);Object(c["a"])([Object(p["c"])({default:function(){return[]}})],h.prototype,"value",void 0),Object(c["a"])([Object(p["c"])({default:1})],h.prototype,"limit",void 0),Object(c["a"])([Object(p["c"])({default:"100"})],h.prototype,"size",void 0),Object(c["a"])([Object(p["c"])({default:!1})],h.prototype,"disabled",void 0),Object(c["a"])([Object(p["c"])({default:!1})],h.prototype,"dragDisabled",void 0),Object(c["a"])([Object(p["c"])({default:!1})],h.prototype,"hiddenTrigger",void 0),Object(c["a"])([Object(p["c"])({default:"image"})],h.prototype,"type",void 0),Object(c["a"])([Object(p["c"])({default:"transparent"})],h.prototype,"uploadBg",void 0),Object(c["a"])([Object(p["c"])({default:!0})],h.prototype,"enableDomain",void 0),Object(c["a"])([Object(p["c"])({default:!0})],h.prototype,"enableDelete",void 0),Object(c["a"])([Object(p["f"])("value",{immediate:!0})],h.prototype,"valueChange",null),h=Object(c["a"])([Object(p["a"])({components:{LsDialog:d["a"],LsMaterial:u["a"],Draggable:v.a,FileItem:f["a"]}})],h);var b=h,_=b,g=(a("568b"),a("2877")),D=Object(g["a"])(_,i,n,!1,null,"1503bff6",null);e["a"]=D.exports},c136:function(t,e,a){"use strict";a.d(e,"j",(function(){return n})),a.d(e,"i",(function(){return r})),a.d(e,"k",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"f",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"n",(function(){return p})),a.d(e,"h",(function(){return d})),a.d(e,"c",(function(){return u})),a.d(e,"m",(function(){return f})),a.d(e,"b",(function(){return m})),a.d(e,"g",(function(){return v})),a.d(e,"e",(function(){return h})),a.d(e,"l",(function(){return b}));var i=a("f175"),n=function(t){return i["a"].get("/printer.printer/printerLists",{params:t})},r=function(t){return i["a"].get("/printer.printer/printerDetail",{params:t})},s=function(t){return i["a"].get("/printer.printer/getPrinterType",{params:t})},l=function(t){return i["a"].post("/printer.printer/addPrinter",t)},o=function(t){return i["a"].post("/printer.printer/editPrinter",t)},c=function(t){return i["a"].post("/printer.printer/deletePrinter",t)},p=function(t){return i["a"].post("/printer.printer/testPrinter",t)},d=function(t){return i["a"].post("/order.order/orderPrint",t)},u=function(t){return i["a"].post("/printer.printer/autoPrint",t)},f=function(t){return i["a"].get("/printer.printer/printerTemplateLists",{params:t})},m=function(t){return i["a"].post("/printer.printer/addTemplate",t)},v=function(t){return i["a"].post("/printer.printer/editTemplate",t)},h=function(t){return i["a"].post("/printer.printer/deleteTemplate",t)},b=function(t){return i["a"].get("/printer.printer/templateDetail",{params:t})}}}]);
//# sourceMappingURL=chunk-6869d976.b4730e0c.js.map