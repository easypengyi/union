(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e861c264"],{"14c6":function(e,t,a){"use strict";a.d(t,"n",(function(){return l})),a.d(t,"x",(function(){return i})),a.d(t,"y",(function(){return n})),a.d(t,"u",(function(){return r})),a.d(t,"C",(function(){return o})),a.d(t,"v",(function(){return c})),a.d(t,"B",(function(){return u})),a.d(t,"w",(function(){return d})),a.d(t,"z",(function(){return p})),a.d(t,"A",(function(){return m})),a.d(t,"a",(function(){return v})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return b})),a.d(t,"b",(function(){return _})),a.d(t,"c",(function(){return g})),a.d(t,"d",(function(){return h})),a.d(t,"E",(function(){return y})),a.d(t,"H",(function(){return k})),a.d(t,"F",(function(){return x})),a.d(t,"G",(function(){return w})),a.d(t,"D",(function(){return O})),a.d(t,"L",(function(){return j})),a.d(t,"I",(function(){return C})),a.d(t,"J",(function(){return $})),a.d(t,"K",(function(){return S})),a.d(t,"g",(function(){return D})),a.d(t,"l",(function(){return I})),a.d(t,"h",(function(){return B})),a.d(t,"m",(function(){return q})),a.d(t,"i",(function(){return N})),a.d(t,"k",(function(){return z})),a.d(t,"j",(function(){return L})),a.d(t,"M",(function(){return E})),a.d(t,"P",(function(){return V})),a.d(t,"N",(function(){return A})),a.d(t,"O",(function(){return J})),a.d(t,"r",(function(){return F})),a.d(t,"q",(function(){return G})),a.d(t,"s",(function(){return T})),a.d(t,"t",(function(){return M})),a.d(t,"p",(function(){return P})),a.d(t,"o",(function(){return H}));var s=a("f175"),l=function(e){return s["a"].post("/goods.goods/add",e)},i=function(e){return s["a"].post("/goods.goods/edit",e)},n=function(e){return s["a"].get("/goods.goods/lists",{params:e})},r=function(e){return s["a"].get("/goods.goods/commonLists",{params:e})},o=function(e){return s["a"].post("/goods.goods/status",e)},c=function(e){return s["a"].post("/goods.goods/del",e)},u=function(e){return s["a"].post("/goods.goods/sort",e)},d=function(e){return s["a"].get("/goods.goods/detail",{params:{id:e}})},p=function(e){return s["a"].get("/goods.goods/otherList",{params:e})},m=function(e){return s["a"].post("goods.goods/rename ",e)},v=function(e){return s["a"].post("/goods.goods_brand/add",e)},f=function(e){return s["a"].get("/goods.goods_brand/lists",{params:e})},b=function(e){return s["a"].post("/goods.goods_brand/status",e)},_=function(e){return s["a"].post("/goods.goods_brand/del",e)},g=function(e){return s["a"].get("/goods.goods_brand/detail",{params:{id:e}})},h=function(e){return s["a"].post("/goods.goods_brand/edit",e)},y=function(e){return s["a"].post("/goods.goods_supplier_category/add",e)},k=function(e){return s["a"].get("goods.goods_supplier_category/lists",{params:e})},x=function(e){return s["a"].post("goods.goods_supplier_category/del",{id:e})},w=function(e){return s["a"].post("goods.goods_supplier_category/edit",e)},O=function(e){return s["a"].post("/goods.goods_supplier/add",e)},j=function(e){return s["a"].get("/goods.goods_supplier/lists",{params:e})},C=function(e){return s["a"].post("goods.goods_supplier/del",{id:e})},$=function(e){return s["a"].get("/goods.goods_supplier/detail",{params:{id:e}})},S=function(e){return s["a"].post("/goods.goods_supplier/edit",e)},D=function(e){return s["a"].post("/goods.goods_category/add",e)},I=function(e){return s["a"].get("/goods.goods_category/lists",{params:e})},B=function(e){return s["a"].get("/goods.goods_category/commonLists",{params:e})},q=function(e){return s["a"].post("/goods.goods_category/status",e)},N=function(e){return s["a"].post("goods.goods_category/del",{id:e})},z=function(e){return s["a"].post("/goods.goods_category/edit",e)},L=function(e){return s["a"].get("/goods.goods_category/detail",{params:{id:e}})},E=function(e){return s["a"].post("/goods.goods_unit/add",e)},V=function(e){return s["a"].get("/goods.goods_unit/lists",{params:e})},A=function(e){return s["a"].post("goods.goods_unit/del",{id:e})},J=function(e){return s["a"].post("/goods.goods_unit/edit",e)},F=function(e){return s["a"].get("goods.goods_comment/lists",{params:e})},G=function(e){return s["a"].post("goods.goods_comment/del",e)},T=function(e){return s["a"].post("goods.goods_comment/reply",e)},M=function(e){return s["a"].post("/goods.goods_comment/status",e)},P=function(e){return s["a"].get("goods.goods_comment_assistant/lists",{params:e})},H=function(e){return s["a"].post("goods.goods_comment_assistant/add",e)}},"212e":function(e,t,a){},4551:function(e,t,a){},4791:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ls-release"},[a("el-form",{ref:"form",staticClass:"ls-form",attrs:{"label-width":"120px",model:e.form,rules:e.rules,size:"small"}},[a("div",{staticClass:"ls-card ls-release__header"},[a("el-page-header",{attrs:{content:e.id?"编辑商品":"新增商品"},on:{back:function(t){return e.$router.go(-1)}}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ls-card ls-release__content m-t-16"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础设置",name:"basic"}},[a("add-basic",{attrs:{lists:e.otherList},on:{refresh:e.getGoodsOtherList},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),a("el-tab-pane",{attrs:{label:"价格库存",name:"price"}},[a("add-price",{model:{value:e.specData,callback:function(t){e.specData=t},expression:"specData"}})],1),a("el-tab-pane",{attrs:{label:"物流设置",name:"logistics"}},[a("add-logistics",{attrs:{lazy:"",lists:e.otherList},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),a("el-tab-pane",{attrs:{label:"商品详情",name:"details"}},[a("add-details",{attrs:{lazy:""},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),a("el-tab-pane",{attrs:{label:"销售设置",name:"sales"}},[a("add-sales",{attrs:{lazy:""},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)],1),a("div",{staticClass:"ls-release__footer bg-white ls-fixed-footer"},[a("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},["basic"!=e.activeName?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.onNextStep(!1)}}},[e._v("上一步")]):e._e(),"sales"==e.activeName?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSave}},[e._v("保存")]):e._e(),"sales"!=e.activeName?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.onNextStep}},[e._v("下一步")]):e._e()],1)])])],1)},l=[],i=(a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("06c5"));function n(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(i["a"])(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return r=e.done,e},e:function(e){o=!0,n=e},f:function(){try{r||null==a["return"]||a["return"]()}finally{if(o)throw n}}}}var r=a("d4ec"),o=a("bee2"),c=a("262e"),u=a("2caf"),d=(a("7db0"),a("159b"),a("9ab4")),p=a("1b40"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-basic"},[a("el-form-item",{attrs:{label:"商品编码",required:"",prop:"code"}},[a("el-input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入商品编码"},model:{value:e.value.code,callback:function(t){e.$set(e.value,"code",t)},expression:"value.code"}})],1),a("el-form-item",{attrs:{label:"商品名称",required:"",prop:"name"}},[a("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",maxlength:"64",rows:"3","show-word-limit":"",placeholder:"请输入商品名称"},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1),a("el-form-item",{attrs:{label:"商品分类",required:"",prop:"category_id"}},[a("el-cascader",{staticStyle:{width:"280px"},attrs:{options:e.categoryList,props:{multiple:!0,checkStrictly:!0,label:"name",value:"id",children:"sons",emitPath:!1},clearable:"",filterable:""},model:{value:e.value.category_id,callback:function(t){e.$set(e.value,"category_id",t)},expression:"value.category_id"}}),a("router-link",{staticClass:"m-l-10",attrs:{target:"_blank",to:"/goods/category_edit"}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("新增分类")])],1),a("span",{staticClass:"primary m-8"},[e._v("|")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),a("el-form-item",{attrs:{label:"商品轮播图",required:"",prop:"goods_image"}},[a("material-select",{attrs:{limit:5},model:{value:e.value.goods_image,callback:function(t){e.$set(e.value,"goods_image",t)},expression:"value.goods_image"}}),a("div",{staticClass:"muted"},[e._v(" 建议尺寸：800*800，可拖拽改变图片顺序，默认首张图为主图，最多上传5张 ")])],1),a("el-form-item",{attrs:{label:"添加视频"}},[a("el-switch",{model:{value:e.addVideo,callback:function(t){e.addVideo=t},expression:"addVideo"}})],1),e.addVideo?[a("el-form-item",{attrs:{label:"视频来源"}},[a("el-radio-group",{model:{value:e.value.video_source,callback:function(t){e.$set(e.value,"video_source",t)},expression:"value.video_source"}},[a("el-radio",{attrs:{label:1}},[e._v("视频素材库")]),a("el-radio",{attrs:{label:2}},[e._v("视频链接")])],1)],1),1==e.value.video_source?a("el-form-item",{attrs:{label:"选择视频",required:"",prop:"video"}},[a("material-select",{attrs:{type:"video"},model:{value:e.value.video,callback:function(t){e.$set(e.value,"video",t)},expression:"value.video"}}),a("div",{staticClass:"muted"},[e._v(" 手机端播放，建议时长：9-30秒，视频宽高比16:9 ")])],1):a("el-form-item",{attrs:{label:"视频链接",required:"",prop:"video"}},[a("el-input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入视频链接"},model:{value:e.value.video,callback:function(t){e.$set(e.value,"video",t)},expression:"value.video"}}),a("div",{staticClass:"muted"},[e._v(" 手机端播放，建议时长：9-30秒，视频宽高比16:9 ")])],1),a("el-form-item",{attrs:{label:"视频封面"}},[a("material-select",{model:{value:e.value.video_cover,callback:function(t){e.$set(e.value,"video_cover",t)},expression:"value.video_cover"}}),a("div",{staticClass:"muted"},[e._v("建议尺寸：800*800")])],1)]:e._e(),a("el-form-item",{attrs:{label:"商品品牌"}},[a("el-select",{attrs:{placeholder:"请选择品牌"},model:{value:e.value.brand_id,callback:function(t){e.$set(e.value,"brand_id",t)},expression:"value.brand_id"}},e._l(e.brandList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("router-link",{staticClass:"m-l-10",attrs:{target:"_blank",to:"/goods/brand_edit"}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("新增品牌")])],1),a("span",{staticClass:"primary m-8"},[e._v("|")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),a("el-form-item",{attrs:{label:"商品单位"}},[a("el-select",{attrs:{placeholder:"请选择单位"},model:{value:e.value.unit_id,callback:function(t){e.$set(e.value,"unit_id",t)},expression:"value.unit_id"}},e._l(e.unitList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("router-link",{staticClass:"m-l-10",attrs:{target:"_blank",to:"/goods/unit"}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("新增单位")])],1),a("span",{staticClass:"primary m-8"},[e._v("|")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),a("el-form-item",{attrs:{label:"供应商"}},[a("el-select",{attrs:{placeholder:"请选择供应商"},model:{value:e.value.supplier_id,callback:function(t){e.$set(e.value,"supplier_id",t)},expression:"value.supplier_id"}},e._l(e.supplierList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("router-link",{staticClass:"m-l-10",attrs:{target:"_blank",to:"/goods/supplier/edit"}},[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("新增供应商")])],1),a("span",{staticClass:"primary m-8"},[e._v("|")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),a("el-form-item",{attrs:{label:"自定义分享海报"}},[a("material-select",{attrs:{limit:1},model:{value:e.value.poster,callback:function(t){e.$set(e.value,"poster",t)},expression:"value.poster"}}),a("div",{staticClass:"muted"},[e._v(" 建议尺寸：800*800 ")])],1)],2)},v=[],f=a("b3ad"),b=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.addVideo=!1,e.form={},e.fileList=[],e}return Object(o["a"])(a,[{key:"videoChange",value:function(e){e&&(this.addVideo=!0)}},{key:"categoryList",get:function(){return this.lists.category_list||[]}},{key:"brandList",get:function(){return this.lists.brand_list||[]}},{key:"unitList",get:function(){return this.lists.unit_list||[]}},{key:"supplierList",get:function(){return this.lists.supplier_list||[]}},{key:"created",value:function(){}}]),a}(p["e"]);Object(d["a"])([Object(p["c"])()],b.prototype,"value",void 0),Object(d["a"])([Object(p["c"])({default:function(){return{}}})],b.prototype,"lists",void 0),Object(d["a"])([Object(p["f"])("value.video",{immediate:!0})],b.prototype,"videoChange",null),b=Object(d["a"])([Object(p["a"])({components:{MaterialSelect:f["a"]}})],b);var _=b,g=_,h=a("2877"),y=Object(h["a"])(g,m,v,!1,null,"9fa30996",null),k=y.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-price"},[a("el-form-item",{attrs:{label:"商品规格",required:""}},[a("el-radio-group",{model:{value:e.value.spec_type,callback:function(t){e.$set(e.value,"spec_type",t)},expression:"value.spec_type"}},[a("el-radio",{attrs:{label:1}},[e._v("单规格")]),a("el-radio",{attrs:{label:2}},[e._v("多规格")])],1)],1),a("specification",{directives:[{name:"show",rawName:"v-show",value:2==e.value.spec_type,expression:"value.spec_type == 2"}],model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.value.spec_type,expression:"value.spec_type == 1"}]},[a("el-form-item",{attrs:{label:"商品价格",required:"",prop:"spec_value_list[0].sell_price",rules:[{required:!0,message:"请输入商品金额",trigger:["blur","change"]}]}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.sell_price,callback:function(t){e.$set(e.value.specs_single,"sell_price",t)},expression:"value.specs_single.sell_price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),a("el-form-item",{attrs:{label:"划线价",required:"",prop:"spec_value_list[0].lineation_price",rules:[{required:!0,message:"请输入划线价",trigger:["blur","change"]}]}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.lineation_price,callback:function(t){e.$set(e.value.specs_single,"lineation_price",t)},expression:"value.specs_single.lineation_price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),a("el-form-item",{attrs:{label:"成本价"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.cost_price,callback:function(t){e.$set(e.value.specs_single,"cost_price",t)},expression:"value.specs_single.cost_price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1),a("el-form-item",{attrs:{label:"库存",required:"",prop:"spec_value_list[0].stock",rules:[{required:!0,message:"请输入库存",trigger:["blur","change"]}]}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.stock,callback:function(t){e.$set(e.value.specs_single,"stock",t)},expression:"value.specs_single.stock"}})],1),a("el-form-item",{attrs:{label:"体积"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.volume,callback:function(t){e.$set(e.value.specs_single,"volume",t)},expression:"value.specs_single.volume"}})],1),a("el-form-item",{attrs:{label:"重量"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.weight,callback:function(t){e.$set(e.value.specs_single,"weight",t)},expression:"value.specs_single.weight"}})],1),a("el-form-item",{attrs:{label:"条码"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.bar_code,callback:function(t){e.$set(e.value.specs_single,"bar_code",t)},expression:"value.specs_single.bar_code"}})],1)],1)],1)},w=[],O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"specification"},[a("el-form-item",{attrs:{label:""}},[e._l(e.sepcItem,(function(t,s){return a("div",{key:s,staticClass:"spec-item flex p-16 m-b-16 col-top ls-del-wrap"},[a("div",{staticClass:"spec-item__label m-r-10 flex-none"},[e._v("规格名")]),a("div",{staticClass:"spec-item__content"},[a("div",[a("el-input",{staticStyle:{width:"240px"},attrs:{maxlength:"10","show-word-limit":""},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),a("el-checkbox",{staticClass:"m-l-16",on:{change:function(t){return e.addImage(s,t)}},model:{value:t.has_image,callback:function(a){e.$set(t,"has_image",a)},expression:"item.has_image"}},[e._v("添加规格图片")])],1),a("div",{staticClass:"flex flex-wrap col-top"},[e._l(t.spec_list,(function(l,i){return a("div",{key:i,staticClass:"m-r-10 m-t-10"},[a("div",{staticClass:"ls-del-wrap"},[a("el-input",{attrs:{maxlength:"20","show-word-limit":""},on:{blur:function(t){return e.checkValue(s,i)}},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"sitem.value"}}),a("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return e.removeSpecValue(s,i)}}})],1),t.has_image?a("div",[a("material-select",{staticClass:"m-t-10",attrs:{size:"64"},model:{value:l.image,callback:function(t){e.$set(l,"image",t)},expression:"sitem.image"}})],1):e._e()])})),a("div",{staticClass:"m-t-10"},[a("el-button",{on:{click:function(t){return e.addSpecValue(s)}}},[e._v("+ 添加规格值")])],1)],2)]),a("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return e.removeSpecItem(s)}}})])})),a("div",[a("el-button",{attrs:{type:"primary",disabled:e.sepcItem.length>=3},on:{click:e.addSpecItem}},[e._v("添加规格项")]),a("span",{staticClass:"xs muted m-l-20"},[e._v("最多支持3个规格项")])],1)],2),e.tableData.length?a("el-form-item",{attrs:{label:"规格明细"}},[a("div",{staticClass:"ls-batch-setting m-b-16"},[a("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"sell_price")}}},[a("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置价格")])],1),a("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"lineation_price")}}},[a("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置划线价")])],1),a("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"cost_price")}}},[a("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置成本价")])],1),a("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"stock")}}},[a("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置库存")])],1),a("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"volume")}}},[a("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置体积")])],1),a("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"weight")}}},[a("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置重量")])],1),a("popover-input",{attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"bar_code")}}},[a("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置条码")])],1)],1),a("u-table",{attrs:{data:e.tableData,"use-virtual":"",size:"small","max-height":"600","row-height":75,"tooltip-effect":"dark",border:!1,"big-data-checkbox":""},on:{"selection-change":e.selectDataChange}},[a("u-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.sepcItem,(function(t,s){return a("u-table-column",{key:s,attrs:{label:t.name,"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value[s])+" ")]}}],null,!0)})})),a("u-table-column",{attrs:{label:"规格图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.image?a("div",{staticClass:"spec-image ls-del-wrap m-t-8"},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t.row.image},on:{click:function(a){return e.addSpecImage(t.$index)}}}),a("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(a){return e.removeSpecImage(t.$index)}}})],1):a("div",{staticClass:"add-spec-image flex row-center",on:{click:function(a){return e.addSpecImage(t.$index)}}},[a("i",{staticClass:"el-icon-plus"})])]}}],null,!1,77801995)}),a("u-table-column",{attrs:{label:"","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.sell_price,callback:function(a){e.$set(t.row,"sell_price",a)},expression:"scope.row.sell_price"}})]}}],null,!1,2595813538)},[a("template",{slot:"header"},[a("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 价格 ")])],2),a("u-table-column",{attrs:{"min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.lineation_price,callback:function(a){e.$set(t.row,"lineation_price",a)},expression:"scope.row.lineation_price"}})]}}],null,!1,806189223)},[a("template",{slot:"header"},[a("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 划线价 ")])],2),a("u-table-column",{attrs:{label:"成本价","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.cost_price,callback:function(a){e.$set(t.row,"cost_price",a)},expression:"scope.row.cost_price"}})]}}],null,!1,2095880351)}),a("u-table-column",{attrs:{"min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.stock,callback:function(a){e.$set(t.row,"stock",a)},expression:"scope.row.stock"}})]}}],null,!1,83199750)},[a("template",{slot:"header"},[a("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 库存 ")])],2),a("u-table-column",{attrs:{label:"体积","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.volume,callback:function(a){e.$set(t.row,"volume",a)},expression:"scope.row.volume"}})]}}],null,!1,342924814)}),a("u-table-column",{attrs:{label:"重量","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.weight,callback:function(a){e.$set(t.row,"weight",a)},expression:"scope.row.weight"}})]}}],null,!1,2432239718)}),a("u-table-column",{attrs:{label:"条码","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:t.row.bar_code,callback:function(a){e.$set(t.row,"bar_code",a)},expression:"scope.row.bar_code"}})]}}],null,!1,3777856101)})],2)],1):e._e(),a("material-select",{ref:"materialSelect",attrs:{"hidden-trigger":!0},on:{change:e.changeSpecImage}})],1)},j=[],C=a("5530"),$=(a("a434"),a("d81d"),a("caad"),a("2532"),a("4de4"),a("a15b"),a("d455")),S=a("6ddb"),D=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.tableDataIndex=0,e.fileList=[],e.tableData=[],e.selectData=[],e}return Object(o["a"])(a,[{key:"sepcItem",get:function(){return this.value.spec_value}},{key:"disabledBatchBtn",get:function(){return!this.selectData.length}},{key:"defaultDataChange",value:function(e){this.tableData=e}},{key:"sepcItemChange",value:function(e){this.setTableData()}},{key:"tableDataChange",value:function(e){this.value.spec_value_list=e}},{key:"addSpecItem",value:function(){this.sepcItem.length>=3||this.sepcItem.push({has_image:!1,id:"",name:"",spec_list:[{id:"",value:"",image:""}]})}},{key:"removeSpecItem",value:function(e){if(this.sepcItem.length<=1)return this.$message.error("至少有一个规格项");this.sepcItem.splice(e,1)}},{key:"addSpecValue",value:function(e){this.sepcItem[e].spec_list.push({id:"",value:"",image:""})}},{key:"removeSpecValue",value:function(e,t){this.sepcItem[e].spec_list.splice(t,1)}},{key:"addImage",value:function(e,t){this.sepcItem.forEach((function(a,s){a.has_image=!1,e==s&&(a.has_image=t),a.spec_list.forEach((function(e){e.image=""}))})),this.tableData.forEach((function(e){e.image=""}))}},{key:"checkValue",value:function(e,t){var a=this,s=this.sepcItem[e].spec_list[t].value;this.sepcItem[e].spec_list.forEach((function(l,i){l.value&&t!=i&&l.value==s&&(a.sepcItem[e].spec_list[t].value="",a.$message({message:"已存在相同规格值",type:"warning"}))}))}},{key:"selectDataChange",value:function(e){this.selectData=e.map((function(e){return e.ids}))}},{key:"batchSetting",value:function(e,t){var a=this;this.tableData.forEach((function(s){a.selectData.includes(s.ids)&&void 0!=s[t]&&(s[t]=e)}))}},{key:"setFields",value:function(e,t){var a=[e,t];a=a.filter((function(e){return void 0!==e.value}));var s=Object(S["d"])(a.map((function(e){return e.ids}))).join(),l=Object(S["d"])(a.map((function(e){return e.value})));return{id:e.id?e.id:"",ids:s,value:l,spec_value_str:l.join(),image:e.image?e.image:t.image,sell_price:e.sell_price?e.sell_price:"",lineation_price:e.lineation_price?e.lineation_price:"",cost_price:e.cost_price?e.cost_price:"",stock:e.stock?e.stock:"",volume:e.volume?e.volume:"",weight:e.weight?e.weight:"",bar_code:e.bar_code?e.bar_code:""}}},{key:"getTableData",value:function(e){var t=this;return e=JSON.parse(JSON.stringify(e)),e.reduce((function(e,a){for(var s=[],l=0;l<e.length;l++){a.length||s.push(t.setFields(e[l],{}));for(var i=0;i<a.length;i++)a[i].ids=i,s.push(t.setFields(e[l],a[i]))}return s}),[{}])}},{key:"setTableData",value:function(){var e=this.tableData,t=this.sepcItem,a=t.map((function(e){return e.spec_list})),s=this.getTableData(a),l=JSON.parse(JSON.stringify(e)),i={};l.forEach((function(e){void 0!==e.spec_value_str&&(i[e.spec_value_str]=e)})),console.log(s),this.tableData=s.map((function(e){return i[e.spec_value_str]?Object(C["a"])(Object(C["a"])({},i[e.spec_value_str]),{},{value:e.value,ids:e.ids,image:e.image||i[e.spec_value_str].image}):e}))}},{key:"addSpecImage",value:function(e){this.tableDataIndex=e,this.$refs.materialSelect.showDialog()}},{key:"changeSpecImage",value:function(e){this.tableData[this.tableDataIndex].image=e}},{key:"removeSpecImage",value:function(e){this.tableData[e].image=""}}]),a}(p["e"]);Object(d["a"])([Object(p["c"])()],D.prototype,"value",void 0),Object(d["a"])([Object(p["f"])("value.spec_value_list")],D.prototype,"defaultDataChange",null),Object(d["a"])([Object(p["f"])("sepcItem",{deep:!0,immediate:!0})],D.prototype,"sepcItemChange",null),Object(d["a"])([Object(p["f"])("tableData",{deep:!0})],D.prototype,"tableDataChange",null),D=Object(d["a"])([Object(p["a"])({components:{MaterialSelect:f["a"],PopoverInput:$["a"]}})],D);var I=D,B=I,q=(a("7286"),Object(h["a"])(B,O,j,!1,null,"31db4ab2",null)),N=q.exports,z=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"mounted",value:function(){}}]),a}(p["e"]);Object(d["a"])([Object(p["c"])()],z.prototype,"value",void 0),Object(d["a"])([Object(p["c"])()],z.prototype,"specData",void 0),z=Object(d["a"])([Object(p["a"])({components:{MaterialSelect:f["a"],Specification:N}})],z);var L=z,E=L,V=(a("6dcc"),Object(h["a"])(E,x,w,!1,null,"d50c18dc",null)),A=V.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-details"},[a("div",{staticClass:"flex col-stretch"},[a("el-form-item",{staticClass:"form-edit",attrs:{label:"商品详情"}},[a("editor",{model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}})],1),a("div",{staticClass:"preview m-l-30 flex-none"},[a("div",{staticClass:"title flex row-center"},[e._v("详情预览")]),a("el-scrollbar",{staticClass:"ls-scrollbar",staticStyle:{height:"600px"}},[a("div",{staticClass:"p-l-10 p-r-10",domProps:{innerHTML:e._s(e.value.content)}})])],1)],1)])},F=[],G=a("a897"),T=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(p["e"]);Object(d["a"])([Object(p["c"])()],T.prototype,"value",void 0),T=Object(d["a"])([Object(p["a"])({components:{Editor:G["a"]}})],T);var M=T,P=M,H=(a("71c5"),Object(h["a"])(P,J,F,!1,null,"4026c330",null)),K=H.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-sales"},[a("el-form-item",{attrs:{label:"库存预警"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.stock_warning,callback:function(t){e.$set(e.value,"stock_warning",t)},expression:"value.stock_warning"}}),a("div",{staticClass:"xs muted"},[e._v(" 设置最低库存预警值，不填或填0表示不做库存预警 ")])],1),a("el-form-item",{attrs:{label:"虚拟销量"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.virtual_sales_num,callback:function(t){e.$set(e.value,"virtual_sales_num",t)},expression:"value.virtual_sales_num"}})],1),a("el-form-item",{attrs:{label:"商品状态",required:""}},[a("el-radio-group",{model:{value:e.value.status,callback:function(t){e.$set(e.value,"status",t)},expression:"value.status"}},[a("el-radio",{attrs:{label:1}},[e._v("立即上架")]),a("el-radio",{attrs:{label:0}},[e._v("放入仓库")])],1)],1)],1)},R=[],U=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return a}(p["e"]);Object(d["a"])([Object(p["c"])()],U.prototype,"value",void 0),U=Object(d["a"])([p["a"]],U);var W=U,X=W,Y=Object(h["a"])(X,Q,R,!1,null,"5200bce0",null),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"add-logistics"},[a("el-form-item",{attrs:{label:"物流支持"}},[a("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:e.value.is_express,callback:function(t){e.$set(e.value,"is_express",t)},expression:"value.is_express"}},[e._v("快递发货")]),a("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:e.value.is_selffetch,callback:function(t){e.$set(e.value,"is_selffetch",t)},expression:"value.is_selffetch"}},[e._v("上门自提")])],1),a("el-form-item",{attrs:{label:"运费设置",required:""}},[a("el-radio-group",{model:{value:e.value.express_type,callback:function(t){e.$set(e.value,"express_type",t)},expression:"value.express_type"}},[a("el-radio",{attrs:{label:1}},[e._v("包邮")]),a("el-radio",{attrs:{label:2}},[e._v("统一运费")]),a("el-radio",{attrs:{label:3}},[e._v("运费模板")])],1)],1),2==e.value.express_type?a("el-form-item",{attrs:{prop:"express_money"}},[a("el-input",{model:{value:e.value.express_money,callback:function(t){e.$set(e.value,"express_money",t)},expression:"value.express_money"}},[a("template",{slot:"append"},[e._v("元")])],2)],1):e._e(),3==e.value.express_type?a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择运费模板",prop:"express_template_id"},model:{value:e.value.express_template_id,callback:function(t){e.$set(e.value,"express_template_id",t)},expression:"value.express_template_id"}},e._l(e.freightList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e()],1)},te=[],ae=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){return Object(r["a"])(this,a),t.apply(this,arguments)}return Object(o["a"])(a,[{key:"freightList",get:function(){return this.lists.freight_list||[]}}]),a}(p["e"]);Object(d["a"])([Object(p["c"])()],ae.prototype,"value",void 0),Object(d["a"])([Object(p["c"])({default:function(){return{}}})],ae.prototype,"lists",void 0),ae=Object(d["a"])([p["a"]],ae);var se=ae,le=se,ie=Object(h["a"])(le,ee,te,!1,null,null,null),ne=ie.exports,re=a("14c6"),oe=function(e){Object(c["a"])(a,e);var t=Object(u["a"])(a);function a(){var e;return Object(r["a"])(this,a),e=t.apply(this,arguments),e.loading=!0,e.activeName="basic",e.otherList={supplier_list:[],category_list:[],brand_list:[],unit_list:[],freight_list:[]},e.requireFields=[{fields:["code","name","category_id","goods_image"],activeName:"basic"},{fields:["spec_value_list[0].sell_price","spec_value_list[0].lineation_price","spec_value_list[0].stock"],activeName:"price"},{fields:["express_money","express_template_id"],activeName:"logistics"}],e.specData={spec_type:1,spec_value:[],spec_value_list:[],specs_single:{}},e.form={name:"",code:"",category_id:[],express_type:1,express_money:"",express_template_id:"",video_source:1,video_cover:"",video:"",supplier_id:"",brand_id:"",unit_id:"",poster:"",is_express:1,is_selffetch:1,delivery_type:1,goods_image:[],spec_value_list:[{id:"",image:"",sell_price:"",lineation_price:"",cost_price:"",stock:"",volume:"",weight:"",bar_code:""}],stock_warning:"",virtual_sales_num:"",status:0,content:""},e.rules={name:[{required:!0,message:"请输入商品名称",trigger:["blur","change"]}],code:[{required:!0,message:"请输入商品编码",trigger:["blur","change"]}],category_id:[{type:"array",required:!0,message:"请选择分类",trigger:["blur","change"]}],goods_image:[{type:"array",required:!0,message:"请添加商品轮播图",trigger:["blur","change"]}],video:[{required:!0,message:"请添加视频",trigger:["blur","change"]}],express_money:[{required:!0,message:"请输入运费金额",trigger:["blur","change"]}],express_template_id:[{required:!0,message:"请选择运费模板",trigger:["blur","change"]}]},e}return Object(o["a"])(a,[{key:"formChange",value:function(e){console.log(e)}},{key:"specDataChange",value:function(e){if(this.form.spec_type=e.spec_type,1==e.spec_type)return this.form.spec_value_list=[e.specs_single],void(this.form.spec_value=[]);this.form.spec_value_list=e.spec_value_list,this.form.spec_value=e.spec_value}},{key:"getGoodsDetail",value:function(){var e=this;Object(re["w"])(this.id).then((function(t){e.initData(t),e.form=t}))}},{key:"onNextStep",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch(this.activeName){case"basic":this.activeName="price";break;case"price":this.activeName=e?"logistics":"basic";break;case"logistics":this.activeName=e?"details":"price";break;case"details":this.activeName=e?"sales":"logistics";break;case"sales":this.activeName="details";break}}},{key:"handleSave",value:function(){var e=this;this.$refs.form.validate((function(t,a){if(!t){var s=e.requireFields.find((function(t){var s,l=n(t.fields);try{for(l.s();!(s=l.n()).done;){var i=s.value;if(a[i])return e.$message.error(a[i][0].message),!0}}catch(r){l.e(r)}finally{l.f()}}));return s&&(e.activeName=s.activeName),!1}var l=e.$loading({lock:!0,text:"保存中...",spinner:"el-icon-loading"}),i=e.id?Object(re["x"])(e.form):Object(re["n"])(e.form);i.then((function(){e.$router.go(-1)})).finally((function(){l.close()}))}))}},{key:"initData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[{has_image:!1,id:"",name:"",spec_list:[{id:"",value:"",image:""}]}],a=[{id:"",image:"",sell_price:"",lineation_price:"",cost_price:"",stock:"",volume:"",weight:"",bar_code:""}],s={spec_value:e.spec_value||t,spec_value_list:e.spec_value_list||a,spec_type:e.spec_type||1,specs_single:a[0]};s.spec_value.forEach((function(e){e.has_image=!1,e.spec_list.forEach((function(e){e.image=""}))})),1==e.spec_type&&(s.spec_value=t,s.specs_single=e.spec_value_list[0]),Object.assign(this.specData,s),this.loading=!1}},{key:"getGoodsOtherList",value:function(){var e=this;Object(re["z"])({type:"all"}).then((function(t){e.otherList=t}))}},{key:"created",value:function(){this.id=this.$route.query.id,this.getGoodsOtherList(),this.id?this.getGoodsDetail():this.initData()}}]),a}(p["e"]);Object(d["a"])([Object(p["f"])("form",{deep:!0})],oe.prototype,"formChange",null),Object(d["a"])([Object(p["f"])("specData",{deep:!0})],oe.prototype,"specDataChange",null),oe=Object(d["a"])([Object(p["a"])({components:{AddBasic:k,AddPrice:A,AddDetails:K,AddSales:Z,AddLogistics:ne}})],oe);var ce=oe,ue=ce,de=(a("bd99"),Object(h["a"])(ue,s,l,!1,null,"4d1b2cbb",null));t["default"]=de.exports},"6dcc":function(e,t,a){"use strict";a("212e")},"71c5":function(e,t,a){"use strict";a("a247")},7286:function(e,t,a){"use strict";a("4551")},a247:function(e,t,a){},bd99:function(e,t,a){"use strict";a("eb67")},eb67:function(e,t,a){}}]);
//# sourceMappingURL=chunk-e861c264.8e552a4a.js.map