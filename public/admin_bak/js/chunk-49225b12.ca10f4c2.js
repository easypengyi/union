(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49225b12"],{"15f3":function(t,e,r){},1610:function(t,e,r){"use strict";r("e733")},"192a":function(t,e,r){"use strict";r.d(e,"u",(function(){return s})),r.d(e,"q",(function(){return i})),r.d(e,"r",(function(){return o})),r.d(e,"t",(function(){return l})),r.d(e,"k",(function(){return n})),r.d(e,"p",(function(){return d})),r.d(e,"o",(function(){return c})),r.d(e,"s",(function(){return u})),r.d(e,"j",(function(){return f})),r.d(e,"n",(function(){return _})),r.d(e,"l",(function(){return m})),r.d(e,"m",(function(){return p})),r.d(e,"f",(function(){return v})),r.d(e,"e",(function(){return b})),r.d(e,"a",(function(){return h})),r.d(e,"g",(function(){return g})),r.d(e,"c",(function(){return y})),r.d(e,"h",(function(){return w})),r.d(e,"b",(function(){return x})),r.d(e,"i",(function(){return C})),r.d(e,"d",(function(){return D}));var a=r("f175"),s=function(){return a["a"].get("/order.order/otherLists")},i=function(t){return a["a"].get("/order.order/detail",{params:t})},o=function(t){return a["a"].get("/order.order/lists",{params:t})},l=function(t){return a["a"].post("/order.order/orderRemarks",t)},n=function(t){return a["a"].post("/order.order/cancel",t)},d=function(t){return a["a"].get("/order.order/deliveryInfo",{params:t})},c=function(t){return a["a"].post("/order.order/delivery",t)},u=function(t){return a["a"].get("/order.order/logistics",{params:t})},f=function(t){return a["a"].post("/order.order/addressEdit",t)},_=function(t){return a["a"].post("/order.order/confirm",t)},m=function(t){return a["a"].post("/order.order/changeExpressPrice",t)},p=function(t){return a["a"].post("/order.order/changePrice",t)},v=function(t){return a["a"].get("/after_sale.after_sale/lists",{params:t})},b=function(t){return a["a"].get("/after_sale.after_sale/detail",{params:t})},h=function(t){return a["a"].post("/after_sale.after_sale/agree",t)},g=function(t){return a["a"].post("/after_sale.after_sale/refuse",t)},y=function(t){return a["a"].post("/after_sale.after_sale/confirmGoods",t)},w=function(t){return a["a"].post("/after_sale.after_sale/refuseGoods",t)},x=function(t){return a["a"].post("/after_sale.after_sale/agreeRefund",t)},C=function(t){return a["a"].post("/after_sale.after_sale/refuseRefund",t)},D=function(t){return a["a"].post("/after_sale.after_sale/confirmRefund",t)}},"4ba2":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("header",[r("div",{staticClass:"ls-card"},[r("el-page-header",{attrs:{content:"售后详情"},on:{back:function(e){return t.$router.go(-1)}}})],1),r("div",{staticClass:"flex m-t-24"},[r("div",{staticClass:"ls-card flex flex-wrap col-stretch",staticStyle:{height:"320px"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"nr weight-500 m-b-20 title"},[t._v("售后信息")]),r("div",{staticClass:"flex col-top"},[r("el-form",{ref:"form",attrs:{model:t.orderData,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"售后状态"}},[r("div",[t._v(" "+t._s(t.orderData.after_sale.status_desc)+" ")]),t.orderData.after_sale.refund_image?r("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{fit:t.fit,src:t.orderData.after_sale.refund_image}}):t._e()],1),r("el-form-item",{attrs:{label:"售后单号"}},[t._v(" "+t._s(t.orderData.after_sale.sn||"")+" ")]),r("el-form-item",{attrs:{label:"售后类型"}},[t._v(" "+t._s(t.orderData.after_sale.refund_type_desc)+" ")]),r("el-form-item",{attrs:{label:"售后方式"}},[t._v(" "+t._s(t.orderData.after_sale.refund_method_desc)+" ")]),r("el-form-item",{attrs:{label:"申请时间"}},[t._v(" "+t._s(t.orderData.after_sale.create_time)+" ")])],1),r("el-form",{ref:"form",staticStyle:{"margin-left":"15vw"},attrs:{model:t.orderData,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"订单编号"}},[r("span",{staticClass:"order pointer",on:{click:function(e){return t.toOrder(t.orderData.after_sale.order_id)}}},[t._v(t._s(t.orderData.order_info.sn||"")+" ")])]),r("el-form-item",{attrs:{label:"售后原因"}},[t._v(" "+t._s(t.orderData.after_sale.refund_reason)+" ")]),r("el-form-item",{attrs:{label:"售后凭证"}},t._l(t.orderData.after_sale.voucher,(function(e,a){return r("div",{key:a,staticClass:"inline m-r-10"},[r("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e,fit:"fit"},on:{click:function(r){return t.reviews(e)}}})],1)})),0),r("el-form-item",{attrs:{label:"售后说明"}},[t._v(" "+t._s(t.orderData.after_sale.refund_remark||"-")+" ")])],1)],1)]),r("div",{staticClass:"flex col-bottom",staticStyle:{width:"100%"}},[r("div",{staticClass:"border-top flex col-bottom row-left p-t-24",staticStyle:{width:"100%"}},[t.orderData.btns.agree_btn?r("ls-dialog",{staticClass:"inline m-l-24",attrs:{title:"同意售后",width:"20vw"},on:{confirm:t.afterSaleAgree}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("同意售后")]),r("div",[t._v(" 提示：售后同意 ")])],1):t._e(),t.orderData.btns.refuse_btn?r("ls-dialog",{staticClass:"inline m-l-24",attrs:{title:"拒绝售后",width:"20vw"},on:{confirm:t.afterSaleRefuse}},[r("el-button",{staticStyle:{},attrs:{slot:"trigger",size:"small"},slot:"trigger"},[t._v("拒绝售后")]),r("div",[t._v(" 提示：请填写拒绝售后的原因 ")]),r("div",{staticClass:"flex m-t-12"},[r("span",{staticClass:"inline m-b-24",staticStyle:{width:"70px"}},[t._v("拒绝原因")]),r("el-input",{staticClass:"m-t-10",attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)],1):t._e(),t.orderData.btns.confirm_goods_btn?r("ls-dialog",{staticClass:"inline m-l-24",attrs:{title:"确认收货",width:"20vw"},on:{confirm:t.afterSaleConfirmGoods}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("确认收货")]),r("div",[t._v(" 提示：确认收货 ")])],1):t._e(),t.orderData.btns.refuse_goods_btn?r("ls-dialog",{staticClass:"inline m-l-24",attrs:{title:"拒绝收货",width:"20vw"},on:{confirm:t.afterSaleRefuseGoods}},[r("el-button",{staticStyle:{},attrs:{slot:"trigger",size:"small"},slot:"trigger"},[t._v("拒绝收货")]),r("div",[t._v(" 提示：请填写拒绝收货的原因 ")]),r("div",{staticClass:"flex m-t-12"},[r("span",{staticClass:"inline m-b-24",staticStyle:{width:"70px"}},[t._v("拒绝原因")]),r("el-input",{staticClass:"m-t-10",attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)],1):t._e(),t.orderData.btns.change_btn?r("ls-dialog",{staticClass:"inline m-l-24",attrs:{title:"确认退款",width:"20vw"},on:{confirm:t.afterSaleConfirmRefund}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("确认退款")]),r("div",{staticClass:"m-t-12"},[t._v(" 退款方式： "),r("el-radio",{attrs:{label:"1"},model:{value:t.refund_way,callback:function(e){t.refund_way=e},expression:"refund_way"}},[t._v("原路退回")]),r("el-radio",{attrs:{label:"2"},model:{value:t.refund_way,callback:function(e){t.refund_way=e},expression:"refund_way"}},[t._v("退回余额")])],1),r("div",{staticClass:"m-t-12"},[t._v(" 退款金额： "),r("span",{staticStyle:{color:"red"}},[t._v("¥"+t._s(t.orderData.goods_info.order_goods_sum.sum_refund_amount))])])],1):t._e(),t.orderData.btns.agree_refund_btn?r("ls-dialog",{staticClass:"inline m-l-24",attrs:{title:"同意退款",width:"20vw"},on:{confirm:t.afterSaleAgreeRefund}},[r("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("同意退款")]),r("div",[t._v(" 提示：该笔订单通过微信支付付款，同意售后申请后，退款将自动原路退回会员账户。 ")]),r("div",{staticClass:"m-t-12"},[t._v(" 退货方式： "+t._s(t.orderData.after_sale.refund_method_desc)+" ")]),r("div",{staticClass:"m-t-12"},[t._v(" 退款金额： "),r("span",{staticStyle:{color:"red"}},[t._v("¥"+t._s(t.orderData.goods_info.order_goods_sum.sum_refund_amount))])])],1):t._e(),t.orderData.btns.refuse_refund?r("ls-dialog",{staticClass:"inline m-l-24",attrs:{title:"拒绝退款",width:"20vw"},on:{confirm:t.afterSaleRefuseRefund}},[r("el-button",{staticStyle:{},attrs:{slot:"trigger",size:"small"},slot:"trigger"},[t._v("拒绝退款")]),r("div",[t._v(" 提示：请与会员协商后确认拒绝申请，会员可再次发起退款。 ")]),r("div",{staticClass:"m-t-12"},[t._v(" 退货方式： "+t._s(t.orderData.after_sale.refund_method_desc)+" ")]),r("div",{staticClass:"m-t-12"},[t._v(" 退款金额： "),r("span",{staticStyle:{color:"red"}},[t._v("¥"+t._s(t.orderData.goods_info.order_goods_sum.sum_refund_amount))])]),r("div",{staticClass:"flex m-t-12"},[r("span",{staticClass:"inline m-b-24",staticStyle:{width:"70px"}},[t._v("拒绝原因")]),r("el-input",{staticClass:"m-t-10",attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)],1):t._e()],1)])])])]),r("section",[r("div",{staticClass:"ls-card m-t-24 flex flex-wrap col-stretch",staticStyle:{height:"auto"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"nr weight-500 m-b-20 title"},[t._v("买家信息")]),r("el-form",{ref:"form",staticClass:"flex",attrs:{model:t.orderData,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"买家昵称"}},[r("div",{staticClass:"order pointer",on:{click:function(e){return t.toUserDetail()}}},[t._v(" "+t._s(t.orderData.return_goods_info.user_nickname)+"（"+t._s(t.orderData.return_goods_info.user_sn)+"） ")])])],1)],1)]),r("div",{staticClass:"ls-card m-t-24 "},[r("div",{staticClass:"nr weight-500 m-b-20 title"},[t._v("商品信息")]),r("el-table",{ref:"paneTable",staticStyle:{width:"100%"},attrs:{data:t.orderData.goods_info.order_goods,"header-cell-style":{background:"#f5f8ff",border:"none",color:"#666666",height:"60px",width:"100%"},size:"mini","summary-method":t.getSummaries,"show-summary":!0}},[r("el-table-column",{attrs:{label:"商品信息","min-width":"460"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"flex m-t-10"},[r("el-image",{staticClass:"flex-none",staticStyle:{width:"58px",height:"58px"},attrs:{src:e.row.goods_image}}),r("div",{staticClass:"m-l-8 flex-1"},[r("div",{staticClass:"line-2"},[t._v(" "+t._s(e.row.goods_name)+" ")]),r("div",{staticClass:"xs muted"},[t._v(" "+t._s(e.row.spec_value_str)+" ")])])],1)]}}])}),r("el-table-column",{attrs:{prop:"goods_price",label:"商品价格","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(e.row.goods_price))])]}}])}),r("el-table-column",{attrs:{prop:"goods_num",label:"购买数量","min-width":"180"}}),r("el-table-column",{attrs:{label:"商品总额",prop:"total_price","min-width":"180"}}),r("el-table-column",{attrs:{label:"优惠金额",prop:"discount_price","min-width":"180"}}),r("el-table-column",{attrs:{label:"商品实付总额",prop:"total_pay_price","min-width":"180"}})],1)],1)]),r("footer",{staticClass:"col-top"},[r("div",{staticClass:"ls-card m-r-24 m-t-24",staticStyle:{width:"100%"}},[r("div",{staticClass:"nr weight-500 m-b-20 title"},[t._v("售后金额")]),r("el-form",{ref:"form",attrs:{model:t.orderData,"label-width":"160px",size:"small"}},[r("el-form-item",{attrs:{label:"商品实付金额"}},[t._v(" "+t._s(t.orderData.goods_info.order_goods_sum.sum_total_pay_price)+" ")]),r("el-form-item",{attrs:{label:"商品售后数量"}},[t._v(" "+t._s(t.orderData.goods_info.order_goods_sum.sum_goods_num||0)+" ")]),r("el-form-item",{attrs:{label:"商品售后金额"}},[t._v(" "+t._s(t.orderData.goods_info.order_goods_sum.sum_total_price)+" ")]),r("el-form-item",{attrs:{label:"实际退款金额"}},[t._v(" "+t._s(t.orderData.goods_info.order_goods_sum.sum_refund_amount)+" ")])],1)],1),t.orderData.after_sale.express_name?r("div",{staticClass:"ls-card m-t-24",staticStyle:{height:"auto"}},[r("div",{staticStyle:{width:"100%"}},[r("div",{staticClass:"nr weight-500 m-b-20 title"},[t._v("退货信息")]),r("el-form",{ref:"form",attrs:{model:t.orderData,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"快递公司"}},[t._v(" "+t._s(t.orderData.after_sale.express_name)+" ")]),r("el-form-item",{attrs:{label:"快递单号"}},[t._v(" "+t._s(t.orderData.after_sale.invoice_no)+" ")]),r("el-form-item",{attrs:{label:"退货时间"}},[t._v(" "+t._s(t.orderData.after_sale.express_time)+" ")])],1)],1)]):t._e(),r("div",{staticClass:"ls-card m-t-24"},[r("div",{staticClass:"nr weight-500 m-b-20 title"},[t._v("售后日志")]),r("el-table",{ref:"paneTable",staticStyle:{width:"100%"},attrs:{data:t.orderData.after_sale_log,size:"mini"}},[r("el-table-column",{attrs:{label:"操作人",prop:"operator_name",width:"155"}}),r("el-table-column",{attrs:{prop:"content",label:"操作事件","min-width":"220"}}),r("el-table-column",{attrs:{prop:"create_time",label:"操作时间","min-width":"180"}})],1)],1)])])},s=[],i=r("d4ec"),o=r("bee2"),l=r("262e"),n=r("2caf"),d=(r("159b"),r("d81d"),r("a9e3"),r("9ab4")),c=r("1b40"),u=r("0a6d"),f=r("5cf7"),_=r("ffae"),m=r("192a"),p=function(t){Object(l["a"])(r,t);var e=Object(n["a"])(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.id=0,t.orderData={after_sale:{id:2,order_id:1,user_id:1,sn:"20210809184530062266134",refund_type:2,refund_type_desc:"商品售后",refund_method:1,refund_method_desc:"仅退款",status:1,status_desc:"售后中",refund_reason:"7天无理由",refund_remark:"",refund_image:"",create_time:"2021-08-09 18:45:30",express_name:"",invoice_no:"",express_remark:"",express_image:""},return_goods_info:{user_sn:"100001",user_nickname:"测试用户",user_mobile:"13800138000"},order_info:{order_status:3,order_status_desc:"已完成",sn:"SN0001",order_type:0,order_type_desc:"普通订单",order_terminal:1,order_terminal_desc:"微信小程序",create_time:"2021-08-05 16:35:31",pay_status:1,pay_status_desc:"已支付",pay_way:1,pay_way_desc:"微信支付",pay_time:"——",confirm_take_time:"——"},goods_info:{order_goods:[{item_image:"",spec_value_str:"黑色,L码",goods_name:"小米10青春版",goods_image:"",goods_price:"20.00",goods_num:1,total_price:null,discount_price:null,total_pay_price:"80.00",refund_amount:"50.00"}],order_goods_sum:{sum_refund_amount:50,sum_total_pay_price:80,sum_discount_price:0,sum_total_price:0,sum_goods_num:1}},after_sale_log:[{operator_role:3,operator_id:1,content:"卖家已确认退款，售后退款中",create_time:"2021-08-09 20:29:14",operator_name:"ljj"},{operator_role:3,operator_id:1,content:"卖家已同意,等待退款",create_time:"2021-08-09 20:24:57",operator_name:"ljj"},{operator_role:2,operator_id:1,content:"买家发起商品售后,等待卖家同意",create_time:"2021-08-09 18:45:30",operator_name:"测试用户"}],btns:{agree_btn:!1,refuse_btn:!1,refuse_goods_btn:!1,confirm_goods_btn:!1,agree_refund_btn:!0,refuse_refund:!0,change_btn:!1}},t.reason="",t.refund_total_amount="",t.refund_way="1",t}return Object(o["a"])(r,[{key:"toUserDetail",value:function(){this.$router.push({path:"/user/user_details",query:{id:this.orderData.after_sale.user_id}})}},{key:"reviews",value:function(t){window.open(t)}},{key:"getOrderDetail",value:function(){var t=this;Object(m["e"])({id:this.id}).then((function(e){t.orderData=e,t.refund_total_amount=e.goods_info.order_goods_sum.sum_refund_amount}))}},{key:"afterSaleAgree",value:function(){var t=this;Object(m["a"])({id:this.id}).then((function(e){t.getOrderDetail()}))}},{key:"afterSaleRefuse",value:function(){var t=this;Object(m["g"])({id:this.id}).then((function(e){t.getOrderDetail()}))}},{key:"afterSaleConfirmGoods",value:function(){var t=this;Object(m["c"])({id:this.id}).then((function(e){t.getOrderDetail()}))}},{key:"afterSaleRefuseGoods",value:function(){var t=this;Object(m["h"])({id:this.id}).then((function(e){t.getOrderDetail()}))}},{key:"afterSaleAgreeRefund",value:function(){var t=this;Object(m["b"])({id:this.id}).then((function(e){t.getOrderDetail()}))}},{key:"afterSaleRefuseRefund",value:function(){var t=this;Object(m["i"])({id:this.id}).then((function(e){t.getOrderDetail()}))}},{key:"afterSaleConfirmRefund",value:function(){var t=this;Object(m["d"])({id:this.id,refund_way:this.refund_way,refund_total_amount:this.refund_total_amount}).then((function(e){t.getOrderDetail()}))}},{key:"toOrder",value:function(t){this.$router.push({path:"/order/order_detail",query:{id:t}})}},{key:"getSummaries",value:function(t){var e=t.columns,r=t.data,a=[];return e.forEach((function(t,e){if(0!==e){var s=r.map((function(e){return Number(e[t.property])}));if(!s.every((function(t){return isNaN(t)}))){if(1==e)return;a[e]=s.reduce((function(t,e){var r=Number(e);return isNaN(r)?t:t+e}),0),2!==e&&(a[e]="¥"+a[e])}}else a[0]="总价"})),a}},{key:"created",value:function(){this.id=this.$route.query.id,this.id&&this.getOrderDetail()}}]),r}(c["e"]);p=Object(d["a"])([Object(c["a"])({components:{LsDialog:u["a"],AreaSelect:f["a"],OrderLogistics:_["a"]}})],p);var v=p,b=v,h=(r("c57a"),r("2877")),g=Object(h["a"])(b,a,s,!1,null,"79433b1c",null);e["default"]=g.exports},"5cf7":function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"area-select"},[r("el-cascader",{style:{width:t.width},attrs:{options:t.options},model:{value:t.areaValue,callback:function(e){t.areaValue=e},expression:"areaValue"}})],1)},s=[],i=r("d4ec"),o=r("bee2"),l=r("262e"),n=r("2caf"),d=r("9ab4"),c=r("0463"),u=r("1b40"),f=function(t){Object(l["a"])(r,t);var e=Object(n["a"])(r);function r(){var t;return Object(i["a"])(this,r),t=e.apply(this,arguments),t.options=c["a"],t}return Object(o["a"])(r,[{key:"areaValue",get:function(){return[this.province,this.city,this.district]},set:function(t){this.$emit("update:province",t[0]),this.$emit("update:city",t[1]),this.$emit("update:district",t[2])}}]),r}(u["e"]);Object(d["a"])([Object(u["c"])()],f.prototype,"province",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"city",void 0),Object(d["a"])([Object(u["c"])()],f.prototype,"district",void 0),Object(d["a"])([Object(u["c"])({default:"380px"})],f.prototype,"width",void 0),f=Object(d["a"])([u["a"]],f);var _=f,m=_,p=r("2877"),v=Object(p["a"])(m,a,s,!1,null,null,null);e["a"]=v.exports},c57a:function(t,e,r){"use strict";r("15f3")},d81d:function(t,e,r){"use strict";var a=r("23e7"),s=r("b727").map,i=r("1dde"),o=i("map");a({target:"Array",proto:!0,forced:!o},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},e733:function(t,e,r){},ffae:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"ls-dialog__trigger",on:{click:t.onTrigger}},[t._t("trigger")],2),r("el-dialog",{attrs:{"coustom-class":"ls-dialog__content",title:1==t.flag?"发货":"物流查询",visible:t.visible,width:"70vw",top:t.top,"modal-append-to-body":!1,center:"","before-close":t.close,"close-on-click-modal":!1}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:0==t.orderData.length,expression:"orderData.length == 0"}],staticStyle:{height:"75vh","overflow-x":"hidden"}},[r("div",[r("div",{staticClass:"nr weight-500 m-b-20"},[t._v("商品信息")]),r("el-table",{ref:"paneTable",staticStyle:{width:"100%"},attrs:{data:t.orderData.order_goods,size:"mini","summary-method":t.getSummaries,"show-summary":!0}},[r("el-table-column",{attrs:{label:"序号",prop:"id",width:"75"}}),r("el-table-column",{attrs:{label:"商品信息","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("div",{staticClass:"flex m-t-10"},[r("el-image",{staticClass:"flex-none",staticStyle:{width:"58px",height:"58px"},attrs:{src:e.row.goods_image}}),r("div",{staticClass:"m-l-8 flex-1"},[r("div",{staticClass:"line-2"},[t._v(" "+t._s(e.row.goods_name)+" ")])])],1)]}}])}),r("el-table-column",{attrs:{label:"","min-width":"150"}}),r("el-table-column",{attrs:{prop:"spec_value_str",label:"商品规格","min-width":"150"}}),r("el-table-column",{attrs:{prop:"goods_price",label:"商品价格","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ¥"+t._s(e.row.goods_price)+" ")]}}])}),r("el-table-column",{attrs:{prop:"goods_num",label:"购买数量","min-width":"120"}}),r("el-table-column",{attrs:{label:"优惠金额",prop:"discount_price","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ¥"+t._s(e.row.discount_price)+" ")]}}])}),r("el-table-column",{attrs:{label:"商品实付总额",prop:"total_pay_price","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" ¥"+t._s(e.row.total_pay_price)+" ")]}}])})],1)],1),1==t.flag?r("div",{staticClass:"m-t-30"},[r("div",{staticClass:"nr weight-500 m-b-20"},[t._v("收货信息")]),r("div",{staticClass:"flex"},[r("div",{staticClass:"m-r-24"},[t._v("收货人： "+t._s(t.orderData.contact))]),r("div",{staticClass:"m-r-24"},[t._v("收货人手机号码： "+t._s(t.orderData.mobile))]),r("div",{staticClass:"m-r-24"},[t._v("收货人地址： "+t._s(t.orderData.delivery_address))])])]):t._e(),1==t.flag?r("div",{staticClass:"m-t-30"},[r("div",{staticClass:"nr weight-500 m-b-20"},[t._v("物流配送")]),r("div",{staticClass:"flex"},[r("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"配送方式"}},[r("el-radio",{attrs:{label:1},model:{value:t.form.send_type,callback:function(e){t.$set(t.form,"send_type",e)},expression:"form.send_type"}},[t._v("需要物流")]),r("el-radio",{attrs:{label:2},model:{value:t.form.send_type,callback:function(e){t.$set(t.form,"send_type",e)},expression:"form.send_type"}},[t._v("无需物流")])],1),1==t.form.send_type?r("el-form-item",{attrs:{label:"物流公司"}},[r("el-input",{staticStyle:{width:"530px"},attrs:{placeholder:"请输入快递单号"},model:{value:t.form.invoice_no,callback:function(e){t.$set(t.form,"invoice_no",e)},expression:"form.invoice_no"}},[r("template",{slot:"prepend"},[r("div",[r("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:t.form.express_id,callback:function(e){t.$set(t.form,"express_id",e)},expression:"form.express_id"}},t._l(t.orderData.express,(function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)])],2)],1):t._e(),r("el-form-item",{attrs:{label:"发货备注"}},[r("el-input",{staticClass:"m-t-10",staticStyle:{width:"530px"},attrs:{type:"textarea",rows:7,placeholder:"请输入内容"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1)]):t._e(),0==t.flag?r("div",{staticClass:"m-t-30"},[r("div",{staticClass:"nr weight-500 m-b-20"},[t._v("物流信息")]),r("div",{staticClass:"flex"},[r("div",{staticClass:"m-r-24"},[t._v("发货时间： "+t._s(t.orderData.express_time))]),r("div",{staticClass:"m-r-24"},[t._v("物流公司： "+t._s(t.orderData.express_name||"无"))]),r("div",{staticClass:"m-r-24"},[t._v("物流单号 "+t._s(t.orderData.invoice_no||"无"))])])]):t._e(),0==t.flag?r("div",{staticClass:"m-t-30"},[r("div",{staticClass:"nr weight-500 m-b-20"},[t._v("物流轨迹")]),1==t.orderData.send_type?r("div",[r("el-table",{ref:"paneTable",staticStyle:{width:"100%"},attrs:{data:t.orderData.traces,size:"mini"}},[r("el-table-column",{attrs:{label:"日期",prop:"0","min-width":"205"}}),r("el-table-column",{attrs:{label:"轨迹",prop:"1","min-width":"405"}})],1)],1):r("div",{staticClass:"nr weight-500 m-t-60 flex row-center"},[t._v(" 无需物流 ")])]):t._e()]),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleEvent("cancel")}}},[t._v("取消")]),1==t.flag?r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleEvent("confirm")}}},[t._v("发货")]):r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleEvent("cancel")}}},[t._v("确认")])],1)])],1)},s=[],i=r("5530"),o=r("d4ec"),l=r("bee2"),n=r("262e"),d=r("2caf"),c=(r("159b"),r("d81d"),r("a9e3"),r("9ab4")),u=r("1b40"),f=r("192a"),_=function(t){Object(n["a"])(r,t);var e=Object(d["a"])(r);function r(){var t;return Object(o["a"])(this,r),t=e.apply(this,arguments),t.visible=!1,t.fullscreenLoading=!1,t.orderData={traces:{}},t.form={send_type:1,express_id:"",invoice_no:"",remark:""},t}return Object(l["a"])(r,[{key:"getOrderDeliveryInfo",value:function(){var t=this;Object(f["p"])({id:this.id}).then((function(e){t.orderData=e,t.fullscreenLoading=!1}))}},{key:"getOrderLogistics",value:function(){var t=this;Object(f["s"])({id:this.id}).then((function(e){t.orderData=e,t.fullscreenLoading=!1}))}},{key:"orderDelivery",value:function(){var t=this;Object(f["o"])(Object(i["a"])({id:this.id},this.form)).then((function(e){t.$emit("update",""),t.getOrderLogistics()}))}},{key:"getSummaries",value:function(t){var e=t.columns,r=t.data,a=[];return e.forEach((function(t,e){if(0!==e){var s=r.map((function(e){return Number(e[t.property])}));if(!s.every((function(t){return isNaN(t)}))){if(4==e)return;a[e]=s.reduce((function(t,e){var r=Number(e);return isNaN(r)?t:t+e}),0),5!==e&&3!==e&&(a[e]="¥"+a[e])}}else a[2]="总价"})),a}},{key:"handleEvent",value:function(t){if("cancel"===t&&this.close(),"confirm"===t){if(this.flag&&1==this.form.send_type){if(""==this.form.express_id)return this.$message.error("请选择快递公司");if(""==this.form.invoice_no)return this.$message.error("请填写快递单号")}this.orderDelivery(),this.close()}}},{key:"onTrigger",value:function(){this.fullscreenLoading=!0,1==this.flag?this.getOrderDeliveryInfo():this.getOrderLogistics(),console.log("打开弹窗再请求"),this.visible=!0}},{key:"close",value:function(){this.visible=!1}}]),r}(u["e"]);Object(c["a"])([Object(u["c"])({default:"5vh"})],_.prototype,"top",void 0),Object(c["a"])([Object(u["c"])({default:"0"})],_.prototype,"id",void 0),Object(c["a"])([Object(u["c"])({default:!0})],_.prototype,"flag",void 0),Object(c["a"])([Object(u["c"])({default:""})],_.prototype,"isShow",void 0),_=Object(c["a"])([u["a"]],_);var m=_,p=m,v=(r("1610"),r("2877")),b=Object(v["a"])(p,a,s,!1,null,"46b98320",null);e["a"]=b.exports}}]);
//# sourceMappingURL=chunk-49225b12.ca10f4c2.js.map