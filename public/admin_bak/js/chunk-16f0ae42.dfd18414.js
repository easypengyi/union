(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16f0ae42"],{"14c6":function(t,e,o){"use strict";o.d(e,"n",(function(){return s})),o.d(e,"x",(function(){return r})),o.d(e,"y",(function(){return n})),o.d(e,"u",(function(){return a})),o.d(e,"C",(function(){return l})),o.d(e,"v",(function(){return c})),o.d(e,"B",(function(){return u})),o.d(e,"w",(function(){return d})),o.d(e,"z",(function(){return f})),o.d(e,"A",(function(){return p})),o.d(e,"a",(function(){return g})),o.d(e,"e",(function(){return m})),o.d(e,"f",(function(){return v})),o.d(e,"b",(function(){return b})),o.d(e,"c",(function(){return h})),o.d(e,"d",(function(){return _})),o.d(e,"E",(function(){return y})),o.d(e,"H",(function(){return k})),o.d(e,"F",(function(){return C})),o.d(e,"G",(function(){return w})),o.d(e,"D",(function(){return O})),o.d(e,"L",(function(){return j})),o.d(e,"I",(function(){return x})),o.d(e,"J",(function(){return L})),o.d(e,"K",(function(){return $})),o.d(e,"g",(function(){return z})),o.d(e,"l",(function(){return R})),o.d(e,"h",(function(){return D})),o.d(e,"m",(function(){return S})),o.d(e,"i",(function(){return T})),o.d(e,"k",(function(){return G})),o.d(e,"j",(function(){return A})),o.d(e,"M",(function(){return E})),o.d(e,"P",(function(){return U})),o.d(e,"N",(function(){return q})),o.d(e,"O",(function(){return I})),o.d(e,"r",(function(){return P})),o.d(e,"q",(function(){return J})),o.d(e,"s",(function(){return M})),o.d(e,"t",(function(){return N})),o.d(e,"p",(function(){return B})),o.d(e,"o",(function(){return F}));var i=o("f175"),s=function(t){return i["a"].post("/goods.goods/add",t)},r=function(t){return i["a"].post("/goods.goods/edit",t)},n=function(t){return i["a"].get("/goods.goods/lists",{params:t})},a=function(t){return i["a"].get("/goods.goods/commonLists",{params:t})},l=function(t){return i["a"].post("/goods.goods/status",t)},c=function(t){return i["a"].post("/goods.goods/del",t)},u=function(t){return i["a"].post("/goods.goods/sort",t)},d=function(t){return i["a"].get("/goods.goods/detail",{params:{id:t}})},f=function(t){return i["a"].get("/goods.goods/otherList",{params:t})},p=function(t){return i["a"].post("goods.goods/rename ",t)},g=function(t){return i["a"].post("/goods.goods_brand/add",t)},m=function(t){return i["a"].get("/goods.goods_brand/lists",{params:t})},v=function(t){return i["a"].post("/goods.goods_brand/status",t)},b=function(t){return i["a"].post("/goods.goods_brand/del",t)},h=function(t){return i["a"].get("/goods.goods_brand/detail",{params:{id:t}})},_=function(t){return i["a"].post("/goods.goods_brand/edit",t)},y=function(t){return i["a"].post("/goods.goods_supplier_category/add",t)},k=function(t){return i["a"].get("goods.goods_supplier_category/lists",{params:t})},C=function(t){return i["a"].post("goods.goods_supplier_category/del",{id:t})},w=function(t){return i["a"].post("goods.goods_supplier_category/edit",t)},O=function(t){return i["a"].post("/goods.goods_supplier/add",t)},j=function(t){return i["a"].get("/goods.goods_supplier/lists",{params:t})},x=function(t){return i["a"].post("goods.goods_supplier/del",{id:t})},L=function(t){return i["a"].get("/goods.goods_supplier/detail",{params:{id:t}})},$=function(t){return i["a"].post("/goods.goods_supplier/edit",t)},z=function(t){return i["a"].post("/goods.goods_category/add",t)},R=function(t){return i["a"].get("/goods.goods_category/lists",{params:t})},D=function(t){return i["a"].get("/goods.goods_category/commonLists",{params:t})},S=function(t){return i["a"].post("/goods.goods_category/status",t)},T=function(t){return i["a"].post("goods.goods_category/del",{id:t})},G=function(t){return i["a"].post("/goods.goods_category/edit",t)},A=function(t){return i["a"].get("/goods.goods_category/detail",{params:{id:t}})},E=function(t){return i["a"].post("/goods.goods_unit/add",t)},U=function(t){return i["a"].get("/goods.goods_unit/lists",{params:t})},q=function(t){return i["a"].post("goods.goods_unit/del",{id:t})},I=function(t){return i["a"].post("/goods.goods_unit/edit",t)},P=function(t){return i["a"].get("goods.goods_comment/lists",{params:t})},J=function(t){return i["a"].post("goods.goods_comment/del",t)},M=function(t){return i["a"].post("goods.goods_comment/reply",t)},N=function(t){return i["a"].post("/goods.goods_comment/status",t)},B=function(t){return i["a"].get("goods.goods_comment_assistant/lists",{params:t})},F=function(t){return i["a"].post("goods.goods_comment_assistant/add",t)}},"31d6":function(t,e,o){},"568b":function(t,e,o){"use strict";o("31d6")},"623a":function(t,e,o){"use strict";o.d(e,"f",(function(){return s})),o.d(e,"d",(function(){return r})),o.d(e,"e",(function(){return n})),o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return l})),o.d(e,"b",(function(){return c}));var i=o("f175"),s=function(t){return i["a"].get("/live.LiveRoom/lists",{params:t})},r=function(t){return i["a"].post("/live.LiveRoom/add",t)},n=function(t){return i["a"].post("/live.LiveRoom/del",t)},a=function(t){return i["a"].get("/live.LiveGoods/lists",{params:t})},l=function(t){return i["a"].post("/live.LiveGoods/add",t)},c=function(t){return i["a"].post("/live.LiveGoods/del",t)}},"98c2":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"add-broadcast-goods"},[o("div",{staticClass:"ls-card"},[o("el-page-header",{attrs:{content:"add"===t.mode?"添加直播商品":""},on:{back:function(e){return t.$router.go(-1)}}})],1),o("el-form",{ref:"formRef",attrs:{rules:t.formRules,model:t.form,"label-width":"120px",size:"small"}},[o("div",{staticClass:"ls-card m-t-16"},[o("div",{staticClass:"card-content m-t-24"},[o("el-form-item",{attrs:{label:"产品来源",prop:"",required:""}},[o("el-select",{attrs:{placeholder:"请选择产品来源"},model:{value:t.goodsType,callback:function(e){t.goodsType=e},expression:"goodsType"}},[o("el-option",{attrs:{label:"商品库",value:"1"}}),o("el-option",{attrs:{label:"自定义",value:"2"}})],1),"1"==t.goodsType?o("div",{staticClass:"m-t-16"},[o("ls-goods-select",{attrs:{title:"选择商品"},on:{getGoods:t.getGoods}},[o("el-button",{attrs:{slot:"trigger",type:"primary",size:"small"},slot:"trigger"},[t._v("选择商品")])],1)],1):t._e()],1),o("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[o("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"商品封面",prop:"image"}},[o("el-upload",{class:t.ishide?"hide":"",attrs:{action:t.action,headers:{token:t.$store.getters.token,version:t.version},"list-type":"picture-card",limit:1,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"on-error":t.handleError}},[o("i",{staticClass:"el-icon-plus"})]),o("div",{staticClass:"muted xs m-r-16"},[t._v("建议尺寸：200像素 * 200像素，图片尺寸不能超过300像素 * 300像素。")])],1),o("el-form-item",{attrs:{label:"价格形式",prop:"price_type"}},[o("div",{},[o("el-radio",{attrs:{label:1},model:{value:t.form.price_type,callback:function(e){t.$set(t.form,"price_type",e)},expression:"form.price_type"}},[o("span",{staticClass:"m-r-30 first-desc"},[t._v("一口价")]),o("span",{staticClass:"m-r-5"},[t._v("价格")]),o("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),o("span",{staticClass:"m-l-5"},[t._v("元")])],1)],1),o("div",{staticClass:"m-t-16"},[o("el-radio",{attrs:{label:2},model:{value:t.form.price_type,callback:function(e){t.$set(t.form,"price_type",e)},expression:"form.price_type"}},[o("span",{staticClass:"m-r-20 first-desc"},[t._v("价格区间")]),o("span",{staticClass:"m-r-5"},[t._v("价格")]),o("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),o("span",{staticClass:"m-l-5"},[t._v("元")]),o("span",{staticClass:"m-l-5 m-r-5"},[t._v("-")]),o("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price2,callback:function(e){t.$set(t.form,"price2",e)},expression:"form.price2"}}),o("span",{staticClass:"m-l-5"},[t._v("元")])],1)],1),o("div",{staticClass:"m-t-16"},[o("el-radio",{attrs:{label:3},model:{value:t.form.price_type,callback:function(e){t.$set(t.form,"price_type",e)},expression:"form.price_type"}},[o("span",{staticClass:"m-r-10 first-desc"},[t._v("显示折扣价")]),o("span",{staticClass:"m-r-5"},[t._v("原价")]),o("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),o("span",{staticClass:"m-l-5"},[t._v("元")]),o("span",{staticClass:"m-l-5 m-r-5"},[t._v("现价")]),o("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price2,callback:function(e){t.$set(t.form,"price2",e)},expression:"form.price2"}}),o("span",{staticClass:"m-l-5"},[t._v("元")])],1)],1)]),o("el-form-item",{attrs:{label:"商品链接",prop:"url"}},[o("el-input",{attrs:{placeholder:"请输入商品链接"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),o("div",{staticClass:"muted xs m-r-16"},[t._v(" 请确保小程序页面路径可被访问，例如：pages/goods_details/goods_details?id=goods_id ")])],1)],1)])]),o("div",{staticClass:"bg-white ls-fixed-footer"},[o("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[o("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("保存")])],1)])],1)},s=[],r=o("d4ec"),n=o("bee2"),a=o("262e"),l=o("2caf"),c=(o("b0c0"),o("9ab4")),u=o("1b40"),d=o("4201"),f=o("b3ad"),p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"ls-dialog__trigger",on:{click:t.onTrigger}},[t._t("trigger")],2),o("el-dialog",{attrs:{"coustom-class":"ls-dialog__content",title:t.title,visible:t.visible,width:t.width,top:t.top,"modal-append-to-body":!1,center:"","before-close":t.close,"close-on-click-modal":!1,"append-to-body":!0}},[o("div",{},[o("el-form",{staticClass:"ls-form",attrs:{inline:"",model:t.form,"label-width":"70px",size:"small"}},[o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getList}},[t._v("查询")]),o("el-button",{attrs:{size:"small"},on:{click:t.onReset}},[t._v("重置")])],1),o("div",{staticClass:"list-table m-t-16"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.pager.loading,expression:"pager.loading"}],staticStyle:{width:"100%"},attrs:{height:"420",data:t.pager.lists,size:"mini","header-cell-style":{background:"#f5f8ff"},"highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[o("el-table-column",{attrs:{prop:"",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("div",{staticClass:"flex"},[o("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:e.row.image}}),o("div",{staticClass:"m-l-10"},[t._v(t._s(e.row.name))])],1)]}}])}),o("el-table-column",{attrs:{prop:"price",label:"价格"}}),o("el-table-column",{attrs:{prop:"total_stock",label:"库存"}})],1)],1),o("div",{staticClass:"flex row-right m-t-16 row-right "},[o("ls-pagination",{on:{change:function(e){return t.getList()}},model:{value:t.pager,callback:function(e){t.pager=e},expression:"pager"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("取消")]),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.onSubmit}},[t._v("确认")])],1)])],1)},g=[],m=o("5530"),v=o("14c6"),b=o("6ddb"),h=o("3c50"),_=function(t){Object(a["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(r["a"])(this,o),t=e.apply(this,arguments),t.visible=!1,t.form={keyword:""},t.pager=new b["a"],t.currentRow={},t}return Object(n["a"])(o,[{key:"onTrigger",value:function(){this.getList(),this.visible=!0}},{key:"close",value:function(){this.visible=!1,this.form.keyword=""}},{key:"onSubmit",value:function(){return"{}"==JSON.stringify(this.currentRow)||null==this.currentRow?this.$message.error("请选择商品"):(console.log("确定选中",this.currentRow),this.$emit("getGoods",this.currentRow),void(this.visible=!1))}},{key:"getList",value:function(){this.pager.request({callback:v["y"],params:Object(m["a"])({},this.form)}).then((function(t){}))}},{key:"onReset",value:function(){this.form.keyword="",this.getList()}},{key:"handleCurrentChange",value:function(t){this.currentRow=t}}]),o}(u["e"]);Object(c["a"])([Object(u["c"])({default:"选择商品"})],_.prototype,"title",void 0),Object(c["a"])([Object(u["c"])({default:"880px"})],_.prototype,"width",void 0),Object(c["a"])([Object(u["c"])({default:"10vh"})],_.prototype,"top",void 0),_=Object(c["a"])([Object(u["a"])({components:{LsPagination:h["a"]}})],_);var y=_,k=y,C=o("2877"),w=Object(C["a"])(k,p,g,!1,null,"14fd3644",null),O=w.exports,j=o("623a"),x=o("d70b"),L=function(t){Object(a["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(r["a"])(this,o),t=e.apply(this,arguments),t.action="".concat(x["a"].baseURL,"/adminapi/upload/wechatMaterial"),t.version=x["a"].version,t.ishide=!1,t.mode=d["f"]["ADD"],t.goodsType="1",t.form={name:"",image:"",price_type:1,price:0,price2:0,url:""},t.allPrice={},t.formRules={name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],image:[{required:!0,message:"请选择图片",trigger:"blur"}],url:[{required:!0,message:"请输入商品链接",trigger:"change"}],price_type:[{required:!0,message:"请选择价格类型",trigger:"change"}]},t.selecGoods={},t}return Object(n["a"])(o,[{key:"getGoods",value:function(t){null!=t&&(console.log("确定选中商品",t),this.selecGoods=t,this.form.url="pages/goods_details/goods_details?id="+t.id,this.form.name=t.name,this.form.price=t.min_price)}},{key:"onSubmit",value:function(){var t=this;this.$refs.formRef.validate((function(e){e&&(console.log("发送请求"),t.liveGoodsAdd())}))}},{key:"liveGoodsAdd",value:function(){var t=this;Object(j["a"])(this.form).then((function(e){setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(t){console.log("err:",t)}))}},{key:"handleRemove",value:function(t,e){console.log("删除成功",t,e),this.ishide=!1}},{key:"handleSuccess",value:function(t,e,o){this.form.image=t.data.media_id,console.log("上传成功",t),this.ishide=!0}},{key:"handleError",value:function(t,e){this.$message.error("".concat(e.name,"文件上传失败"))}},{key:"handleExceed",value:function(){this.$message.error("超出上传上限，请重新上传")}}]),o}(u["e"]);L=Object(c["a"])([Object(u["a"])({components:{MaterialSelect:f["a"],LsGoodsSelect:O}})],L);var $=L,z=$,R=(o("b5fd"),Object(C["a"])(z,i,s,!1,null,"7b24fd97",null));e["default"]=R.exports},b3ad:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():o("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[o("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(e,i){return o("div",{key:e+i,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,i)}}},[t.$scopedSlots.preview?o("div",[t._t("preview",null,{item:t.imageUri(e)})],2):o("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(e)},size:t.size}}),t.enableDelete?o("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(i)}}}):t._e()],1)})),0),o("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?o("div",[t._t("upload")],2):o("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():o("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),o("div",{staticClass:"material-wrap"},[o("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},s=[],r=o("d4ec"),n=o("bee2"),a=o("262e"),l=o("2caf"),c=(o("d81d"),o("a434"),o("99af"),o("9ab4")),u=o("1b40"),d=o("0a6d"),f=o("c6fe"),p=o("e915"),g=o("b76a"),m=o.n(g),v=function(t){Object(a["a"])(o,t);var e=Object(l["a"])(o);function o(){var t;return Object(r["a"])(this,o),t=e.apply(this,arguments),t.isAdd=!0,t.fileList=[],t}return Object(n["a"])(o,[{key:"showUpload",get:function(){var t=this.fileList,e=this.limit;return e-t.length>0}},{key:"meterialLimit",get:function(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}},{key:"tipsText",get:function(){switch(this.type){case"image":return"图片";case"video":return"视频"}}},{key:"imageUri",get:function(){var t=this;return function(e){return t.enableDomain?e:t.$getImageUri(e)}}},{key:"valueChange",value:function(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}},{key:"showDialog",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=arguments.length>1?arguments[1]:void 0;this.disabled||(this.isAdd=e,void 0!==o&&(this.currentIndex=o),null===(t=this.$refs.materialDialog)||void 0===t||t.onTrigger())}},{key:"selectChange",value:function(t){this.select=t}},{key:"handleConfirm",value:function(){var t=this;this.$refs.material.clearSelectList();var e=this.select.map((function(e){return t.enableDomain?e.uri:e.url}));this.isAdd?this.fileList=this.fileList.concat(e):this.fileList.splice(this.currentIndex,1,e.shift()),this.handleChange()}},{key:"delImage",value:function(t){this.fileList.splice(t,1),this.handleChange()}},{key:"handleChange",value:function(){var t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}}]),o}(u["e"]);Object(c["a"])([Object(u["c"])({default:function(){return[]}})],v.prototype,"value",void 0),Object(c["a"])([Object(u["c"])({default:1})],v.prototype,"limit",void 0),Object(c["a"])([Object(u["c"])({default:"100"})],v.prototype,"size",void 0),Object(c["a"])([Object(u["c"])({default:!1})],v.prototype,"disabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],v.prototype,"dragDisabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],v.prototype,"hiddenTrigger",void 0),Object(c["a"])([Object(u["c"])({default:"image"})],v.prototype,"type",void 0),Object(c["a"])([Object(u["c"])({default:"transparent"})],v.prototype,"uploadBg",void 0),Object(c["a"])([Object(u["c"])({default:!0})],v.prototype,"enableDomain",void 0),Object(c["a"])([Object(u["c"])({default:!0})],v.prototype,"enableDelete",void 0),Object(c["a"])([Object(u["f"])("value",{immediate:!0})],v.prototype,"valueChange",null),v=Object(c["a"])([Object(u["a"])({components:{LsDialog:d["a"],LsMaterial:f["a"],Draggable:m.a,FileItem:p["a"]}})],v);var b=v,h=b,_=(o("568b"),o("2877")),y=Object(_["a"])(h,i,s,!1,null,"1503bff6",null);e["a"]=y.exports},b5fd:function(t,e,o){"use strict";o("d974")},d974:function(t,e,o){}}]);
//# sourceMappingURL=chunk-16f0ae42.dfd18414.js.map