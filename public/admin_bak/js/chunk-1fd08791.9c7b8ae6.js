(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fd08791"],{"0783":function(t,e,i){"use strict";i("539b")},1832:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"ls-add-admin"},[a("div",{staticClass:"ls-card"},[a("el-page-header",{attrs:{content:e.identity?"编辑管理员":"添加管理员"},on:{back:function(t){return e.$router.go(-1)}}})],1),a("div",{staticClass:"ls-card m-t-16"},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"账号",prop:"account"}},[a("el-input",{staticClass:"ls-input",attrs:{maxlength:"8","show-word-limit":"",placeholder:"请输入账号"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticClass:"ls-input",attrs:{maxlength:"8","show-word-limit":"",placeholder:"请输入名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"角色",prop:"role_id"}},[a("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.form.role_id,callback:function(t){e.$set(e.form,"role_id",t)},expression:"form.role_id"}},e._l(e.roleList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":"",placeholder:"请输入密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"password_confirm"}},[a("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":"",placeholder:"请输入确认密码"},model:{value:e.form.password_confirm,callback:function(t){e.$set(e.form,"password_confirm",t)},expression:"form.password_confirm"}})],1),a("el-form-item",{attrs:{label:"管理员状态"}},[a("el-switch",{attrs:{"active-value":0,"inactive-value":1,"active-color":e.styleConfig.primary,"inactive-color":"#f4f4f5"},on:{change:function(e){return t.$set(t.form,"disable",e)}},model:{value:e.form.disable,callback:function(t){e.$set(e.form,"disable",t)},expression:"form.disable"}})],1),a("el-form-item",{attrs:{label:"支持多处登录"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":e.styleConfig.primary,"inactive-color":"#f4f4f5"},on:{change:function(e){return t.$set(t.form,"multipoint_login",e)}},model:{value:e.form.multipoint_login,callback:function(t){e.$set(e.form,"multipoint_login",t)},expression:"form.multipoint_login"}})],1),a("el-form-item",{attrs:{label:"管理员头像"}},[a("material-select",{attrs:{limit:1},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}})],1)],1)],1),a("div",{staticClass:"bg-white ls-fixed-footer"},[a("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")])],1)])])},r=[],s=i("5530"),n=i("d4ec"),o=i("bee2"),l=i("262e"),c=i("2caf"),u=(i("d81d"),i("b64b"),i("9ab4")),d=i("1b40"),f=i("68eb"),m=i("4201"),p=i("b3ad"),h=function(t){Object(l["a"])(i,t);var e=Object(c["a"])(i);function i(){var t;return Object(n["a"])(this,i),t=e.apply(this,arguments),t.mode=m["f"]["ADD"],t.identity=null,t.roleList=[],t.form={account:"",name:"",password:"",password_confirm:"",role_id:"",disable:0,multipoint_login:1,avatar:""},t.validatePassword=[{required:!0,message:"请输入密码",trigger:"blur"},{validator:function(t,e,i){e?i():i(new Error("请输入密码"))},trigger:"blur"}],t.validatePasswordConfirm=[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:function(e,i,a){t.form.password&&(i||a(new Error("请再次输入密码")),i!==t.form.password&&a(new Error("两次输入密码不一致!"))),a()},trigger:"blur"}],t.rules={account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],role_id:[{required:!0,message:"请选择角色",trigger:"change"}],password:[],password_confirm:[]},t}return Object(o["a"])(i,[{key:"onSubmit",value:function(t){var e=this,i=this.$refs[t];i.validate((function(t){if(t)switch(e.mode){case m["f"]["ADD"]:return e.handleAdminAdd();case m["f"]["EDIT"]:return e.handleAdminEdit()}}))}},{key:"handleAdminAdd",value:function(){var t=this,e=this.form;Object(f["a"])(e).then((function(){t.$message.success("添加成功!"),setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("保存失败!")}))}},{key:"handleAdminEdit",value:function(){var t=this,e=this.form,i=this.identity;Object(f["d"])(Object(s["a"])(Object(s["a"])({},e),{},{id:i})).then((function(){t.$message.success("修改成功!"),setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("保存失败!")}))}},{key:"geRoleList",value:function(){var t=this;Object(f["k"])({page_type:1}).then((function(e){t.roleList=e.lists}))}},{key:"initFormDataForAdminEdit",value:function(){var t=this;Object(f["c"])({id:this.identity}).then((function(e){Object.keys(e).map((function(i){t.$set(t.form,i,e[i])})),console.log(t.form)})).catch((function(){t.$message.error("数据初始化失败，请刷新重载！")}))}},{key:"created",value:function(){var t=this.$route.query;t.mode&&(this.mode=t.mode),this.mode===m["f"]["EDIT"]&&(this.identity=1*t.id,this.initFormDataForAdminEdit()),this.mode===m["f"]["ADD"]&&(this.$set(this.rules,"password",this.validatePassword),this.$set(this.rules,"password_confirm",this.validatePasswordConfirm)),this.geRoleList()}},{key:"changePasswordInput",value:function(t){this.mode===m["f"]["EDIT"]&&(t?this.$set(this.rules,"password_confirm",this.validatePasswordConfirm):this.$set(this.rules,"password_confirm",[]))}}]),i}(d["e"]);Object(u["a"])([Object(d["f"])("form.password")],h.prototype,"changePasswordInput",null),h=Object(u["a"])([Object(d["a"])({components:{MaterialSelect:p["a"]}})],h);var b=h,g=b,v=(i("0783"),i("2877")),w=Object(v["a"])(g,a,r,!1,null,"ea7396b6",null);e["default"]=w.exports},"31d6":function(t,e,i){},"539b":function(t,e,i){},"568b":function(t,e,i){"use strict";i("31d6")},"68eb":function(t,e,i){"use strict";i.d(e,"e",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return o})),i.d(e,"d",(function(){return l})),i.d(e,"k",(function(){return c})),i.d(e,"i",(function(){return u})),i.d(e,"g",(function(){return d})),i.d(e,"j",(function(){return f})),i.d(e,"h",(function(){return m})),i.d(e,"f",(function(){return p}));var a=i("f175"),r=function(t){return a["a"].get("/auth.admin/lists",{params:t})},s=function(t){return a["a"].get("/auth.admin/detail",{params:t})},n=function(t){return a["a"].post("/auth.admin/add",t)},o=function(t){return a["a"].post("/auth.admin/delete",t)},l=function(t){return a["a"].post("/auth.admin/edit",t)},c=function(t){return a["a"].get("/auth.role/lists",{params:t})},u=function(t){return a["a"].get("/auth.role/detail",{params:t})},d=function(t){return a["a"].post("/auth.role/add",t)},f=function(t){return a["a"].post("/auth.role/edit",t)},m=function(t){return a["a"].post("/auth.role/delete",t)},p=function(){return a["a"].post("/config/getMenu")}},b3ad:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():i("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[i("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(e,a){return i("div",{key:e+a,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,a)}}},[t.$scopedSlots.preview?i("div",[t._t("preview",null,{item:t.imageUri(e)})],2):i("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(e)},size:t.size}}),t.enableDelete?i("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(a)}}}):t._e()],1)})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?i("div",[t._t("upload")],2):i("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():i("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),i("div",{staticClass:"material-wrap"},[i("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},r=[],s=i("d4ec"),n=i("bee2"),o=i("262e"),l=i("2caf"),c=(i("d81d"),i("a434"),i("99af"),i("9ab4")),u=i("1b40"),d=i("0a6d"),f=i("c6fe"),m=i("e915"),p=i("b76a"),h=i.n(p),b=function(t){Object(o["a"])(i,t);var e=Object(l["a"])(i);function i(){var t;return Object(s["a"])(this,i),t=e.apply(this,arguments),t.isAdd=!0,t.fileList=[],t}return Object(n["a"])(i,[{key:"showUpload",get:function(){var t=this.fileList,e=this.limit;return e-t.length>0}},{key:"meterialLimit",get:function(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}},{key:"tipsText",get:function(){switch(this.type){case"image":return"图片";case"video":return"视频"}}},{key:"imageUri",get:function(){var t=this;return function(e){return t.enableDomain?e:t.$getImageUri(e)}}},{key:"valueChange",value:function(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}},{key:"showDialog",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1?arguments[1]:void 0;this.disabled||(this.isAdd=e,void 0!==i&&(this.currentIndex=i),null===(t=this.$refs.materialDialog)||void 0===t||t.onTrigger())}},{key:"selectChange",value:function(t){this.select=t}},{key:"handleConfirm",value:function(){var t=this;this.$refs.material.clearSelectList();var e=this.select.map((function(e){return t.enableDomain?e.uri:e.url}));this.isAdd?this.fileList=this.fileList.concat(e):this.fileList.splice(this.currentIndex,1,e.shift()),this.handleChange()}},{key:"delImage",value:function(t){this.fileList.splice(t,1),this.handleChange()}},{key:"handleChange",value:function(){var t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}}]),i}(u["e"]);Object(c["a"])([Object(u["c"])({default:function(){return[]}})],b.prototype,"value",void 0),Object(c["a"])([Object(u["c"])({default:1})],b.prototype,"limit",void 0),Object(c["a"])([Object(u["c"])({default:"100"})],b.prototype,"size",void 0),Object(c["a"])([Object(u["c"])({default:!1})],b.prototype,"disabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],b.prototype,"dragDisabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],b.prototype,"hiddenTrigger",void 0),Object(c["a"])([Object(u["c"])({default:"image"})],b.prototype,"type",void 0),Object(c["a"])([Object(u["c"])({default:"transparent"})],b.prototype,"uploadBg",void 0),Object(c["a"])([Object(u["c"])({default:!0})],b.prototype,"enableDomain",void 0),Object(c["a"])([Object(u["c"])({default:!0})],b.prototype,"enableDelete",void 0),Object(c["a"])([Object(u["f"])("value",{immediate:!0})],b.prototype,"valueChange",null),b=Object(c["a"])([Object(u["a"])({components:{LsDialog:d["a"],LsMaterial:f["a"],Draggable:h.a,FileItem:m["a"]}})],b);var g=b,v=g,w=(i("568b"),i("2877")),y=Object(w["a"])(v,a,r,!1,null,"1503bff6",null);e["a"]=y.exports}}]);
//# sourceMappingURL=chunk-1fd08791.9c7b8ae6.js.map