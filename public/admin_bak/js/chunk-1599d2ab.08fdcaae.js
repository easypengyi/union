(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1599d2ab"],{1260:function(e,t,a){"use strict";a("fc39")},"31d6":function(e,t,a){},"568b":function(e,t,a){"use strict";a("31d6")},a3ee:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-grade-edit"},[a("div",{staticClass:"ls-card"},[e.disabled?a("el-page-header",{attrs:{content:"用户等级详情"},on:{back:function(t){return e.$router.go(-1)}}}):a("el-page-header",{attrs:{content:"add"==e.mode?"新增用户等级":"编辑用户等级"},on:{back:function(t){return e.$router.go(-1)}}})],1),a("el-form",{ref:"formRef",attrs:{rules:e.formRules,model:e.form,"label-width":"120px",size:"small"}},[a("div",{staticClass:"ls-card m-t-16"},[a("div",{staticClass:"card-title"},[e._v(" 等级信息 ")]),a("div",{staticClass:"card-content m-t-24"},[a("el-form-item",{attrs:{label:"等级名称",prop:"name"}},[a("el-input",{attrs:{disabled:e.disabled,placeholder:"请输入等级名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"等级级别",prop:"rank"}},[a("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入等级级别",disabled:"edit"===e.mode&&1===e.isLevel||e.disabled},model:{value:e.form.rank,callback:function(t){e.$set(e.form,"rank",e._n(t))},expression:"form.rank"}}),a("span",{staticClass:"m-l-10"},[e._v("级")]),a("div",{staticClass:"muted xs m-r-16"},[e._v(" 权重数字越大表示等级越高，等级权重不能相同。填写大于1的整数 ")])],1),a("el-form-item",{attrs:{label:"等级图标"}},[a("material-select",{attrs:{limit:1,disabled:e.disabled},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}}),a("div",{staticClass:"flex"},[a("div",{staticClass:"muted xs m-r-16"},[e._v("建议尺寸：100*100像素，jpg，jpeg，png图片类型")])])],1),a("el-form-item",{attrs:{label:"等级背景图"}},[a("material-select",{attrs:{limit:1,disabled:e.disabled},model:{value:e.form.background_image,callback:function(t){e.$set(e.form,"background_image",t)},expression:"form.background_image"}}),a("div",{staticClass:"flex"},[a("div",{staticClass:"muted xs m-r-16"},[e._v("建议尺寸：800*500像素，jpg，jpeg，png图片类型")])])],1),a("el-form-item",{attrs:{label:"等级描述",prop:"remark"}},[a("el-input",{staticClass:"ls-input-textarea",attrs:{disabled:e.disabled,placeholder:"请输入等级描述",type:"textarea",rows:3},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)]),a("div",{staticClass:"ls-card m-t-16"},[a("div",{staticClass:"card-title"},[e._v(" 等级权益 ")]),a("div",{staticClass:"card-content m-t-24"},[a("el-form-item",{attrs:{label:"等级折扣",prop:"level_discount"}},[a("div",[a("el-radio",{attrs:{label:0,disabled:e.disabled},model:{value:e.form.level_discount,callback:function(t){e.$set(e.form,"level_discount",t)},expression:"form.level_discount"}},[e._v("无等级折扣")])],1),a("div",[a("el-radio",{attrs:{label:1,disabled:e.disabled},model:{value:e.form.level_discount,callback:function(t){e.$set(e.form,"level_discount",t)},expression:"form.level_discount"}},[a("span",{staticClass:"m-r-5"},[e._v("参与等级折扣")]),a("el-input",{staticClass:"ls-input",attrs:{size:"small",disabled:e.disabled},model:{value:e.form.discount,callback:function(t){e.$set(e.form,"discount",t)},expression:"form.discount"}}),a("span",{staticClass:"m-l-5"},[e._v("折")])],1)],1),a("div",{staticClass:"muted xs m-r-16"},[e._v(" 购买符合条件的商品时，可以使用等级折扣进行优惠。填写0到10之间的数字，可以保留小数点2位数字 ")])])],1)]),"edit"!==e.mode||1!==e.form.rank?a("div",{staticClass:"ls-card m-t-16"},[a("div",{staticClass:"card-title"},[e._v(" 等级条件 ")]),a("div",{staticClass:"card-content m-t-24"},[a("el-form-item",{attrs:{label:"等级条件",prop:"condition_type"}},[a("el-radio-group",{staticClass:"m-r-16",attrs:{disabled:e.disabled},model:{value:e.form.condition_type,callback:function(t){e.$set(e.form,"condition_type",t)},expression:"form.condition_type"}},[a("el-radio",{staticClass:"m-r-16",attrs:{label:0}},[e._v("满足以下任意条件")]),a("el-radio",{staticClass:"m-r-16",attrs:{label:1}},[e._v("满足以下全部条件")])],1),a("div",{staticClass:"flex-col"},[a("el-checkbox",{staticClass:"m-t-18",attrs:{disabled:e.disabled},model:{value:e.is_single_money,callback:function(t){e.is_single_money=t},expression:"is_single_money"}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"m-r-5"},[e._v("单笔消费金额")]),a("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled},model:{value:e.form.single_money,callback:function(t){e.$set(e.form,"single_money",t)},expression:"form.single_money"}},[a("template",{slot:"append"},[e._v("元")])],2)],1)]),a("el-checkbox",{staticClass:"m-t-18",attrs:{disabled:e.disabled},model:{value:e.is_total_money,callback:function(t){e.is_total_money=t},expression:"is_total_money"}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"m-r-5"},[e._v("累计消费金额")]),a("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled},model:{value:e.form.total_money,callback:function(t){e.$set(e.form,"total_money",t)},expression:"form.total_money"}},[a("template",{slot:"append"},[e._v("元")])],2)],1)]),a("el-checkbox",{staticClass:"m-t-18",attrs:{disabled:e.disabled},model:{value:e.is_total_num,callback:function(t){e.is_total_num=t},expression:"is_total_num"}},[a("div",{staticClass:"flex"},[a("span",{staticClass:"m-r-5"},[e._v("累计消费次数")]),a("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled},model:{value:e.form.total_num,callback:function(t){e.$set(e.form,"total_num",t)},expression:"form.total_num"}},[a("template",{slot:"append"},[e._v("次")])],2)],1)])],1)],1)],1)]):e._e()]),a("div",{staticClass:"bg-white ls-fixed-footer"},[a("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary",disabled:e.disabled},on:{click:function(t){return e.onSubmit()}}},[e._v("保存")])],1)])],1)},s=[],n=a("5530"),l=a("d4ec"),r=a("bee2"),o=a("262e"),c=a("2caf"),u=(a("d81d"),a("b64b"),a("9ab4")),d=a("1b40"),m=a("b3ad"),f=a("4201"),p=a("f633"),b=function(e){Object(o["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(l["a"])(this,a),e=t.apply(this,arguments),e.mode=f["f"]["ADD"],e.identity=null,e.isLevel=null,e.disabled=!1,e.form={name:"",rank:0,image:"",background_image:"",remark:"",level_discount:0,discount:10,condition_type:0,single_money:0,total_money:0,total_num:0},e.is_single_money=!1,e.is_total_money=!1,e.is_total_num=!1,e.formRules={name:[{required:!0,message:"请输入等级名称",trigger:"blur"}],rank:[{required:!0,message:"请输入等级级别",trigger:"blur"},{type:"number",required:!0,message:"请输入大于1的整数",trigger:"blur"}],level_discount:[{required:!0,message:"请选择等级折扣",trigger:"change"}],condition_type:[{required:!0,message:"请选择等级条件",trigger:"change"}]},e}return Object(r["a"])(a,[{key:"onSubmit",value:function(){var e=this;this.$refs.formRef.validate((function(t){if(t)switch(e.mode){case f["f"]["ADD"]:return e.handleUserLevelAdd();case f["f"]["EDIT"]:return e.handleUserLevelEdit()}}))}},{key:"handleUserLevelAdd",value:function(){var e=this,t=this.form;Object(p["k"])(t).then((function(){setTimeout((function(){return e.$router.go(-1)}),500)})).catch((function(){}))}},{key:"handleUserLevelEdit",value:function(){var e=this,t=this.form,a=this.identity;Object(p["n"])(Object(n["a"])(Object(n["a"])({},t),{},{id:a})).then((function(){setTimeout((function(){return e.$router.go(-1)}),500)})).catch((function(){}))}},{key:"initFormDataForUserLevelEdit",value:function(){var e=this;Object(p["m"])({id:this.identity}).then((function(t){Object.keys(t).map((function(a){e.$set(e.form,a,t[a])}))})).catch((function(){}))}},{key:"created",value:function(){var e=this.$route.query;e.mode&&(this.mode=e.mode),this.disabled=null!=this.$route.query.disabled,this.mode===f["f"]["EDIT"]&&(this.identity=1*e.id,this.isLevel=1*e.level,this.initFormDataForUserLevelEdit())}},{key:"changeSingleMoney",value:function(e){this.is_single_money=0!=e}},{key:"changeTotalMoney",value:function(e){this.is_total_money=0!=e}},{key:"changeTotalNum",value:function(e){this.is_total_num=0!=e}}]),a}(d["e"]);Object(u["a"])([Object(d["f"])("form.single_money")],b.prototype,"changeSingleMoney",null),Object(u["a"])([Object(d["f"])("form.total_money")],b.prototype,"changeTotalMoney",null),Object(u["a"])([Object(d["f"])("form.total_num")],b.prototype,"changeTotalNum",null),b=Object(u["a"])([Object(d["a"])({components:{MaterialSelect:m["a"]}})],b);var v=b,g=v,h=(a("1260"),a("2877")),_=Object(h["a"])(g,i,s,!1,null,"8ac383f0",null);t["default"]=_.exports},b3ad:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+e.tipsText,width:"1050px",top:"15vh"},on:{confirm:e.handleConfirm}},[e.hiddenTrigger?e._e():a("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(e){e.stopPropagation()}},slot:"trigger"},[a("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:e.disabled||e.dragDisabled},on:{update:e.handleChange},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},e._l(e.fileList,(function(t,i){return a("div",{key:t+i,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":e.disabled,"is-one":1==e.limit},on:{click:function(t){return e.showDialog(!1,i)}}},[e.$scopedSlots.preview?a("div",[e._t("preview",null,{item:e.imageUri(t)})],2):a("file-item",{attrs:{type:e.type,item:{uri:e.imageUri(t)},size:e.size}}),e.enableDelete?a("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return t.stopPropagation(),e.delImage(i)}}}):e._e()],1)})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":e.disabled,"is-one":1==e.limit},on:{click:function(t){return e.showDialog(!0)}}},[e.$slots.upload?a("div",[e._t("upload")],2):a("div",{staticClass:"upload-btn flex row-center",style:{width:e.size+"px",height:e.size+"px",background:e.uploadBg}},[e._t("default"),e.$slots.default?e._e():a("span",[e._v("添加"+e._s(e.tipsText))])],2)])],1),a("div",{staticClass:"material-wrap"},[a("ls-material",{ref:"material",attrs:{"page-size":15,type:e.type,limit:e.meterialLimit},on:{change:e.selectChange}})],1)])},s=[],n=a("d4ec"),l=a("bee2"),r=a("262e"),o=a("2caf"),c=(a("d81d"),a("a434"),a("99af"),a("9ab4")),u=a("1b40"),d=a("0a6d"),m=a("c6fe"),f=a("e915"),p=a("b76a"),b=a.n(p),v=function(e){Object(r["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(n["a"])(this,a),e=t.apply(this,arguments),e.isAdd=!0,e.fileList=[],e}return Object(l["a"])(a,[{key:"showUpload",get:function(){var e=this.fileList,t=this.limit;return t-e.length>0}},{key:"meterialLimit",get:function(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}},{key:"tipsText",get:function(){switch(this.type){case"image":return"图片";case"video":return"视频"}}},{key:"imageUri",get:function(){var e=this;return function(t){return e.enableDomain?t:e.$getImageUri(t)}}},{key:"valueChange",value:function(e){this.fileList=Array.isArray(e)?e:""==e?[]:[e]}},{key:"showDialog",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0;this.disabled||(this.isAdd=t,void 0!==a&&(this.currentIndex=a),null===(e=this.$refs.materialDialog)||void 0===e||e.onTrigger())}},{key:"selectChange",value:function(e){this.select=e}},{key:"handleConfirm",value:function(){var e=this;this.$refs.material.clearSelectList();var t=this.select.map((function(t){return e.enableDomain?t.uri:t.url}));this.isAdd?this.fileList=this.fileList.concat(t):this.fileList.splice(this.currentIndex,1,t.shift()),this.handleChange()}},{key:"delImage",value:function(e){this.fileList.splice(e,1),this.handleChange()}},{key:"handleChange",value:function(){var e=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",e),this.$emit("change",e),this.fileList=[]}}]),a}(u["e"]);Object(c["a"])([Object(u["c"])({default:function(){return[]}})],v.prototype,"value",void 0),Object(c["a"])([Object(u["c"])({default:1})],v.prototype,"limit",void 0),Object(c["a"])([Object(u["c"])({default:"100"})],v.prototype,"size",void 0),Object(c["a"])([Object(u["c"])({default:!1})],v.prototype,"disabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],v.prototype,"dragDisabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],v.prototype,"hiddenTrigger",void 0),Object(c["a"])([Object(u["c"])({default:"image"})],v.prototype,"type",void 0),Object(c["a"])([Object(u["c"])({default:"transparent"})],v.prototype,"uploadBg",void 0),Object(c["a"])([Object(u["c"])({default:!0})],v.prototype,"enableDomain",void 0),Object(c["a"])([Object(u["c"])({default:!0})],v.prototype,"enableDelete",void 0),Object(c["a"])([Object(u["f"])("value",{immediate:!0})],v.prototype,"valueChange",null),v=Object(c["a"])([Object(u["a"])({components:{LsDialog:d["a"],LsMaterial:m["a"],Draggable:b.a,FileItem:f["a"]}})],v);var g=v,h=g,_=(a("568b"),a("2877")),y=Object(_["a"])(h,i,s,!1,null,"1503bff6",null);t["a"]=y.exports},f633:function(e,t,a){"use strict";a.d(t,"o",(function(){return s})),a.d(t,"k",(function(){return n})),a.d(t,"m",(function(){return l})),a.d(t,"n",(function(){return r})),a.d(t,"l",(function(){return o})),a.d(t,"j",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"i",(function(){return m})),a.d(t,"g",(function(){return f})),a.d(t,"p",(function(){return p})),a.d(t,"q",(function(){return b})),a.d(t,"b",(function(){return v})),a.d(t,"s",(function(){return g})),a.d(t,"t",(function(){return h})),a.d(t,"u",(function(){return _})),a.d(t,"r",(function(){return y})),a.d(t,"c",(function(){return k})),a.d(t,"d",(function(){return C})),a.d(t,"e",(function(){return j})),a.d(t,"v",(function(){return x})),a.d(t,"a",(function(){return O}));var i=a("f175"),s=function(e){return i["a"].get("/user.user_level/lists",{params:e})},n=function(e){return i["a"].post("/user.user_level/add",e)},l=function(e){return i["a"].get("/user.user_level/detail",{params:e})},r=function(e){return i["a"].post("/user.user_level/edit",e)},o=function(e){return i["a"].post("/user.user_level/del",e)},c=function(e){return i["a"].get("/user.user_label/lists",{params:e})},u=function(e){return i["a"].post("/user.user_label/add",e)},d=function(e){return i["a"].get("/user.user_label/detail",{params:e})},m=function(e){return i["a"].post("/user.user_label/edit",e)},f=function(e){return i["a"].post("/user.user_label/del",e)},p=function(e){return i["a"].get("/user.user/lists",{params:e})},b=function(){return i["a"].get("/user.user/otherList")},v=function(e){return i["a"].get("/user.user/detail",{params:e})},g=function(e){return i["a"].post("/user.user/setInfo",e)},h=function(e){return i["a"].post("/user.user/setLabel",e)},_=function(e){return i["a"].post("/user.user/setUserLabel",e)},y=function(e){return i["a"].post("/user.user/adjustUserWallet",e)},k=function(){return i["a"].get("/user.user/index")},C=function(e){return i["a"].get("/user.user/info",{params:e})},j=function(e){return i["a"].get("/user.user/userInviterLists",{params:e})},x=function(e){return i["a"].post("/user.user/adjustFirstLeader",e)},O=function(e){return i["a"].get("/user.user/selectUserLists",{params:e})}},fc39:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1599d2ab.08fdcaae.js.map