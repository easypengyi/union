{"version":3,"sources":["webpack:///./src/views/setting/system_maintain/updata.vue?758e","webpack:///./src/views/setting/system_maintain/updata.vue?98c0","webpack:///./src/views/setting/system_maintain/updata.vue?0509","webpack:///./src/views/setting/system_maintain/updata.vue","webpack:///./src/api/setting/system_maintain/system_maintain.ts","webpack:///./src/views/setting/system_maintain/updata.vue?d2ba"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","slot","_v","directives","name","rawName","value","expression","staticStyle","pager","lists","scopedSlots","_u","key","fn","scope","$index","_e","_s","row","version_no","version_str","_l","item","index","able_update","on","$event","onOuterVisible","id","toPackage","outerVisible","innerVisible","threeVisible","isSecondaryDev","confirmUpdate","NotSecondaryDev","SecondaryDev","staticRenderFns","loading","timer","request","callback","catch","$message","error","type","clearTimeout","setTimeout","update_type","then","res","window","open","line","location","href","getSystemUpgradeLists","finally","systemUpgrade","components","LsPagination","component","apiSystemlogList","params","get","apiSystemCacheClear","post","apiCrontabLists","apiCrontabAdd","apiCrontabDetail","apiCrontabEdit","apiCrontabDel","apiCrontabExpression","apiSrontabOperate","apiSystemUpgradeLists","apiSystemUpgradeDownloadPkg","apiSystemUpgrade"],"mappings":"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","file":"js/chunk-36acbacb.2745cb69.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"system-update\"},[_c('div',{staticClass:\"ls-card\"},[_c('el-alert',{staticClass:\"xxl\",attrs:{\"type\":\"info\",\"closable\":false,\"show-icon\":\"\"}},[_c('template',{slot:\"title\"},[_c('div',{staticClass:\"iconSize\"},[_vm._v(\"温馨提示：\")]),_c('div',{staticClass:\"iconSize flex\"},[_vm._v(\"1.版本更新需要逐个版本更新，\"),_c('div',{staticClass:\"a-key\"},[_vm._v(\"更新前请备份好系统和数据库，更新成功后需要强制刷新站点；\")])]),_c('div',{staticClass:\"iconSize\"},[_vm._v(\"2.系统没有做二次开发，可以直接选择在线更新功能；\")]),_c('div',{staticClass:\"iconSize\"},[_vm._v(\"3.系统已做二次开发，进行了功能修改，请谨慎选择在线更新功能，推荐以更新包的形式手动更新；\")]),_c('div',{staticClass:\"iconSize\"},[_vm._v(\"4.由于更换新域名原因，1.3.1及以下版本，需修改server/app/adminapi/logic/settings/system/UpgradeLogic.php文件中的BASE_URL为https://server.likeshop.cn 否则系统更新列表会报错。\")])])],2)],1),_c('div',{staticClass:\"ls-card m-t-16\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(false),expression:\"false\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.pager.lists,\"size\":\"mini\",\"header-cell-style\":{'background':'#f5f8ff'}}},[_c('el-table-column',{attrs:{\"prop\":\"publish_time\",\"label\":\"发布日期\"}}),_c('el-table-column',{attrs:{\"label\":\"版本号\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"flex\"},[(scope.$index == 0)?_c('el-tag',{attrs:{\"size\":\"small\",\"type\":\"success\",\"effect\":\"plain\",\"round\":\"\"}},[_vm._v(\" new\")]):_vm._e(),_c('div',{staticClass:\"m-l-5\"},[_vm._v(_vm._s(scope.row.version_no))])],1),_c('div',{},[_vm._v(\" \"+_vm._s(scope.row.version_str)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"版本内容\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._l((scope.row.add),function(item,index){return _c('div',{},[_vm._v(\" \"+_vm._s(item)+\" \")])}),_vm._l((scope.row.optimize),function(item,index){return _c('div',{},[_vm._v(\" \"+_vm._s(item)+\" \")])}),_vm._l((scope.row.repair),function(item,index){return _c('div',{},[_vm._v(\" \"+_vm._s(item)+\" \")])})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"notice\",\"label\":\"注意事项\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.notice),function(item,index){return _c('div',{key:index},[_vm._v(\" \"+_vm._s(item)+\" \")])})}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"200px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operation flex flex-wrap\"},[(scope.row.able_update == 1)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.onOuterVisible(scope.row.id)}},slot:\"trigger\"},[_vm._v(\"一键更新 \")]):_vm._e(),(scope.row.integral_package_link)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 6)}},slot:\"trigger\"},[_vm._v(\"下载完整安装包 \")]):_vm._e(),(scope.row.package_link)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 2)}},slot:\"trigger\"},[_vm._v(\"下载服务端更新包\")]):_vm._e(),(scope.row.pc_package_link)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 3)}},slot:\"trigger\"},[_vm._v(\"下载pc端更新包\")]):_vm._e(),(scope.row.uniapp_package_link)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 4)}},slot:\"trigger\"},[_vm._v(\"下载uniapp更新包\")]):_vm._e(),(scope.row.web_package_link)?_c('el-button',{attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 5)}},slot:\"trigger\"},[_vm._v(\" 下载后台前端更新包\")]):_vm._e()],1)]}}])})],1)],1),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"\",\"visible\":_vm.outerVisible,\"width\":\"30%\",\"top\":\"40vh\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.outerVisible=$event}}},[_c('el-dialog',{staticClass:\"dialogTwo\",attrs:{\"width\":\"30%\",\"top\":\"40vh\",\"visible\":_vm.innerVisible,\"append-to-body\":\"\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.innerVisible=$event}}},[_c('el-dialog',{staticClass:\"dialogThree\",attrs:{\"width\":\"30%\",\"top\":\"40vh\",\"visible\":_vm.threeVisible,\"append-to-body\":\"\",\"center\":\"\",\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.threeVisible=$event}}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"height\":\"200px\",\"text-align\":\"center\"},attrs:{\"element-loading-text\":\"切勿关闭窗口或刷新页面\"}},[_c('div',[_vm._v(\"系统更新中，更新完毕后会自行刷新页面\")])])]),(_vm.isSecondaryDev == false)?_c('div',{staticStyle:{\"height\":\"200px\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" 一键更新导致的系统问题，欢迎前往社区反馈，请做好系统备份！ \")]),_c('div',{staticClass:\"btn-div flex-col \",staticStyle:{\"width\":\"160px\",\"margin\":\"auto\"}},[_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.confirmUpdate}},[_vm._v(\"确定更新\")]),_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.innerVisible = false}}},[_vm._v(\" 取消更新\")])],1)]):_vm._e(),(_vm.isSecondaryDev == true)?_c('div',{staticStyle:{\"height\":\"200px\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('div',[_vm._v(\"二次开发后请谨慎使用一键更新功能！\")]),_c('div',[_vm._v(\"二次开发后一键更新导致的系统问题，官方无法处理，请做好系统备份！\")])]),_c('div',{staticClass:\"btn-div flex-col\",staticStyle:{\"width\":\"160px\",\"margin\":\"auto\"}},[_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.confirmUpdate}},[_vm._v(\"确定更新\")]),_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.innerVisible = false}}},[_vm._v(\" 下载更新包，手动更新\")]),_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.innerVisible = false}}},[_vm._v(\" 取消更新\")])],1)]):_vm._e()],1),_c('div',{staticStyle:{\"height\":\"200px\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" 系统是否进行二次开发 \")]),_c('div',{staticClass:\"flex-col\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.NotSecondaryDev}},[_vm._v(\"未做二次开发，直接更新\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.SecondaryDev}},[_vm._v(\"已做二次开发\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.outerVisible = false}}},[_vm._v(\"取消更新\")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport {\n\tComponent,\n\tVue\n} from \"vue-property-decorator\";\nimport {\n\tapiSystemUpgradeLists,\n\tapiSystemUpgradeDownloadPkg,\n\tapiSystemUpgrade,\n} from \"@/api/setting/system_maintain/system_maintain\"\nimport {\n\tRequestPaging,\n\tdebounce,\n\tthrottle,\n} from \"@/utils/util\"\nimport LsPagination from \"@/components/ls-pagination.vue\"\n@Component({\n\tcomponents: {\n\t\tLsPagination\n\t},\n})\nexport default class SystemUpdate extends Vue {\n\t/** S Data **/\n\t// 外层dialog\n\touterVisible = false\n\t// 第二层dialog\n\tinnerVisible = false\n\t// 第三层dialog\n\tthreeVisible = false\n\t// 是否二次开发\n\tisSecondaryDev = true\n\n\t// 加载动画 \n\tloading = true\n\n\tpager: RequestPaging = new RequestPaging()\n\n\t// 点击一键更新按钮的版本id\n\tid = 0\n\n\ttimer = 0\n\t/** E Data **/\n\n\t/** S Methods **/\n\n\t//系统更新列表\n\tgetSystemUpgradeLists() {\n\t\t// 分页请求\n\t\tthis.pager\n\t\t\t.request({\n\t\t\t\tcallback: apiSystemUpgradeLists,\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tthis.$message.error(\"数据请求失败，刷新重载\")\n\t\t\t})\n\t}\n\n\t// // 下载完整安装包跳转页面\n\t// toIntegralPackage(url: any) {\n\t// \twindow.open(url, '_blank')\n\t// }\n\n\t// 非完整安装包下载\n\ttoPackage(id: any, type: any) {\n\t\t\n\t\tif (this.timer) {\n\t\t\tclearTimeout(this.timer)\n\t\t}\n\t\t\t\n\t\tthis.timer = setTimeout(() => {\n\t\t\t// console.log(\"防抖执行,这里就是你需要执行的操作\")\n\t\t\tapiSystemUpgradeDownloadPkg({\n\t\t\t\t\tid: id,\n\t\t\t\t\tupdate_type: type, // 2:服务端更新包下载，3:pc端更新包下载，4:uniapp更新包下载,5:后台前端更新包下载, 6:完整包更新\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\t// console.log(res)\n\t\t\t\t\t// console.log(res.line)\n\t\t\t\t\tif(type == 6) {\n\t\t\t\t\t\twindow.open(res.line, '_blank')\n\t\t\t\t\t}else {\n\t\t\t\t\t\twindow.location.href = res.line\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}, 500)\n\t}\n\n\n\t// 一键更新请求\n\tsystemUpgrade() {\n\t\tapiSystemUpgrade({\n\t\t\t\tid: this.id,\n\t\t\t\tupdate_type: 1, // 1:一键更新\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tthis.getSystemUpgradeLists()\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\t// this.loading = false\n\t\t\t\tthis.threeVisible = false\n\t\t\t\tthis.innerVisible = false\n\t\t\t\tthis.outerVisible = false\n\t\t\t})\n\t}\n\n\t// 点击一键更新按钮\n\tonOuterVisible(id: any) {\n\t\tthis.outerVisible = true\n\t\tthis.id = id\n\t}\n\n\t// 未做二次开发\n\tNotSecondaryDev() {\n\t\tthis.isSecondaryDev = false\n\t\tthis.innerVisible = true\n\t}\n\t// 已做二次开发\n\tSecondaryDev() {\n\t\tthis.isSecondaryDev = true\n\t\tthis.innerVisible = true\n\t}\n\n\t// 点击确定更新\n\tconfirmUpdate() {\n\t\tthis.threeVisible = true\n\t\tthis.systemUpgrade()\n\t}\n\n\t/** E Methods **/\n\n\t/** S Life Cycle **/\n\tcreated() {\n\t\tthis.getSystemUpgradeLists()\n\t}\n\t/** E Life Cycle **/\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./updata.vue?vue&type=template&id=3d3d558c&scoped=true&\"\nimport script from \"./updata.vue?vue&type=script&lang=ts&\"\nexport * from \"./updata.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./updata.vue?vue&type=style&index=0&id=3d3d558c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d3d558c\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/plugins/axios'\nimport * as Interface from '@/api/setting/system_maintain/system_maintain.d.ts'\n\n/** S 系统维护 **/\n// 获取系统日志列表\nexport const apiSystemlogList = (params: Interface.Journal_Req): Promise<Interface.Journal_Res> =>\n    request.get('/settings.system.log/lists', {params})\n\t\n\n// 清除系统缓存\nexport const apiSystemCacheClear = () => request.post('/settings.system.cache/clear')\n\n// 定时任务列表\nexport const apiCrontabLists = () => request.get('/crontab.crontab/lists')\n\n// 添加定时任务\nexport const apiCrontabAdd = (params: any) => request.post('/crontab.crontab/add', params)\n\n// 查看详情\nexport const apiCrontabDetail = (params: any) => request.get('/crontab.crontab/detail', {params})\n\n// 编辑定时任务\nexport const apiCrontabEdit = (params: any) => request.post('/crontab.crontab/edit', params)\n\n// 删除定时任务\nexport const apiCrontabDel = (params: any) => request.post('/crontab.crontab/delete', params)\n\n// 获取规则执行时间\nexport const apiCrontabExpression = (params: any) => request.get('/crontab.crontab/expression', {params})\n\n// 操作定时任务\nexport const apiSrontabOperate = (params: any) => request.post('/crontab.crontab/operate', params)\n\n/** E 系统维护 **/\n\n/** S 系统更新 **/\n// 系统更新列表\nexport const apiSystemUpgradeLists = (params: any) => request.get('/settings.system.upgrade/lists')\n\n// 下载更新包\nexport const apiSystemUpgradeDownloadPkg = (params: any) => request.post('/settings.system.upgrade/downloadPkg', params)\n\n// 一键更新\nexport const apiSystemUpgrade = (params: any) => request.post('/settings.system.upgrade/upgrade', params)\n/** E 系统更新 **/\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=style&index=0&id=3d3d558c&lang=scss&scoped=true&\""],"sourceRoot":""}