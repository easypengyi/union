(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-721546cc"],{2950:function(t,e,r){"use strict";r("47a0")},"469e":function(t,e,r){"use strict";r.d(e,"l",(function(){return a})),r.d(e,"h",(function(){return s})),r.d(e,"f",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return c})),r.d(e,"d",(function(){return l})),r.d(e,"b",(function(){return u})),r.d(e,"e",(function(){return m})),r.d(e,"g",(function(){return f})),r.d(e,"k",(function(){return d})),r.d(e,"j",(function(){return p})),r.d(e,"i",(function(){return b}));var n=r("f175"),a=function(t){return n["a"].get("/settings.system.log/lists",{params:t})},s=function(){return n["a"].post("/settings.system.cache/clear")},o=function(){return n["a"].get("/crontab.crontab/lists")},i=function(t){return n["a"].post("/crontab.crontab/add",t)},c=function(t){return n["a"].get("/crontab.crontab/detail",{params:t})},l=function(t){return n["a"].post("/crontab.crontab/edit",t)},u=function(t){return n["a"].post("/crontab.crontab/delete",t)},m=function(t){return n["a"].get("/crontab.crontab/expression",{params:t})},f=function(t){return n["a"].post("/crontab.crontab/operate",t)},d=function(t){return n["a"].get("/settings.system.upgrade/lists")},p=function(t){return n["a"].post("/settings.system.upgrade/downloadPkg",t)},b=function(t){return n["a"].post("/settings.system.upgrade/upgrade",t)}},"47a0":function(t,e,r){},d81d:function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").map,s=r("1dde"),o=s("map");n({target:"Array",proto:!0,forced:!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},dfae:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"substance_edit-help"},[r("div",{staticClass:"ls-card"},[r("el-page-header",{attrs:{content:"add"==this.mode?"新增定时任务":"编辑定时任务"},on:{back:function(e){return t.$router.go(-1)}}})],1),r("div",{staticClass:"ls-card m-t-16 form-container"},[r("el-form",{ref:"form",attrs:{rules:t.rules,model:t.form,"label-width":"120px",size:"small"}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{staticClass:"ls-input",attrs:{"show-word-limit":"",placeholder:"请输入名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"类型"}},[r("el-radio",{attrs:{label:1},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("定时任务")])],1),r("el-form-item",{attrs:{label:"命令",prop:"command"}},[r("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入thankphp命令，如vresion"},model:{value:t.form.command,callback:function(e){t.$set(t.form,"command",e)},expression:"form.command"}})],1),r("el-form-item",{attrs:{label:"参数"}},[r("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入参数，例:--id 8 --name 测试"},model:{value:t.form.params,callback:function(e){t.$set(t.form,"params",e)},expression:"form.params"}})],1),r("el-form-item",{attrs:{label:"状态"}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":t.styleConfig.primary,"inactive-color":"#f4f4f5"},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),r("el-form-item",{attrs:{label:"规则",prop:"expression"}},[r("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入crontab规则，例：59 * * *"},on:{blur:t.blur},model:{value:t.form.expression,callback:function(e){t.$set(t.form,"expression",e)},expression:"form.expression"}}),r("el-table",{ref:"paneTable",staticClass:"m-t-24",staticStyle:{width:"100%"},attrs:{data:t.lists,size:"mini"}},[r("el-table-column",{attrs:{prop:"time",label:"序号","min-width":"80"}}),r("el-table-column",{attrs:{prop:"date",label:"执行时间","min-width":"180"}})],1)],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{staticClass:"ls-input",attrs:{type:"textarea",placeholder:"请输入备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1)],1),r("div",{staticClass:"bg-white ls-fixed-footer"},[r("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[r("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存")])],1)])])},a=[],s=r("d4ec"),o=r("bee2"),i=r("262e"),c=r("2caf"),l=(r("d81d"),r("b64b"),r("9ab4")),u=r("1b40"),m=r("469e"),f=r("4201"),d=function(t){Object(i["a"])(r,t);var e=Object(c["a"])(r);function r(){var t;return Object(s["a"])(this,r),t=e.apply(this,arguments),t.mode=f["f"]["ADD"],t.lists=[],t.form={name:"",type:1,command:"",expression:"",status:1,remark:"",params:""},t.rules={name:[{required:!0,message:"请输入名称",trigger:"blur"}],command:[{required:!0,message:"请输入命令",trigger:"blur"}],params:[{required:!0,message:"请输入参数",trigger:"blur"}],expression:[{required:!0,message:"请输入规则",trigger:"blur"}]},t}return Object(o["a"])(r,[{key:"onSubmit",value:function(t){var e=this,r=this.$refs[t];r.validate((function(t){if(t)switch(e.mode){case f["f"]["ADD"]:return e.handleNoticeAdd();case f["f"]["EDIT"]:return e.handleNoticeEdit()}}))}},{key:"blur",value:function(){""!=this.form.expression&&this.getExpressionFun()}},{key:"getExpressionFun",value:function(){var t=this;Object(m["e"])({expression:this.form.expression}).then((function(e){console.log(e),t.lists=e}))}},{key:"handleNoticeAdd",value:function(){var t=this,e=this.form;console.log(e),Object(m["a"])(e).then((function(){setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("添加失败!")}))}},{key:"handleNoticeEdit",value:function(){var t=this;delete this.form.status_desc,delete this.form.type_desc;var e=this.form;Object(m["d"])(e).then((function(){setTimeout((function(){return t.$router.go(-1)}),500)})).catch((function(){t.$message.error("修改失败!")}))}},{key:"initFormDataForNoticeEdit",value:function(){var t=this;Object(m["c"])({id:this.form.id}).then((function(e){Object.keys(e).map((function(r){t.$set(t.form,r,e[r])})),t.getExpressionFun()})).catch((function(){t.$message.error("数据初始化失败，请刷新重载！")}))}},{key:"created",value:function(){var t=this.$route.query;t.mode&&(this.mode=t.mode),this.mode===f["f"]["EDIT"]&&(this.form.id=1*t.id,this.initFormDataForNoticeEdit())}}]),r}(u["e"]);d=Object(l["a"])([u["a"]],d);var p=d,b=p,h=(r("2950"),r("2877")),g=Object(h["a"])(b,n,a,!1,null,"44c8c8ee",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-721546cc.c43b7293.js.map