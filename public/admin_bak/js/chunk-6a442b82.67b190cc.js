(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a442b82"],{"0bb6":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return u}));var i=a("f175"),r=function(e){return i["a"].post("/marketing.seckill/add",e)},s=function(e){return i["a"].post("/marketing.seckill/edit",e)},l=function(e){return i["a"].get("/marketing.seckill/detail",{params:e})},n=function(e){return i["a"].get("/marketing.seckill/lists",{params:e})},o=function(e){return i["a"].post("/marketing.seckill/delete",e)},c=function(e){return i["a"].post("/marketing.seckill/open",{params:e})},u=function(e){return i["a"].post("/marketing.seckill/stop",{params:e})}},"31d6":function(e,t,a){},"568b":function(e,t,a){"use strict";a("31d6")},"5f8a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-date-picker",{attrs:{type:e.type,"picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:e.changeDate},model:{value:e.pickerValue,callback:function(t){e.pickerValue=t},expression:"pickerValue"}})},r=[],s=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),c=a("9ab4"),u=a("1b40"),d=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.pickerValue=[],e.pickerOptions={shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},e}return Object(l["a"])(a,[{key:"changeDate",value:function(){var e=this.pickerValue?this.pickerValue:this.pickerValue=["",""];this.$emit("update:start-time",e[0]),this.$emit("update:end-time",e[1])}},{key:"handleStartTime",value:function(e){!this.pickerValue&&(this.pickerValue=[]),this.$set(this.pickerValue,0,e)}},{key:"handleEndTime",value:function(e){!this.pickerValue&&(this.pickerValue=[]),this.$set(this.pickerValue,1,e)}}]),a}(u["e"]);Object(c["a"])([Object(u["c"])()],d.prototype,"startTime",void 0),Object(c["a"])([Object(u["c"])()],d.prototype,"endTime",void 0),Object(c["a"])([Object(u["c"])({default:"datetimerange"})],d.prototype,"type",void 0),Object(c["a"])([Object(u["f"])("startTime",{immediate:!0})],d.prototype,"handleStartTime",null),Object(c["a"])([Object(u["f"])("endTime",{immediate:!0})],d.prototype,"handleEndTime",null),d=Object(c["a"])([u["a"]],d);var m=d,f=m,p=a("2877"),b=Object(p["a"])(f,i,r,!1,null,null,null);t["a"]=b.exports},b3ad:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+e.tipsText,width:"1050px",top:"15vh"},on:{confirm:e.handleConfirm}},[e.hiddenTrigger?e._e():a("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(e){e.stopPropagation()}},slot:"trigger"},[a("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:e.disabled||e.dragDisabled},on:{update:e.handleChange},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},e._l(e.fileList,(function(t,i){return a("div",{key:t+i,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":e.disabled,"is-one":1==e.limit},on:{click:function(t){return e.showDialog(!1,i)}}},[e.$scopedSlots.preview?a("div",[e._t("preview",null,{item:e.imageUri(t)})],2):a("file-item",{attrs:{type:e.type,item:{uri:e.imageUri(t)},size:e.size}}),e.enableDelete?a("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return t.stopPropagation(),e.delImage(i)}}}):e._e()],1)})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":e.disabled,"is-one":1==e.limit},on:{click:function(t){return e.showDialog(!0)}}},[e.$slots.upload?a("div",[e._t("upload")],2):a("div",{staticClass:"upload-btn flex row-center",style:{width:e.size+"px",height:e.size+"px",background:e.uploadBg}},[e._t("default"),e.$slots.default?e._e():a("span",[e._v("添加"+e._s(e.tipsText))])],2)])],1),a("div",{staticClass:"material-wrap"},[a("ls-material",{ref:"material",attrs:{"page-size":15,type:e.type,limit:e.meterialLimit},on:{change:e.selectChange}})],1)])},r=[],s=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),c=(a("d81d"),a("a434"),a("99af"),a("9ab4")),u=a("1b40"),d=a("0a6d"),m=a("c6fe"),f=a("e915"),p=a("b76a"),b=a.n(p),h=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.isAdd=!0,e.fileList=[],e}return Object(l["a"])(a,[{key:"showUpload",get:function(){var e=this.fileList,t=this.limit;return t-e.length>0}},{key:"meterialLimit",get:function(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}},{key:"tipsText",get:function(){switch(this.type){case"image":return"图片";case"video":return"视频"}}},{key:"imageUri",get:function(){var e=this;return function(t){return e.enableDomain?t:e.$getImageUri(t)}}},{key:"valueChange",value:function(e){this.fileList=Array.isArray(e)?e:""==e?[]:[e]}},{key:"showDialog",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=arguments.length>1?arguments[1]:void 0;this.disabled||(this.isAdd=t,void 0!==a&&(this.currentIndex=a),null===(e=this.$refs.materialDialog)||void 0===e||e.onTrigger())}},{key:"selectChange",value:function(e){this.select=e}},{key:"handleConfirm",value:function(){var e=this;this.$refs.material.clearSelectList();var t=this.select.map((function(t){return e.enableDomain?t.uri:t.url}));this.isAdd?this.fileList=this.fileList.concat(t):this.fileList.splice(this.currentIndex,1,t.shift()),this.handleChange()}},{key:"delImage",value:function(e){this.fileList.splice(e,1),this.handleChange()}},{key:"handleChange",value:function(){var e=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",e),this.$emit("change",e),this.fileList=[]}}]),a}(u["e"]);Object(c["a"])([Object(u["c"])({default:function(){return[]}})],h.prototype,"value",void 0),Object(c["a"])([Object(u["c"])({default:1})],h.prototype,"limit",void 0),Object(c["a"])([Object(u["c"])({default:"100"})],h.prototype,"size",void 0),Object(c["a"])([Object(u["c"])({default:!1})],h.prototype,"disabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],h.prototype,"dragDisabled",void 0),Object(c["a"])([Object(u["c"])({default:!1})],h.prototype,"hiddenTrigger",void 0),Object(c["a"])([Object(u["c"])({default:"image"})],h.prototype,"type",void 0),Object(c["a"])([Object(u["c"])({default:"transparent"})],h.prototype,"uploadBg",void 0),Object(c["a"])([Object(u["c"])({default:!0})],h.prototype,"enableDomain",void 0),Object(c["a"])([Object(u["c"])({default:!0})],h.prototype,"enableDelete",void 0),Object(c["a"])([Object(u["f"])("value",{immediate:!0})],h.prototype,"valueChange",null),h=Object(c["a"])([Object(u["a"])({components:{LsDialog:d["a"],LsMaterial:m["a"],Draggable:b.a,FileItem:f["a"]}})],h);var g=h,v=g,k=(a("568b"),a("2877")),y=Object(k["a"])(v,i,r,!1,null,"1503bff6",null);t["a"]=y.exports},c1f0:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ls-seckill-edit"},[a("div",{staticClass:"ls-card ls-seckill-edit__header"},[a("el-page-header",{attrs:{content:e.id?e.disabled?"秒杀活动详情":"编辑秒杀活动":"新增秒杀活动"},on:{back:function(t){return e.$router.go(-1)}}})],1),a("div",{staticClass:"ls-seckill-content"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.formData,"label-width":"120px",size:"small",rules:e.rules,disabled:e.disabled}},[a("div",{staticClass:"ls-card m-t-16"},[a("div",{staticClass:"nr weight-500 m-b-20"},[e._v("活动设置")]),a("el-form-item",{attrs:{label:"活动名称",prop:"name"}},[a("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入活动名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"活动时间",prop:"start_time"}},[a("date-picker",{attrs:{type:"datetimerange","start-time":e.formData.start_time,"end-time":e.formData.end_time},on:{"update:startTime":function(t){return e.$set(e.formData,"start_time",t)},"update:start-time":function(t){return e.$set(e.formData,"start_time",t)},"update:endTime":function(t){return e.$set(e.formData,"end_time",t)},"update:end-time":function(t){return e.$set(e.formData,"end_time",t)}}}),a("div",{staticClass:"muted"},[e._v(" 秒杀活动开始和结束时间，可以手动提前结束活动 ")])],1),a("el-form-item",{attrs:{label:"活动备注"}},[a("el-input",{staticClass:"ls-input",attrs:{type:"textarea",rows:5,placeholder:""},model:{value:e.formData.explain,callback:function(t){e.$set(e.formData,"explain",t)},expression:"formData.explain"}})],1)],1),a("div",{staticClass:"ls-card m-t-16"},[a("div",{staticClass:"nr weight-500 m-b-20"},[e._v("活动商品")]),a("el-form-item",{attrs:{label:"秒杀商品",required:""}},[a("goods-select",{attrs:{mode:"table","is-spec":!0,limit:25,extend:{name:"秒杀",price:[{title:"秒杀价格",key:"seckill_price"}]}},model:{value:e.selectGoods,callback:function(t){e.selectGoods=t},expression:"selectGoods"}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("选择秒杀商品")])],1)],1)],1),a("div",{staticClass:"ls-card m-t-16"},[a("div",{staticClass:"nr weight-500 m-b-20"},[e._v("活动规则")]),a("el-form-item",{attrs:{label:"每单限制",required:""}},[a("el-radio-group",{model:{value:e.formData.max_buy,callback:function(t){e.$set(e.formData,"max_buy",t)},expression:"formData.max_buy"}},[a("el-radio",{attrs:{label:0}},[e._v("不限制")]),a("el-radio",{attrs:{label:0!=e.formData.max_buy?e.formData.max_buy:""}},[e._v("限制")])],1)],1),0!==e.formData.max_buy?a("el-form-item",{attrs:{prop:"max_buy",label:""}},[a("el-input",{attrs:{type:"number"},on:{input:function(t){return e.handleInput(t,"max_buy")}},model:{value:e.formData.max_buy,callback:function(t){e.$set(e.formData,"max_buy",t)},expression:"formData.max_buy"}}),a("div",{staticClass:"muted"},[e._v(" 每件商品单笔订单最多购买的件数。 ")])],1):e._e()],1)])],1),a("div",{staticClass:"ls-seckill-edit__footer bg-white ls-fixed-footer"},[a("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),a("el-button",{attrs:{size:"small",type:"primary",disabled:e.disabled},on:{click:e.handleSave}},[e._v("保存")])],1)])])},r=[],s=a("d4ec"),l=a("bee2"),n=a("262e"),o=a("2caf"),c=(a("d81d"),a("9ab4")),u=a("1b40"),d=a("b3ad"),m=a("f50c"),f=a("5f8a"),p=a("0bb6"),b=function(e){Object(n["a"])(a,e);var t=Object(o["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.loading=!1,e.disabled=!1,e.formData={name:"",explain:"",start_time:"",end_time:"",goods:[],max_buy:0},e.selectGoods=[],e.rules={name:[{required:!0,message:"请输入活动名称",trigger:["blur"]}],start_time:[{required:!0,message:"选择活动时间",trigger:"blur"}],max_buy:[{required:!0,message:"请输入每单限制数量",trigger:"blur"}]},e}return Object(l["a"])(a,[{key:"selectGoodsChange",value:function(e){this.formData.goods=e.map((function(e){return{goods_id:e.id,items:e.item.map((function(e){return{item_id:e.id,seckill_price:e.seckill_price}}))}}))}},{key:"checkGoods",value:function(){var e=this.formData.goods;if(!e.length)return this.$message.error("请选择秒杀商品"),!1;for(var t=0;t<e.length;t++)for(var a=0;a<e[t].items.length;a++)if(!e[t].items[a].seckill_price)return this.$message.error("请输入商品秒杀价"),!1;return!0}},{key:"handleInput",value:function(e,t){e<=0&&""!==e&&(this.formData[t]=1)}},{key:"handleSave",value:function(){var e=this;this.$refs.form.validate((function(t,a){if(!t)return!1;if(e.checkGoods()){var i=e.id?Object(p["d"])(e.formData):Object(p["a"])(e.formData);i.then((function(){e.$router.go(-1)}))}}))}},{key:"getDetail",value:function(){var e=this;this.loading=!0,Object(p["c"])({id:this.id}).then((function(t){e.formData=t,e.selectGoods=t.goods,e.loading=!1}))}},{key:"created",value:function(){this.id=this.$route.query.id,this.disabled=Boolean(this.$route.query.disabled),this.id&&this.getDetail()}}]),a}(u["e"]);Object(c["a"])([Object(u["f"])("selectGoods",{deep:!0})],b.prototype,"selectGoodsChange",null),b=Object(c["a"])([Object(u["a"])({components:{MaterialSelect:d["a"],DatePicker:f["a"],GoodsSelect:m["a"]}})],b);var h=b,g=h,v=(a("c32e"),a("2877")),k=Object(v["a"])(g,i,r,!1,null,"3aa927c1",null);t["default"]=k.exports},c32e:function(e,t,a){"use strict";a("c7b4")},c7b4:function(e,t,a){}}]);
//# sourceMappingURL=chunk-6a442b82.67b190cc.js.map