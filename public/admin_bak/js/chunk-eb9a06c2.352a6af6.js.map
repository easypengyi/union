{"version":3,"sources":["webpack:///./node_modules/echarts/lib/chart/helper/Symbol.js","webpack:///./node_modules/echarts/lib/coord/axisModelCommonMixin.js","webpack:///./node_modules/echarts/lib/chart/line/LineSeries.js","webpack:///./node_modules/echarts/lib/chart/line/helper.js","webpack:///./node_modules/echarts/lib/chart/line/lineAnimationDiff.js","webpack:///./node_modules/echarts/lib/chart/line/LineView.js","webpack:///./node_modules/echarts/lib/chart/line/install.js","webpack:///./node_modules/echarts/lib/component/grid/install.js","webpack:///./node_modules/echarts/lib/component/axis/axisSplitHelper.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/component/helper/listComponent.js","webpack:///./node_modules/echarts/lib/coord/axisTickLabelBuilder.js","webpack:///./node_modules/echarts/lib/coord/Axis.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/component/grid/installSimple.js","webpack:///./node_modules/echarts/lib/layout/points.js","webpack:///./node_modules/echarts/lib/component/title/install.js","webpack:///./node_modules/echarts/lib/coord/axisCommonTypes.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/component/axisPointer/PolarAxisPointer.js","webpack:///./node_modules/echarts/lib/coord/polar/PolarModel.js","webpack:///./node_modules/echarts/lib/coord/polar/AxisModel.js","webpack:///./node_modules/echarts/lib/coord/polar/RadiusAxis.js","webpack:///./node_modules/echarts/lib/coord/polar/AngleAxis.js","webpack:///./node_modules/echarts/lib/coord/polar/Polar.js","webpack:///./node_modules/echarts/lib/coord/polar/polarCreator.js","webpack:///./node_modules/echarts/lib/component/axis/AngleAxisView.js","webpack:///./node_modules/echarts/lib/component/axis/RadiusAxisView.js","webpack:///./node_modules/echarts/lib/layout/barPolar.js","webpack:///./node_modules/echarts/lib/component/polar/install.js","webpack:///./node_modules/echarts/lib/chart/line/poly.js","webpack:///./node_modules/echarts/lib/util/vendor.js","webpack:///./node_modules/echarts/lib/chart/helper/SymbolDraw.js","webpack:///./node_modules/zrender/lib/canvas/Layer.js","webpack:///./node_modules/zrender/lib/canvas/Painter.js","webpack:///./node_modules/echarts/lib/renderer/installCanvasRenderer.js","webpack:///./node_modules/echarts/lib/component/legend/LegendModel.js","webpack:///./node_modules/echarts/lib/component/legend/LegendView.js","webpack:///./node_modules/echarts/lib/component/legend/legendFilter.js","webpack:///./node_modules/echarts/lib/component/legend/legendAction.js","webpack:///./node_modules/echarts/lib/component/legend/installLegendPlain.js","webpack:///./node_modules/echarts/lib/component/legend/ScrollableLegendModel.js","webpack:///./node_modules/echarts/lib/component/legend/ScrollableLegendView.js","webpack:///./node_modules/echarts/lib/component/legend/scrollableLegendAction.js","webpack:///./node_modules/echarts/lib/component/legend/installLegendScroll.js","webpack:///./node_modules/echarts/lib/component/legend/install.js"],"names":["Symbol","_super","data","idx","seriesScope","opts","_this","call","this","updateData","prototype","_createSymbol","symbolType","symbolSize","keepAspect","removeAll","symbolPath","attr","z2","culling","scaleX","scaleY","drift","driftSymbol","_symbolType","add","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","downplay","setZ","zlevel","z","setDraggable","draggable","cursor","silent","getItemVisual","seriesModel","hostModel","getSymbolSize","isInit","disableAnimation","target","_updateCommon","_sizeX","_sizeY","style","opacity","_seriesModel","emphasisItemStyle","blurItemStyle","selectItemStyle","focus","blurScope","labelStatesModels","hoverScale","cursorStyle","hasItemOption","itemModel","getItemModel","emphasisModel","getModel","getItemStyle","get","getShallow","symbolRotate","Math","PI","symbolOffset","x","y","symbolStyle","visualColor","fill","pathStyle","useStyle","image","width","height","__isEmptyBrush","decal","setColor","symbolInnerColor","strokeNoScale","liftZ","z2Origin","_z2","useNameLabel","getLabelDefaultText","getName","labelFetcher","labelDataIndex","defaultText","inheritColor","defaultOpacity","emphasisState","ensureState","scaleRatio","max","setSymbolScale","scale","fadeOut","cb","opt","dataIndex","animationOpt","animation","fadeLabel","textContent","getTextContent","removeOpt","removeTextContent","slice","dx","dy","parent","AxisModelCommonMixin","getNeedCrossZero","option","getCoordSysModel","LineSeriesModel","apply","arguments","type","hasSymbolVisual","getInitialData","createListFromArray","getSource","useEncodeDefaulter","getLegendIcon","group","Group","line","itemHeight","itemWidth","lineStyle","stroke","setStyle","visualType","getData","getVisual","visualRotate","size","symbol","itemStyle","iconRotate","rotation","setOrigin","indexOf","lineWidth","dependencies","defaultOption","coordinateSystem","legendHoverLink","clip","label","position","endLabel","show","valueAnimation","distance","emphasis","step","smooth","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","animationEasing","progressive","hoverLayerThreshold","Infinity","Series","LineSeries","prepareDataCoordInfo","coordSys","valueOrigin","baseAxis","getBaseAxis","valueAxis","getOtherAxis","valueStart","getValueStart","baseAxisDim","dim","valueAxisDim","valueDim","mapDimension","baseDim","baseDataOffset","dims","dimensions","coordDim","stacked","stackResultDim","getCalculationInfo","dataDimsForPoint","stackedOverDimension","extent","getExtent","getStackedOnPoint","dataCoordInfo","value","NaN","isNaN","stackedData","dataToPoint","diffData","oldData","newData","diffResult","diff","push","cmd","update","newIdx","oldIdx","idx1","remove","execute","lineAnimationDiff","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","currPoints","nextPoints","currStackedPoints","nextStackedPoints","status","sortedIndices","rawIndices","newDataOldCoordInfo","oldPoints","getLayout","newPoints","i","length","diffItem","pointAdded","oldIdx2","newIdx2","currentX","currentY","nextX","nextY","getRawIndex","newDataDimsForPoint","oldPt","stackedOnPoint","sort","a","b","len","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","i2","idx2","current","next","stackedOnCurrent","stackedOnNext","isPointsSame","points1","points2","bboxFromPoints","points","minX","minY","maxX","maxY","min","getBoundingDiff","_a","min1","max1","_b","min2","max2","abs","getSmooth","getStackedOnPoints","count","pt","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","stepPt","nextPt","middle","stepPt2","getVisualGradient","visualMetaList","visualMeta","dimIndex","dimension","dimName","dimInfo","getDimensionInfo","axis","getAxis","colorStops","stops","stop","offset","coord","toGlobalCoord","dataToCoord","color","stopLen","outerColors","reverse","tinyExtent","minCoord","maxCoord","coordSpan","unshift","gradient","getIsIgnoreFunc","isAuto","categoryAxis","getAxesByScale","canShowAllSymbolForCategory","categoryDataDim","labelMap","getViewLabels","labelItem","ordinalNumber","getRawOrdinalNumber","tickValue","hasOwnProperty","axisExtent","availSize","dataLen","round","isHorizontal","isPointNull","getLastIndexNotNull","getPointAtIndex","getIndexRange","xOrY","dimIdx","prevIndex","nextIndex","range","t","createLineClipPath","lineView","hasAnimation","endLabelModel_1","showEndLabel","valueAnimation_1","data_1","labelAnimationRecord_1","lastFrameIndex","during","percent","clipRect","_endLabelOnDuring","clipPath","_endLabel","originalX","originalY","rectShape","shape","expandSize","getEndLabelStateSpecified","endLabelModel","isBaseInversed","inverse","align","verticalAlign","normal","LineView","init","lineGroup","symbolDraw","SymbolDraw","_symbolDraw","_lineGroup","render","ecModel","api","lineStyleModel","areaStyleModel","isCoordSysPolar","prevCoordSys","_coordSys","polyline","_polyline","polygon","_polygon","isAreaChart","isEmpty","stackedOnPoints","isIgnoreFunc","_data","eachItemGraphicEl","el","__temp","setItemGraphicEl","clipShapeForSymbol","getArea","r0","r","_clipShapeForSymbol","_step","_newPolygon","_initOrUpdateEndLabel","setClipPath","isIgnore","clipShape","getSymbolPoint","_stackedOnPoints","_points","_doUpdateAnimation","setShape","_initSymbolLabelAnimation","_newPolyline","getLineStyle","lineJoin","emphasisLineStyle","getState","seriesIndex","stackedOnSeries","stackedOnSmooth","getAreaStyle","changePolyState","toState","_changePolyState","onHoverStateChange","_valueOrigin","dispose","payload","model","Array","getItemGraphicEl","contain","symbolLabel","Chart","segmentIgnoreThreshold","isHorizontalOrRadial","isAxisInverse","seriesDuration","seriesDalay","seriesDalayValue","point","start","end","polarClip","pointToCoord","startAngle","endAngle","gridClip","ratio","delay","text","animateTo","duration","animateFrom","disableLabelAnimation","data_2","ignoreClip","setTextContent","interpolatedValue","enableTextSetter","textConfig","animationRecord","precision","distanceX","distanceY","dataIndexRange","indices","getRawValue","getPointOn","startValue","endValue","setLabelText","__points","graphic","updatedDataInfo","diffStatus","ptIdx","animators","dirtyShape","markRedraw","install","registers","registerChartView","registerSeriesModel","registerLayout","registerVisual","seriesType","reset","setVisual","registerProcessor","PRIORITY","PROCESSOR","STATISTIC","dataSample","inner","rectCoordAxisBuildSplitArea","axisView","axisGroup","axisModel","gridModel","isBlank","splitAreaModel","areaColors","gridRect","getRect","ticksCoords","getTicksCoords","tickModel","clamp","areaColorsLen","lastSplitAreaColors","splitAreaColors","newSplitAreaColors","colorIndex","cIndex","prev","areaStyle","tickCoord","set","anid","autoBatch","rectCoordAxisHandleRemove","name","nameLocation","nameRotate","nameTruncate","maxWidth","ellipsis","placeholder","nameTextStyle","nameGap","triggerEvent","tooltip","axisPointer","axisLine","onZero","onZeroAxisIndex","axisTick","inside","axisLabel","rotate","showMinLabel","showMaxLabel","margin","fontSize","splitLine","splitArea","boundaryGap","deduplication","alignWithLabel","interval","splitNumber","minorTick","minorSplitLine","timeAxis","rich","primary","fontWeight","logAxis","logBase","category","time","log","layout","componentModel","boxLayoutParams","getBoxLayoutParams","padding","viewportSize","getWidth","getHeight","rect","makeBackground","createAxisLabels","makeCategoryLabels","makeRealNumberLabels","createAxisTicks","makeCategoryTicks","ticks","getTicks","tick","labelModel","getLabelModel","result","makeCategoryLabelsActually","labels","labelCategoryInterval","numericLabelInterval","labelsCache","getListCache","optionLabelInterval","listCacheGet","makeLabelsByCustomizedCategoryInterval","makeAutoCategoryInterval","makeLabelsByNumericCategoryInterval","listCacheSet","tickCategoryInterval","ticksCache","optionTickInterval","labelsResult","labelFormatter","formattedLabel","rawLabel","getLabel","prop","cache","key","autoInterval","calculateCategoryInterval","params","fetchAutoCategoryIntervalCalculationParams","axisRotate","labelRotate","ordinalScale","ordinalExtent","tickCount","floor","unitSpan","unitW","cos","unitH","sin","maxW","maxH","font","dw","dh","lastAutoInterval","lastTickCount","axisExtent0","axisExtent1","getRotate","getFont","categoryInterval","onlyTick","startTick","ceil","showAllLabel","includeMinLabel","includeMaxLabel","addItem","tickObj","NORMALIZED_EXTENT","Axis","onBand","_extent","containData","getPixelPrecision","dataExtent","setExtent","normalize","fixExtentWithBands","coordToData","pointToData","getTickModel","tickVal","fixOnBandTicksCoords","getMinorTicksCoords","minorTickModel","minorTicks","getMinorTicks","minorTicksCoords","minorTicksGroup","getBandWidth","nTick","ticksLen","last","diffSize","crossLen","shift_1","ticksItem","littleThan","shift","pop","GridModel","layoutMode","left","top","right","bottom","containLabel","backgroundColor","borderWidth","borderColor","CartesianAxisModel","getReferringComponents","models","Cartesian","_dimList","_axes","getAxes","scaleType","toLowerCase","addAxis","cartesian2DDimensions","canCalculateAffineTransform","Cartesian2D","calcAffineTransform","_transform","_invTransform","xAxisScale","yAxisScale","xScaleExtent","yScaleExtent","xScaleSpan","yScaleSpan","translateX","translateY","m","containPoint","axisX","axisY","toLocalCoord","out","xVal","yVal","isFinite","xAxis","yAxis","clampData","xScale","yScale","xAxisExtent","yAxisExtent","parse","xExtent","getGlobalExtent","yExtent","BoundingRect","Axis2D","coordExtent","axisType","index","asc","ret","setCategorySortInfo","info","categorySortInfo","setSortInfo","Grid","_coordsMap","_coordsList","_axesMap","_axesList","axisPointerEnabled","_initCartesian","_rect","axesMap","_updateScale","onZeroRecords","fixAxisOnZero","resize","ignoreContainLabel","isContainLabel","axesList","adjustAxes","updateAxisTransform","labelUnionRect","axisIndex","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","getCartesians","convertToPixel","finder","_findConvertTarget","cartesian","convertFromPixel","xAxisModel","yAxisModel","coordsList","componentIndex","grid","axisPositionUsed","axesCount","eachComponent","createAxisCreator","isAxisUsedInTheGrid","axisPosition","isCategory","master","unionExtent","unionExtentFromData","eachSeries","axesModelMap","getTooltipAxes","baseAxes","otherAxes","otherAxis","create","grids","otherAxisDim","getAxesOnZeroOf","otherAxisOnZeroOf","canOnZeroToAxis","getOnZeroRecordKey","coordBase","axisExtentSum","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","axisPointerClass","oldAxisGroup","_axisGroup","cartesianAxisHelper","axisBuilder","AxisBuilder","handleAutoShown","elementType","cartesians","otherAxisType","getGroup","axisElementBuilders","AxisView","splitLineModel","lineColors","lineCount","p1","p2","subPixelOptimize","x1","y1","x2","y2","minorSplitLineModel","k","CartesianXAxisView","CartesianYAxisView","GridView","Rect","Component","extraOption","registerComponentView","registerComponentModel","registerCoordinateSystem","axisModelCreator","registerPreprocessor","pointsLayout","forceStoreInTypedArray","plan","pipelineContext","useTypedArray","large","dimLen","dimInfo0","dimInfo1","dimIdx0","dimIdx1","progress","segCount","tmpIn","tmpOut","getByDimIdx","setItemLayout","setLayout","TitleModel","ignoreSize","subtext","subtarget","itemGap","textStyle","subtextStyle","TitleView","titleModel","textStyleModel","subtextStyleModel","textAlign","textVerticalAlign","textEl","getTextColor","disableBox","textRect","getBoundingRect","subText","subTextEl","link","sublink","on","eventData","componentType","groupRect","layoutOption","layoutRect","alignStyle","AXIS_TYPES","axisName","BaseAxisModelClass","extraDefaultOption","v","axisDefault","AxisModel","args","_i","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","getAxisType","optionUpdated","thisOption","__ordinalMeta","OrdinalMeta","createByAxisModel","getCategories","rawData","categories","getOrdinalMeta","registerSubTypeDefaulter","PolarAxisPointer","makeElOption","elOption","axisPointerModel","animationThreshold","polar","otherExtent","coordValue","axisPointerType","elStyle","viewHelper","pointerOption","pointerShapeBuilder","graphicKey","pointer","labelMargin","labelPos","getLabelPosition","BaseAxisPointer","axisAngle","getAngleAxis","radiusExtent","getRadiusAxis","transform","matrix","cx","cy","labelRotation","labelLayout","innerTextLayout","coordToPoint","shadow","bandWidth","radian","PolarModel","findAxisModel","foundAxisModel","center","radius","PolarAxisModel","AngleAxisModel","RadiusAxisModel","RadiusAxis","dataToRadius","radiusToData","AngleAxis","angleExtent","dataToAngle","angleToData","Polar","_radiusAxis","_angleAxis","axes","angleAxis","radiusAxis","minAngle","maxAngle","sqrt","atan2","dir","RADIAN","clockwise","d2","getCoordSys","pixel","polarModel","resizePolar","parsedRadius","updatePolarScale","isAngleAxisModel","mainType","setAxis","polarCreator","polarList","radiusAxisModel","angleAxisModel","elementList","getAxisLineShape","rExtent","angle","getRadiusIdx","fixAngleOverlap","list","firstItem","lastItem","AngleAxisView","ticksAngles","minorTickAngles","angelAxisElementsBuilders","rId","r0Id","tickLen","lines","tickAngleItem","tickAngles","rawCategoryData","commonLabelModel","p","labelTextAlign","labelTextVerticalAlign","rawCategoryItem","Model","isLabelSilent","makeAxisEventDataBase","targetType","splitLines","splitAreas","prevAngle","r1","RadiusAxisView","newAxisGroup","layoutAxis","prevRadius","labelDirection","tickDirection","nameDirection","getSeriesStackId","getAxisKey","barLayoutPolar","lastStackCoords","barWidthAndOffset","calRadialBar","getSeriesByType","isSeriesFiltered","eachSeriesByType","axisKey","stackId","columnLayoutInfo","columnOffset","columnWidth","barMinHeight","barMinAngle","clampLayout","valueAxisStart","baseValue","sign","baseCoord","n","radiusSpan","angleSpan","barSeries","columnsMap","columnsOnAxis","remainedWidth","autoWidthCount","categoryGap","gap","stacks","barWidth","barMaxWidth","barGap","barCategoryGap","coordSysName","barGapPercent","autoWidth","column","stack","lastColumn","widthSum","angleAxisExtraOption","radiusAxisExtraOption","PolarView","registerAxisPointerClass","mathMin","mathMax","drawSegment","ctx","segLen","allLen","prevX","prevY","cpx0","cpy0","cpx1","cpy1","nextIdx","tmpK","ratioNextSeg","vx","vy","nextCpx0","nextCpy0","dx0","dx1","dy0","dy1","lenPrevSeg","lenNextSeg","bezierCurveTo","lineTo","ECPolylineShape","smoothConstraint","ECPolyline","getDefaultStyle","getDefaultShape","buildPath","path","createPathProxy","x0","y0","CMD","isDimX","roots","x3","y3","M","L","val","C","nRoot","i_1","t_1","ECPolygonShape","ECPolygon","closePath","supportFloat32Array","Float32Array","Float32ArrayCtor","createFloat32Array","arg","symbolNeedsDraw","normalizeUpdateOpt","makeSeriesScope","SymbolCtor","_SymbolCtor","symbolUpdateOpt","getItemLayout","symbolEl","setPosition","_getSymbolPoint","isPersistent","updateLayout","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","incremental","hoverLayer","traverse","enableAnimation","returnFalse","createDom","id","painter","dpr","newDom","util","newDomStyle","setAttribute","Layer","dom","motionBlur","lastFrameAlpha","virtual","config","maxRepaintRectCount","__dirty","__firstTimePaint","__used","__drawIndex","__startIndex","__endIndex","__prevStartIndex","__prevEndIndex","domStyle","onselectstart","webkitUserSelect","userSelect","webkitTapHighlightColor","domBack","ctxBack","getElementCount","afterBrush","initContext","getContext","setUnpainted","createBackBuffer","createRepaintRects","displayList","prevList","viewWidth","viewHeight","hasIntersections","mergedRepaintRects","full","pendingRect","addRectToMergePool","isZero","boundingRect","copy","isMerged","minDeltaArea","bestRectToMergeIdx","mergedRect","intersect","pendingRect_1","union","aArea","bArea","pendingArea","deltaArea","shouldPaint","shouldBePainted","prevRect","__isRendered","getPrevPaintRect","curRect","getPaintRect","__zr","splice","j","_paintRects","debugGetPaintRects","clear","clearAll","clearColor","repaintRects","haveMotionBLur","self","globalCompositeOperation","drawImage","doClear","clearRect","clearColorGradientOrPattern","__canvasGradient","dirty","__painter","refresh","save","fillStyle","fillRect","restore","globalAlpha","Eventful","HOVER_LAYER_ZLEVEL","CANVAS_ZLEVEL","EL_AFTER_INCREMENTAL_INC","INCREMENTAL_INC","parseInt10","parseInt","isLayerValid","layer","__builtin__","createRoot","domRoot","document","createElement","cssText","join","CanvasPainter","root","storage","_zlevelList","_prevDisplayList","_layers","_layerConfig","_needsManuallyCompositing","singleCanvas","nodeName","toUpperCase","_opts","devicePixelRatio","_singleCanvas","rootStyle","innerHTML","zlevelList","layers","rootCanvas","_width","_height","mainLayer","_domRoot","_getSize","appendChild","getType","isSingleCanvas","getViewportRoot","getViewportRootOffset","viewportRoot","offsetLeft","offsetTop","paintAll","getDisplayList","_redrawId","random","_paintList","_backgroundColor","useDirtyRect","refreshHover","_paintHoverList","_hoverlayer","scope","inHover","__inHover","getLayer","getHoverLayer","paintOne","redrawId","_updateLayerStatus","_doPaintList","finished","needsRefreshHover","_compositeManually","eachLayer","self_1","requestAnimationFrame","eachBuiltinLayer","layerList","zi","_loop_1","this_1","useTimer","Date","now","startTime","firstEl","notClear","console","error","repaint","repaintRect","allClipped","prevEl","_doPaintEl","dTime","prevElClipPaths","beginPath","env","wxa","draw","currentLayer","isLast","paintRect","setPrevPaintRect","insertLayer","layersMap","prevLayer","prevDom","nextSibling","insertBefore","firstChild","context","eachOtherLayer","getLayers","updatePrevLayer","prevZlevel","incrementalLayerCount","_clearLayer","setBackgroundColor","configLayer","layerConfig","_zlevel","delLayer","parentNode","removeChild","display","clearLayer","getRenderedCanvas","imageLayer","pixelRatio","width_1","height_1","renderToCanvas","whIdx","wh","cwh","plt","prb","parseFloat","stl","defaultView","getComputedStyle","pathToImage","canvas","shadowBlurSize","shadowBlur","shadowOffsetX","shadowOffsetY","hasStroke","leftMargin","rightMargin","topMargin","bottomMargin","pathTransform","originX","originY","updateTransform","imgShape","registerPainter","getDefaultSelectorOptions","title","getLocale","LegendModel","parentModel","selected","_updateSelector","mergeOption","selector","item","_updateData","legendData","hasSelected","name_1","isSelected","select","potentialData","availableNames","eachRawSeries","isPotential","seriesName","legendVisualProvider","provider","names","getAllNames","concat","_availableNames","dataItem","selectedMode","unSelect","toggleSelected","allSelect","inverseSelect","getOrient","orient","borderRadius","inactiveColor","inactiveBorderColor","inactiveBorderWidth","shadowColor","borderCap","borderJoin","borderDashOffset","borderMiterLimit","inactiveWidth","cap","dashOffset","miterLimit","selectorLabel","fontFamily","selectorPosition","selectorItemGap","selectorButtonGap","curry","each","LegendView","newlineDisabled","_contentGroup","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","legendModel","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","maxSize","mainRect","layoutInner","_backgroundEl","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","legendItemModel","g","newline","getSeriesByName","lineVisualStyle","legendIcon","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","containName","indexOfName","colorArr","_createSelector","selectorGroup","selectorItem","labelText","onclick","dispatchAction","emphasisLabelModel","itemVisualStyle","drawType","visualDrawType","legendIconType","legendLineStyle","getLegendStyle","getDefaultLegendIcon","icon","textX","formatter","content","replace","hitRect","invisible","tooltipModel","itemName","itemTooltipOption","eachChild","child","__legendDataIndex","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","iconType","itemProperties","propName","visualName","lastIndexOf","legendLineModel","lineProperties","visualHasBorder","symboType","dataName","isUseHoverLayer","getZr","states","legendFilter","legendModels","findComponents","filterSeries","series","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","isItemSelected","installLegendAction","registerAction","SERIES_FILTER","ScrollableLegendModel","setScrollDataIndex","scrollDataIndex","mergeAndNormalizeLayoutParams","pageButtonItemGap","pageButtonGap","pageButtonPosition","pageFormatter","pageIcons","horizontal","vertical","pageIconColor","pageIconInactiveColor","pageIconSize","pageTextStyle","animationDurationUpdate","raw","WH","XY","ScrollableLegendView","_currentIndex","_containerGroup","_controllerGroup","removeClipPath","__rectSize","controllerGroup","pageIconSizeArr","createPageButton","pageTextStyleModel","iconIdx","pageDataIndexName","_pageGo","xy","processMaxSize","_layoutContentAndController","containerGroup","controllerRect","showController","_showController","containerPos","controllerPos","pageInfo","_getPageInfo","pageIndex","contentPosition","_updatePageInfoView","to","legendId","canJump","childOfName","pageText","total","pageCount","containerRectSize","targetItemIndex","_findTargetItemIndex","children","targetItem","itemCount","pCount","pagePrevDataIndex","pageNextDataIndex","targetItemInfo","getItemInfo","s","winStartItemInfo","winEndItemInfo","currItemInfo","e","itemRect","itemInfo","winStart","targetDataIndex","defaultIndex","legendDataIdx","installScrollableLegendAction","subType","query"],"mappings":"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","file":"js/chunk-eb9a06c2.352a6af6.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { createSymbol } from '../../util/symbol';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { enterEmphasis, leaveEmphasis, enableHoverEmphasis } from '../../util/states';\nimport { parsePercent } from '../../util/number';\nimport { getDefaultLabel } from './labelHelper';\nimport { extend, isArray, retrieve2 } from 'zrender/lib/core/util';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\n\nvar Symbol =\n/** @class */\nfunction (_super) {\n  __extends(Symbol, _super);\n\n  function Symbol(data, idx, seriesScope, opts) {\n    var _this = _super.call(this) || this;\n\n    _this.updateData(data, idx, seriesScope, opts);\n\n    return _this;\n  }\n\n  Symbol.prototype._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n    // Remove paths created before\n    this.removeAll(); // let symbolPath = createSymbol(\n    //     symbolType, -0.5, -0.5, 1, 1, color\n    // );\n    // If width/height are set too small (e.g., set to 1) on ios10\n    // and macOS Sierra, a circle stroke become a rect, no matter what\n    // the scale is set. So we set width/height as 2. See #4150.\n\n    var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, null, keepAspect);\n    symbolPath.attr({\n      z2: 100,\n      culling: true,\n      scaleX: symbolSize[0] / 2,\n      scaleY: symbolSize[1] / 2\n    }); // Rewrite drift method\n\n    symbolPath.drift = driftSymbol;\n    this._symbolType = symbolType;\n    this.add(symbolPath);\n  };\n  /**\n   * Stop animation\n   * @param {boolean} toLastFrame\n   */\n\n\n  Symbol.prototype.stopSymbolAnimation = function (toLastFrame) {\n    this.childAt(0).stopAnimation(null, toLastFrame);\n  };\n  /**\n   * FIXME:\n   * Caution: This method breaks the encapsulation of this module,\n   * but it indeed brings convenience. So do not use the method\n   * unless you detailedly know all the implements of `Symbol`,\n   * especially animation.\n   *\n   * Get symbol path element.\n   */\n\n\n  Symbol.prototype.getSymbolPath = function () {\n    return this.childAt(0);\n  };\n  /**\n   * Highlight symbol\n   */\n\n\n  Symbol.prototype.highlight = function () {\n    enterEmphasis(this.childAt(0));\n  };\n  /**\n   * Downplay symbol\n   */\n\n\n  Symbol.prototype.downplay = function () {\n    leaveEmphasis(this.childAt(0));\n  };\n  /**\n   * @param {number} zlevel\n   * @param {number} z\n   */\n\n\n  Symbol.prototype.setZ = function (zlevel, z) {\n    var symbolPath = this.childAt(0);\n    symbolPath.zlevel = zlevel;\n    symbolPath.z = z;\n  };\n\n  Symbol.prototype.setDraggable = function (draggable) {\n    var symbolPath = this.childAt(0);\n    symbolPath.draggable = draggable;\n    symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n  };\n  /**\n   * Update symbol properties\n   */\n\n\n  Symbol.prototype.updateData = function (data, idx, seriesScope, opts) {\n    this.silent = false;\n    var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n    var seriesModel = data.hostModel;\n    var symbolSize = Symbol.getSymbolSize(data, idx);\n    var isInit = symbolType !== this._symbolType;\n    var disableAnimation = opts && opts.disableAnimation;\n\n    if (isInit) {\n      var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n      this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n    } else {\n      var symbolPath = this.childAt(0);\n      symbolPath.silent = false;\n      var target = {\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2\n      };\n      disableAnimation ? symbolPath.attr(target) : graphic.updateProps(symbolPath, target, seriesModel, idx);\n    }\n\n    this._updateCommon(data, idx, symbolSize, seriesScope, opts);\n\n    if (isInit) {\n      var symbolPath = this.childAt(0);\n\n      if (!disableAnimation) {\n        var target = {\n          scaleX: this._sizeX,\n          scaleY: this._sizeY,\n          style: {\n            // Always fadeIn. Because it has fadeOut animation when symbol is removed..\n            opacity: symbolPath.style.opacity\n          }\n        };\n        symbolPath.scaleX = symbolPath.scaleY = 0;\n        symbolPath.style.opacity = 0;\n        graphic.initProps(symbolPath, target, seriesModel, idx);\n      }\n    }\n\n    if (disableAnimation) {\n      // Must stop remove animation manually if don't call initProps or updateProps.\n      this.childAt(0).stopAnimation('remove');\n    }\n\n    this._seriesModel = seriesModel;\n  };\n\n  Symbol.prototype._updateCommon = function (data, idx, symbolSize, seriesScope, opts) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = data.hostModel;\n    var emphasisItemStyle;\n    var blurItemStyle;\n    var selectItemStyle;\n    var focus;\n    var blurScope;\n    var labelStatesModels;\n    var hoverScale;\n    var cursorStyle;\n\n    if (seriesScope) {\n      emphasisItemStyle = seriesScope.emphasisItemStyle;\n      blurItemStyle = seriesScope.blurItemStyle;\n      selectItemStyle = seriesScope.selectItemStyle;\n      focus = seriesScope.focus;\n      blurScope = seriesScope.blurScope;\n      labelStatesModels = seriesScope.labelStatesModels;\n      hoverScale = seriesScope.hoverScale;\n      cursorStyle = seriesScope.cursorStyle;\n    }\n\n    if (!seriesScope || data.hasItemOption) {\n      var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx);\n      var emphasisModel = itemModel.getModel('emphasis');\n      emphasisItemStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      selectItemStyle = itemModel.getModel(['select', 'itemStyle']).getItemStyle();\n      blurItemStyle = itemModel.getModel(['blur', 'itemStyle']).getItemStyle();\n      focus = emphasisModel.get('focus');\n      blurScope = emphasisModel.get('blurScope');\n      labelStatesModels = getLabelStatesModels(itemModel);\n      hoverScale = emphasisModel.getShallow('scale');\n      cursorStyle = itemModel.getShallow('cursor');\n    }\n\n    var symbolRotate = data.getItemVisual(idx, 'symbolRotate');\n    symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n    var symbolOffset = data.getItemVisual(idx, 'symbolOffset') || 0;\n\n    if (symbolOffset) {\n      if (!isArray(symbolOffset)) {\n        symbolOffset = [symbolOffset, symbolOffset];\n      }\n\n      symbolPath.x = parsePercent(symbolOffset[0], symbolSize[0]);\n      symbolPath.y = parsePercent(retrieve2(symbolOffset[1], symbolOffset[0]) || 0, symbolSize[1]);\n    }\n\n    cursorStyle && symbolPath.attr('cursor', cursorStyle);\n    var symbolStyle = data.getItemVisual(idx, 'style');\n    var visualColor = symbolStyle.fill;\n\n    if (symbolPath instanceof ZRImage) {\n      var pathStyle = symbolPath.style;\n      symbolPath.useStyle(extend({\n        // TODO other properties like x, y ?\n        image: pathStyle.image,\n        x: pathStyle.x,\n        y: pathStyle.y,\n        width: pathStyle.width,\n        height: pathStyle.height\n      }, symbolStyle));\n    } else {\n      if (symbolPath.__isEmptyBrush) {\n        // fill and stroke will be swapped if it's empty.\n        // So we cloned a new style to avoid it affecting the original style in visual storage.\n        // TODO Better implementation. No empty logic!\n        symbolPath.useStyle(extend({}, symbolStyle));\n      } else {\n        symbolPath.useStyle(symbolStyle);\n      } // Disable decal because symbol scale will been applied on the decal.\n\n\n      symbolPath.style.decal = null;\n      symbolPath.setColor(visualColor, opts && opts.symbolInnerColor);\n      symbolPath.style.strokeNoScale = true;\n    }\n\n    var liftZ = data.getItemVisual(idx, 'liftZ');\n    var z2Origin = this._z2;\n\n    if (liftZ != null) {\n      if (z2Origin == null) {\n        this._z2 = symbolPath.z2;\n        symbolPath.z2 += liftZ;\n      }\n    } else if (z2Origin != null) {\n      symbolPath.z2 = z2Origin;\n      this._z2 = null;\n    }\n\n    var useNameLabel = opts && opts.useNameLabel;\n    setLabelStyle(symbolPath, labelStatesModels, {\n      labelFetcher: seriesModel,\n      labelDataIndex: idx,\n      defaultText: getLabelDefaultText,\n      inheritColor: visualColor,\n      defaultOpacity: symbolStyle.opacity\n    }); // Do not execute util needed.\n\n    function getLabelDefaultText(idx) {\n      return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n    }\n\n    this._sizeX = symbolSize[0] / 2;\n    this._sizeY = symbolSize[1] / 2;\n    var emphasisState = symbolPath.ensureState('emphasis');\n    emphasisState.style = emphasisItemStyle;\n    symbolPath.ensureState('select').style = selectItemStyle;\n    symbolPath.ensureState('blur').style = blurItemStyle;\n\n    if (hoverScale) {\n      var scaleRatio = Math.max(1.1, 3 / this._sizeY);\n      emphasisState.scaleX = this._sizeX * scaleRatio;\n      emphasisState.scaleY = this._sizeY * scaleRatio;\n    }\n\n    this.setSymbolScale(1);\n    enableHoverEmphasis(this, focus, blurScope);\n  };\n\n  Symbol.prototype.setSymbolScale = function (scale) {\n    this.scaleX = this.scaleY = scale;\n  };\n\n  Symbol.prototype.fadeOut = function (cb, opt) {\n    var symbolPath = this.childAt(0);\n    var seriesModel = this._seriesModel;\n    var dataIndex = getECData(this).dataIndex;\n    var animationOpt = opt && opt.animation; // Avoid mistaken hover when fading out\n\n    this.silent = symbolPath.silent = true; // Not show text when animating\n\n    if (opt && opt.fadeLabel) {\n      var textContent = symbolPath.getTextContent();\n\n      if (textContent) {\n        graphic.removeElement(textContent, {\n          style: {\n            opacity: 0\n          }\n        }, seriesModel, {\n          dataIndex: dataIndex,\n          removeOpt: animationOpt,\n          cb: function () {\n            symbolPath.removeTextContent();\n          }\n        });\n      }\n    } else {\n      symbolPath.removeTextContent();\n    }\n\n    graphic.removeElement(symbolPath, {\n      style: {\n        opacity: 0\n      },\n      scaleX: 0,\n      scaleY: 0\n    }, seriesModel, {\n      dataIndex: dataIndex,\n      cb: cb,\n      removeOpt: animationOpt\n    });\n  };\n\n  Symbol.getSymbolSize = function (data, idx) {\n    var symbolSize = data.getItemVisual(idx, 'symbolSize');\n    return isArray(symbolSize) ? symbolSize.slice() : [+symbolSize, +symbolSize];\n  };\n\n  return Symbol;\n}(graphic.Group);\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nexport default Symbol;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModelCommonMixin =\n/** @class */\nfunction () {\n  function AxisModelCommonMixin() {}\n\n  AxisModelCommonMixin.prototype.getNeedCrossZero = function () {\n    var option = this.option;\n    return !option.scale;\n  };\n  /**\n   * Should be implemented by each axis model if necessary.\n   * @return coordinate system model\n   */\n\n\n  AxisModelCommonMixin.prototype.getCoordSysModel = function () {\n    return;\n  };\n\n  return AxisModelCommonMixin;\n}();\n\nexport { AxisModelCommonMixin };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport createListFromArray from '../helper/createListFromArray';\nimport SeriesModel from '../../model/Series';\nimport { createSymbol } from '../../util/symbol';\nimport { Group } from '../../util/graphic';\n\nvar LineSeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(LineSeriesModel, _super);\n\n  function LineSeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LineSeriesModel.type;\n    _this.hasSymbolVisual = true;\n    return _this;\n  }\n\n  LineSeriesModel.prototype.getInitialData = function (option) {\n    if (process.env.NODE_ENV !== 'production') {\n      var coordSys = option.coordinateSystem;\n\n      if (coordSys !== 'polar' && coordSys !== 'cartesian2d') {\n        throw new Error('Line not support coordinateSystem besides cartesian and polar');\n      }\n    }\n\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true\n    });\n  };\n\n  LineSeriesModel.prototype.getLegendIcon = function (opt) {\n    var group = new Group();\n    var line = createSymbol('line', 0, opt.itemHeight / 2, opt.itemWidth, 0, opt.lineStyle.stroke, false);\n    group.add(line);\n    line.setStyle(opt.lineStyle);\n    var visualType = this.getData().getVisual('symbol');\n    var visualRotate = this.getData().getVisual('symbolRotate');\n    var symbolType = visualType === 'none' ? 'circle' : visualType; // Symbol size is 80% when there is a line\n\n    var size = opt.itemHeight * 0.8;\n    var symbol = createSymbol(symbolType, (opt.itemWidth - size) / 2, (opt.itemHeight - size) / 2, size, size, opt.itemStyle.fill);\n    group.add(symbol);\n    symbol.setStyle(opt.itemStyle);\n    var symbolRotate = opt.iconRotate === 'inherit' ? visualRotate : opt.iconRotate || 0;\n    symbol.rotation = symbolRotate * Math.PI / 180;\n    symbol.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n    if (symbolType.indexOf('empty') > -1) {\n      symbol.style.stroke = symbol.style.fill;\n      symbol.style.fill = '#fff';\n      symbol.style.lineWidth = 2;\n    }\n\n    return group;\n  };\n\n  LineSeriesModel.type = 'series.line';\n  LineSeriesModel.dependencies = ['grid', 'polar'];\n  LineSeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 3,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    clip: true,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    endLabel: {\n      show: false,\n      valueAnimation: true,\n      distance: 8\n    },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    emphasis: {\n      scale: true,\n      lineStyle: {\n        width: 'bolder'\n      }\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum', 'lttb'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  };\n  return LineSeriesModel;\n}(SeriesModel);\n\nexport default LineSeriesModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isDimensionStacked } from '../../data/helper/dataStackHelper';\nimport { map } from 'zrender/lib/core/util';\nexport function prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked = false;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[0] = stackResultDim;\n  }\n\n  if (isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    stacked = true;\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nexport function getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper';\nimport { createFloat32Array } from '../../util/vendor';\n\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nexport default function lineAnimationDiff(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // let newIdList = newData.mapArray(newData.getId);\n  // let oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin); // const oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  var oldPoints = oldData.getLayout('points') || [];\n  var newPoints = newData.getLayout('points') || [];\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true;\n    var oldIdx2 = void 0;\n    var newIdx2 = void 0; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        oldIdx2 = diffItem.idx * 2;\n        newIdx2 = diffItem.idx1 * 2;\n        var currentX = oldPoints[oldIdx2];\n        var currentY = oldPoints[oldIdx2 + 1];\n        var nextX = newPoints[newIdx2];\n        var nextY = newPoints[newIdx2 + 1]; // If previous data is NaN, use next point directly\n\n        if (isNaN(currentX) || isNaN(currentY)) {\n          currentX = nextX;\n          currentY = nextY;\n        }\n\n        currPoints.push(currentX, currentY);\n        nextPoints.push(nextX, nextY);\n        currStackedPoints.push(oldStackedOnPoints[oldIdx2], oldStackedOnPoints[oldIdx2 + 1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var newIdx = diffItem.idx;\n        var newDataDimsForPoint = newDataOldCoordInfo.dataDimsForPoint;\n        var oldPt = oldCoordSys.dataToPoint([newData.get(newDataDimsForPoint[0], newIdx), newData.get(newDataDimsForPoint[1], newIdx)]);\n        newIdx2 = newIdx * 2;\n        currPoints.push(oldPt[0], oldPt[1]);\n        nextPoints.push(newPoints[newIdx2], newPoints[newIdx2 + 1]);\n        var stackedOnPoint = getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, newIdx);\n        currStackedPoints.push(stackedOnPoint[0], stackedOnPoint[1]);\n        nextStackedPoints.push(newStackedOnPoints[newIdx2], newStackedOnPoints[newIdx2 + 1]);\n        rawIndices.push(newData.getRawIndex(newIdx));\n        break;\n\n      case '-':\n        pointAdded = false;\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var len = currPoints.length;\n  var sortedCurrPoints = createFloat32Array(len);\n  var sortedNextPoints = createFloat32Array(len);\n  var sortedCurrStackedPoints = createFloat32Array(len);\n  var sortedNextStackedPoints = createFloat32Array(len);\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    var i2 = i * 2;\n    var idx2 = idx * 2;\n    sortedCurrPoints[i2] = currPoints[idx2];\n    sortedCurrPoints[i2 + 1] = currPoints[idx2 + 1];\n    sortedNextPoints[i2] = nextPoints[idx2];\n    sortedNextPoints[i2 + 1] = nextPoints[idx2 + 1];\n    sortedCurrStackedPoints[i2] = currStackedPoints[idx2];\n    sortedCurrStackedPoints[i2 + 1] = currStackedPoints[idx2 + 1];\n    sortedNextStackedPoints[i2] = nextStackedPoints[idx2];\n    sortedNextStackedPoints[i2 + 1] = nextStackedPoints[idx2 + 1];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // FIXME step not support polar\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport SymbolDraw from '../helper/SymbolDraw';\nimport SymbolClz from '../helper/Symbol';\nimport lineAnimationDiff from './lineAnimationDiff';\nimport * as graphic from '../../util/graphic';\nimport * as modelUtil from '../../util/model';\nimport { ECPolyline, ECPolygon } from './poly';\nimport ChartView from '../../view/Chart';\nimport { prepareDataCoordInfo, getStackedOnPoint } from './helper';\nimport { createGridClipPath, createPolarClipPath } from '../helper/createClipPathFromCoordSys';\nimport { isCoordinateSystemType } from '../../coord/CoordinateSystem';\nimport { setStatesStylesFromModel, setStatesFlag, enableHoverEmphasis } from '../../util/states';\nimport { setLabelStyle, getLabelStatesModels, labelInner } from '../../label/labelStyle';\nimport { getDefaultLabel, getDefaultInterpolatedLabel } from '../helper/labelHelper';\nimport { getECData } from '../../util/innerStore';\nimport { createFloat32Array } from '../../util/vendor';\nimport { convertToColorString } from '../../util/format';\n\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    if (points1[i] !== points2[i]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction bboxFromPoints(points) {\n  var minX = Infinity;\n  var minY = Infinity;\n  var maxX = -Infinity;\n  var maxY = -Infinity;\n\n  for (var i = 0; i < points.length;) {\n    var x = points[i++];\n    var y = points[i++];\n\n    if (!isNaN(x)) {\n      minX = Math.min(x, minX);\n      maxX = Math.max(x, maxX);\n    }\n\n    if (!isNaN(y)) {\n      minY = Math.min(y, minY);\n      maxY = Math.max(y, maxY);\n    }\n  }\n\n  return [[minX, minY], [maxX, maxY]];\n}\n\nfunction getBoundingDiff(points1, points2) {\n  var _a = bboxFromPoints(points1),\n      min1 = _a[0],\n      max1 = _a[1];\n\n  var _b = bboxFromPoints(points2),\n      min2 = _b[0],\n      max2 = _b[1]; // Get a max value from each corner of two boundings.\n\n\n  return Math.max(Math.abs(min1[0] - min2[0]), Math.abs(min1[1] - min2[1]), Math.abs(max1[0] - max2[0]), Math.abs(max1[1] - max2[1]));\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var len = data.count();\n  var points = createFloat32Array(len * 2);\n\n  for (var idx = 0; idx < len; idx++) {\n    var pt = getStackedOnPoint(dataCoordInfo, coordSys, data, idx);\n    points[idx * 2] = pt[0];\n    points[idx * 2 + 1] = pt[1];\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n  var i = 0;\n  var stepPt = [];\n  var pt = [];\n  var nextPt = [];\n\n  for (; i < points.length - 2; i += 2) {\n    nextPt[0] = points[i + 2];\n    nextPt[1] = points[i + 3];\n    pt[0] = points[i];\n    pt[1] = points[i + 1];\n    stepPoints.push(pt[0], pt[1]);\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        break;\n\n      case 'middle':\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n        stepPoints.push(stepPt2[0], stepPt2[1]);\n        break;\n\n      default:\n        // default is start\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt[0], stepPt[1]);\n    }\n  } // Last points\n\n\n  stepPoints.push(points[i++], points[i++]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style is only supported on cartesian2d.');\n    }\n\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimIndex = visualMetaList[i].dimension;\n    var dimName = data.dimensions[dimIndex];\n    var dimInfo = data.getDimensionInfo(dimName);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Visual map on line style only support x or y dimension.');\n    }\n\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoord mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      offset: 0,\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value, true)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    var ordinalNumber = categoryAxis.scale.getRawOrdinalNumber(labelItem.tickValue);\n    labelMap[ordinalNumber] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n\nfunction getLastIndexNotNull(points) {\n  var len = points.length / 2;\n\n  for (; len > 0; len--) {\n    if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n      break;\n    }\n  }\n\n  return len - 1;\n}\n\nfunction getPointAtIndex(points, idx) {\n  return [points[idx * 2], points[idx * 2 + 1]];\n}\n\nfunction getIndexRange(points, xOrY, dim) {\n  var len = points.length / 2;\n  var dimIdx = dim === 'x' ? 0 : 1;\n  var a;\n  var b;\n  var prevIndex = 0;\n  var nextIndex = -1;\n\n  for (var i = 0; i < len; i++) {\n    b = points[i * 2 + dimIdx];\n\n    if (isNaN(b) || isNaN(points[i * 2 + 1 - dimIdx])) {\n      continue;\n    }\n\n    if (i === 0) {\n      a = b;\n      continue;\n    }\n\n    if (a <= xOrY && b >= xOrY || a >= xOrY && b <= xOrY) {\n      nextIndex = i;\n      break;\n    }\n\n    prevIndex = i;\n    a = b;\n  }\n\n  return {\n    range: [prevIndex, nextIndex],\n    t: (xOrY - a) / (b - a)\n  };\n}\n\nfunction createLineClipPath(lineView, coordSys, hasAnimation, seriesModel) {\n  if (isCoordinateSystemType(coordSys, 'cartesian2d')) {\n    var endLabelModel_1 = seriesModel.getModel('endLabel');\n    var showEndLabel = endLabelModel_1.get('show');\n    var valueAnimation_1 = endLabelModel_1.get('valueAnimation');\n    var data_1 = seriesModel.getData();\n    var labelAnimationRecord_1 = {\n      lastFrameIndex: 0\n    };\n    var during = showEndLabel ? function (percent, clipRect) {\n      lineView._endLabelOnDuring(percent, clipRect, data_1, labelAnimationRecord_1, valueAnimation_1, endLabelModel_1, coordSys);\n    } : null;\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel, function () {\n      var endLabel = lineView._endLabel;\n\n      if (endLabel && hasAnimation) {\n        if (labelAnimationRecord_1.originalX != null) {\n          endLabel.attr({\n            x: labelAnimationRecord_1.originalX,\n            y: labelAnimationRecord_1.originalY\n          });\n        }\n      }\n    }, during); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    } // Set to the final frame. To make sure label layout is right.\n\n\n    if (during) {\n      during(1, clipPath);\n    }\n\n    return clipPath;\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      if (seriesModel.get(['endLabel', 'show'])) {\n        console.warn('endLabel is not supported for lines in polar systems.');\n      }\n    }\n\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nfunction getEndLabelStateSpecified(endLabelModel, coordSys) {\n  var baseAxis = coordSys.getBaseAxis();\n  var isHorizontal = baseAxis.isHorizontal();\n  var isBaseInversed = baseAxis.inverse;\n  var align = isHorizontal ? isBaseInversed ? 'right' : 'left' : 'center';\n  var verticalAlign = isHorizontal ? 'middle' : isBaseInversed ? 'top' : 'bottom';\n  return {\n    normal: {\n      align: endLabelModel.get('align') || align,\n      verticalAlign: endLabelModel.get('verticalAlign') || verticalAlign\n    }\n  };\n}\n\nvar LineView =\n/** @class */\nfunction (_super) {\n  __extends(LineView, _super);\n\n  function LineView() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LineView.prototype.init = function () {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  };\n\n  LineView.prototype.render = function (seriesModel, ecModel, api) {\n    var _this = this;\n\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.getLayout('points') || [];\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = isAreaChart && getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar ? seriesModel.get('step') : false;\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea && seriesModel.get('clip', true)) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r += 0.5;\n      }\n    }\n\n    this._clipShapeForSymbol = clipShapeForSymbol;\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('style')[data.getVisual('drawType')]; // Initialization animation or coordinate system changed\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      });\n      hasAnimation && this._initSymbolLabelAnimation(data, coordSys, clipShapeForSymbol);\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n\n        if (stackedOnPoints) {\n          stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n        }\n      }\n\n      polyline = this._newPolyline(points);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      }\n\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // NOTE: Must update _endLabel before setClipPath.\n\n\n      if (!isCoordSysPolar) {\n        this._initOrUpdateEndLabel(seriesModel, coordSys, convertToColorString(visualColor));\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createLineClipPath(this, coordSys, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol,\n        disableAnimation: true,\n        getSymbolPoint: function (idx) {\n          return [points[idx * 2], points[idx * 2 + 1]];\n        }\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._doUpdateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n\n            if (stackedOnPoints) {\n              stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n            }\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var focus = seriesModel.get(['emphasis', 'focus']);\n    var blurScope = seriesModel.get(['emphasis', 'blurScope']);\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    setStatesStylesFromModel(polyline, seriesModel, 'lineStyle');\n\n    if (polyline.style.lineWidth > 0 && seriesModel.get(['emphasis', 'lineStyle', 'width']) === 'bolder') {\n      var emphasisLineStyle = polyline.getState('emphasis').style;\n      emphasisLineStyle.lineWidth = +polyline.style.lineWidth + 1;\n    } // Needs seriesIndex for focus\n\n\n    getECData(polyline).seriesIndex = seriesModel.seriesIndex;\n    enableHoverEmphasis(polyline, focus, blurScope);\n    var smooth = getSmooth(seriesModel.get('smooth'));\n    var smoothMonotone = seriesModel.get('smoothMonotone');\n    var connectNulls = seriesModel.get('connectNulls');\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: smoothMonotone,\n      connectNulls: connectNulls\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel',\n        decal: data.getVisual('style').decal\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: smoothMonotone,\n        connectNulls: connectNulls\n      });\n      setStatesStylesFromModel(polygon, seriesModel, 'areaStyle'); // Needs seriesIndex for focus\n\n      getECData(polygon).seriesIndex = seriesModel.seriesIndex;\n      enableHoverEmphasis(polygon, focus, blurScope);\n    }\n\n    var changePolyState = function (toState) {\n      _this._changePolyState(toState);\n    };\n\n    data.eachItemGraphicEl(function (el) {\n      // Switch polyline / polygon state if element changed its state.\n      el && (el.onHoverStateChange = changePolyState);\n    });\n    this._polyline.onHoverStateChange = changePolyState;\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n  };\n\n  LineView.prototype.dispose = function () {};\n\n  LineView.prototype.highlight = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('emphasis');\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var points = data.getLayout('points');\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var x = points[dataIndex * 2];\n        var y = points[dataIndex * 2 + 1];\n\n        if (isNaN(x) || isNaN(y)) {\n          // Null data\n          return;\n        } // fix #11360: should't draw symbol outside clipShapeForSymbol\n\n\n        if (this._clipShapeForSymbol && !this._clipShapeForSymbol.contain(x, y)) {\n          return;\n        }\n\n        var zlevel = seriesModel.get('zlevel');\n        var z = seriesModel.get('z');\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.x = x;\n        symbol.y = y;\n        symbol.setZ(zlevel, z); // ensure label text of the temporary symbol is in front of line and area polygon\n\n        var symbolLabel = symbol.getSymbolPath().getTextContent();\n\n        if (symbolLabel) {\n          symbolLabel.zlevel = zlevel;\n          symbolLabel.z = z;\n          symbolLabel.z2 = this._polyline.z2 + 1;\n        }\n\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype.downplay = function (seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    this._changePolyState('normal');\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  };\n\n  LineView.prototype._changePolyState = function (toState) {\n    var polygon = this._polygon;\n    setStatesFlag(this._polyline, toState);\n    polygon && setStatesFlag(polygon, toState);\n  };\n\n  LineView.prototype._newPolyline = function (points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new ECPolyline({\n      shape: {\n        points: points\n      },\n      segmentIgnoreThreshold: 2,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  };\n\n  LineView.prototype._newPolygon = function (points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new ECPolygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      segmentIgnoreThreshold: 2\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  };\n\n  LineView.prototype._initSymbolLabelAnimation = function (data, coordSys, clipShape) {\n    var isHorizontalOrRadial;\n    var isCoordSysPolar;\n    var baseAxis = coordSys.getBaseAxis();\n    var isAxisInverse = baseAxis.inverse;\n\n    if (coordSys.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n      isCoordSysPolar = false;\n    } else if (coordSys.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n      isCoordSysPolar = true;\n    }\n\n    var seriesModel = data.hostModel;\n    var seriesDuration = seriesModel.get('animationDuration');\n\n    if (typeof seriesDuration === 'function') {\n      seriesDuration = seriesDuration(null);\n    }\n\n    var seriesDalay = seriesModel.get('animationDelay') || 0;\n    var seriesDalayValue = typeof seriesDalay === 'function' ? seriesDalay(null) : seriesDalay;\n    data.eachItemGraphicEl(function (symbol, idx) {\n      var el = symbol;\n\n      if (el) {\n        var point = [symbol.x, symbol.y];\n        var start = void 0;\n        var end = void 0;\n        var current = void 0;\n\n        if (clipShape) {\n          if (isCoordSysPolar) {\n            var polarClip = clipShape;\n            var coord = coordSys.pointToCoord(point);\n\n            if (isHorizontalOrRadial) {\n              start = polarClip.startAngle;\n              end = polarClip.endAngle;\n              current = -coord[1] / 180 * Math.PI;\n            } else {\n              start = polarClip.r0;\n              end = polarClip.r;\n              current = coord[0];\n            }\n          } else {\n            var gridClip = clipShape;\n\n            if (isHorizontalOrRadial) {\n              start = gridClip.x;\n              end = gridClip.x + gridClip.width;\n              current = symbol.x;\n            } else {\n              start = gridClip.y + gridClip.height;\n              end = gridClip.y;\n              current = symbol.y;\n            }\n          }\n        }\n\n        var ratio = end === start ? 0 : (current - start) / (end - start);\n\n        if (isAxisInverse) {\n          ratio = 1 - ratio;\n        }\n\n        var delay = typeof seriesDalay === 'function' ? seriesDalay(idx) : seriesDuration * ratio + seriesDalayValue;\n        var symbolPath = el.getSymbolPath();\n        var text = symbolPath.getTextContent();\n        el.attr({\n          scaleX: 0,\n          scaleY: 0\n        });\n        el.animateTo({\n          scaleX: 1,\n          scaleY: 1\n        }, {\n          duration: 200,\n          delay: delay\n        });\n\n        if (text) {\n          text.animateFrom({\n            style: {\n              opacity: 0\n            }\n          }, {\n            duration: 300,\n            delay: delay\n          });\n        }\n\n        symbolPath.disableLabelAnimation = true;\n      }\n    });\n  };\n\n  LineView.prototype._initOrUpdateEndLabel = function (seriesModel, coordSys, inheritColor) {\n    var endLabelModel = seriesModel.getModel('endLabel');\n\n    if (endLabelModel.get('show')) {\n      var data_2 = seriesModel.getData();\n      var polyline = this._polyline;\n      var endLabel = this._endLabel;\n\n      if (!endLabel) {\n        endLabel = this._endLabel = new graphic.Text({\n          z2: 200 // should be higher than item symbol\n\n        });\n        endLabel.ignoreClip = true;\n        polyline.setTextContent(this._endLabel);\n        polyline.disableLabelAnimation = true;\n      } // Find last non-NaN data to display data\n\n\n      var dataIndex = getLastIndexNotNull(data_2.getLayout('points'));\n\n      if (dataIndex >= 0) {\n        setLabelStyle(polyline, getLabelStatesModels(seriesModel, 'endLabel'), {\n          inheritColor: inheritColor,\n          labelFetcher: seriesModel,\n          labelDataIndex: dataIndex,\n          defaultText: function (dataIndex, opt, interpolatedValue) {\n            return interpolatedValue != null ? getDefaultInterpolatedLabel(data_2, interpolatedValue) : getDefaultLabel(data_2, dataIndex);\n          },\n          enableTextSetter: true\n        }, getEndLabelStateSpecified(endLabelModel, coordSys));\n        polyline.textConfig.position = null;\n      }\n    } else if (this._endLabel) {\n      this._polyline.removeTextContent();\n\n      this._endLabel = null;\n    }\n  };\n\n  LineView.prototype._endLabelOnDuring = function (percent, clipRect, data, animationRecord, valueAnimation, endLabelModel, coordSys) {\n    var endLabel = this._endLabel;\n    var polyline = this._polyline;\n\n    if (endLabel) {\n      // NOTE: Don't remove percent < 1. percent === 1 means the first frame during render.\n      // The label is not prepared at this time.\n      if (percent < 1 && animationRecord.originalX == null) {\n        animationRecord.originalX = endLabel.x;\n        animationRecord.originalY = endLabel.y;\n      }\n\n      var points = data.getLayout('points');\n      var seriesModel = data.hostModel;\n      var connectNulls = seriesModel.get('connectNulls');\n      var precision = endLabelModel.get('precision');\n      var distance = endLabelModel.get('distance') || 0;\n      var baseAxis = coordSys.getBaseAxis();\n      var isHorizontal = baseAxis.isHorizontal();\n      var isBaseInversed = baseAxis.inverse;\n      var clipShape = clipRect.shape;\n      var xOrY = isBaseInversed ? isHorizontal ? clipShape.x : clipShape.y + clipShape.height : isHorizontal ? clipShape.x + clipShape.width : clipShape.y;\n      var distanceX = (isHorizontal ? distance : 0) * (isBaseInversed ? -1 : 1);\n      var distanceY = (isHorizontal ? 0 : -distance) * (isBaseInversed ? -1 : 1);\n      var dim = isHorizontal ? 'x' : 'y';\n      var dataIndexRange = getIndexRange(points, xOrY, dim);\n      var indices = dataIndexRange.range;\n      var diff = indices[1] - indices[0];\n      var value = void 0;\n\n      if (diff >= 1) {\n        // diff > 1 && connectNulls, which is on the null data.\n        if (diff > 1 && !connectNulls) {\n          var pt = getPointAtIndex(points, indices[0]);\n          endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          valueAnimation && (value = seriesModel.getRawValue(indices[0]));\n        } else {\n          var pt = polyline.getPointOn(xOrY, dim);\n          pt && endLabel.attr({\n            x: pt[0] + distanceX,\n            y: pt[1] + distanceY\n          });\n          var startValue = seriesModel.getRawValue(indices[0]);\n          var endValue = seriesModel.getRawValue(indices[1]);\n          valueAnimation && (value = modelUtil.interpolateRawValues(data, precision, startValue, endValue, dataIndexRange.t));\n        }\n\n        animationRecord.lastFrameIndex = indices[0];\n      } else {\n        // If diff <= 0, which is the range is not found(Include NaN)\n        // Choose the first point or last point.\n        var idx = percent === 1 || animationRecord.lastFrameIndex > 0 ? indices[0] : 0;\n        var pt = getPointAtIndex(points, idx);\n        valueAnimation && (value = seriesModel.getRawValue(idx));\n        endLabel.attr({\n          x: pt[0] + distanceX,\n          y: pt[1] + distanceY\n        });\n      }\n\n      if (valueAnimation) {\n        labelInner(endLabel).setLabelText(value);\n      }\n    }\n  };\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n\n\n  LineView.prototype._doUpdateAnimation = function (data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // Don't apply animation if diff is large.\n    // For better result and avoid memory explosion problems like\n    // https://github.com/apache/incubator-echarts/issues/12229\n\n\n    if (getBoundingDiff(current, next) > 3000 || polygon && getBoundingDiff(stackedOnCurrent, stackedOnNext) > 3000) {\n      polyline.setShape({\n        points: next\n      });\n\n      if (polygon) {\n        polygon.setShape({\n          points: next,\n          stackedOnPoints: stackedOnNext\n        });\n      }\n\n      return;\n    }\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    var target = {\n      shape: {\n        points: next\n      }\n    }; // Also animate the original points.\n    // If points reference is changed when turning into step line.\n\n    if (diff.current !== current) {\n      target.shape.__points = diff.next;\n    } // Stop previous animation.\n\n\n    polyline.stopAnimation();\n    graphic.updateProps(polyline, target, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        // Reuse the points with polyline.\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      polygon.stopAnimation();\n      graphic.updateProps(polygon, {\n        shape: {\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel); // If use attr directly in updateProps.\n\n      if (polyline.shape.points !== polygon.shape.points) {\n        polygon.shape.points = polyline.shape.points;\n      }\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        polygon && polygon.dirtyShape();\n        var points = polyline.shape.__points;\n\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          var offset = updatedDataInfo[i].ptIdx * 2;\n          el.x = points[offset];\n          el.y = points[offset + 1];\n          el.markRedraw();\n        }\n      });\n    }\n  };\n\n  LineView.prototype.remove = function (ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._endLabel = this._data = null;\n  };\n\n  LineView.type = 'line';\n  return LineView;\n}(ChartView);\n\nexport default LineView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LineSeries from './LineSeries';\nimport LineView from './LineView'; // In case developer forget to include grid component\n\nimport layoutPoints from '../../layout/points';\nimport dataSample from '../../processor/dataSample';\nexport function install(registers) {\n  registers.registerChartView(LineView);\n  registers.registerSeriesModel(LineSeries);\n  registers.registerLayout(layoutPoints('line', true));\n  registers.registerVisual({\n    seriesType: 'line',\n    reset: function (seriesModel) {\n      var data = seriesModel.getData(); // Visual coding for legend\n\n      var lineStyle = seriesModel.getModel('lineStyle').getLineStyle();\n\n      if (lineStyle && !lineStyle.stroke) {\n        // Fill in visual should be palette color if\n        // has color callback\n        lineStyle.stroke = data.getVisual('style').fill;\n      }\n\n      data.setVisual('legendLineStyle', lineStyle);\n    }\n  }); // Down sample after filter\n\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { install as installSimple } from './installSimple';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport { use } from '../../extension';\nexport function install(registers) {\n  use(installSimple);\n  use(installAxisPointer);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\nexport function rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel) {\n  var axis = axisModel.axis;\n\n  if (axis.scale.isBlank()) {\n    return;\n  } // TODO: TYPE\n\n\n  var splitAreaModel = axisModel.getModel('splitArea');\n  var areaStyleModel = splitAreaModel.getModel('areaStyle');\n  var areaColors = areaStyleModel.get('color');\n  var gridRect = gridModel.coordinateSystem.getRect();\n  var ticksCoords = axis.getTicksCoords({\n    tickModel: splitAreaModel,\n    clamp: true\n  });\n\n  if (!ticksCoords.length) {\n    return;\n  } // For Making appropriate splitArea animation, the color and anid\n  // should be corresponding to previous one if possible.\n\n\n  var areaColorsLen = areaColors.length;\n  var lastSplitAreaColors = inner(axisView).splitAreaColors;\n  var newSplitAreaColors = zrUtil.createHashMap();\n  var colorIndex = 0;\n\n  if (lastSplitAreaColors) {\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n      if (cIndex != null) {\n        colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n        break;\n      }\n    }\n  }\n\n  var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n  var areaStyle = areaStyleModel.getAreaStyle();\n  areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n  for (var i = 1; i < ticksCoords.length; i++) {\n    var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n    var x = void 0;\n    var y = void 0;\n    var width = void 0;\n    var height = void 0;\n\n    if (axis.isHorizontal()) {\n      x = prev;\n      y = gridRect.y;\n      width = tickCoord - x;\n      height = gridRect.height;\n      prev = x + width;\n    } else {\n      x = gridRect.x;\n      y = prev;\n      width = gridRect.width;\n      height = tickCoord - y;\n      prev = y + height;\n    }\n\n    var tickValue = ticksCoords[i - 1].tickValue;\n    tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n    axisGroup.add(new graphic.Rect({\n      anid: tickValue != null ? 'area_' + tickValue : null,\n      shape: {\n        x: x,\n        y: y,\n        width: width,\n        height: height\n      },\n      style: zrUtil.defaults({\n        fill: areaColors[colorIndex]\n      }, areaStyle),\n      autoBatch: true,\n      silent: true\n    }));\n    colorIndex = (colorIndex + 1) % areaColorsLen;\n  }\n\n  inner(axisView).splitAreaColors = newSplitAreaColors;\n}\nexport function rectCoordAxisHandleRemove(axisView) {\n  inner(axisView).splitAreaColors = null;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By default auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#6E7079',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#E0E6F1'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n    }\n  }\n};\nvar categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\nvar valueAxis = zrUtil.merge({\n  boundaryGap: [0, 0],\n  axisLine: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  axisTick: {\n    // Not shown when other axis is categoryAxis in cartesian\n    show: 'auto'\n  },\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  splitNumber: 5,\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#F4F7FD',\n      width: 1\n    }\n  }\n}, defaultOption);\nvar timeAxis = zrUtil.merge({\n  scale: true,\n  splitNumber: 6,\n  axisLabel: {\n    // To eliminate labels that are not nice\n    showMinLabel: false,\n    showMaxLabel: false,\n    rich: {\n      primary: {\n        fontWeight: 'bold'\n      }\n    }\n  },\n  splitLine: {\n    show: false\n  }\n}, valueAxis);\nvar logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, valueAxis);\nexport default {\n  category: categoryAxis,\n  value: valueAxis,\n  time: timeAxis,\n  log: logAxis\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport { getLayoutRect, box as layoutBox, positionElement } from '../../util/layout';\nimport * as formatUtil from '../../util/format';\nimport * as graphic from '../../util/graphic';\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\n\nexport function layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\nexport function makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as textContain from 'zrender/lib/contain/text';\nimport { makeInner } from '../util/model';\nimport { makeLabelFormatter, getOptionCategoryInterval, shouldShowAllLabels } from './axisHelper';\nvar inner = makeInner();\nexport function createAxisLabels(axis) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryLabels(axis) : makeRealNumberLabels(axis);\n}\n/**\n * @param {module:echats/coord/Axis} axis\n * @param {module:echarts/model/Model} tickModel For example, can be axisTick, splitLine, splitArea.\n * @return {Object} {\n *     ticks: Array.<number>\n *     tickCategoryInterval: number\n * }\n */\n\nexport function createAxisTicks(axis, tickModel) {\n  // Only ordinal scale support tick interval\n  return axis.type === 'category' ? makeCategoryTicks(axis, tickModel) : {\n    ticks: zrUtil.map(axis.scale.getTicks(), function (tick) {\n      return tick.value;\n    })\n  };\n}\n\nfunction makeCategoryLabels(axis) {\n  var labelModel = axis.getLabelModel();\n  var result = makeCategoryLabelsActually(axis, labelModel);\n  return !labelModel.get('show') || axis.scale.isBlank() ? {\n    labels: [],\n    labelCategoryInterval: result.labelCategoryInterval\n  } : result;\n}\n\nfunction makeCategoryLabelsActually(axis, labelModel) {\n  var labelsCache = getListCache(axis, 'labels');\n  var optionLabelInterval = getOptionCategoryInterval(labelModel);\n  var result = listCacheGet(labelsCache, optionLabelInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var labels;\n  var numericLabelInterval;\n\n  if (zrUtil.isFunction(optionLabelInterval)) {\n    labels = makeLabelsByCustomizedCategoryInterval(axis, optionLabelInterval);\n  } else {\n    numericLabelInterval = optionLabelInterval === 'auto' ? makeAutoCategoryInterval(axis) : optionLabelInterval;\n    labels = makeLabelsByNumericCategoryInterval(axis, numericLabelInterval);\n  } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(labelsCache, optionLabelInterval, {\n    labels: labels,\n    labelCategoryInterval: numericLabelInterval\n  });\n}\n\nfunction makeCategoryTicks(axis, tickModel) {\n  var ticksCache = getListCache(axis, 'ticks');\n  var optionTickInterval = getOptionCategoryInterval(tickModel);\n  var result = listCacheGet(ticksCache, optionTickInterval);\n\n  if (result) {\n    return result;\n  }\n\n  var ticks;\n  var tickCategoryInterval; // Optimize for the case that large category data and no label displayed,\n  // we should not return all ticks.\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    ticks = [];\n  }\n\n  if (zrUtil.isFunction(optionTickInterval)) {\n    ticks = makeLabelsByCustomizedCategoryInterval(axis, optionTickInterval, true);\n  } // Always use label interval by default despite label show. Consider this\n  // scenario, Use multiple grid with the xAxis sync, and only one xAxis shows\n  // labels. `splitLine` and `axisTick` should be consistent in this case.\n  else if (optionTickInterval === 'auto') {\n      var labelsResult = makeCategoryLabelsActually(axis, axis.getLabelModel());\n      tickCategoryInterval = labelsResult.labelCategoryInterval;\n      ticks = zrUtil.map(labelsResult.labels, function (labelItem) {\n        return labelItem.tickValue;\n      });\n    } else {\n      tickCategoryInterval = optionTickInterval;\n      ticks = makeLabelsByNumericCategoryInterval(axis, tickCategoryInterval, true);\n    } // Cache to avoid calling interval function repeatly.\n\n\n  return listCacheSet(ticksCache, optionTickInterval, {\n    ticks: ticks,\n    tickCategoryInterval: tickCategoryInterval\n  });\n}\n\nfunction makeRealNumberLabels(axis) {\n  var ticks = axis.scale.getTicks();\n  var labelFormatter = makeLabelFormatter(axis);\n  return {\n    labels: zrUtil.map(ticks, function (tick, idx) {\n      return {\n        formattedLabel: labelFormatter(tick, idx),\n        rawLabel: axis.scale.getLabel(tick),\n        tickValue: tick.value\n      };\n    })\n  };\n}\n\nfunction getListCache(axis, prop) {\n  // Because key can be funciton, and cache size always be small, we use array cache.\n  return inner(axis)[prop] || (inner(axis)[prop] = []);\n}\n\nfunction listCacheGet(cache, key) {\n  for (var i = 0; i < cache.length; i++) {\n    if (cache[i].key === key) {\n      return cache[i].value;\n    }\n  }\n}\n\nfunction listCacheSet(cache, key, value) {\n  cache.push({\n    key: key,\n    value: value\n  });\n  return value;\n}\n\nfunction makeAutoCategoryInterval(axis) {\n  var result = inner(axis).autoInterval;\n  return result != null ? result : inner(axis).autoInterval = axis.calculateCategoryInterval();\n}\n/**\n * Calculate interval for category axis ticks and labels.\n * To get precise result, at least one of `getRotate` and `isHorizontal`\n * should be implemented in axis.\n */\n\n\nexport function calculateCategoryInterval(axis) {\n  var params = fetchAutoCategoryIntervalCalculationParams(axis);\n  var labelFormatter = makeLabelFormatter(axis);\n  var rotation = (params.axisRotate - params.labelRotate) / 180 * Math.PI;\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n  // avoid generating a long array by `getTicks`\n  // in large category data case.\n\n  var tickCount = ordinalScale.count();\n\n  if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n    return 0;\n  }\n\n  var step = 1; // Simple optimization. Empirical value: tick count should less than 40.\n\n  if (tickCount > 40) {\n    step = Math.max(1, Math.floor(tickCount / 40));\n  }\n\n  var tickValue = ordinalExtent[0];\n  var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n  var unitW = Math.abs(unitSpan * Math.cos(rotation));\n  var unitH = Math.abs(unitSpan * Math.sin(rotation));\n  var maxW = 0;\n  var maxH = 0; // Caution: Performance sensitive for large category data.\n  // Consider dataZoom, we should make appropriate step to avoid O(n) loop.\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    var width = 0;\n    var height = 0; // Not precise, do not consider align and vertical align\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(labelFormatter({\n      value: tickValue\n    }), params.font, 'center', 'top'); // Magic number\n\n    width = rect.width * 1.3;\n    height = rect.height * 1.3; // Min size, void long loop.\n\n    maxW = Math.max(maxW, width, 7);\n    maxH = Math.max(maxH, height, 7);\n  }\n\n  var dw = maxW / unitW;\n  var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n  isNaN(dw) && (dw = Infinity);\n  isNaN(dh) && (dh = Infinity);\n  var interval = Math.max(0, Math.floor(Math.min(dw, dh)));\n  var cache = inner(axis.model);\n  var axisExtent = axis.getExtent();\n  var lastAutoInterval = cache.lastAutoInterval;\n  var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n  // otherwise the calculated interval might jitter when the zoom\n  // window size is close to the interval-changing size.\n  // For example, if all of the axis labels are `a, b, c, d, e, f, g`.\n  // The jitter will cause that sometimes the displayed labels are\n  // `a, d, g` (interval: 2) sometimes `a, c, e`(interval: 1).\n\n  if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n  // point is not the same when zooming in or zooming out.\n  && lastAutoInterval > interval // If the axis change is caused by chart resize, the cache should not\n  // be used. Otherwise some hiden labels might not be shown again.\n  && cache.axisExtent0 === axisExtent[0] && cache.axisExtent1 === axisExtent[1]) {\n    interval = lastAutoInterval;\n  } // Only update cache if cache not used, otherwise the\n  // changing of interval is too insensitive.\n  else {\n      cache.lastTickCount = tickCount;\n      cache.lastAutoInterval = interval;\n      cache.axisExtent0 = axisExtent[0];\n      cache.axisExtent1 = axisExtent[1];\n    }\n\n  return interval;\n}\n\nfunction fetchAutoCategoryIntervalCalculationParams(axis) {\n  var labelModel = axis.getLabelModel();\n  return {\n    axisRotate: axis.getRotate ? axis.getRotate() : axis.isHorizontal && !axis.isHorizontal() ? 90 : 0,\n    labelRotate: labelModel.get('rotate') || 0,\n    font: labelModel.getFont()\n  };\n}\n\nfunction makeLabelsByNumericCategoryInterval(axis, categoryInterval, onlyTick) {\n  var labelFormatter = makeLabelFormatter(axis);\n  var ordinalScale = axis.scale;\n  var ordinalExtent = ordinalScale.getExtent();\n  var labelModel = axis.getLabelModel();\n  var result = []; // TODO: axisType: ordinalTime, pick the tick from each month/day/year/...\n\n  var step = Math.max((categoryInterval || 0) + 1, 1);\n  var startTick = ordinalExtent[0];\n  var tickCount = ordinalScale.count(); // Calculate start tick based on zero if possible to keep label consistent\n  // while zooming and moving while interval > 0. Otherwise the selection\n  // of displayable ticks and symbols probably keep changing.\n  // 3 is empirical value.\n\n  if (startTick !== 0 && step > 1 && tickCount / step > 2) {\n    startTick = Math.round(Math.ceil(startTick / step) * step);\n  } // (1) Only add min max label here but leave overlap checking\n  // to render stage, which also ensure the returned list\n  // suitable for splitLine and splitArea rendering.\n  // (2) Scales except category always contain min max label so\n  // do not need to perform this process.\n\n\n  var showAllLabel = shouldShowAllLabels(axis);\n  var includeMinLabel = labelModel.get('showMinLabel') || showAllLabel;\n  var includeMaxLabel = labelModel.get('showMaxLabel') || showAllLabel;\n\n  if (includeMinLabel && startTick !== ordinalExtent[0]) {\n    addItem(ordinalExtent[0]);\n  } // Optimize: avoid generating large array by `ordinalScale.getTicks()`.\n\n\n  var tickValue = startTick;\n\n  for (; tickValue <= ordinalExtent[1]; tickValue += step) {\n    addItem(tickValue);\n  }\n\n  if (includeMaxLabel && tickValue - step !== ordinalExtent[1]) {\n    addItem(ordinalExtent[1]);\n  }\n\n  function addItem(tickValue) {\n    var tickObj = {\n      value: tickValue\n    };\n    result.push(onlyTick ? tickValue : {\n      formattedLabel: labelFormatter(tickObj),\n      rawLabel: ordinalScale.getLabel(tickObj),\n      tickValue: tickValue\n    });\n  }\n\n  return result;\n}\n\nfunction makeLabelsByCustomizedCategoryInterval(axis, categoryInterval, onlyTick) {\n  var ordinalScale = axis.scale;\n  var labelFormatter = makeLabelFormatter(axis);\n  var result = [];\n  zrUtil.each(ordinalScale.getTicks(), function (tick) {\n    var rawLabel = ordinalScale.getLabel(tick);\n    var tickValue = tick.value;\n\n    if (categoryInterval(tick.value, rawLabel)) {\n      result.push(onlyTick ? tickValue : {\n        formattedLabel: labelFormatter(tick),\n        rawLabel: rawLabel,\n        tickValue: tickValue\n      });\n    }\n  });\n  return result;\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { each, map } from 'zrender/lib/core/util';\nimport { linearMap, getPixelPrecision, round } from '../util/number';\nimport { createAxisTicks, createAxisLabels, calculateCategoryInterval } from './axisTickLabelBuilder';\nvar NORMALIZED_EXTENT = [0, 1];\n/**\n * Base class of Axis.\n */\n\nvar Axis =\n/** @class */\nfunction () {\n  function Axis(dim, scale, extent) {\n    this.onBand = false;\n    this.inverse = false;\n    this.dim = dim;\n    this.scale = scale;\n    this._extent = extent || [0, 0];\n  }\n  /**\n   * If axis extent contain given coord\n   */\n\n\n  Axis.prototype.contain = function (coord) {\n    var extent = this._extent;\n    var min = Math.min(extent[0], extent[1]);\n    var max = Math.max(extent[0], extent[1]);\n    return coord >= min && coord <= max;\n  };\n  /**\n   * If axis extent contain given data\n   */\n\n\n  Axis.prototype.containData = function (data) {\n    return this.scale.contain(data);\n  };\n  /**\n   * Get coord extent.\n   */\n\n\n  Axis.prototype.getExtent = function () {\n    return this._extent.slice();\n  };\n  /**\n   * Get precision used for formatting\n   */\n\n\n  Axis.prototype.getPixelPrecision = function (dataExtent) {\n    return getPixelPrecision(dataExtent || this.scale.getExtent(), this._extent);\n  };\n  /**\n   * Set coord extent\n   */\n\n\n  Axis.prototype.setExtent = function (start, end) {\n    var extent = this._extent;\n    extent[0] = start;\n    extent[1] = end;\n  };\n  /**\n   * Convert data to coord. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.dataToCoord = function (data, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n    data = scale.normalize(data);\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    return linearMap(data, NORMALIZED_EXTENT, extent, clamp);\n  };\n  /**\n   * Convert coord to data. Data is the rank if it has an ordinal scale\n   */\n\n\n  Axis.prototype.coordToData = function (coord, clamp) {\n    var extent = this._extent;\n    var scale = this.scale;\n\n    if (this.onBand && scale.type === 'ordinal') {\n      extent = extent.slice();\n      fixExtentWithBands(extent, scale.count());\n    }\n\n    var t = linearMap(coord, extent, NORMALIZED_EXTENT, clamp);\n    return this.scale.scale(t);\n  };\n  /**\n   * Convert pixel point to data in axis\n   */\n\n\n  Axis.prototype.pointToData = function (point, clamp) {\n    // Should be implemented in derived class if necessary.\n    return;\n  };\n  /**\n   * Different from `zrUtil.map(axis.getTicks(), axis.dataToCoord, axis)`,\n   * `axis.getTicksCoords` considers `onBand`, which is used by\n   * `boundaryGap:true` of category axis and splitLine and splitArea.\n   * @param opt.tickModel default: axis.model.getModel('axisTick')\n   * @param opt.clamp If `true`, the first and the last\n   *        tick must be at the axis end points. Otherwise, clip ticks\n   *        that outside the axis extent.\n   */\n\n\n  Axis.prototype.getTicksCoords = function (opt) {\n    opt = opt || {};\n    var tickModel = opt.tickModel || this.getTickModel();\n    var result = createAxisTicks(this, tickModel);\n    var ticks = result.ticks;\n    var ticksCoords = map(ticks, function (tickVal) {\n      return {\n        coord: this.dataToCoord(this.scale.type === 'ordinal' ? this.scale.getRawOrdinalNumber(tickVal) : tickVal),\n        tickValue: tickVal\n      };\n    }, this);\n    var alignWithLabel = tickModel.get('alignWithLabel');\n    fixOnBandTicksCoords(this, ticksCoords, alignWithLabel, opt.clamp);\n    return ticksCoords;\n  };\n\n  Axis.prototype.getMinorTicksCoords = function () {\n    if (this.scale.type === 'ordinal') {\n      // Category axis doesn't support minor ticks\n      return [];\n    }\n\n    var minorTickModel = this.model.getModel('minorTick');\n    var splitNumber = minorTickModel.get('splitNumber'); // Protection.\n\n    if (!(splitNumber > 0 && splitNumber < 100)) {\n      splitNumber = 5;\n    }\n\n    var minorTicks = this.scale.getMinorTicks(splitNumber);\n    var minorTicksCoords = map(minorTicks, function (minorTicksGroup) {\n      return map(minorTicksGroup, function (minorTick) {\n        return {\n          coord: this.dataToCoord(minorTick),\n          tickValue: minorTick\n        };\n      }, this);\n    }, this);\n    return minorTicksCoords;\n  };\n\n  Axis.prototype.getViewLabels = function () {\n    return createAxisLabels(this).labels;\n  };\n\n  Axis.prototype.getLabelModel = function () {\n    return this.model.getModel('axisLabel');\n  };\n  /**\n   * Notice here we only get the default tick model. For splitLine\n   * or splitArea, we should pass the splitLineModel or splitAreaModel\n   * manually when calling `getTicksCoords`.\n   * In GL, this method may be overrided to:\n   * `axisModel.getModel('axisTick', grid3DModel.getModel('axisTick'));`\n   */\n\n\n  Axis.prototype.getTickModel = function () {\n    return this.model.getModel('axisTick');\n  };\n  /**\n   * Get width of band\n   */\n\n\n  Axis.prototype.getBandWidth = function () {\n    var axisExtent = this._extent;\n    var dataExtent = this.scale.getExtent();\n    var len = dataExtent[1] - dataExtent[0] + (this.onBand ? 1 : 0); // Fix #2728, avoid NaN when only one data.\n\n    len === 0 && (len = 1);\n    var size = Math.abs(axisExtent[1] - axisExtent[0]);\n    return Math.abs(size) / len;\n  };\n  /**\n   * Only be called in category axis.\n   * Can be overrided, consider other axes like in 3D.\n   * @return Auto interval for cateogry axis tick and label\n   */\n\n\n  Axis.prototype.calculateCategoryInterval = function () {\n    return calculateCategoryInterval(this);\n  };\n\n  return Axis;\n}();\n\nfunction fixExtentWithBands(extent, nTick) {\n  var size = extent[1] - extent[0];\n  var len = nTick;\n  var margin = size / len / 2;\n  extent[0] += margin;\n  extent[1] -= margin;\n} // If axis has labels [1, 2, 3, 4]. Bands on the axis are\n// |---1---|---2---|---3---|---4---|.\n// So the displayed ticks and splitLine/splitArea should between\n// each data item, otherwise cause misleading (e.g., split tow bars\n// of a single data item when there are two bar series).\n// Also consider if tickCategoryInterval > 0 and onBand, ticks and\n// splitLine/spliteArea should layout appropriately corresponding\n// to displayed labels. (So we should not use `getBandWidth` in this\n// case).\n\n\nfunction fixOnBandTicksCoords(axis, ticksCoords, alignWithLabel, clamp) {\n  var ticksLen = ticksCoords.length;\n\n  if (!axis.onBand || alignWithLabel || !ticksLen) {\n    return;\n  }\n\n  var axisExtent = axis.getExtent();\n  var last;\n  var diffSize;\n\n  if (ticksLen === 1) {\n    ticksCoords[0].coord = axisExtent[0];\n    last = ticksCoords[1] = {\n      coord: axisExtent[0]\n    };\n  } else {\n    var crossLen = ticksCoords[ticksLen - 1].tickValue - ticksCoords[0].tickValue;\n    var shift_1 = (ticksCoords[ticksLen - 1].coord - ticksCoords[0].coord) / crossLen;\n    each(ticksCoords, function (ticksItem) {\n      ticksItem.coord -= shift_1 / 2;\n    });\n    var dataExtent = axis.scale.getExtent();\n    diffSize = 1 + dataExtent[1] - ticksCoords[ticksLen - 1].tickValue;\n    last = {\n      coord: ticksCoords[ticksLen - 1].coord + shift_1 * diffSize\n    };\n    ticksCoords.push(last);\n  }\n\n  var inverse = axisExtent[0] > axisExtent[1]; // Handling clamp.\n\n  if (littleThan(ticksCoords[0].coord, axisExtent[0])) {\n    clamp ? ticksCoords[0].coord = axisExtent[0] : ticksCoords.shift();\n  }\n\n  if (clamp && littleThan(axisExtent[0], ticksCoords[0].coord)) {\n    ticksCoords.unshift({\n      coord: axisExtent[0]\n    });\n  }\n\n  if (littleThan(axisExtent[1], last.coord)) {\n    clamp ? last.coord = axisExtent[1] : ticksCoords.pop();\n  }\n\n  if (clamp && littleThan(last.coord, axisExtent[1])) {\n    ticksCoords.push({\n      coord: axisExtent[1]\n    });\n  }\n\n  function littleThan(a, b) {\n    // Avoid rounding error cause calculated tick coord different with extent.\n    // It may cause an extra unecessary tick added.\n    a = round(a);\n    b = round(b);\n    return inverse ? a > b : a < b;\n  }\n}\n\nexport default Axis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar GridModel =\n/** @class */\nfunction (_super) {\n  __extends(GridModel, _super);\n\n  function GridModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  GridModel.type = 'grid';\n  GridModel.dependencies = ['xAxis', 'yAxis'];\n  GridModel.layoutMode = 'box';\n  GridModel.defaultOption = {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 70,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  };\n  return GridModel;\n}(ComponentModel);\n\nexport default GridModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nvar CartesianAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisModel, _super);\n\n  function CartesianAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  CartesianAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('grid', SINGLE_REFERRING).models[0];\n  };\n\n  CartesianAxisModel.type = 'cartesian2dAxis';\n  return CartesianAxisModel;\n}(ComponentModel);\n\nexport { CartesianAxisModel };\nzrUtil.mixin(CartesianAxisModel, AxisModelCommonMixin);\nexport default CartesianAxisModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\n\nvar Cartesian =\n/** @class */\nfunction () {\n  function Cartesian(name) {\n    this.type = 'cartesian';\n    this._dimList = [];\n    this._axes = {};\n    this.name = name || '';\n  }\n\n  Cartesian.prototype.getAxis = function (dim) {\n    return this._axes[dim];\n  };\n\n  Cartesian.prototype.getAxes = function () {\n    return zrUtil.map(this._dimList, function (dim) {\n      return this._axes[dim];\n    }, this);\n  };\n\n  Cartesian.prototype.getAxesByScale = function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  };\n\n  Cartesian.prototype.addAxis = function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  };\n\n  return Cartesian;\n}();\n\n;\nexport default Cartesian;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BoundingRect from 'zrender/lib/core/BoundingRect';\nimport Cartesian from './Cartesian';\nimport { invert } from 'zrender/lib/core/matrix';\nimport { applyTransform } from 'zrender/lib/core/vector';\nexport var cartesian2DDimensions = ['x', 'y'];\n\nfunction canCalculateAffineTransform(scale) {\n  return scale.type === 'interval' || scale.type === 'time';\n}\n\nvar Cartesian2D =\n/** @class */\nfunction (_super) {\n  __extends(Cartesian2D, _super);\n\n  function Cartesian2D() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'cartesian2d';\n    _this.dimensions = cartesian2DDimensions;\n    return _this;\n  }\n  /**\n   * Calculate an affine transform matrix if two axes are time or value.\n   * It's mainly for accelartion on the large time series data.\n   */\n\n\n  Cartesian2D.prototype.calcAffineTransform = function () {\n    this._transform = this._invTransform = null;\n    var xAxisScale = this.getAxis('x').scale;\n    var yAxisScale = this.getAxis('y').scale;\n\n    if (!canCalculateAffineTransform(xAxisScale) || !canCalculateAffineTransform(yAxisScale)) {\n      return;\n    }\n\n    var xScaleExtent = xAxisScale.getExtent();\n    var yScaleExtent = yAxisScale.getExtent();\n    var start = this.dataToPoint([xScaleExtent[0], yScaleExtent[0]]);\n    var end = this.dataToPoint([xScaleExtent[1], yScaleExtent[1]]);\n    var xScaleSpan = xScaleExtent[1] - xScaleExtent[0];\n    var yScaleSpan = yScaleExtent[1] - yScaleExtent[0];\n\n    if (!xScaleSpan || !yScaleSpan) {\n      return;\n    } // Accelerate data to point calculation on the special large time series data.\n\n\n    var scaleX = (end[0] - start[0]) / xScaleSpan;\n    var scaleY = (end[1] - start[1]) / yScaleSpan;\n    var translateX = start[0] - xScaleExtent[0] * scaleX;\n    var translateY = start[1] - yScaleExtent[0] * scaleY;\n    var m = this._transform = [scaleX, 0, 0, scaleY, translateX, translateY];\n    this._invTransform = invert([], m);\n  };\n  /**\n   * Base axis will be used on stacking.\n   */\n\n\n  Cartesian2D.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  };\n\n  Cartesian2D.prototype.containPoint = function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  };\n\n  Cartesian2D.prototype.containData = function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  };\n\n  Cartesian2D.prototype.dataToPoint = function (data, clamp, out) {\n    out = out || [];\n    var xVal = data[0];\n    var yVal = data[1]; // Fast path\n\n    if (this._transform // It's supported that if data is like `[Inifity, 123]`, where only Y pixel calculated.\n    && xVal != null && isFinite(xVal) && yVal != null && isFinite(yVal)) {\n      return applyTransform(out, data, this._transform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(xVal, clamp));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(yVal, clamp));\n    return out;\n  };\n\n  Cartesian2D.prototype.clampData = function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  };\n\n  Cartesian2D.prototype.pointToData = function (point, clamp) {\n    var out = [];\n\n    if (this._invTransform) {\n      return applyTransform(out, point, this._invTransform);\n    }\n\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]), clamp);\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]), clamp);\n    return out;\n  };\n\n  Cartesian2D.prototype.getOtherAxis = function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  };\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Cartesian2D.prototype.getArea = function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    return new BoundingRect(x, y, width, height);\n  };\n\n  return Cartesian2D;\n}(Cartesian);\n\n;\nexport default Cartesian2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar Axis2D =\n/** @class */\nfunction (_super) {\n  __extends(Axis2D, _super);\n\n  function Axis2D(dim, scale, coordExtent, axisType, position) {\n    var _this = _super.call(this, dim, scale, coordExtent) || this;\n    /**\n     * Index of axis, can be used as key\n     * Injected outside.\n     */\n\n\n    _this.index = 0;\n    _this.type = axisType || 'value';\n    _this.position = position || 'bottom';\n    return _this;\n  }\n\n  Axis2D.prototype.isHorizontal = function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  };\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n\n\n  Axis2D.prototype.getGlobalExtent = function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  };\n\n  Axis2D.prototype.pointToData = function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  };\n  /**\n   * Set ordinalSortInfo\n   * @param info new OrdinalSortInfo\n   */\n\n\n  Axis2D.prototype.setCategorySortInfo = function (info) {\n    if (this.type !== 'category') {\n      return false;\n    }\n\n    this.model.option.categorySortInfo = info;\n    this.scale.setSortInfo(info);\n  };\n\n  return Axis2D;\n}(Axis);\n\nexport default Axis2D;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\nimport { isObject, each, indexOf, retrieve3 } from 'zrender/lib/core/util';\nimport { getLayoutRect } from '../../util/layout';\nimport { createScaleByModel, ifAxisCrossZero, niceScaleExtent, estimateLabelUnionRect, getDataDimensionsOnAxis } from '../../coord/axisHelper';\nimport Cartesian2D, { cartesian2DDimensions } from './Cartesian2D';\nimport Axis2D from './Axis2D';\nimport { SINGLE_REFERRING } from '../../util/model';\nimport { isCartesian2DSeries, findAxisModels } from './cartesianAxisHelper';\n\nvar Grid =\n/** @class */\nfunction () {\n  function Grid(gridModel, ecModel, api) {\n    // FIXME:TS where used (different from registered type 'cartesian2d')?\n    this.type = 'grid';\n    this._coordsMap = {};\n    this._coordsList = [];\n    this._axesMap = {};\n    this._axesList = [];\n    this.axisPointerEnabled = true;\n    this.dimensions = cartesian2DDimensions;\n\n    this._initCartesian(gridModel, ecModel, api);\n\n    this.model = gridModel;\n  }\n\n  Grid.prototype.getRect = function () {\n    return this._rect;\n  };\n\n  Grid.prototype.update = function (ecModel, api) {\n    var axesMap = this._axesMap;\n\n    this._updateScale(ecModel, this.model);\n\n    each(axesMap.x, function (xAxis) {\n      niceScaleExtent(xAxis.scale, xAxis.model);\n    });\n    each(axesMap.y, function (yAxis) {\n      niceScaleExtent(yAxis.scale, yAxis.model);\n    }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n    var onZeroRecords = {};\n    each(axesMap.x, function (xAxis) {\n      fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n    });\n    each(axesMap.y, function (yAxis) {\n      fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n    }); // Resize again if containLabel is enabled\n    // FIXME It may cause getting wrong grid size in data processing stage\n\n    this.resize(this.model, api);\n  };\n  /**\n   * Resize the grid\n   */\n\n\n  Grid.prototype.resize = function (gridModel, api, ignoreContainLabel) {\n    var boxLayoutParams = gridModel.getBoxLayoutParams();\n    var isContainLabel = !ignoreContainLabel && gridModel.get('containLabel');\n    var gridRect = getLayoutRect(boxLayoutParams, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    });\n    this._rect = gridRect;\n    var axesList = this._axesList;\n    adjustAxes(); // Minus label size\n\n    if (isContainLabel) {\n      each(axesList, function (axis) {\n        if (!axis.model.get(['axisLabel', 'inside'])) {\n          var labelUnionRect = estimateLabelUnionRect(axis);\n\n          if (labelUnionRect) {\n            var dim = axis.isHorizontal() ? 'height' : 'width';\n            var margin = axis.model.get(['axisLabel', 'margin']);\n            gridRect[dim] -= labelUnionRect[dim] + margin;\n\n            if (axis.position === 'top') {\n              gridRect.y += labelUnionRect.height + margin;\n            } else if (axis.position === 'left') {\n              gridRect.x += labelUnionRect.width + margin;\n            }\n          }\n        }\n      });\n      adjustAxes();\n    }\n\n    each(this._coordsList, function (coord) {\n      // Calculate affine matrix to accelerate the data to point transform.\n      // If all the axes scales are time or value.\n      coord.calcAffineTransform();\n    });\n\n    function adjustAxes() {\n      each(axesList, function (axis) {\n        var isHorizontal = axis.isHorizontal();\n        var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n        var idx = axis.inverse ? 1 : 0;\n        axis.setExtent(extent[idx], extent[1 - idx]);\n        updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n      });\n    }\n  };\n\n  Grid.prototype.getAxis = function (dim, axisIndex) {\n    var axesMapOnDim = this._axesMap[dim];\n\n    if (axesMapOnDim != null) {\n      return axesMapOnDim[axisIndex || 0]; // if (axisIndex == null) {\n      //     Find first axis\n      //     for (let name in axesMapOnDim) {\n      //         if (axesMapOnDim.hasOwnProperty(name)) {\n      //             return axesMapOnDim[name];\n      //         }\n      //     }\n      // }\n      // return axesMapOnDim[axisIndex];\n    }\n  };\n\n  Grid.prototype.getAxes = function () {\n    return this._axesList.slice();\n  };\n\n  Grid.prototype.getCartesian = function (xAxisIndex, yAxisIndex) {\n    if (xAxisIndex != null && yAxisIndex != null) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      return this._coordsMap[key];\n    }\n\n    if (isObject(xAxisIndex)) {\n      yAxisIndex = xAxisIndex.yAxisIndex;\n      xAxisIndex = xAxisIndex.xAxisIndex;\n    }\n\n    for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n      if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n        return coordList[i];\n      }\n    }\n  };\n\n  Grid.prototype.getCartesians = function () {\n    return this._coordsList.slice();\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertToPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.convertFromPixel = function (ecModel, finder, value) {\n    var target = this._findConvertTarget(finder);\n\n    return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n  };\n\n  Grid.prototype._findConvertTarget = function (finder) {\n    var seriesModel = finder.seriesModel;\n    var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis', SINGLE_REFERRING).models[0];\n    var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis', SINGLE_REFERRING).models[0];\n    var gridModel = finder.gridModel;\n    var coordsList = this._coordsList;\n    var cartesian;\n    var axis;\n\n    if (seriesModel) {\n      cartesian = seriesModel.coordinateSystem;\n      indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n    } else if (xAxisModel && yAxisModel) {\n      cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    } else if (xAxisModel) {\n      axis = this.getAxis('x', xAxisModel.componentIndex);\n    } else if (yAxisModel) {\n      axis = this.getAxis('y', yAxisModel.componentIndex);\n    } // Lowest priority.\n    else if (gridModel) {\n        var grid = gridModel.coordinateSystem;\n\n        if (grid === this) {\n          cartesian = this._coordsList[0];\n        }\n      }\n\n    return {\n      cartesian: cartesian,\n      axis: axis\n    };\n  };\n  /**\n   * @implements\n   */\n\n\n  Grid.prototype.containPoint = function (point) {\n    var coord = this._coordsList[0];\n\n    if (coord) {\n      return coord.containPoint(point);\n    }\n  };\n  /**\n   * Initialize cartesian coordinate systems\n   */\n\n\n  Grid.prototype._initCartesian = function (gridModel, ecModel, api) {\n    var _this = this;\n\n    var grid = this;\n    var axisPositionUsed = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    var axesMap = {\n      x: {},\n      y: {}\n    };\n    var axesCount = {\n      x: 0,\n      y: 0\n    }; /// Create axis\n\n    ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n    ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n    if (!axesCount.x || !axesCount.y) {\n      // Roll back when there no either x or y axis\n      this._axesMap = {};\n      this._axesList = [];\n      return;\n    }\n\n    this._axesMap = axesMap; /// Create cartesian2d\n\n    each(axesMap.x, function (xAxis, xAxisIndex) {\n      each(axesMap.y, function (yAxis, yAxisIndex) {\n        var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n        var cartesian = new Cartesian2D(key);\n        cartesian.master = _this;\n        cartesian.model = gridModel;\n        _this._coordsMap[key] = cartesian;\n\n        _this._coordsList.push(cartesian);\n\n        cartesian.addAxis(xAxis);\n        cartesian.addAxis(yAxis);\n      });\n    });\n\n    function createAxisCreator(dimName) {\n      return function (axisModel, idx) {\n        if (!isAxisUsedInTheGrid(axisModel, gridModel)) {\n          return;\n        }\n\n        var axisPosition = axisModel.get('position');\n\n        if (dimName === 'x') {\n          // Fix position\n          if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n            // Default bottom of X\n            axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n          }\n        } else {\n          // Fix position\n          if (axisPosition !== 'left' && axisPosition !== 'right') {\n            // Default left of Y\n            axisPosition = axisPositionUsed.left ? 'right' : 'left';\n          }\n        }\n\n        axisPositionUsed[axisPosition] = true;\n        var axis = new Axis2D(dimName, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n        var isCategory = axis.type === 'category';\n        axis.onBand = isCategory && axisModel.get('boundaryGap');\n        axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n        axisModel.axis = axis; // Inject axisModel into axis\n\n        axis.model = axisModel; // Inject grid info axis\n\n        axis.grid = grid; // Index of axis, can be used as key\n\n        axis.index = idx;\n\n        grid._axesList.push(axis);\n\n        axesMap[dimName][idx] = axis;\n        axesCount[dimName]++;\n      };\n    }\n  };\n  /**\n   * Update cartesian properties from series.\n   */\n\n\n  Grid.prototype._updateScale = function (ecModel, gridModel) {\n    // Reset scale\n    each(this._axesList, function (axis) {\n      axis.scale.setExtent(Infinity, -Infinity);\n\n      if (axis.type === 'category') {\n        var categorySortInfo = axis.model.get('categorySortInfo');\n        axis.scale.setSortInfo(categorySortInfo);\n      }\n    });\n    ecModel.eachSeries(function (seriesModel) {\n      if (isCartesian2DSeries(seriesModel)) {\n        var axesModelMap = findAxisModels(seriesModel);\n        var xAxisModel = axesModelMap.xAxisModel;\n        var yAxisModel = axesModelMap.yAxisModel;\n\n        if (!isAxisUsedInTheGrid(xAxisModel, gridModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel)) {\n          return;\n        }\n\n        var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n        var data = seriesModel.getData();\n        var xAxis = cartesian.getAxis('x');\n        var yAxis = cartesian.getAxis('y');\n\n        if (data.type === 'list') {\n          unionExtent(data, xAxis);\n          unionExtent(data, yAxis);\n        }\n      }\n    }, this);\n\n    function unionExtent(data, axis) {\n      each(getDataDimensionsOnAxis(data, axis.dim), function (dim) {\n        axis.scale.unionExtentFromData(data, dim);\n      });\n    }\n  };\n  /**\n   * @param dim 'x' or 'y' or 'auto' or null/undefined\n   */\n\n\n  Grid.prototype.getTooltipAxes = function (dim) {\n    var baseAxes = [];\n    var otherAxes = [];\n    each(this.getCartesians(), function (cartesian) {\n      var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n      var otherAxis = cartesian.getOtherAxis(baseAxis);\n      indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n      indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n    });\n    return {\n      baseAxes: baseAxes,\n      otherAxes: otherAxes\n    };\n  };\n\n  Grid.create = function (ecModel, api) {\n    var grids = [];\n    ecModel.eachComponent('grid', function (gridModel, idx) {\n      var grid = new Grid(gridModel, ecModel, api);\n      grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n      // should be performed in create stage.\n\n      grid.resize(gridModel, api, true);\n      gridModel.coordinateSystem = grid;\n      grids.push(grid);\n    }); // Inject the coordinateSystems into seriesModel\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (!isCartesian2DSeries(seriesModel)) {\n        return;\n      }\n\n      var axesModelMap = findAxisModels(seriesModel);\n      var xAxisModel = axesModelMap.xAxisModel;\n      var yAxisModel = axesModelMap.yAxisModel;\n      var gridModel = xAxisModel.getCoordSysModel();\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!gridModel) {\n          throw new Error('Grid \"' + retrieve3(xAxisModel.get('gridIndex'), xAxisModel.get('gridId'), 0) + '\" not found');\n        }\n\n        if (xAxisModel.getCoordSysModel() !== yAxisModel.getCoordSysModel()) {\n          throw new Error('xAxis and yAxis must use the same grid');\n        }\n      }\n\n      var grid = gridModel.coordinateSystem;\n      seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n    });\n    return grids;\n  }; // For deciding which dimensions to use when creating list data\n\n\n  Grid.dimensions = cartesian2DDimensions;\n  return Grid;\n}();\n/**\n * Check if the axis is used in the specified grid.\n */\n\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, // Key: see `getOnZeroRecordKey`\nonZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get(['axisLine', 'onZero']);\n  var onZeroAxisIndex = axisModel.get(['axisLine', 'onZeroAxisIndex']);\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nexport default Grid;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport AxisBuilder from './AxisBuilder';\nimport AxisView from './AxisView';\nimport * as cartesianAxisHelper from '../../coord/cartesian/cartesianAxisHelper';\nimport { rectCoordAxisBuildSplitArea, rectCoordAxisHandleRemove } from './axisSplitHelper';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\n\nvar CartesianAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianAxisView, _super);\n\n  function CartesianAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianAxisView.type;\n    _this.axisPointerClass = 'CartesianAxisPointer';\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  CartesianAxisView.prototype.render = function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, zrUtil.extend({\n      handleAutoShown: function (elementType) {\n        var cartesians = gridModel.coordinateSystem.getCartesians();\n\n        for (var i = 0; i < cartesians.length; i++) {\n          var otherAxisType = cartesians[i].getOtherAxis(axisModel.axis).type;\n\n          if (otherAxisType === 'value' || otherAxisType === 'log') {\n            // Still show axis tick or axisLine if other axis is value / log\n            return true;\n          }\n        } // Not show axisTick or axisLine if other axis is category / time\n\n\n        return false;\n      }\n    }, layout));\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get([name, 'show'])) {\n        axisElementBuilders[name](this, this._axisGroup, axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n\n    _super.prototype.render.call(this, axisModel, ecModel, api, payload);\n  };\n\n  CartesianAxisView.prototype.remove = function () {\n    rectCoordAxisHandleRemove(this);\n  };\n\n  CartesianAxisView.type = 'cartesianAxis';\n  return CartesianAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n      axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        autoBatch: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function (axisView, axisGroup, axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          autoBatch: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n  splitArea: function (axisView, axisGroup, axisModel, gridModel) {\n    rectCoordAxisBuildSplitArea(axisView, axisGroup, axisModel, gridModel);\n  }\n};\n\nvar CartesianXAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianXAxisView, _super);\n\n  function CartesianXAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianXAxisView.type = 'xAxis';\n  return CartesianXAxisView;\n}(CartesianAxisView);\n\nexport { CartesianXAxisView };\n\nvar CartesianYAxisView =\n/** @class */\nfunction (_super) {\n  __extends(CartesianYAxisView, _super);\n\n  function CartesianYAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = CartesianXAxisView.type;\n    return _this;\n  }\n\n  CartesianYAxisView.type = 'yAxis';\n  return CartesianYAxisView;\n}(CartesianAxisView);\n\nexport { CartesianYAxisView };\nexport default CartesianAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentView from '../../view/Component';\nimport GridModel from '../../coord/cartesian/GridModel';\nimport { Rect } from '../../util/graphic';\nimport { defaults } from 'zrender/lib/core/util';\nimport { CartesianAxisModel } from '../../coord/cartesian/AxisModel';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport Grid from '../../coord/cartesian/Grid';\nimport { CartesianXAxisView, CartesianYAxisView } from '../axis/CartesianAxisView'; // Grid view\n\nvar GridView =\n/** @class */\nfunction (_super) {\n  __extends(GridView, _super);\n\n  function GridView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'grid';\n    return _this;\n  }\n\n  GridView.prototype.render = function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  };\n\n  GridView.type = 'grid';\n  return GridView;\n}(ComponentView);\n\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  offset: 0\n};\nexport function install(registers) {\n  registers.registerComponentView(GridView);\n  registers.registerComponentModel(GridModel);\n  registers.registerCoordinateSystem('cartesian2d', Grid);\n  axisModelCreator(registers, 'x', CartesianAxisModel, extraOption);\n  axisModelCreator(registers, 'y', CartesianAxisModel, extraOption);\n  registers.registerComponentView(CartesianXAxisView);\n  registers.registerComponentView(CartesianYAxisView);\n  registers.registerPreprocessor(function (option) {\n    // Only create grid when need\n    if (option.xAxis && option.yAxis && !option.grid) {\n      option.grid = {};\n    }\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\nimport { map } from 'zrender/lib/core/util';\nimport createRenderPlanner from '../chart/helper/createRenderPlanner';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper';\nimport { createFloat32Array } from '../util/vendor';\nexport default function pointsLayout(seriesType, forceStoreInTypedArray) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function (seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var useTypedArray = forceStoreInTypedArray || pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      var dimInfo0 = data.getDimensionInfo(dims[0]);\n      var dimInfo1 = data.getDimensionInfo(dims[1]);\n      var dimIdx0 = dimInfo0 && dimInfo0.index;\n      var dimIdx1 = dimInfo1 && dimInfo1.index;\n      return dimLen && {\n        progress: function (params, data) {\n          var segCount = params.end - params.start;\n          var points = useTypedArray && createFloat32Array(segCount * dimLen);\n          var tmpIn = [];\n          var tmpOut = [];\n\n          for (var i = params.start, offset = 0; i < params.end; i++) {\n            var point = void 0;\n\n            if (dimLen === 1) {\n              var x = data.getByDimIdx(dimIdx0, i); // NOTE: Make sure the second parameter is null to use default strategy.\n\n              point = coordSys.dataToPoint(x, null, tmpOut);\n            } else {\n              tmpIn[0] = data.getByDimIdx(dimIdx0, i);\n              tmpIn[1] = data.getByDimIdx(dimIdx1, i); // Let coordinate system to handle the NaN data.\n\n              point = coordSys.dataToPoint(tmpIn, null, tmpOut);\n            }\n\n            if (useTypedArray) {\n              points[offset++] = point[0];\n              points[offset++] = point[1];\n            } else {\n              data.setItemLayout(i, point.slice());\n            }\n          }\n\n          useTypedArray && data.setLayout('points', points);\n        }\n      };\n    }\n  };\n}\n;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { getECData } from '../../util/innerStore';\nimport { createTextStyle } from '../../label/labelStyle';\nimport { getLayoutRect } from '../../util/layout';\nimport ComponentModel from '../../model/Component';\nimport ComponentView from '../../view/Component';\nimport { windowOpen } from '../../util/format';\n\nvar TitleModel =\n/** @class */\nfunction (_super) {\n  __extends(TitleModel, _super);\n\n  function TitleModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  TitleModel.type = 'title';\n  TitleModel.defaultOption = {\n    zlevel: 0,\n    z: 6,\n    show: true,\n    text: '',\n    target: 'blank',\n    subtext: '',\n    subtarget: 'blank',\n    left: 0,\n    top: 0,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bold',\n      color: '#464646'\n    },\n    subtextStyle: {\n      fontSize: 12,\n      color: '#6E7079'\n    }\n  };\n  return TitleModel;\n}(ComponentModel); // View\n\n\nvar TitleView =\n/** @class */\nfunction (_super) {\n  __extends(TitleView, _super);\n\n  function TitleView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = TitleView.type;\n    return _this;\n  }\n\n  TitleView.prototype.render = function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: titleModel.get('text'),\n        fill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: createTextStyle(subtextStyleModel, {\n        text: subText,\n        fill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        verticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        windowOpen(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        windowOpen(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    getECData(textEl).eventData = getECData(subTextEl).eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right'); // @ts-ignore\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom'); // @ts-ignore\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.x = layoutRect.x;\n    group.y = layoutRect.y;\n    group.markRedraw();\n    var alignStyle = {\n      align: textAlign,\n      verticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  };\n\n  TitleView.type = 'title';\n  return TitleView;\n}(ComponentView);\n\nexport function install(registers) {\n  registers.registerComponentModel(TitleModel);\n  registers.registerComponentView(TitleView);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport var AXIS_TYPES = {\n  value: 1,\n  category: 1,\n  time: 1,\n  log: 1\n};","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport axisDefault from './axisDefault';\nimport { getLayoutParams, mergeLayoutParam, fetchLayoutMode } from '../util/layout';\nimport OrdinalMeta from '../data/OrdinalMeta';\nimport { AXIS_TYPES } from './axisCommonTypes';\nimport { each, merge } from 'zrender/lib/core/util';\n/**\n * Generate sub axis model class\n * @param axisName 'x' 'y' 'radius' 'angle' 'parallel' ...\n */\n\nexport default function axisModelCreator(registers, axisName, BaseAxisModelClass, extraDefaultOption) {\n  each(AXIS_TYPES, function (v, axisType) {\n    var defaultOption = merge(merge({}, axisDefault[axisType], true), extraDefaultOption, true);\n\n    var AxisModel =\n    /** @class */\n    function (_super) {\n      __extends(AxisModel, _super);\n\n      function AxisModel() {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var _this = _super.apply(this, args) || this;\n\n        _this.type = axisName + 'Axis.' + axisType;\n        return _this;\n      }\n\n      AxisModel.prototype.mergeDefaultAndTheme = function (option, ecModel) {\n        var layoutMode = fetchLayoutMode(this);\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        merge(option, themeModel.get(axisType + 'Axis'));\n        merge(option, this.getDefaultOption());\n        option.type = getAxisType(option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      };\n\n      AxisModel.prototype.optionUpdated = function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      };\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n\n\n      AxisModel.prototype.getCategories = function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      };\n\n      AxisModel.prototype.getOrdinalMeta = function () {\n        return this.__ordinalMeta;\n      };\n\n      AxisModel.type = axisName + 'Axis.' + axisType;\n      AxisModel.defaultOption = defaultOption;\n      return AxisModel;\n    }(BaseAxisModelClass);\n\n    registers.registerComponentModel(AxisModel);\n  });\n  registers.registerSubTypeDefaulter(axisName + 'Axis', getAxisType);\n}\n\nfunction getAxisType(option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport BaseAxisPointer from './BaseAxisPointer';\nimport * as graphic from '../../util/graphic';\nimport * as viewHelper from './viewHelper';\nimport * as matrix from 'zrender/lib/core/matrix';\nimport AxisBuilder from '../axis/AxisBuilder';\n\nvar PolarAxisPointer =\n/** @class */\nfunction (_super) {\n  __extends(PolarAxisPointer, _super);\n\n  function PolarAxisPointer() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @override\n   */\n\n\n  PolarAxisPointer.prototype.makeElOption = function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n\n    if (axis.dim === 'angle') {\n      this.animationThreshold = Math.PI / 18;\n    }\n\n    var polar = axis.polar;\n    var otherAxis = polar.getOtherAxis(axis);\n    var otherExtent = otherAxis.getExtent();\n    var coordValue = axis.dataToCoord(value);\n    var axisPointerType = axisPointerModel.get('type');\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, polar, coordValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var labelMargin = axisPointerModel.get(['label', 'margin']);\n    var labelPos = getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin);\n    viewHelper.buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos);\n  };\n\n  return PolarAxisPointer;\n}(BaseAxisPointer);\n\n;\n\nfunction getLabelPosition(value, axisModel, axisPointerModel, polar, labelMargin) {\n  var axis = axisModel.axis;\n  var coord = axis.dataToCoord(value);\n  var axisAngle = polar.getAngleAxis().getExtent()[0];\n  axisAngle = axisAngle / 180 * Math.PI;\n  var radiusExtent = polar.getRadiusAxis().getExtent();\n  var position;\n  var align;\n  var verticalAlign;\n\n  if (axis.dim === 'radius') {\n    var transform = matrix.create();\n    matrix.rotate(transform, transform, axisAngle);\n    matrix.translate(transform, transform, [polar.cx, polar.cy]);\n    position = graphic.applyTransform([coord, -labelMargin], transform);\n    var labelRotation = axisModel.getModel('axisLabel').get('rotate') || 0; // @ts-ignore\n\n    var labelLayout = AxisBuilder.innerTextLayout(axisAngle, labelRotation * Math.PI / 180, -1);\n    align = labelLayout.textAlign;\n    verticalAlign = labelLayout.textVerticalAlign;\n  } else {\n    // angle axis\n    var r = radiusExtent[1];\n    position = polar.coordToPoint([r + labelMargin, coord]);\n    var cx = polar.cx;\n    var cy = polar.cy;\n    align = Math.abs(position[0] - cx) / r < 0.3 ? 'center' : position[0] > cx ? 'left' : 'right';\n    verticalAlign = Math.abs(position[1] - cy) / r < 0.3 ? 'middle' : position[1] > cy ? 'top' : 'bottom';\n  }\n\n  return {\n    position: position,\n    align: align,\n    verticalAlign: verticalAlign\n  };\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, polar, coordValue, otherExtent) {\n    return axis.dim === 'angle' ? {\n      type: 'Line',\n      shape: viewHelper.makeLineShape(polar.coordToPoint([otherExtent[0], coordValue]), polar.coordToPoint([otherExtent[1], coordValue]))\n    } : {\n      type: 'Circle',\n      shape: {\n        cx: polar.cx,\n        cy: polar.cy,\n        r: coordValue\n      }\n    };\n  },\n  shadow: function (axis, polar, coordValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var radian = Math.PI / 180;\n    return axis.dim === 'angle' ? {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, otherExtent[0], otherExtent[1], // In ECharts y is negative if angle is positive\n      (-coordValue - bandWidth / 2) * radian, (-coordValue + bandWidth / 2) * radian)\n    } : {\n      type: 'Sector',\n      shape: viewHelper.makeSectorShape(polar.cx, polar.cy, coordValue - bandWidth / 2, coordValue + bandWidth / 2, 0, Math.PI * 2)\n    };\n  }\n};\nexport default PolarAxisPointer;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport ComponentModel from '../../model/Component';\n\nvar PolarModel =\n/** @class */\nfunction (_super) {\n  __extends(PolarModel, _super);\n\n  function PolarModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PolarModel.type;\n    return _this;\n  }\n\n  PolarModel.prototype.findAxisModel = function (axisType) {\n    var foundAxisModel;\n    var ecModel = this.ecModel;\n    ecModel.eachComponent(axisType, function (axisModel) {\n      if (axisModel.getCoordSysModel() === this) {\n        foundAxisModel = axisModel;\n      }\n    }, this);\n    return foundAxisModel;\n  };\n\n  PolarModel.type = 'polar';\n  PolarModel.dependencies = ['radiusAxis', 'angleAxis'];\n  PolarModel.defaultOption = {\n    zlevel: 0,\n    z: 0,\n    center: ['50%', '50%'],\n    radius: '80%'\n  };\n  return PolarModel;\n}(ComponentModel);\n\nexport default PolarModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport ComponentModel from '../../model/Component';\nimport { AxisModelCommonMixin } from '../axisModelCommonMixin';\nimport { SINGLE_REFERRING } from '../../util/model';\n\nvar PolarAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(PolarAxisModel, _super);\n\n  function PolarAxisModel() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PolarAxisModel.prototype.getCoordSysModel = function () {\n    return this.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n  };\n\n  PolarAxisModel.type = 'polarAxis';\n  return PolarAxisModel;\n}(ComponentModel);\n\nzrUtil.mixin(PolarAxisModel, AxisModelCommonMixin);\nexport { PolarAxisModel };\n\nvar AngleAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(AngleAxisModel, _super);\n\n  function AngleAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AngleAxisModel.type;\n    return _this;\n  }\n\n  AngleAxisModel.type = 'angleAxis';\n  return AngleAxisModel;\n}(PolarAxisModel);\n\nexport { AngleAxisModel };\n\nvar RadiusAxisModel =\n/** @class */\nfunction (_super) {\n  __extends(RadiusAxisModel, _super);\n\n  function RadiusAxisModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadiusAxisModel.type;\n    return _this;\n  }\n\n  RadiusAxisModel.type = 'radiusAxis';\n  return RadiusAxisModel;\n}(PolarAxisModel);\n\nexport { RadiusAxisModel };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport Axis from '../Axis';\n\nvar RadiusAxis =\n/** @class */\nfunction (_super) {\n  __extends(RadiusAxis, _super);\n\n  function RadiusAxis(scale, radiusExtent) {\n    return _super.call(this, 'radius', scale, radiusExtent) || this;\n  }\n\n  RadiusAxis.prototype.pointToData = function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  };\n\n  return RadiusAxis;\n}(Axis);\n\nRadiusAxis.prototype.dataToRadius = Axis.prototype.dataToCoord;\nRadiusAxis.prototype.radiusToData = Axis.prototype.coordToData;\nexport default RadiusAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as textContain from 'zrender/lib/contain/text';\nimport Axis from '../Axis';\nimport { makeInner } from '../../util/model';\nvar inner = makeInner();\n\nvar AngleAxis =\n/** @class */\nfunction (_super) {\n  __extends(AngleAxis, _super);\n\n  function AngleAxis(scale, angleExtent) {\n    return _super.call(this, 'angle', scale, angleExtent || [0, 360]) || this;\n  }\n\n  AngleAxis.prototype.pointToData = function (point, clamp) {\n    return this.polar.pointToData(point, clamp)[this.dim === 'radius' ? 0 : 1];\n  };\n  /**\n   * Only be called in category axis.\n   * Angle axis uses text height to decide interval\n   *\n   * @override\n   * @return {number} Auto interval for cateogry axis tick and label\n   */\n\n\n  AngleAxis.prototype.calculateCategoryInterval = function () {\n    var axis = this;\n    var labelModel = axis.getLabelModel();\n    var ordinalScale = axis.scale;\n    var ordinalExtent = ordinalScale.getExtent(); // Providing this method is for optimization:\n    // avoid generating a long array by `getTicks`\n    // in large category data case.\n\n    var tickCount = ordinalScale.count();\n\n    if (ordinalExtent[1] - ordinalExtent[0] < 1) {\n      return 0;\n    }\n\n    var tickValue = ordinalExtent[0];\n    var unitSpan = axis.dataToCoord(tickValue + 1) - axis.dataToCoord(tickValue);\n    var unitH = Math.abs(unitSpan); // Not precise, just use height as text width\n    // and each distance from axis line yet.\n\n    var rect = textContain.getBoundingRect(tickValue == null ? '' : tickValue + '', labelModel.getFont(), 'center', 'top');\n    var maxH = Math.max(rect.height, 7);\n    var dh = maxH / unitH; // 0/0 is NaN, 1/0 is Infinity.\n\n    isNaN(dh) && (dh = Infinity);\n    var interval = Math.max(0, Math.floor(dh));\n    var cache = inner(axis.model);\n    var lastAutoInterval = cache.lastAutoInterval;\n    var lastTickCount = cache.lastTickCount; // Use cache to keep interval stable while moving zoom window,\n    // otherwise the calculated interval might jitter when the zoom\n    // window size is close to the interval-changing size.\n\n    if (lastAutoInterval != null && lastTickCount != null && Math.abs(lastAutoInterval - interval) <= 1 && Math.abs(lastTickCount - tickCount) <= 1 // Always choose the bigger one, otherwise the critical\n    // point is not the same when zooming in or zooming out.\n    && lastAutoInterval > interval) {\n      interval = lastAutoInterval;\n    } // Only update cache if cache not used, otherwise the\n    // changing of interval is too insensitive.\n    else {\n        cache.lastTickCount = tickCount;\n        cache.lastAutoInterval = interval;\n      }\n\n    return interval;\n  };\n\n  return AngleAxis;\n}(Axis);\n\nAngleAxis.prototype.dataToAngle = Axis.prototype.dataToCoord;\nAngleAxis.prototype.angleToData = Axis.prototype.coordToData;\nexport default AngleAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport RadiusAxis from './RadiusAxis';\nimport AngleAxis from './AngleAxis';\n\nvar Polar =\n/** @class */\nfunction () {\n  function Polar(name) {\n    this.dimensions = ['radius', 'angle'];\n    this.type = 'polar';\n    /**\n     * x of polar center\n     */\n\n    this.cx = 0;\n    /**\n     * y of polar center\n     */\n\n    this.cy = 0;\n    this._radiusAxis = new RadiusAxis();\n    this._angleAxis = new AngleAxis();\n    this.axisPointerEnabled = true;\n    this.name = name || '';\n    this._radiusAxis.polar = this._angleAxis.polar = this;\n  }\n  /**\n   * If contain coord\n   */\n\n\n  Polar.prototype.containPoint = function (point) {\n    var coord = this.pointToCoord(point);\n    return this._radiusAxis.contain(coord[0]) && this._angleAxis.contain(coord[1]);\n  };\n  /**\n   * If contain data\n   */\n\n\n  Polar.prototype.containData = function (data) {\n    return this._radiusAxis.containData(data[0]) && this._angleAxis.containData(data[1]);\n  };\n\n  Polar.prototype.getAxis = function (dim) {\n    var key = '_' + dim + 'Axis';\n    return this[key];\n  };\n\n  Polar.prototype.getAxes = function () {\n    return [this._radiusAxis, this._angleAxis];\n  };\n  /**\n   * Get axes by type of scale\n   */\n\n\n  Polar.prototype.getAxesByScale = function (scaleType) {\n    var axes = [];\n    var angleAxis = this._angleAxis;\n    var radiusAxis = this._radiusAxis;\n    angleAxis.scale.type === scaleType && axes.push(angleAxis);\n    radiusAxis.scale.type === scaleType && axes.push(radiusAxis);\n    return axes;\n  };\n\n  Polar.prototype.getAngleAxis = function () {\n    return this._angleAxis;\n  };\n\n  Polar.prototype.getRadiusAxis = function () {\n    return this._radiusAxis;\n  };\n\n  Polar.prototype.getOtherAxis = function (axis) {\n    var angleAxis = this._angleAxis;\n    return axis === angleAxis ? this._radiusAxis : angleAxis;\n  };\n  /**\n   * Base axis will be used on stacking.\n   *\n   */\n\n\n  Polar.prototype.getBaseAxis = function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAngleAxis();\n  };\n\n  Polar.prototype.getTooltipAxes = function (dim) {\n    var baseAxis = dim != null && dim !== 'auto' ? this.getAxis(dim) : this.getBaseAxis();\n    return {\n      baseAxes: [baseAxis],\n      otherAxes: [this.getOtherAxis(baseAxis)]\n    };\n  };\n  /**\n   * Convert a single data item to (x, y) point.\n   * Parameter data is an array which the first element is radius and the second is angle\n   */\n\n\n  Polar.prototype.dataToPoint = function (data, clamp) {\n    return this.coordToPoint([this._radiusAxis.dataToRadius(data[0], clamp), this._angleAxis.dataToAngle(data[1], clamp)]);\n  };\n  /**\n   * Convert a (x, y) point to data\n   */\n\n\n  Polar.prototype.pointToData = function (point, clamp) {\n    var coord = this.pointToCoord(point);\n    return [this._radiusAxis.radiusToData(coord[0], clamp), this._angleAxis.angleToData(coord[1], clamp)];\n  };\n  /**\n   * Convert a (x, y) point to (radius, angle) coord\n   */\n\n\n  Polar.prototype.pointToCoord = function (point) {\n    var dx = point[0] - this.cx;\n    var dy = point[1] - this.cy;\n    var angleAxis = this.getAngleAxis();\n    var extent = angleAxis.getExtent();\n    var minAngle = Math.min(extent[0], extent[1]);\n    var maxAngle = Math.max(extent[0], extent[1]); // Fix fixed extent in polarCreator\n    // FIXME\n\n    angleAxis.inverse ? minAngle = maxAngle - 360 : maxAngle = minAngle + 360;\n    var radius = Math.sqrt(dx * dx + dy * dy);\n    dx /= radius;\n    dy /= radius;\n    var radian = Math.atan2(-dy, dx) / Math.PI * 180; // move to angleExtent\n\n    var dir = radian < minAngle ? 1 : -1;\n\n    while (radian < minAngle || radian > maxAngle) {\n      radian += dir * 360;\n    }\n\n    return [radius, radian];\n  };\n  /**\n   * Convert a (radius, angle) coord to (x, y) point\n   */\n\n\n  Polar.prototype.coordToPoint = function (coord) {\n    var radius = coord[0];\n    var radian = coord[1] / 180 * Math.PI;\n    var x = Math.cos(radian) * radius + this.cx; // Inverse the y\n\n    var y = -Math.sin(radian) * radius + this.cy;\n    return [x, y];\n  };\n  /**\n   * Get ring area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   */\n\n\n  Polar.prototype.getArea = function () {\n    var angleAxis = this.getAngleAxis();\n    var radiusAxis = this.getRadiusAxis();\n    var radiusExtent = radiusAxis.getExtent().slice();\n    radiusExtent[0] > radiusExtent[1] && radiusExtent.reverse();\n    var angleExtent = angleAxis.getExtent();\n    var RADIAN = Math.PI / 180;\n    return {\n      cx: this.cx,\n      cy: this.cy,\n      r0: radiusExtent[0],\n      r: radiusExtent[1],\n      startAngle: -angleExtent[0] * RADIAN,\n      endAngle: -angleExtent[1] * RADIAN,\n      clockwise: angleAxis.inverse,\n      contain: function (x, y) {\n        // It's a ring shape.\n        // Start angle and end angle don't matter\n        var dx = x - this.cx;\n        var dy = y - this.cy;\n        var d2 = dx * dx + dy * dy;\n        var r = this.r;\n        var r0 = this.r0;\n        return d2 <= r * r && d2 >= r0 * r0;\n      }\n    };\n  };\n\n  Polar.prototype.convertToPixel = function (ecModel, finder, value) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.dataToPoint(value) : null;\n  };\n\n  Polar.prototype.convertFromPixel = function (ecModel, finder, pixel) {\n    var coordSys = getCoordSys(finder);\n    return coordSys === this ? this.pointToData(pixel) : null;\n  };\n\n  return Polar;\n}();\n\nfunction getCoordSys(finder) {\n  var seriesModel = finder.seriesModel;\n  var polarModel = finder.polarModel;\n  return polarModel && polarModel.coordinateSystem || seriesModel && seriesModel.coordinateSystem;\n}\n\nexport default Polar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// TODO Axis scale\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Polar from './Polar';\nimport { parsePercent } from '../../util/number';\nimport { createScaleByModel, niceScaleExtent, getDataDimensionsOnAxis } from '../../coord/axisHelper';\nimport { SINGLE_REFERRING } from '../../util/model';\n/**\n * Resize method bound to the polar\n */\n\nfunction resizePolar(polar, polarModel, api) {\n  var center = polarModel.get('center');\n  var width = api.getWidth();\n  var height = api.getHeight();\n  polar.cx = parsePercent(center[0], width);\n  polar.cy = parsePercent(center[1], height);\n  var radiusAxis = polar.getRadiusAxis();\n  var size = Math.min(width, height) / 2;\n  var radius = polarModel.get('radius');\n\n  if (radius == null) {\n    radius = [0, '100%'];\n  } else if (!zrUtil.isArray(radius)) {\n    // r0 = 0\n    radius = [0, radius];\n  }\n\n  var parsedRadius = [parsePercent(radius[0], size), parsePercent(radius[1], size)];\n  radiusAxis.inverse ? radiusAxis.setExtent(parsedRadius[1], parsedRadius[0]) : radiusAxis.setExtent(parsedRadius[0], parsedRadius[1]);\n}\n/**\n * Update polar\n */\n\n\nfunction updatePolarScale(ecModel, api) {\n  var polar = this;\n  var angleAxis = polar.getAngleAxis();\n  var radiusAxis = polar.getRadiusAxis(); // Reset scale\n\n  angleAxis.scale.setExtent(Infinity, -Infinity);\n  radiusAxis.scale.setExtent(Infinity, -Infinity);\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.coordinateSystem === polar) {\n      var data_1 = seriesModel.getData();\n      zrUtil.each(getDataDimensionsOnAxis(data_1, 'radius'), function (dim) {\n        radiusAxis.scale.unionExtentFromData(data_1, dim);\n      });\n      zrUtil.each(getDataDimensionsOnAxis(data_1, 'angle'), function (dim) {\n        angleAxis.scale.unionExtentFromData(data_1, dim);\n      });\n    }\n  });\n  niceScaleExtent(angleAxis.scale, angleAxis.model);\n  niceScaleExtent(radiusAxis.scale, radiusAxis.model); // Fix extent of category angle axis\n\n  if (angleAxis.type === 'category' && !angleAxis.onBand) {\n    var extent = angleAxis.getExtent();\n    var diff = 360 / angleAxis.scale.count();\n    angleAxis.inverse ? extent[1] += diff : extent[1] -= diff;\n    angleAxis.setExtent(extent[0], extent[1]);\n  }\n}\n\nfunction isAngleAxisModel(axisModel) {\n  return axisModel.mainType === 'angleAxis';\n}\n/**\n * Set common axis properties\n */\n\n\nfunction setAxis(axis, axisModel) {\n  axis.type = axisModel.get('type');\n  axis.scale = createScaleByModel(axisModel);\n  axis.onBand = axisModel.get('boundaryGap') && axis.type === 'category';\n  axis.inverse = axisModel.get('inverse');\n\n  if (isAngleAxisModel(axisModel)) {\n    axis.inverse = axis.inverse !== axisModel.get('clockwise');\n    var startAngle = axisModel.get('startAngle');\n    axis.setExtent(startAngle, startAngle + (axis.inverse ? -360 : 360));\n  } // Inject axis instance\n\n\n  axisModel.axis = axis;\n  axis.model = axisModel;\n}\n\nvar polarCreator = {\n  dimensions: Polar.prototype.dimensions,\n  create: function (ecModel, api) {\n    var polarList = [];\n    ecModel.eachComponent('polar', function (polarModel, idx) {\n      var polar = new Polar(idx + ''); // Inject resize and update method\n\n      polar.update = updatePolarScale;\n      var radiusAxis = polar.getRadiusAxis();\n      var angleAxis = polar.getAngleAxis();\n      var radiusAxisModel = polarModel.findAxisModel('radiusAxis');\n      var angleAxisModel = polarModel.findAxisModel('angleAxis');\n      setAxis(radiusAxis, radiusAxisModel);\n      setAxis(angleAxis, angleAxisModel);\n      resizePolar(polar, polarModel, api);\n      polarList.push(polar);\n      polarModel.coordinateSystem = polar;\n      polar.model = polarModel;\n    }); // Inject coordinateSystem to series\n\n    ecModel.eachSeries(function (seriesModel) {\n      if (seriesModel.get('coordinateSystem') === 'polar') {\n        var polarModel = seriesModel.getReferringComponents('polar', SINGLE_REFERRING).models[0];\n\n        if (process.env.NODE_ENV !== 'production') {\n          if (!polarModel) {\n            throw new Error('Polar \"' + zrUtil.retrieve(seriesModel.get('polarIndex'), seriesModel.get('polarId'), 0) + '\" not found');\n          }\n        }\n\n        seriesModel.coordinateSystem = polarModel.coordinateSystem;\n      }\n    });\n    return polarList;\n  }\n};\nexport default polarCreator;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport { createTextStyle } from '../../label/labelStyle';\nimport Model from '../../model/Model';\nimport AxisView from './AxisView';\nimport AxisBuilder from './AxisBuilder';\nimport { getECData } from '../../util/innerStore';\nvar elementList = ['axisLine', 'axisLabel', 'axisTick', 'minorTick', 'splitLine', 'minorSplitLine', 'splitArea'];\n\nfunction getAxisLineShape(polar, rExtent, angle) {\n  rExtent[1] > rExtent[0] && (rExtent = rExtent.slice().reverse());\n  var start = polar.coordToPoint([rExtent[0], angle]);\n  var end = polar.coordToPoint([rExtent[1], angle]);\n  return {\n    x1: start[0],\n    y1: start[1],\n    x2: end[0],\n    y2: end[1]\n  };\n}\n\nfunction getRadiusIdx(polar) {\n  var radiusAxis = polar.getRadiusAxis();\n  return radiusAxis.inverse ? 0 : 1;\n} // Remove the last tick which will overlap the first tick\n\n\nfunction fixAngleOverlap(list) {\n  var firstItem = list[0];\n  var lastItem = list[list.length - 1];\n\n  if (firstItem && lastItem && Math.abs(Math.abs(firstItem.coord - lastItem.coord) - 360) < 1e-4) {\n    list.pop();\n  }\n}\n\nvar AngleAxisView =\n/** @class */\nfunction (_super) {\n  __extends(AngleAxisView, _super);\n\n  function AngleAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = AngleAxisView.type;\n    _this.axisPointerClass = 'PolarAxisPointer';\n    return _this;\n  }\n\n  AngleAxisView.prototype.render = function (angleAxisModel, ecModel) {\n    this.group.removeAll();\n\n    if (!angleAxisModel.get('show')) {\n      return;\n    }\n\n    var angleAxis = angleAxisModel.axis;\n    var polar = angleAxis.polar;\n    var radiusExtent = polar.getRadiusAxis().getExtent();\n    var ticksAngles = angleAxis.getTicksCoords();\n    var minorTickAngles = angleAxis.getMinorTicksCoords();\n    var labels = zrUtil.map(angleAxis.getViewLabels(), function (labelItem) {\n      labelItem = zrUtil.clone(labelItem);\n      var scale = angleAxis.scale;\n      var tickValue = scale.type === 'ordinal' ? scale.getRawOrdinalNumber(labelItem.tickValue) : labelItem.tickValue;\n      labelItem.coord = angleAxis.dataToCoord(tickValue);\n      return labelItem;\n    });\n    fixAngleOverlap(labels);\n    fixAngleOverlap(ticksAngles);\n    zrUtil.each(elementList, function (name) {\n      if (angleAxisModel.get([name, 'show']) && (!angleAxis.scale.isBlank() || name === 'axisLine')) {\n        angelAxisElementsBuilders[name](this.group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent, labels);\n      }\n    }, this);\n  };\n\n  AngleAxisView.type = 'angleAxis';\n  return AngleAxisView;\n}(AxisView);\n\nvar angelAxisElementsBuilders = {\n  axisLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var lineStyleModel = angleAxisModel.getModel(['axisLine', 'lineStyle']); // extent id of the axis radius (r0 and r)\n\n    var rId = getRadiusIdx(polar);\n    var r0Id = rId ? 0 : 1;\n    var shape;\n\n    if (radiusExtent[r0Id] === 0) {\n      shape = new graphic.Circle({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: radiusExtent[rId]\n        },\n        style: lineStyleModel.getLineStyle(),\n        z2: 1,\n        silent: true\n      });\n    } else {\n      shape = new graphic.Ring({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: radiusExtent[rId],\n          r0: radiusExtent[r0Id]\n        },\n        style: lineStyleModel.getLineStyle(),\n        z2: 1,\n        silent: true\n      });\n    }\n\n    shape.style.fill = null;\n    group.add(shape);\n  },\n  axisTick: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * tickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = zrUtil.map(ticksAngles, function (tickAngleItem) {\n      return new graphic.Line({\n        shape: getAxisLineShape(polar, [radius, radius + tickLen], tickAngleItem.coord)\n      });\n    });\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(tickModel.getModel('lineStyle').getLineStyle(), {\n        stroke: angleAxisModel.get(['axisLine', 'lineStyle', 'color'])\n      })\n    }));\n  },\n  minorTick: function (group, angleAxisModel, polar, tickAngles, minorTickAngles, radiusExtent) {\n    if (!minorTickAngles.length) {\n      return;\n    }\n\n    var tickModel = angleAxisModel.getModel('axisTick');\n    var minorTickModel = angleAxisModel.getModel('minorTick');\n    var tickLen = (tickModel.get('inside') ? -1 : 1) * minorTickModel.get('length');\n    var radius = radiusExtent[getRadiusIdx(polar)];\n    var lines = [];\n\n    for (var i = 0; i < minorTickAngles.length; i++) {\n      for (var k = 0; k < minorTickAngles[i].length; k++) {\n        lines.push(new graphic.Line({\n          shape: getAxisLineShape(polar, [radius, radius + tickLen], minorTickAngles[i][k].coord)\n        }));\n      }\n    }\n\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults(minorTickModel.getModel('lineStyle').getLineStyle(), zrUtil.defaults(tickModel.getLineStyle(), {\n        stroke: angleAxisModel.get(['axisLine', 'lineStyle', 'color'])\n      }))\n    }));\n  },\n  axisLabel: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent, labels) {\n    var rawCategoryData = angleAxisModel.getCategories(true);\n    var commonLabelModel = angleAxisModel.getModel('axisLabel');\n    var labelMargin = commonLabelModel.get('margin');\n    var triggerEvent = angleAxisModel.get('triggerEvent'); // Use length of ticksAngles because it may remove the last tick to avoid overlapping\n\n    zrUtil.each(labels, function (labelItem, idx) {\n      var labelModel = commonLabelModel;\n      var tickValue = labelItem.tickValue;\n      var r = radiusExtent[getRadiusIdx(polar)];\n      var p = polar.coordToPoint([r + labelMargin, labelItem.coord]);\n      var cx = polar.cx;\n      var cy = polar.cy;\n      var labelTextAlign = Math.abs(p[0] - cx) / r < 0.3 ? 'center' : p[0] > cx ? 'left' : 'right';\n      var labelTextVerticalAlign = Math.abs(p[1] - cy) / r < 0.3 ? 'middle' : p[1] > cy ? 'top' : 'bottom';\n\n      if (rawCategoryData && rawCategoryData[tickValue]) {\n        var rawCategoryItem = rawCategoryData[tickValue];\n\n        if (zrUtil.isObject(rawCategoryItem) && rawCategoryItem.textStyle) {\n          labelModel = new Model(rawCategoryItem.textStyle, commonLabelModel, commonLabelModel.ecModel);\n        }\n      }\n\n      var textEl = new graphic.Text({\n        silent: AxisBuilder.isLabelSilent(angleAxisModel),\n        style: createTextStyle(labelModel, {\n          x: p[0],\n          y: p[1],\n          fill: labelModel.getTextColor() || angleAxisModel.get(['axisLine', 'lineStyle', 'color']),\n          text: labelItem.formattedLabel,\n          align: labelTextAlign,\n          verticalAlign: labelTextVerticalAlign\n        })\n      });\n      group.add(textEl); // Pack data for mouse event\n\n      if (triggerEvent) {\n        var eventData = AxisBuilder.makeAxisEventDataBase(angleAxisModel);\n        eventData.targetType = 'axisLabel';\n        eventData.value = labelItem.rawLabel;\n        getECData(textEl).eventData = eventData;\n      }\n    }, this);\n  },\n  splitLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    var splitLineModel = angleAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n\n    for (var i = 0; i < ticksAngles.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Line({\n        shape: getAxisLineShape(polar, radiusExtent, ticksAngles[i].coord)\n      }));\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitLines.length; i++) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length]\n        }, lineStyleModel.getLineStyle()),\n        silent: true,\n        z: angleAxisModel.get('z')\n      }));\n    }\n  },\n  minorSplitLine: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    if (!minorTickAngles.length) {\n      return;\n    }\n\n    var minorSplitLineModel = angleAxisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var lines = [];\n\n    for (var i = 0; i < minorTickAngles.length; i++) {\n      for (var k = 0; k < minorTickAngles[i].length; k++) {\n        lines.push(new graphic.Line({\n          shape: getAxisLineShape(polar, radiusExtent, minorTickAngles[i][k].coord)\n        }));\n      }\n    }\n\n    group.add(graphic.mergePath(lines, {\n      style: lineStyleModel.getLineStyle(),\n      silent: true,\n      z: angleAxisModel.get('z')\n    }));\n  },\n  splitArea: function (group, angleAxisModel, polar, ticksAngles, minorTickAngles, radiusExtent) {\n    if (!ticksAngles.length) {\n      return;\n    }\n\n    var splitAreaModel = angleAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var RADIAN = Math.PI / 180;\n    var prevAngle = -ticksAngles[0].coord * RADIAN;\n    var r0 = Math.min(radiusExtent[0], radiusExtent[1]);\n    var r1 = Math.max(radiusExtent[0], radiusExtent[1]);\n    var clockwise = angleAxisModel.get('clockwise');\n\n    for (var i = 1, len = ticksAngles.length; i <= len; i++) {\n      var coord = i === len ? ticksAngles[0].coord : ticksAngles[i].coord;\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: r0,\n          r: r1,\n          startAngle: prevAngle,\n          endAngle: -coord * RADIAN,\n          clockwise: clockwise\n        },\n        silent: true\n      }));\n      prevAngle = -coord * RADIAN;\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitAreas.length; i++) {\n      group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n};\nexport default AngleAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport AxisBuilder from './AxisBuilder';\nimport AxisView from './AxisView';\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitLine', 'splitArea', 'minorSplitLine'];\n\nvar RadiusAxisView =\n/** @class */\nfunction (_super) {\n  __extends(RadiusAxisView, _super);\n\n  function RadiusAxisView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadiusAxisView.type;\n    _this.axisPointerClass = 'PolarAxisPointer';\n    return _this;\n  }\n\n  RadiusAxisView.prototype.render = function (radiusAxisModel, ecModel) {\n    this.group.removeAll();\n\n    if (!radiusAxisModel.get('show')) {\n      return;\n    }\n\n    var oldAxisGroup = this._axisGroup;\n    var newAxisGroup = this._axisGroup = new graphic.Group();\n    this.group.add(newAxisGroup);\n    var radiusAxis = radiusAxisModel.axis;\n    var polar = radiusAxis.polar;\n    var angleAxis = polar.getAngleAxis();\n    var ticksCoords = radiusAxis.getTicksCoords();\n    var minorTicksCoords = radiusAxis.getMinorTicksCoords();\n    var axisAngle = angleAxis.getExtent()[0];\n    var radiusExtent = radiusAxis.getExtent();\n    var layout = layoutAxis(polar, radiusAxisModel, axisAngle);\n    var axisBuilder = new AxisBuilder(radiusAxisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n    newAxisGroup.add(axisBuilder.getGroup());\n    graphic.groupTransition(oldAxisGroup, newAxisGroup, radiusAxisModel);\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (radiusAxisModel.get([name, 'show']) && !radiusAxis.scale.isBlank()) {\n        axisElementBuilders[name](this.group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords, minorTicksCoords);\n      }\n    }, this);\n  };\n\n  RadiusAxisView.type = 'radiusAxis';\n  return RadiusAxisView;\n}(AxisView);\n\nvar axisElementBuilders = {\n  splitLine: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    var splitLineModel = radiusAxisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    var lineCount = 0;\n    lineColors = lineColors instanceof Array ? lineColors : [lineColors];\n    var splitLines = [];\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % lineColors.length;\n      splitLines[colorIndex] = splitLines[colorIndex] || [];\n      splitLines[colorIndex].push(new graphic.Circle({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r: ticksCoords[i].coord\n        }\n      }));\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitLines.length; i++) {\n      group.add(graphic.mergePath(splitLines[i], {\n        style: zrUtil.defaults({\n          stroke: lineColors[i % lineColors.length],\n          fill: null\n        }, lineStyleModel.getLineStyle()),\n        silent: true\n      }));\n    }\n  },\n  minorSplitLine: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords, minorTicksCoords) {\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var minorSplitLineModel = radiusAxisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var lines = [];\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        lines.push(new graphic.Circle({\n          shape: {\n            cx: polar.cx,\n            cy: polar.cy,\n            r: minorTicksCoords[i][k].coord\n          }\n        }));\n      }\n    }\n\n    group.add(graphic.mergePath(lines, {\n      style: zrUtil.defaults({\n        fill: null\n      }, lineStyleModel.getLineStyle()),\n      silent: true\n    }));\n  },\n  splitArea: function (group, radiusAxisModel, polar, axisAngle, radiusExtent, ticksCoords) {\n    if (!ticksCoords.length) {\n      return;\n    }\n\n    var splitAreaModel = radiusAxisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var lineCount = 0;\n    areaColors = areaColors instanceof Array ? areaColors : [areaColors];\n    var splitAreas = [];\n    var prevRadius = ticksCoords[0].coord;\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var colorIndex = lineCount++ % areaColors.length;\n      splitAreas[colorIndex] = splitAreas[colorIndex] || [];\n      splitAreas[colorIndex].push(new graphic.Sector({\n        shape: {\n          cx: polar.cx,\n          cy: polar.cy,\n          r0: prevRadius,\n          r: ticksCoords[i].coord,\n          startAngle: 0,\n          endAngle: Math.PI * 2\n        },\n        silent: true\n      }));\n      prevRadius = ticksCoords[i].coord;\n    } // Simple optimization\n    // Batching the lines if color are the same\n\n\n    for (var i = 0; i < splitAreas.length; i++) {\n      group.add(graphic.mergePath(splitAreas[i], {\n        style: zrUtil.defaults({\n          fill: areaColors[i % areaColors.length]\n        }, areaStyleModel.getAreaStyle()),\n        silent: true\n      }));\n    }\n  }\n};\n/**\n * @inner\n */\n\nfunction layoutAxis(polar, radiusAxisModel, axisAngle) {\n  return {\n    position: [polar.cx, polar.cy],\n    rotation: axisAngle / 180 * Math.PI,\n    labelDirection: -1,\n    tickDirection: -1,\n    nameDirection: 1,\n    labelRotate: radiusAxisModel.getModel('axisLabel').get('rotate'),\n    // Over splitLine and splitArea\n    z2: 1\n  };\n}\n\nexport default RadiusAxisView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { parsePercent } from '../util/number';\nimport { isDimensionStacked } from '../data/helper/dataStackHelper';\n\nfunction getSeriesStackId(seriesModel) {\n  return seriesModel.get('stack') || '__ec_stack_' + seriesModel.seriesIndex;\n}\n\nfunction getAxisKey(polar, axis) {\n  return axis.dim + polar.model.componentIndex;\n}\n\nfunction barLayoutPolar(seriesType, ecModel, api) {\n  var lastStackCoords = {};\n  var barWidthAndOffset = calRadialBar(zrUtil.filter(ecModel.getSeriesByType(seriesType), function (seriesModel) {\n    return !ecModel.isSeriesFiltered(seriesModel) && seriesModel.coordinateSystem && seriesModel.coordinateSystem.type === 'polar';\n  }));\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    // Check series coordinate, do layout for polar only\n    if (seriesModel.coordinateSystem.type !== 'polar') {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var stackId = getSeriesStackId(seriesModel);\n    var columnLayoutInfo = barWidthAndOffset[axisKey][stackId];\n    var columnOffset = columnLayoutInfo.offset;\n    var columnWidth = columnLayoutInfo.width;\n    var valueAxis = polar.getOtherAxis(baseAxis);\n    var cx = seriesModel.coordinateSystem.cx;\n    var cy = seriesModel.coordinateSystem.cy;\n    var barMinHeight = seriesModel.get('barMinHeight') || 0;\n    var barMinAngle = seriesModel.get('barMinAngle') || 0;\n    lastStackCoords[stackId] = lastStackCoords[stackId] || [];\n    var valueDim = data.mapDimension(valueAxis.dim);\n    var baseDim = data.mapDimension(baseAxis.dim);\n    var stacked = isDimensionStacked(data, valueDim\n    /*, baseDim*/\n    );\n    var clampLayout = baseAxis.dim !== 'radius' || !seriesModel.get('roundCap', true);\n    var valueAxisStart = valueAxis.dataToCoord(0);\n\n    for (var idx = 0, len = data.count(); idx < len; idx++) {\n      var value = data.get(valueDim, idx);\n      var baseValue = data.get(baseDim, idx);\n      var sign = value >= 0 ? 'p' : 'n';\n      var baseCoord = valueAxisStart; // Because of the barMinHeight, we can not use the value in\n      // stackResultDimension directly.\n      // Only ordinal axis can be stacked.\n\n      if (stacked) {\n        if (!lastStackCoords[stackId][baseValue]) {\n          lastStackCoords[stackId][baseValue] = {\n            p: valueAxisStart,\n            n: valueAxisStart // Negative stack\n\n          };\n        } // Should also consider #4243\n\n\n        baseCoord = lastStackCoords[stackId][baseValue][sign];\n      }\n\n      var r0 = void 0;\n      var r = void 0;\n      var startAngle = void 0;\n      var endAngle = void 0; // radial sector\n\n      if (valueAxis.dim === 'radius') {\n        var radiusSpan = valueAxis.dataToCoord(value) - valueAxisStart;\n        var angle = baseAxis.dataToCoord(baseValue);\n\n        if (Math.abs(radiusSpan) < barMinHeight) {\n          radiusSpan = (radiusSpan < 0 ? -1 : 1) * barMinHeight;\n        }\n\n        r0 = baseCoord;\n        r = baseCoord + radiusSpan;\n        startAngle = angle - columnOffset;\n        endAngle = startAngle - columnWidth;\n        stacked && (lastStackCoords[stackId][baseValue][sign] = r);\n      } // tangential sector\n      else {\n          var angleSpan = valueAxis.dataToCoord(value, clampLayout) - valueAxisStart;\n          var radius = baseAxis.dataToCoord(baseValue);\n\n          if (Math.abs(angleSpan) < barMinAngle) {\n            angleSpan = (angleSpan < 0 ? -1 : 1) * barMinAngle;\n          }\n\n          r0 = radius + columnOffset;\n          r = r0 + columnWidth;\n          startAngle = baseCoord;\n          endAngle = baseCoord + angleSpan; // if the previous stack is at the end of the ring,\n          // add a round to differentiate it from origin\n          // let extent = angleAxis.getExtent();\n          // let stackCoord = angle;\n          // if (stackCoord === extent[0] && value > 0) {\n          //     stackCoord = extent[1];\n          // }\n          // else if (stackCoord === extent[1] && value < 0) {\n          //     stackCoord = extent[0];\n          // }\n\n          stacked && (lastStackCoords[stackId][baseValue][sign] = endAngle);\n        }\n\n      data.setItemLayout(idx, {\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: r,\n        // Consider that positive angle is anti-clockwise,\n        // while positive radian of sector is clockwise\n        startAngle: -startAngle * Math.PI / 180,\n        endAngle: -endAngle * Math.PI / 180\n      });\n    }\n  });\n}\n/**\n * Calculate bar width and offset for radial bar charts\n */\n\n\nfunction calRadialBar(barSeries) {\n  // Columns info on each category axis. Key is polar name\n  var columnsMap = {};\n  zrUtil.each(barSeries, function (seriesModel, idx) {\n    var data = seriesModel.getData();\n    var polar = seriesModel.coordinateSystem;\n    var baseAxis = polar.getBaseAxis();\n    var axisKey = getAxisKey(polar, baseAxis);\n    var axisExtent = baseAxis.getExtent();\n    var bandWidth = baseAxis.type === 'category' ? baseAxis.getBandWidth() : Math.abs(axisExtent[1] - axisExtent[0]) / data.count();\n    var columnsOnAxis = columnsMap[axisKey] || {\n      bandWidth: bandWidth,\n      remainedWidth: bandWidth,\n      autoWidthCount: 0,\n      categoryGap: '20%',\n      gap: '30%',\n      stacks: {}\n    };\n    var stacks = columnsOnAxis.stacks;\n    columnsMap[axisKey] = columnsOnAxis;\n    var stackId = getSeriesStackId(seriesModel);\n\n    if (!stacks[stackId]) {\n      columnsOnAxis.autoWidthCount++;\n    }\n\n    stacks[stackId] = stacks[stackId] || {\n      width: 0,\n      maxWidth: 0\n    };\n    var barWidth = parsePercent(seriesModel.get('barWidth'), bandWidth);\n    var barMaxWidth = parsePercent(seriesModel.get('barMaxWidth'), bandWidth);\n    var barGap = seriesModel.get('barGap');\n    var barCategoryGap = seriesModel.get('barCategoryGap');\n\n    if (barWidth && !stacks[stackId].width) {\n      barWidth = Math.min(columnsOnAxis.remainedWidth, barWidth);\n      stacks[stackId].width = barWidth;\n      columnsOnAxis.remainedWidth -= barWidth;\n    }\n\n    barMaxWidth && (stacks[stackId].maxWidth = barMaxWidth);\n    barGap != null && (columnsOnAxis.gap = barGap);\n    barCategoryGap != null && (columnsOnAxis.categoryGap = barCategoryGap);\n  });\n  var result = {};\n  zrUtil.each(columnsMap, function (columnsOnAxis, coordSysName) {\n    result[coordSysName] = {};\n    var stacks = columnsOnAxis.stacks;\n    var bandWidth = columnsOnAxis.bandWidth;\n    var categoryGap = parsePercent(columnsOnAxis.categoryGap, bandWidth);\n    var barGapPercent = parsePercent(columnsOnAxis.gap, 1);\n    var remainedWidth = columnsOnAxis.remainedWidth;\n    var autoWidthCount = columnsOnAxis.autoWidthCount;\n    var autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0); // Find if any auto calculated bar exceeded maxBarWidth\n\n    zrUtil.each(stacks, function (column, stack) {\n      var maxWidth = column.maxWidth;\n\n      if (maxWidth && maxWidth < autoWidth) {\n        maxWidth = Math.min(maxWidth, remainedWidth);\n\n        if (column.width) {\n          maxWidth = Math.min(maxWidth, column.width);\n        }\n\n        remainedWidth -= maxWidth;\n        column.width = maxWidth;\n        autoWidthCount--;\n      }\n    }); // Recalculate width again\n\n    autoWidth = (remainedWidth - categoryGap) / (autoWidthCount + (autoWidthCount - 1) * barGapPercent);\n    autoWidth = Math.max(autoWidth, 0);\n    var widthSum = 0;\n    var lastColumn;\n    zrUtil.each(stacks, function (column, idx) {\n      if (!column.width) {\n        column.width = autoWidth;\n      }\n\n      lastColumn = column;\n      widthSum += column.width * (1 + barGapPercent);\n    });\n\n    if (lastColumn) {\n      widthSum -= lastColumn.width * barGapPercent;\n    }\n\n    var offset = -widthSum / 2;\n    zrUtil.each(stacks, function (column, stackId) {\n      result[coordSysName][stackId] = result[coordSysName][stackId] || {\n        offset: offset,\n        width: column.width\n      };\n      offset += column.width * (1 + barGapPercent);\n    });\n  });\n  return result;\n}\n\nexport default barLayoutPolar;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport { use } from '../../extension';\nimport AxisView from '../axis/AxisView';\nimport PolarAxisPointer from '../axisPointer/PolarAxisPointer';\nimport { install as installAxisPointer } from '../axisPointer/install';\nimport PolarModel from '../../coord/polar/PolarModel';\nimport axisModelCreator from '../../coord/axisModelCreator';\nimport { AngleAxisModel, RadiusAxisModel } from '../../coord/polar/AxisModel';\nimport polarCreator from '../../coord/polar/polarCreator';\nimport AngleAxisView from '../axis/AngleAxisView';\nimport RadiusAxisView from '../axis/RadiusAxisView';\nimport ComponentView from '../../view/Component';\nimport { curry } from 'zrender/lib/core/util';\nimport barLayoutPolar from '../../layout/barPolar';\nvar angleAxisExtraOption = {\n  startAngle: 90,\n  clockwise: true,\n  splitNumber: 12,\n  axisLabel: {\n    rotate: 0\n  }\n};\nvar radiusAxisExtraOption = {\n  splitNumber: 5\n};\n\nvar PolarView =\n/** @class */\nfunction (_super) {\n  __extends(PolarView, _super);\n\n  function PolarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = PolarView.type;\n    return _this;\n  }\n\n  PolarView.type = 'polar';\n  return PolarView;\n}(ComponentView);\n\nexport function install(registers) {\n  use(installAxisPointer);\n  AxisView.registerAxisPointerClass('PolarAxisPointer', PolarAxisPointer);\n  registers.registerCoordinateSystem('polar', polarCreator);\n  registers.registerComponentModel(PolarModel);\n  registers.registerComponentView(PolarView); // Model and view for angleAxis and radiusAxis\n\n  axisModelCreator(registers, 'angle', AngleAxisModel, angleAxisExtraOption);\n  axisModelCreator(registers, 'radius', RadiusAxisModel, radiusAxisExtraOption);\n  registers.registerComponentView(AngleAxisView);\n  registers.registerComponentView(RadiusAxisView);\n  registers.registerLayout(curry(barLayoutPolar, 'bar'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\"; // Poly path support NaN point\n\nimport Path from 'zrender/lib/graphic/Path';\nimport PathProxy from 'zrender/lib/core/PathProxy';\nimport { cubicRootAt, cubicAt } from 'zrender/lib/core/curve';\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n\nfunction isPointNull(x, y) {\n  return isNaN(x) || isNaN(y);\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smooth, smoothMonotone, connectNulls) {\n  var prevX;\n  var prevY;\n  var cpx0;\n  var cpy0;\n  var cpx1;\n  var cpy1;\n  var idx = start;\n  var k = 0;\n\n  for (; k < segLen; k++) {\n    var x = points[idx * 2];\n    var y = points[idx * 2 + 1];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(x, y)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](x, y);\n      cpx0 = x;\n      cpy0 = y;\n    } else {\n      var dx = x - prevX;\n      var dy = y - prevY; // Ignore tiny segment.\n\n      if (dx * dx + dy * dy < 0.5) {\n        idx += dir;\n        continue;\n      }\n\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextX = points[nextIdx * 2];\n        var nextY = points[nextIdx * 2 + 1];\n        var tmpK = k + 1;\n\n        if (connectNulls) {\n          // Find next point not null\n          while (isPointNull(nextX, nextY) && tmpK < segLen) {\n            tmpK++;\n            nextIdx += dir;\n            nextX = points[nextIdx * 2];\n            nextY = points[nextIdx * 2 + 1];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var vx = 0;\n        var vy = 0;\n        var nextCpx0 = void 0;\n        var nextCpy0 = void 0; // Is last point\n\n        if (tmpK >= segLen || isPointNull(nextX, nextY)) {\n          cpx1 = x;\n          cpy1 = y;\n        } else {\n          vx = nextX - prevX;\n          vy = nextY - prevY;\n          var dx0 = x - prevX;\n          var dx1 = nextX - x;\n          var dy0 = y - prevY;\n          var dy1 = nextY - y;\n          var lenPrevSeg = void 0;\n          var lenNextSeg = void 0;\n\n          if (smoothMonotone === 'x') {\n            lenPrevSeg = Math.abs(dx0);\n            lenNextSeg = Math.abs(dx1);\n            cpx1 = x - lenPrevSeg * smooth;\n            cpy1 = y;\n            nextCpx0 = x + lenPrevSeg * smooth;\n            nextCpy0 = y;\n          } else if (smoothMonotone === 'y') {\n            lenPrevSeg = Math.abs(dy0);\n            lenNextSeg = Math.abs(dy1);\n            cpx1 = x;\n            cpy1 = y - lenPrevSeg * smooth;\n            nextCpx0 = x;\n            nextCpy0 = y + lenPrevSeg * smooth;\n          } else {\n            lenPrevSeg = Math.sqrt(dx0 * dx0 + dy0 * dy0);\n            lenNextSeg = Math.sqrt(dx1 * dx1 + dy1 * dy1); // Use ratio of seg length\n\n            ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n            cpx1 = x - vx * smooth * (1 - ratioNextSeg);\n            cpy1 = y - vy * smooth * (1 - ratioNextSeg); // cp0 of next segment\n\n            nextCpx0 = x + vx * smooth * ratioNextSeg;\n            nextCpy0 = y + vy * smooth * ratioNextSeg; // Smooth constraint between point and next point.\n            // Avoid exceeding extreme after smoothing.\n\n            nextCpx0 = mathMin(nextCpx0, mathMax(nextX, x));\n            nextCpy0 = mathMin(nextCpy0, mathMax(nextY, y));\n            nextCpx0 = mathMax(nextCpx0, mathMin(nextX, x));\n            nextCpy0 = mathMax(nextCpy0, mathMin(nextY, y)); // Reclaculate cp1 based on the adjusted cp0 of next seg.\n\n            vx = nextCpx0 - x;\n            vy = nextCpy0 - y;\n            cpx1 = x - vx * lenPrevSeg / lenNextSeg;\n            cpy1 = y - vy * lenPrevSeg / lenNextSeg; // Smooth constraint between point and prev point.\n            // Avoid exceeding extreme after smoothing.\n\n            cpx1 = mathMin(cpx1, mathMax(prevX, x));\n            cpy1 = mathMin(cpy1, mathMax(prevY, y));\n            cpx1 = mathMax(cpx1, mathMin(prevX, x));\n            cpy1 = mathMax(cpy1, mathMin(prevY, y)); // Adjust next cp0 again.\n\n            vx = x - cpx1;\n            vy = y - cpy1;\n            nextCpx0 = x + vx * lenNextSeg / lenPrevSeg;\n            nextCpy0 = y + vy * lenNextSeg / lenPrevSeg;\n          }\n        }\n\n        ctx.bezierCurveTo(cpx0, cpy0, cpx1, cpy1, x, y);\n        cpx0 = nextCpx0;\n        cpy0 = nextCpy0;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n\n    prevX = x;\n    prevY = y;\n    idx += dir;\n  }\n\n  return k;\n}\n\nvar ECPolylineShape =\n/** @class */\nfunction () {\n  function ECPolylineShape() {\n    this.smooth = 0;\n    this.smoothConstraint = true;\n  }\n\n  return ECPolylineShape;\n}();\n\nvar ECPolyline =\n/** @class */\nfunction (_super) {\n  __extends(ECPolyline, _super);\n\n  function ECPolyline(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polyline';\n    return _this;\n  }\n\n  ECPolyline.prototype.getDefaultStyle = function () {\n    return {\n      stroke: '#000',\n      fill: null\n    };\n  };\n\n  ECPolyline.prototype.getDefaultShape = function () {\n    return new ECPolylineShape();\n  };\n\n  ECPolyline.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length / 2; // const result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  };\n\n  ECPolyline.prototype.getPointOn = function (xOrY, dim) {\n    if (!this.path) {\n      this.createPathProxy();\n      this.buildPath(this.path, this.shape);\n    }\n\n    var path = this.path;\n    var data = path.data;\n    var CMD = PathProxy.CMD;\n    var x0;\n    var y0;\n    var isDimX = dim === 'x';\n    var roots = [];\n\n    for (var i = 0; i < data.length;) {\n      var cmd = data[i++];\n      var x = void 0;\n      var y = void 0;\n      var x2 = void 0;\n      var y2 = void 0;\n      var x3 = void 0;\n      var y3 = void 0;\n      var t = void 0;\n\n      switch (cmd) {\n        case CMD.M:\n          x0 = data[i++];\n          y0 = data[i++];\n          break;\n\n        case CMD.L:\n          x = data[i++];\n          y = data[i++];\n          t = isDimX ? (xOrY - x0) / (x - x0) : (xOrY - y0) / (y - y0);\n\n          if (t <= 1 && t >= 0) {\n            var val = isDimX ? (y - y0) * t + y0 : (x - x0) * t + x0;\n            return isDimX ? [xOrY, val] : [val, xOrY];\n          }\n\n          x0 = x;\n          y0 = y;\n          break;\n\n        case CMD.C:\n          x = data[i++];\n          y = data[i++];\n          x2 = data[i++];\n          y2 = data[i++];\n          x3 = data[i++];\n          y3 = data[i++];\n          var nRoot = isDimX ? cubicRootAt(x0, x, x2, x3, xOrY, roots) : cubicRootAt(y0, y, y2, y3, xOrY, roots);\n\n          if (nRoot > 0) {\n            for (var i_1 = 0; i_1 < nRoot; i_1++) {\n              var t_1 = roots[i_1];\n\n              if (t_1 <= 1 && t_1 >= 0) {\n                var val = isDimX ? cubicAt(y0, y, y2, y3, t_1) : cubicAt(x0, x, x2, x3, t_1);\n                return isDimX ? [xOrY, val] : [val, xOrY];\n              }\n            }\n          }\n\n          x0 = x3;\n          y0 = y3;\n          break;\n      }\n    }\n  };\n\n  return ECPolyline;\n}(Path);\n\nexport { ECPolyline };\n\nvar ECPolygonShape =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygonShape, _super);\n\n  function ECPolygonShape() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return ECPolygonShape;\n}(ECPolylineShape);\n\nvar ECPolygon =\n/** @class */\nfunction (_super) {\n  __extends(ECPolygon, _super);\n\n  function ECPolygon(opts) {\n    var _this = _super.call(this, opts) || this;\n\n    _this.type = 'ec-polygon';\n    return _this;\n  }\n\n  ECPolygon.prototype.getDefaultShape = function () {\n    return new ECPolygonShape();\n  };\n\n  ECPolygon.prototype.buildPath = function (ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length / 2;\n    var smoothMonotone = shape.smoothMonotone;\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len * 2 - 2], points[len * 2 - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i * 2], points[i * 2 + 1])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  };\n\n  return ECPolygon;\n}(Path);\n\nexport { ECPolygon };","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { isArray } from 'zrender/lib/core/util';\n/* global Float32Array */\n\nvar supportFloat32Array = typeof Float32Array !== 'undefined';\nvar Float32ArrayCtor = !supportFloat32Array ? Array : Float32Array;\nexport function createFloat32Array(arg) {\n  if (isArray(arg)) {\n    // Return self directly if don't support TypedArray.\n    return supportFloat32Array ? new Float32Array(arg) : arg;\n  } // Else is number\n\n\n  return new Float32ArrayCtor(arg);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport * as graphic from '../../util/graphic';\nimport SymbolClz from './Symbol';\nimport { isObject } from 'zrender/lib/core/util';\nimport { getLabelStatesModels } from '../../label/labelStyle';\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  var emphasisModel = seriesModel.getModel('emphasis');\n  return {\n    emphasisItemStyle: emphasisModel.getModel('itemStyle').getItemStyle(),\n    blurItemStyle: seriesModel.getModel(['blur', 'itemStyle']).getItemStyle(),\n    selectItemStyle: seriesModel.getModel(['select', 'itemStyle']).getItemStyle(),\n    focus: emphasisModel.get('focus'),\n    blurScope: emphasisModel.get('blurScope'),\n    hoverScale: emphasisModel.get('scale'),\n    labelStatesModels: getLabelStatesModels(seriesModel),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar SymbolDraw =\n/** @class */\nfunction () {\n  function SymbolDraw(SymbolCtor) {\n    this.group = new graphic.Group();\n    this._SymbolCtor = SymbolCtor || SymbolClz;\n  }\n  /**\n   * Update symbols draw by new data\n   */\n\n\n  SymbolDraw.prototype.updateData = function (data, opt) {\n    opt = normalizeUpdateOpt(opt);\n    var group = this.group;\n    var seriesModel = data.hostModel;\n    var oldData = this._data;\n    var SymbolCtor = this._SymbolCtor;\n    var disableAnimation = opt.disableAnimation;\n    var seriesScope = makeSeriesScope(data);\n    var symbolUpdateOpt = {\n      disableAnimation: disableAnimation\n    };\n\n    var getSymbolPoint = opt.getSymbolPoint || function (idx) {\n      return data.getItemLayout(idx);\n    }; // There is no oldLineData only when first rendering or switching from\n    // stream mode to normal mode, where previous elements should be removed.\n\n\n    if (!oldData) {\n      group.removeAll();\n    }\n\n    data.diff(oldData).add(function (newIdx) {\n      var point = getSymbolPoint(newIdx);\n\n      if (symbolNeedsDraw(data, point, newIdx, opt)) {\n        var symbolEl = new SymbolCtor(data, newIdx, seriesScope, symbolUpdateOpt);\n        symbolEl.setPosition(point);\n        data.setItemGraphicEl(newIdx, symbolEl);\n        group.add(symbolEl);\n      }\n    }).update(function (newIdx, oldIdx) {\n      var symbolEl = oldData.getItemGraphicEl(oldIdx);\n      var point = getSymbolPoint(newIdx);\n\n      if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n        group.remove(symbolEl);\n        return;\n      }\n\n      if (!symbolEl) {\n        symbolEl = new SymbolCtor(data, newIdx);\n        symbolEl.setPosition(point);\n      } else {\n        symbolEl.updateData(data, newIdx, seriesScope, symbolUpdateOpt);\n        var target = {\n          x: point[0],\n          y: point[1]\n        };\n        disableAnimation ? symbolEl.attr(target) : graphic.updateProps(symbolEl, target, seriesModel);\n      } // Add back\n\n\n      group.add(symbolEl);\n      data.setItemGraphicEl(newIdx, symbolEl);\n    }).remove(function (oldIdx) {\n      var el = oldData.getItemGraphicEl(oldIdx);\n      el && el.fadeOut(function () {\n        group.remove(el);\n      });\n    }).execute();\n    this._getSymbolPoint = getSymbolPoint;\n    this._data = data;\n  };\n\n  ;\n\n  SymbolDraw.prototype.isPersistent = function () {\n    return true;\n  };\n\n  ;\n\n  SymbolDraw.prototype.updateLayout = function () {\n    var _this = this;\n\n    var data = this._data;\n\n    if (data) {\n      // Not use animation\n      data.eachItemGraphicEl(function (el, idx) {\n        var point = _this._getSymbolPoint(idx);\n\n        el.setPosition(point);\n        el.markRedraw();\n      });\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.incrementalPrepareUpdate = function (data) {\n    this._seriesScope = makeSeriesScope(data);\n    this._data = null;\n    this.group.removeAll();\n  };\n\n  ;\n  /**\n   * Update symbols draw by new data\n   */\n\n  SymbolDraw.prototype.incrementalUpdate = function (taskParams, data, opt) {\n    opt = normalizeUpdateOpt(opt);\n\n    function updateIncrementalAndHover(el) {\n      if (!el.isGroup) {\n        el.incremental = true;\n        el.ensureState('emphasis').hoverLayer = true;\n      }\n    }\n\n    for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n      var point = data.getItemLayout(idx);\n\n      if (symbolNeedsDraw(data, point, idx, opt)) {\n        var el = new this._SymbolCtor(data, idx, this._seriesScope);\n        el.traverse(updateIncrementalAndHover);\n        el.setPosition(point);\n        this.group.add(el);\n        data.setItemGraphicEl(idx, el);\n      }\n    }\n  };\n\n  ;\n\n  SymbolDraw.prototype.remove = function (enableAnimation) {\n    var group = this.group;\n    var data = this._data; // Incremental model do not have this._data.\n\n    if (data && enableAnimation) {\n      data.eachItemGraphicEl(function (el) {\n        el.fadeOut(function () {\n          group.remove(el);\n        });\n      });\n    } else {\n      group.removeAll();\n    }\n  };\n\n  ;\n  return SymbolDraw;\n}();\n\nexport default SymbolDraw;","import { __extends } from \"tslib\";\nimport * as util from '../core/util';\nimport { devicePixelRatio } from '../config';\nimport Eventful from '../core/Eventful';\nimport { getCanvasGradient } from './helper';\nimport { createCanvasPattern } from './graphic';\nimport BoundingRect from '../core/BoundingRect';\nimport { REDARAW_BIT } from '../graphic/constants';\nfunction returnFalse() {\n    return false;\n}\nfunction createDom(id, painter, dpr) {\n    var newDom = util.createCanvas();\n    var width = painter.getWidth();\n    var height = painter.getHeight();\n    var newDomStyle = newDom.style;\n    if (newDomStyle) {\n        newDomStyle.position = 'absolute';\n        newDomStyle.left = '0';\n        newDomStyle.top = '0';\n        newDomStyle.width = width + 'px';\n        newDomStyle.height = height + 'px';\n        newDom.setAttribute('data-zr-dom-id', id);\n    }\n    newDom.width = width * dpr;\n    newDom.height = height * dpr;\n    return newDom;\n}\n;\nvar Layer = (function (_super) {\n    __extends(Layer, _super);\n    function Layer(id, painter, dpr) {\n        var _this = _super.call(this) || this;\n        _this.motionBlur = false;\n        _this.lastFrameAlpha = 0.7;\n        _this.dpr = 1;\n        _this.virtual = false;\n        _this.config = {};\n        _this.incremental = false;\n        _this.zlevel = 0;\n        _this.maxRepaintRectCount = 5;\n        _this.__dirty = true;\n        _this.__firstTimePaint = true;\n        _this.__used = false;\n        _this.__drawIndex = 0;\n        _this.__startIndex = 0;\n        _this.__endIndex = 0;\n        _this.__prevStartIndex = null;\n        _this.__prevEndIndex = null;\n        var dom;\n        dpr = dpr || devicePixelRatio;\n        if (typeof id === 'string') {\n            dom = createDom(id, painter, dpr);\n        }\n        else if (util.isObject(id)) {\n            dom = id;\n            id = dom.id;\n        }\n        _this.id = id;\n        _this.dom = dom;\n        var domStyle = dom.style;\n        if (domStyle) {\n            dom.onselectstart = returnFalse;\n            domStyle.webkitUserSelect = 'none';\n            domStyle.userSelect = 'none';\n            domStyle.webkitTapHighlightColor = 'rgba(0,0,0,0)';\n            domStyle['-webkit-touch-callout'] = 'none';\n            domStyle.padding = '0';\n            domStyle.margin = '0';\n            domStyle.borderWidth = '0';\n        }\n        _this.domBack = null;\n        _this.ctxBack = null;\n        _this.painter = painter;\n        _this.config = null;\n        _this.dpr = dpr;\n        return _this;\n    }\n    Layer.prototype.getElementCount = function () {\n        return this.__endIndex - this.__startIndex;\n    };\n    Layer.prototype.afterBrush = function () {\n        this.__prevStartIndex = this.__startIndex;\n        this.__prevEndIndex = this.__endIndex;\n    };\n    Layer.prototype.initContext = function () {\n        this.ctx = this.dom.getContext('2d');\n        this.ctx.dpr = this.dpr;\n    };\n    Layer.prototype.setUnpainted = function () {\n        this.__firstTimePaint = true;\n    };\n    Layer.prototype.createBackBuffer = function () {\n        var dpr = this.dpr;\n        this.domBack = createDom('back-' + this.id, this.painter, dpr);\n        this.ctxBack = this.domBack.getContext('2d');\n        if (dpr !== 1) {\n            this.ctxBack.scale(dpr, dpr);\n        }\n    };\n    Layer.prototype.createRepaintRects = function (displayList, prevList, viewWidth, viewHeight) {\n        if (this.__firstTimePaint) {\n            this.__firstTimePaint = false;\n            return null;\n        }\n        var mergedRepaintRects = [];\n        var maxRepaintRectCount = this.maxRepaintRectCount;\n        var full = false;\n        var pendingRect = new BoundingRect(0, 0, 0, 0);\n        function addRectToMergePool(rect) {\n            if (!rect.isFinite() || rect.isZero()) {\n                return;\n            }\n            if (mergedRepaintRects.length === 0) {\n                var boundingRect = new BoundingRect(0, 0, 0, 0);\n                boundingRect.copy(rect);\n                mergedRepaintRects.push(boundingRect);\n            }\n            else {\n                var isMerged = false;\n                var minDeltaArea = Infinity;\n                var bestRectToMergeIdx = 0;\n                for (var i = 0; i < mergedRepaintRects.length; ++i) {\n                    var mergedRect = mergedRepaintRects[i];\n                    if (mergedRect.intersect(rect)) {\n                        var pendingRect_1 = new BoundingRect(0, 0, 0, 0);\n                        pendingRect_1.copy(mergedRect);\n                        pendingRect_1.union(rect);\n                        mergedRepaintRects[i] = pendingRect_1;\n                        isMerged = true;\n                        break;\n                    }\n                    else if (full) {\n                        pendingRect.copy(rect);\n                        pendingRect.union(mergedRect);\n                        var aArea = rect.width * rect.height;\n                        var bArea = mergedRect.width * mergedRect.height;\n                        var pendingArea = pendingRect.width * pendingRect.height;\n                        var deltaArea = pendingArea - aArea - bArea;\n                        if (deltaArea < minDeltaArea) {\n                            minDeltaArea = deltaArea;\n                            bestRectToMergeIdx = i;\n                        }\n                    }\n                }\n                if (full) {\n                    mergedRepaintRects[bestRectToMergeIdx].union(rect);\n                    isMerged = true;\n                }\n                if (!isMerged) {\n                    var boundingRect = new BoundingRect(0, 0, 0, 0);\n                    boundingRect.copy(rect);\n                    mergedRepaintRects.push(boundingRect);\n                }\n                if (!full) {\n                    full = mergedRepaintRects.length >= maxRepaintRectCount;\n                }\n            }\n        }\n        for (var i = this.__startIndex; i < this.__endIndex; ++i) {\n            var el = displayList[i];\n            if (el) {\n                var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n                var prevRect = el.__isRendered && ((el.__dirty & REDARAW_BIT) || !shouldPaint)\n                    ? el.getPrevPaintRect()\n                    : null;\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n                var curRect = shouldPaint && ((el.__dirty & REDARAW_BIT) || !el.__isRendered)\n                    ? el.getPaintRect()\n                    : null;\n                if (curRect) {\n                    addRectToMergePool(curRect);\n                }\n            }\n        }\n        for (var i = this.__prevStartIndex; i < this.__prevEndIndex; ++i) {\n            var el = prevList[i];\n            var shouldPaint = el.shouldBePainted(viewWidth, viewHeight, true, true);\n            if (el && (!shouldPaint || !el.__zr) && el.__isRendered) {\n                var prevRect = el.getPrevPaintRect();\n                if (prevRect) {\n                    addRectToMergePool(prevRect);\n                }\n            }\n        }\n        var hasIntersections;\n        do {\n            hasIntersections = false;\n            for (var i = 0; i < mergedRepaintRects.length;) {\n                if (mergedRepaintRects[i].isZero()) {\n                    mergedRepaintRects.splice(i, 1);\n                    continue;\n                }\n                for (var j = i + 1; j < mergedRepaintRects.length;) {\n                    if (mergedRepaintRects[i].intersect(mergedRepaintRects[j])) {\n                        hasIntersections = true;\n                        mergedRepaintRects[i].union(mergedRepaintRects[j]);\n                        mergedRepaintRects.splice(j, 1);\n                    }\n                    else {\n                        j++;\n                    }\n                }\n                i++;\n            }\n        } while (hasIntersections);\n        this._paintRects = mergedRepaintRects;\n        return mergedRepaintRects;\n    };\n    Layer.prototype.debugGetPaintRects = function () {\n        return (this._paintRects || []).slice();\n    };\n    Layer.prototype.resize = function (width, height) {\n        var dpr = this.dpr;\n        var dom = this.dom;\n        var domStyle = dom.style;\n        var domBack = this.domBack;\n        if (domStyle) {\n            domStyle.width = width + 'px';\n            domStyle.height = height + 'px';\n        }\n        dom.width = width * dpr;\n        dom.height = height * dpr;\n        if (domBack) {\n            domBack.width = width * dpr;\n            domBack.height = height * dpr;\n            if (dpr !== 1) {\n                this.ctxBack.scale(dpr, dpr);\n            }\n        }\n    };\n    Layer.prototype.clear = function (clearAll, clearColor, repaintRects) {\n        var dom = this.dom;\n        var ctx = this.ctx;\n        var width = dom.width;\n        var height = dom.height;\n        clearColor = clearColor || this.clearColor;\n        var haveMotionBLur = this.motionBlur && !clearAll;\n        var lastFrameAlpha = this.lastFrameAlpha;\n        var dpr = this.dpr;\n        var self = this;\n        if (haveMotionBLur) {\n            if (!this.domBack) {\n                this.createBackBuffer();\n            }\n            this.ctxBack.globalCompositeOperation = 'copy';\n            this.ctxBack.drawImage(dom, 0, 0, width / dpr, height / dpr);\n        }\n        var domBack = this.domBack;\n        function doClear(x, y, width, height) {\n            ctx.clearRect(x, y, width, height);\n            if (clearColor && clearColor !== 'transparent') {\n                var clearColorGradientOrPattern = void 0;\n                if (util.isGradientObject(clearColor)) {\n                    clearColorGradientOrPattern = clearColor.__canvasGradient\n                        || getCanvasGradient(ctx, clearColor, {\n                            x: 0,\n                            y: 0,\n                            width: width,\n                            height: height\n                        });\n                    clearColor.__canvasGradient = clearColorGradientOrPattern;\n                }\n                else if (util.isImagePatternObject(clearColor)) {\n                    clearColorGradientOrPattern = createCanvasPattern(ctx, clearColor, {\n                        dirty: function () {\n                            self.setUnpainted();\n                            self.__painter.refresh();\n                        }\n                    });\n                }\n                ctx.save();\n                ctx.fillStyle = clearColorGradientOrPattern || clearColor;\n                ctx.fillRect(x, y, width, height);\n                ctx.restore();\n            }\n            if (haveMotionBLur) {\n                ctx.save();\n                ctx.globalAlpha = lastFrameAlpha;\n                ctx.drawImage(domBack, x, y, width, height);\n                ctx.restore();\n            }\n        }\n        ;\n        if (!repaintRects || haveMotionBLur) {\n            doClear(0, 0, width, height);\n        }\n        else if (repaintRects.length) {\n            util.each(repaintRects, function (rect) {\n                doClear(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n            });\n        }\n    };\n    return Layer;\n}(Eventful));\nexport default Layer;\n","import { devicePixelRatio } from '../config';\nimport * as util from '../core/util';\nimport Layer from './Layer';\nimport requestAnimationFrame from '../animation/requestAnimationFrame';\nimport ZRImage from '../graphic/Image';\nimport env from '../core/env';\nimport { brush, brushSingle } from './graphic';\nimport { REDARAW_BIT } from '../graphic/constants';\nvar HOVER_LAYER_ZLEVEL = 1e5;\nvar CANVAS_ZLEVEL = 314159;\nvar EL_AFTER_INCREMENTAL_INC = 0.01;\nvar INCREMENTAL_INC = 0.001;\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\nfunction isLayerValid(layer) {\n    if (!layer) {\n        return false;\n    }\n    if (layer.__builtin__) {\n        return true;\n    }\n    if (typeof (layer.resize) !== 'function'\n        || typeof (layer.refresh) !== 'function') {\n        return false;\n    }\n    return true;\n}\nfunction createRoot(width, height) {\n    var domRoot = document.createElement('div');\n    domRoot.style.cssText = [\n        'position:relative',\n        'width:' + width + 'px',\n        'height:' + height + 'px',\n        'padding:0',\n        'margin:0',\n        'border-width:0'\n    ].join(';') + ';';\n    return domRoot;\n}\nvar CanvasPainter = (function () {\n    function CanvasPainter(root, storage, opts, id) {\n        this.type = 'canvas';\n        this._zlevelList = [];\n        this._prevDisplayList = [];\n        this._layers = {};\n        this._layerConfig = {};\n        this._needsManuallyCompositing = false;\n        this.type = 'canvas';\n        var singleCanvas = !root.nodeName\n            || root.nodeName.toUpperCase() === 'CANVAS';\n        this._opts = opts = util.extend({}, opts || {});\n        this.dpr = opts.devicePixelRatio || devicePixelRatio;\n        this._singleCanvas = singleCanvas;\n        this.root = root;\n        var rootStyle = root.style;\n        if (rootStyle) {\n            rootStyle.webkitTapHighlightColor = 'transparent';\n            rootStyle.webkitUserSelect = 'none';\n            rootStyle.userSelect = 'none';\n            rootStyle['-webkit-touch-callout'] = 'none';\n            root.innerHTML = '';\n        }\n        this.storage = storage;\n        var zlevelList = this._zlevelList;\n        this._prevDisplayList = [];\n        var layers = this._layers;\n        if (!singleCanvas) {\n            this._width = this._getSize(0);\n            this._height = this._getSize(1);\n            var domRoot = this._domRoot = createRoot(this._width, this._height);\n            root.appendChild(domRoot);\n        }\n        else {\n            var rootCanvas = root;\n            var width = rootCanvas.width;\n            var height = rootCanvas.height;\n            if (opts.width != null) {\n                width = opts.width;\n            }\n            if (opts.height != null) {\n                height = opts.height;\n            }\n            this.dpr = opts.devicePixelRatio || 1;\n            rootCanvas.width = width * this.dpr;\n            rootCanvas.height = height * this.dpr;\n            this._width = width;\n            this._height = height;\n            var mainLayer = new Layer(rootCanvas, this, this.dpr);\n            mainLayer.__builtin__ = true;\n            mainLayer.initContext();\n            layers[CANVAS_ZLEVEL] = mainLayer;\n            mainLayer.zlevel = CANVAS_ZLEVEL;\n            zlevelList.push(CANVAS_ZLEVEL);\n            this._domRoot = root;\n        }\n    }\n    CanvasPainter.prototype.getType = function () {\n        return 'canvas';\n    };\n    CanvasPainter.prototype.isSingleCanvas = function () {\n        return this._singleCanvas;\n    };\n    CanvasPainter.prototype.getViewportRoot = function () {\n        return this._domRoot;\n    };\n    CanvasPainter.prototype.getViewportRootOffset = function () {\n        var viewportRoot = this.getViewportRoot();\n        if (viewportRoot) {\n            return {\n                offsetLeft: viewportRoot.offsetLeft || 0,\n                offsetTop: viewportRoot.offsetTop || 0\n            };\n        }\n    };\n    CanvasPainter.prototype.refresh = function (paintAll) {\n        var list = this.storage.getDisplayList(true);\n        var prevList = this._prevDisplayList;\n        var zlevelList = this._zlevelList;\n        this._redrawId = Math.random();\n        this._paintList(list, prevList, paintAll, this._redrawId);\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__ && layer.refresh) {\n                var clearColor = i === 0 ? this._backgroundColor : null;\n                layer.refresh(clearColor);\n            }\n        }\n        if (this._opts.useDirtyRect) {\n            this._prevDisplayList = list.slice();\n        }\n        return this;\n    };\n    CanvasPainter.prototype.refreshHover = function () {\n        this._paintHoverList(this.storage.getDisplayList(false));\n    };\n    CanvasPainter.prototype._paintHoverList = function (list) {\n        var len = list.length;\n        var hoverLayer = this._hoverlayer;\n        hoverLayer && hoverLayer.clear();\n        if (!len) {\n            return;\n        }\n        var scope = {\n            inHover: true,\n            viewWidth: this._width,\n            viewHeight: this._height\n        };\n        var ctx;\n        for (var i = 0; i < len; i++) {\n            var el = list[i];\n            if (el.__inHover) {\n                if (!hoverLayer) {\n                    hoverLayer = this._hoverlayer = this.getLayer(HOVER_LAYER_ZLEVEL);\n                }\n                if (!ctx) {\n                    ctx = hoverLayer.ctx;\n                    ctx.save();\n                }\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        if (ctx) {\n            ctx.restore();\n        }\n    };\n    CanvasPainter.prototype.getHoverLayer = function () {\n        return this.getLayer(HOVER_LAYER_ZLEVEL);\n    };\n    CanvasPainter.prototype.paintOne = function (ctx, el) {\n        brushSingle(ctx, el);\n    };\n    CanvasPainter.prototype._paintList = function (list, prevList, paintAll, redrawId) {\n        if (this._redrawId !== redrawId) {\n            return;\n        }\n        paintAll = paintAll || false;\n        this._updateLayerStatus(list);\n        var _a = this._doPaintList(list, prevList, paintAll), finished = _a.finished, needsRefreshHover = _a.needsRefreshHover;\n        if (this._needsManuallyCompositing) {\n            this._compositeManually();\n        }\n        if (needsRefreshHover) {\n            this._paintHoverList(list);\n        }\n        if (!finished) {\n            var self_1 = this;\n            requestAnimationFrame(function () {\n                self_1._paintList(list, prevList, paintAll, redrawId);\n            });\n        }\n        else {\n            this.eachLayer(function (layer) {\n                layer.afterBrush && layer.afterBrush();\n            });\n        }\n    };\n    CanvasPainter.prototype._compositeManually = function () {\n        var ctx = this.getLayer(CANVAS_ZLEVEL).ctx;\n        var width = this._domRoot.width;\n        var height = this._domRoot.height;\n        ctx.clearRect(0, 0, width, height);\n        this.eachBuiltinLayer(function (layer) {\n            if (layer.virtual) {\n                ctx.drawImage(layer.dom, 0, 0, width, height);\n            }\n        });\n    };\n    CanvasPainter.prototype._doPaintList = function (list, prevList, paintAll) {\n        var _this = this;\n        var layerList = [];\n        var useDirtyRect = this._opts.useDirtyRect;\n        for (var zi = 0; zi < this._zlevelList.length; zi++) {\n            var zlevel = this._zlevelList[zi];\n            var layer = this._layers[zlevel];\n            if (layer.__builtin__\n                && layer !== this._hoverlayer\n                && (layer.__dirty || paintAll)) {\n                layerList.push(layer);\n            }\n        }\n        var finished = true;\n        var needsRefreshHover = false;\n        var _loop_1 = function (k) {\n            var layer = layerList[k];\n            var ctx = layer.ctx;\n            var repaintRects = useDirtyRect\n                && layer.createRepaintRects(list, prevList, this_1._width, this_1._height);\n            var start = paintAll ? layer.__startIndex : layer.__drawIndex;\n            var useTimer = !paintAll && layer.incremental && Date.now;\n            var startTime = useTimer && Date.now();\n            var clearColor = layer.zlevel === this_1._zlevelList[0]\n                ? this_1._backgroundColor : null;\n            if (layer.__startIndex === layer.__endIndex) {\n                layer.clear(false, clearColor, repaintRects);\n            }\n            else if (start === layer.__startIndex) {\n                var firstEl = list[start];\n                if (!firstEl.incremental || !firstEl.notClear || paintAll) {\n                    layer.clear(false, clearColor, repaintRects);\n                }\n            }\n            if (start === -1) {\n                console.error('For some unknown reason. drawIndex is -1');\n                start = layer.__startIndex;\n            }\n            var i;\n            var repaint = function (repaintRect) {\n                var scope = {\n                    inHover: false,\n                    allClipped: false,\n                    prevEl: null,\n                    viewWidth: _this._width,\n                    viewHeight: _this._height\n                };\n                for (i = start; i < layer.__endIndex; i++) {\n                    var el = list[i];\n                    if (el.__inHover) {\n                        needsRefreshHover = true;\n                    }\n                    _this._doPaintEl(el, layer, useDirtyRect, repaintRect, scope, i === layer.__endIndex - 1);\n                    if (useTimer) {\n                        var dTime = Date.now() - startTime;\n                        if (dTime > 15) {\n                            break;\n                        }\n                    }\n                }\n                if (scope.prevElClipPaths) {\n                    ctx.restore();\n                }\n            };\n            if (repaintRects) {\n                if (repaintRects.length === 0) {\n                    i = layer.__endIndex;\n                }\n                else {\n                    var dpr = this_1.dpr;\n                    for (var r = 0; r < repaintRects.length; ++r) {\n                        var rect = repaintRects[r];\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.rect(rect.x * dpr, rect.y * dpr, rect.width * dpr, rect.height * dpr);\n                        ctx.clip();\n                        repaint(rect);\n                        ctx.restore();\n                    }\n                }\n            }\n            else {\n                ctx.save();\n                repaint();\n                ctx.restore();\n            }\n            layer.__drawIndex = i;\n            if (layer.__drawIndex < layer.__endIndex) {\n                finished = false;\n            }\n        };\n        var this_1 = this;\n        for (var k = 0; k < layerList.length; k++) {\n            _loop_1(k);\n        }\n        if (env.wxa) {\n            util.each(this._layers, function (layer) {\n                if (layer && layer.ctx && layer.ctx.draw) {\n                    layer.ctx.draw();\n                }\n            });\n        }\n        return {\n            finished: finished,\n            needsRefreshHover: needsRefreshHover\n        };\n    };\n    CanvasPainter.prototype._doPaintEl = function (el, currentLayer, useDirtyRect, repaintRect, scope, isLast) {\n        var ctx = currentLayer.ctx;\n        if (useDirtyRect) {\n            var paintRect = el.getPaintRect();\n            if (!repaintRect || paintRect && paintRect.intersect(repaintRect)) {\n                brush(ctx, el, scope, isLast);\n                el.setPrevPaintRect(paintRect);\n            }\n        }\n        else {\n            brush(ctx, el, scope, isLast);\n        }\n    };\n    CanvasPainter.prototype.getLayer = function (zlevel, virtual) {\n        if (this._singleCanvas && !this._needsManuallyCompositing) {\n            zlevel = CANVAS_ZLEVEL;\n        }\n        var layer = this._layers[zlevel];\n        if (!layer) {\n            layer = new Layer('zr_' + zlevel, this, this.dpr);\n            layer.zlevel = zlevel;\n            layer.__builtin__ = true;\n            if (this._layerConfig[zlevel]) {\n                util.merge(layer, this._layerConfig[zlevel], true);\n            }\n            else if (this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC]) {\n                util.merge(layer, this._layerConfig[zlevel - EL_AFTER_INCREMENTAL_INC], true);\n            }\n            if (virtual) {\n                layer.virtual = virtual;\n            }\n            this.insertLayer(zlevel, layer);\n            layer.initContext();\n        }\n        return layer;\n    };\n    CanvasPainter.prototype.insertLayer = function (zlevel, layer) {\n        var layersMap = this._layers;\n        var zlevelList = this._zlevelList;\n        var len = zlevelList.length;\n        var domRoot = this._domRoot;\n        var prevLayer = null;\n        var i = -1;\n        if (layersMap[zlevel]) {\n            util.logError('ZLevel ' + zlevel + ' has been used already');\n            return;\n        }\n        if (!isLayerValid(layer)) {\n            util.logError('Layer of zlevel ' + zlevel + ' is not valid');\n            return;\n        }\n        if (len > 0 && zlevel > zlevelList[0]) {\n            for (i = 0; i < len - 1; i++) {\n                if (zlevelList[i] < zlevel\n                    && zlevelList[i + 1] > zlevel) {\n                    break;\n                }\n            }\n            prevLayer = layersMap[zlevelList[i]];\n        }\n        zlevelList.splice(i + 1, 0, zlevel);\n        layersMap[zlevel] = layer;\n        if (!layer.virtual) {\n            if (prevLayer) {\n                var prevDom = prevLayer.dom;\n                if (prevDom.nextSibling) {\n                    domRoot.insertBefore(layer.dom, prevDom.nextSibling);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n            else {\n                if (domRoot.firstChild) {\n                    domRoot.insertBefore(layer.dom, domRoot.firstChild);\n                }\n                else {\n                    domRoot.appendChild(layer.dom);\n                }\n            }\n        }\n        layer.__painter = this;\n    };\n    CanvasPainter.prototype.eachLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            cb.call(context, this._layers[z], z);\n        }\n    };\n    CanvasPainter.prototype.eachBuiltinLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.eachOtherLayer = function (cb, context) {\n        var zlevelList = this._zlevelList;\n        for (var i = 0; i < zlevelList.length; i++) {\n            var z = zlevelList[i];\n            var layer = this._layers[z];\n            if (!layer.__builtin__) {\n                cb.call(context, layer, z);\n            }\n        }\n    };\n    CanvasPainter.prototype.getLayers = function () {\n        return this._layers;\n    };\n    CanvasPainter.prototype._updateLayerStatus = function (list) {\n        this.eachBuiltinLayer(function (layer, z) {\n            layer.__dirty = layer.__used = false;\n        });\n        function updatePrevLayer(idx) {\n            if (prevLayer) {\n                if (prevLayer.__endIndex !== idx) {\n                    prevLayer.__dirty = true;\n                }\n                prevLayer.__endIndex = idx;\n            }\n        }\n        if (this._singleCanvas) {\n            for (var i_1 = 1; i_1 < list.length; i_1++) {\n                var el = list[i_1];\n                if (el.zlevel !== list[i_1 - 1].zlevel || el.incremental) {\n                    this._needsManuallyCompositing = true;\n                    break;\n                }\n            }\n        }\n        var prevLayer = null;\n        var incrementalLayerCount = 0;\n        var prevZlevel;\n        var i;\n        for (i = 0; i < list.length; i++) {\n            var el = list[i];\n            var zlevel = el.zlevel;\n            var layer = void 0;\n            if (prevZlevel !== zlevel) {\n                prevZlevel = zlevel;\n                incrementalLayerCount = 0;\n            }\n            if (el.incremental) {\n                layer = this.getLayer(zlevel + INCREMENTAL_INC, this._needsManuallyCompositing);\n                layer.incremental = true;\n                incrementalLayerCount = 1;\n            }\n            else {\n                layer = this.getLayer(zlevel + (incrementalLayerCount > 0 ? EL_AFTER_INCREMENTAL_INC : 0), this._needsManuallyCompositing);\n            }\n            if (!layer.__builtin__) {\n                util.logError('ZLevel ' + zlevel + ' has been used by unkown layer ' + layer.id);\n            }\n            if (layer !== prevLayer) {\n                layer.__used = true;\n                if (layer.__startIndex !== i) {\n                    layer.__dirty = true;\n                }\n                layer.__startIndex = i;\n                if (!layer.incremental) {\n                    layer.__drawIndex = i;\n                }\n                else {\n                    layer.__drawIndex = -1;\n                }\n                updatePrevLayer(i);\n                prevLayer = layer;\n            }\n            if ((el.__dirty & REDARAW_BIT) && !el.__inHover) {\n                layer.__dirty = true;\n                if (layer.incremental && layer.__drawIndex < 0) {\n                    layer.__drawIndex = i;\n                }\n            }\n        }\n        updatePrevLayer(i);\n        this.eachBuiltinLayer(function (layer, z) {\n            if (!layer.__used && layer.getElementCount() > 0) {\n                layer.__dirty = true;\n                layer.__startIndex = layer.__endIndex = layer.__drawIndex = 0;\n            }\n            if (layer.__dirty && layer.__drawIndex < 0) {\n                layer.__drawIndex = layer.__startIndex;\n            }\n        });\n    };\n    CanvasPainter.prototype.clear = function () {\n        this.eachBuiltinLayer(this._clearLayer);\n        return this;\n    };\n    CanvasPainter.prototype._clearLayer = function (layer) {\n        layer.clear();\n    };\n    CanvasPainter.prototype.setBackgroundColor = function (backgroundColor) {\n        this._backgroundColor = backgroundColor;\n        util.each(this._layers, function (layer) {\n            layer.setUnpainted();\n        });\n    };\n    CanvasPainter.prototype.configLayer = function (zlevel, config) {\n        if (config) {\n            var layerConfig = this._layerConfig;\n            if (!layerConfig[zlevel]) {\n                layerConfig[zlevel] = config;\n            }\n            else {\n                util.merge(layerConfig[zlevel], config, true);\n            }\n            for (var i = 0; i < this._zlevelList.length; i++) {\n                var _zlevel = this._zlevelList[i];\n                if (_zlevel === zlevel || _zlevel === zlevel + EL_AFTER_INCREMENTAL_INC) {\n                    var layer = this._layers[_zlevel];\n                    util.merge(layer, layerConfig[zlevel], true);\n                }\n            }\n        }\n    };\n    CanvasPainter.prototype.delLayer = function (zlevel) {\n        var layers = this._layers;\n        var zlevelList = this._zlevelList;\n        var layer = layers[zlevel];\n        if (!layer) {\n            return;\n        }\n        layer.dom.parentNode.removeChild(layer.dom);\n        delete layers[zlevel];\n        zlevelList.splice(util.indexOf(zlevelList, zlevel), 1);\n    };\n    CanvasPainter.prototype.resize = function (width, height) {\n        if (!this._domRoot.style) {\n            if (width == null || height == null) {\n                return;\n            }\n            this._width = width;\n            this._height = height;\n            this.getLayer(CANVAS_ZLEVEL).resize(width, height);\n        }\n        else {\n            var domRoot = this._domRoot;\n            domRoot.style.display = 'none';\n            var opts = this._opts;\n            width != null && (opts.width = width);\n            height != null && (opts.height = height);\n            width = this._getSize(0);\n            height = this._getSize(1);\n            domRoot.style.display = '';\n            if (this._width !== width || height !== this._height) {\n                domRoot.style.width = width + 'px';\n                domRoot.style.height = height + 'px';\n                for (var id in this._layers) {\n                    if (this._layers.hasOwnProperty(id)) {\n                        this._layers[id].resize(width, height);\n                    }\n                }\n                this.refresh(true);\n            }\n            this._width = width;\n            this._height = height;\n        }\n        return this;\n    };\n    CanvasPainter.prototype.clearLayer = function (zlevel) {\n        var layer = this._layers[zlevel];\n        if (layer) {\n            layer.clear();\n        }\n    };\n    CanvasPainter.prototype.dispose = function () {\n        this.root.innerHTML = '';\n        this.root =\n            this.storage =\n                this._domRoot =\n                    this._layers = null;\n    };\n    CanvasPainter.prototype.getRenderedCanvas = function (opts) {\n        opts = opts || {};\n        if (this._singleCanvas && !this._compositeManually) {\n            return this._layers[CANVAS_ZLEVEL].dom;\n        }\n        var imageLayer = new Layer('image', this, opts.pixelRatio || this.dpr);\n        imageLayer.initContext();\n        imageLayer.clear(false, opts.backgroundColor || this._backgroundColor);\n        var ctx = imageLayer.ctx;\n        if (opts.pixelRatio <= this.dpr) {\n            this.refresh();\n            var width_1 = imageLayer.dom.width;\n            var height_1 = imageLayer.dom.height;\n            this.eachLayer(function (layer) {\n                if (layer.__builtin__) {\n                    ctx.drawImage(layer.dom, 0, 0, width_1, height_1);\n                }\n                else if (layer.renderToCanvas) {\n                    ctx.save();\n                    layer.renderToCanvas(ctx);\n                    ctx.restore();\n                }\n            });\n        }\n        else {\n            var scope = {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            };\n            var displayList = this.storage.getDisplayList(true);\n            for (var i = 0, len = displayList.length; i < len; i++) {\n                var el = displayList[i];\n                brush(ctx, el, scope, i === len - 1);\n            }\n        }\n        return imageLayer.dom;\n    };\n    CanvasPainter.prototype.getWidth = function () {\n        return this._width;\n    };\n    CanvasPainter.prototype.getHeight = function () {\n        return this._height;\n    };\n    CanvasPainter.prototype._getSize = function (whIdx) {\n        var opts = this._opts;\n        var wh = ['width', 'height'][whIdx];\n        var cwh = ['clientWidth', 'clientHeight'][whIdx];\n        var plt = ['paddingLeft', 'paddingTop'][whIdx];\n        var prb = ['paddingRight', 'paddingBottom'][whIdx];\n        if (opts[wh] != null && opts[wh] !== 'auto') {\n            return parseFloat(opts[wh]);\n        }\n        var root = this.root;\n        var stl = document.defaultView.getComputedStyle(root);\n        return ((root[cwh] || parseInt10(stl[wh]) || parseInt10(root.style[wh]))\n            - (parseInt10(stl[plt]) || 0)\n            - (parseInt10(stl[prb]) || 0)) | 0;\n    };\n    CanvasPainter.prototype.pathToImage = function (path, dpr) {\n        dpr = dpr || this.dpr;\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var rect = path.getBoundingRect();\n        var style = path.style;\n        var shadowBlurSize = style.shadowBlur * dpr;\n        var shadowOffsetX = style.shadowOffsetX * dpr;\n        var shadowOffsetY = style.shadowOffsetY * dpr;\n        var lineWidth = path.hasStroke() ? style.lineWidth : 0;\n        var leftMargin = Math.max(lineWidth / 2, -shadowOffsetX + shadowBlurSize);\n        var rightMargin = Math.max(lineWidth / 2, shadowOffsetX + shadowBlurSize);\n        var topMargin = Math.max(lineWidth / 2, -shadowOffsetY + shadowBlurSize);\n        var bottomMargin = Math.max(lineWidth / 2, shadowOffsetY + shadowBlurSize);\n        var width = rect.width + leftMargin + rightMargin;\n        var height = rect.height + topMargin + bottomMargin;\n        canvas.width = width * dpr;\n        canvas.height = height * dpr;\n        ctx.scale(dpr, dpr);\n        ctx.clearRect(0, 0, width, height);\n        ctx.dpr = dpr;\n        var pathTransform = {\n            x: path.x,\n            y: path.y,\n            scaleX: path.scaleX,\n            scaleY: path.scaleY,\n            rotation: path.rotation,\n            originX: path.originX,\n            originY: path.originY\n        };\n        path.x = leftMargin - rect.x;\n        path.y = topMargin - rect.y;\n        path.rotation = 0;\n        path.scaleX = 1;\n        path.scaleY = 1;\n        path.updateTransform();\n        if (path) {\n            brush(ctx, path, {\n                inHover: false,\n                viewWidth: this._width,\n                viewHeight: this._height\n            }, true);\n        }\n        var imgShape = new ZRImage({\n            style: {\n                x: 0,\n                y: 0,\n                image: canvas\n            }\n        });\n        util.extend(path, pathTransform);\n        return imgShape;\n    };\n    return CanvasPainter;\n}());\nexport default CanvasPainter;\n;\n","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport CanvasPainter from 'zrender/lib/canvas/Painter';\nexport function install(registers) {\n  registers.registerPainter('canvas', CanvasPainter);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport Model from '../../model/Model';\nimport { isNameSpecified } from '../../util/model';\nimport ComponentModel from '../../model/Component';\n\nvar getDefaultSelectorOptions = function (ecModel, type) {\n  if (type === 'all') {\n    return {\n      type: 'all',\n      title: ecModel.getLocale(['legend', 'selector', 'all'])\n    };\n  } else if (type === 'inverse') {\n    return {\n      type: 'inverse',\n      title: ecModel.getLocale(['legend', 'selector', 'inverse'])\n    };\n  }\n};\n\nvar LegendModel =\n/** @class */\nfunction (_super) {\n  __extends(LegendModel, _super);\n\n  function LegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendModel.type;\n    _this.layoutMode = {\n      type: 'box',\n      // legend.width/height are maxWidth/maxHeight actually,\n      // whereas realy width/height is calculated by its content.\n      // (Setting {left: 10, right: 10} does not make sense).\n      // So consider the case:\n      // `setOption({legend: {left: 10});`\n      // then `setOption({legend: {right: 10});`\n      // The previous `left` should be cleared by setting `ignoreSize`.\n      ignoreSize: true\n    };\n    return _this;\n  }\n\n  LegendModel.prototype.init = function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  };\n\n  LegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    this._updateSelector(option);\n  };\n\n  LegendModel.prototype._updateSelector = function (option) {\n    var selector = option.selector;\n    var ecModel = this.ecModel;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, getDefaultSelectorOptions(ecModel, item.type));\n      });\n    }\n  };\n\n  LegendModel.prototype.optionUpdated = function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name_1 = legendData[i].get('name');\n\n        if (this.isSelected(name_1)) {\n          // Force to unselect others\n          this.select(name_1);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  };\n\n  LegendModel.prototype._updateData = function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  };\n\n  LegendModel.prototype.getData = function () {\n    return this._data;\n  };\n\n  LegendModel.prototype.select = function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  };\n\n  LegendModel.prototype.unSelect = function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  };\n\n  LegendModel.prototype.toggleSelected = function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  };\n\n  LegendModel.prototype.allSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  };\n\n  LegendModel.prototype.inverseSelect = function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  };\n\n  LegendModel.prototype.isSelected = function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  };\n\n  LegendModel.prototype.getOrient = function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  };\n\n  LegendModel.type = 'legend.plain';\n  LegendModel.dependencies = ['series'];\n  LegendModel.defaultOption = {\n    zlevel: 0,\n    z: 4,\n    show: true,\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderColor: '#ccc',\n    borderRadius: 0,\n    borderWidth: 0,\n    padding: 5,\n    itemGap: 10,\n    itemWidth: 25,\n    itemHeight: 14,\n    symbolRotate: 'inherit',\n    inactiveColor: '#ccc',\n    inactiveBorderColor: '#ccc',\n    inactiveBorderWidth: 'auto',\n    itemStyle: {\n      color: 'inherit',\n      opacity: 'inherit',\n      decal: 'inherit',\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0,\n      borderColor: 'inherit',\n      borderWidth: 'auto',\n      borderCap: 'inherit',\n      borderJoin: 'inherit',\n      borderDashOffset: 'inherit',\n      borderMiterLimit: 'inherit'\n    },\n    lineStyle: {\n      width: 'auto',\n      color: 'inherit',\n      inactiveColor: '#ccc',\n      inactiveWidth: 2,\n      opacity: 'inherit',\n      type: 'inherit',\n      cap: 'inherit',\n      join: 'inherit',\n      dashOffset: 'inherit',\n      miterLimit: 'inherit',\n      shadowBlur: 0,\n      shadowColor: null,\n      shadowOffsetX: 0,\n      shadowOffsetY: 0\n    },\n    textStyle: {\n      color: '#333'\n    },\n    selectedMode: true,\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    tooltip: {\n      show: false\n    }\n  };\n  return LegendModel;\n}(ComponentModel);\n\nexport default LegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport { parse, stringify } from 'zrender/lib/tool/color';\nimport * as graphic from '../../util/graphic';\nimport { enableHoverEmphasis } from '../../util/states';\nimport { setLabelStyle, createTextStyle } from '../../label/labelStyle';\nimport { makeBackground } from '../helper/listComponent';\nimport * as layoutUtil from '../../util/layout';\nimport ComponentView from '../../view/Component';\nimport { LINE_STYLE_KEY_MAP } from '../../model/mixin/lineStyle';\nimport { ITEM_STYLE_KEY_MAP } from '../../model/mixin/itemStyle';\nimport { createSymbol } from '../../util/symbol';\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar LegendView =\n/** @class */\nfunction (_super) {\n  __extends(LegendView, _super);\n\n  function LegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = LegendView.type;\n    _this.newlineDisabled = false;\n    return _this;\n  }\n\n  LegendView.prototype.init = function () {\n    this.group.add(this._contentGroup = new Group());\n    this.group.add(this._selectorGroup = new Group());\n    this._isFirstRender = true;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getContentGroup = function () {\n    return this._contentGroup;\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.getSelectorGroup = function () {\n    return this._selectorGroup;\n  };\n  /**\n   * @override\n   */\n\n\n  LegendView.prototype.render = function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    } // selector has been normalized to an array in model\n\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.x = layoutRect.x - mainRect.x;\n    this.group.y = layoutRect.y - mainRect.y;\n    this.group.markRedraw(); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  };\n\n  LegendView.prototype.resetInner = function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  };\n\n  LegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (legendItemModel, dataIndex) {\n      var name = legendItemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        var g = new Group(); // @ts-ignore\n\n        g.newline = true;\n        contentGroup.add(g);\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var lineVisualStyle = data.getVisual('legendLineStyle') || {};\n        var legendIcon = data.getVisual('legendIcon');\n        /**\n         * `data.getVisual('style')` may be the color from the register\n         * in series. For example, for line series,\n         */\n\n        var style = data.getVisual('style');\n\n        var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, style, legendIcon, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var style = provider.getItemVisual(idx, 'style');\n            var legendIcon = provider.getItemVisual(idx, 'legendIcon');\n            var colorArr = parse(style.fill); // Color may be set to transparent in visualMap when data is out of range.\n            // Do not show nothing.\n\n            if (colorArr && colorArr[3] === 0) {\n              colorArr[3] = 0.2; // TODO color is set to 0, 0, 0, 0. Should show correct RGBA\n\n              style.fill = stringify(colorArr, 'rgba');\n            }\n\n            var itemGroup = this._createItem(seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, {}, style, legendIcon, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!legendDrawnMap.get(name)) {\n          console.warn(name + ' series not exists. Legend data should be same with series name or data name.');\n        }\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  };\n\n  LegendView.prototype._createSelector = function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel(['emphasis', 'selectorLabel']);\n      setLabelStyle(labelText, {\n        normal: labelModel,\n        emphasis: emphasisLabelModel\n      }, {\n        defaultText: selectorItem.title\n      });\n      enableHoverEmphasis(labelText);\n    });\n  };\n\n  LegendView.prototype._createItem = function (seriesModel, name, dataIndex, legendItemModel, legendModel, itemAlign, lineVisualStyle, itemVisualStyle, legendIcon, selectMode) {\n    var drawType = seriesModel.visualDrawType;\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var isSelected = legendModel.isSelected(name);\n    var iconRotate = legendItemModel.get('symbolRotate');\n    var legendIconType = legendItemModel.get('icon');\n    legendIcon = legendIconType || legendIcon || 'roundRect';\n    var legendLineStyle = legendModel.getModel('lineStyle');\n    var style = getLegendStyle(legendIcon, legendItemModel, legendLineStyle, lineVisualStyle, itemVisualStyle, drawType, isSelected);\n    var itemGroup = new Group();\n    var textStyleModel = legendItemModel.getModel('textStyle');\n\n    if (typeof seriesModel.getLegendIcon === 'function' && (!legendIconType || legendIconType === 'inherit')) {\n      // Series has specific way to define legend icon\n      itemGroup.add(seriesModel.getLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: iconRotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle\n      }));\n    } else {\n      // Use default legend icon policy for most series\n      var rotate = legendIconType === 'inherit' && seriesModel.getData().getVisual('symbol') ? iconRotate === 'inherit' ? seriesModel.getData().getVisual('symbolRotate') : iconRotate : 0; // No rotation for no icon\n\n      itemGroup.add(getDefaultLegendIcon({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        icon: legendIcon,\n        iconRotate: rotate,\n        itemStyle: style.itemStyle,\n        lineStyle: style.lineStyle\n      }));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    var inactiveColor = legendItemModel.get('inactiveColor');\n    itemGroup.add(new graphic.Text({\n      style: createTextStyle(textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        fill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        align: textAlign,\n        verticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true\n    });\n    var tooltipModel = legendItemModel.getModel('tooltip');\n\n    if (tooltipModel.get('show')) {\n      graphic.setTooltipConfig({\n        el: hitRect,\n        componentModel: legendModel,\n        itemName: name,\n        itemTooltipOption: tooltipModel.option\n      });\n    }\n\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    enableHoverEmphasis(itemGroup); // @ts-ignore\n\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  };\n\n  LegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n    selectorGroup.markRedraw();\n    contentGroup.markRedraw();\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.x = contentPos[0];\n      contentGroup.y = contentPos[1];\n      return this.group.getBoundingRect();\n    }\n  };\n  /**\n   * @protected\n   */\n\n\n  LegendView.prototype.remove = function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  };\n\n  LegendView.type = 'legend.plain';\n  return LegendView;\n}(ComponentView);\n\nfunction getLegendStyle(iconType, legendModel, legendLineStyle, lineVisualStyle, itemVisualStyle, drawType, isSelected) {\n  /**\n   * Use series style if is inherit;\n   * elsewise, use legend style\n   */\n  // itemStyle\n  var legendItemModel = legendModel.getModel('itemStyle');\n  var itemProperties = ITEM_STYLE_KEY_MAP.concat([['decal']]);\n  var itemStyle = {};\n\n  for (var i = 0; i < itemProperties.length; ++i) {\n    var propName = itemProperties[i][itemProperties[i].length - 1];\n    var visualName = itemProperties[i][0];\n    var value = legendItemModel.getShallow(propName);\n\n    if (value === 'inherit') {\n      switch (visualName) {\n        case 'fill':\n          /**\n           * Series with visualDrawType as 'stroke' should have\n           * series stroke as legend fill\n           */\n          itemStyle.fill = itemVisualStyle[drawType];\n          break;\n\n        case 'stroke':\n          /**\n           * icon type with \"emptyXXX\" should use fill color\n           * in visual style\n           */\n          itemStyle.stroke = itemVisualStyle[iconType.lastIndexOf('empty', 0) === 0 ? 'fill' : 'stroke'];\n          break;\n\n        case 'opacity':\n          /**\n           * Use lineStyle.opacity if drawType is stroke\n           */\n          itemStyle.opacity = (drawType === 'fill' ? itemVisualStyle : lineVisualStyle).opacity;\n          break;\n\n        default:\n          itemStyle[visualName] = itemVisualStyle[visualName];\n      }\n    } else if (value === 'auto' && visualName === 'lineWidth') {\n      // If lineStyle.width is 'auto', it is set to be 2 if series has border\n      itemStyle.lineWidth = itemVisualStyle.lineWidth > 0 ? 2 : 0;\n    } else {\n      itemStyle[visualName] = value;\n    }\n  } // lineStyle\n\n\n  var legendLineModel = legendModel.getModel('lineStyle');\n  var lineProperties = LINE_STYLE_KEY_MAP.concat([['inactiveColor'], ['inactiveWidth']]);\n  var lineStyle = {};\n\n  for (var i = 0; i < lineProperties.length; ++i) {\n    var propName = lineProperties[i][1];\n    var visualName = lineProperties[i][0];\n    var value = legendLineModel.getShallow(propName);\n\n    if (value === 'inherit') {\n      lineStyle[visualName] = lineVisualStyle[visualName];\n    } else if (value === 'auto' && visualName === 'lineWidth') {\n      // If lineStyle.width is 'auto', it is set to be 2 if series has border\n      lineStyle.lineWidth = lineVisualStyle.lineWidth > 0 ? 2 : 0;\n    } else {\n      lineStyle[visualName] = value;\n    }\n  } // Fix auto color to real color\n\n\n  itemStyle.fill === 'auto' && (itemStyle.fill = itemVisualStyle.fill);\n  itemStyle.stroke === 'auto' && (itemStyle.stroke = itemVisualStyle.fill);\n  lineStyle.stroke === 'auto' && (lineStyle.stroke = itemVisualStyle.fill);\n\n  if (!isSelected) {\n    var borderWidth = legendModel.get('inactiveBorderWidth');\n    /**\n     * Since stroke is set to be inactiveBorderColor, it may occur that\n     * there is no border in series but border in legend, so we need to\n     * use border only when series has border if is set to be auto\n     */\n\n    var visualHasBorder = itemStyle[iconType.indexOf('empty') > -1 ? 'fill' : 'stroke'];\n    itemStyle.lineWidth = borderWidth === 'auto' ? itemVisualStyle.lineWidth > 0 && visualHasBorder ? 2 : 0 : itemStyle.lineWidth;\n    itemStyle.fill = legendModel.get('inactiveColor');\n    itemStyle.stroke = legendModel.get('inactiveBorderColor');\n    lineStyle.stroke = legendLineStyle.get('inactiveColor');\n    lineStyle.lineWidth = legendLineStyle.get('inactiveWidth');\n  }\n\n  return {\n    itemStyle: itemStyle,\n    lineStyle: lineStyle\n  };\n}\n\nfunction getDefaultLegendIcon(opt) {\n  var symboType = opt.icon || 'roundRect';\n  var icon = createSymbol(symboType, 0, 0, opt.itemWidth, opt.itemHeight, opt.itemStyle.fill);\n  icon.setStyle(opt.itemStyle);\n  icon.rotation = (opt.iconRotate || 0) * Math.PI / 180;\n  icon.setOrigin([opt.itemWidth / 2, opt.itemHeight / 2]);\n\n  if (symboType.indexOf('empty') > -1) {\n    icon.style.stroke = icon.style.fill;\n    icon.style.fill = '#fff';\n    icon.style.lineWidth = 2;\n  }\n\n  return icon;\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n  // TODO higlight immediately may cause animation loss.\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction isUseHoverLayer(api) {\n  var list = api.getZr().storage.getDisplayList();\n  var emphasisState;\n  var i = 0;\n  var len = list.length;\n\n  while (i < len && !(emphasisState = list[i].states.emphasis)) {\n    i++;\n  }\n\n  return emphasisState && emphasisState.hoverLayer;\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  if (!isUseHoverLayer(api)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nexport default LegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function legendFilter(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// @ts-nocheck\nimport { curry, each } from 'zrender/lib/core/util';\n\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n\nexport function installLegendAction(registers) {\n  /**\n   * @event legendToggleSelect\n   * @type {Object}\n   * @property {string} type 'legendToggleSelect'\n   * @property {string} [from]\n   * @property {string} name Series name or data item name\n   */\n  registers.registerAction('legendToggleSelect', 'legendselectchanged', curry(legendSelectActionHandler, 'toggleSelected'));\n  registers.registerAction('legendAllSelect', 'legendselectall', curry(legendSelectActionHandler, 'allSelect'));\n  registers.registerAction('legendInverseSelect', 'legendinverseselect', curry(legendSelectActionHandler, 'inverseSelect'));\n  /**\n   * @event legendSelect\n   * @type {Object}\n   * @property {string} type 'legendSelect'\n   * @property {string} name Series name or data item name\n   */\n\n  registers.registerAction('legendSelect', 'legendselected', curry(legendSelectActionHandler, 'select'));\n  /**\n   * @event legendUnSelect\n   * @type {Object}\n   * @property {string} type 'legendUnSelect'\n   * @property {string} name Series name or data item name\n   */\n\n  registers.registerAction('legendUnSelect', 'legendunselected', curry(legendSelectActionHandler, 'unSelect'));\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport LegendModel from './LegendModel';\nimport LegendView from './LegendView';\nimport legendFilter from './legendFilter';\nimport { installLegendAction } from './legendAction';\nexport function install(registers) {\n  registers.registerComponentModel(LegendModel);\n  registers.registerComponentView(LegendView);\n  registers.registerProcessor(registers.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\n  registers.registerSubTypeDefaulter('legend', function () {\n    return 'plain';\n  });\n  installLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport LegendModel from './LegendModel';\nimport { mergeLayoutParam, getLayoutParams } from '../../util/layout';\nimport { inheritDefaultOption } from '../../util/component';\n\nvar ScrollableLegendModel =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableLegendModel, _super);\n\n  function ScrollableLegendModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScrollableLegendModel.type;\n    return _this;\n  }\n  /**\n   * @param {number} scrollDataIndex\n   */\n\n\n  ScrollableLegendModel.prototype.setScrollDataIndex = function (scrollDataIndex) {\n    this.option.scrollDataIndex = scrollDataIndex;\n  };\n\n  ScrollableLegendModel.prototype.init = function (option, parentModel, ecModel) {\n    var inputPositionParams = getLayoutParams(option);\n\n    _super.prototype.init.call(this, option, parentModel, ecModel);\n\n    mergeAndNormalizeLayoutParams(this, option, inputPositionParams);\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendModel.prototype.mergeOption = function (option, ecModel) {\n    _super.prototype.mergeOption.call(this, option, ecModel);\n\n    mergeAndNormalizeLayoutParams(this, this.option, option);\n  };\n\n  ScrollableLegendModel.type = 'legend.scroll';\n  ScrollableLegendModel.defaultOption = inheritDefaultOption(LegendModel.defaultOption, {\n    scrollDataIndex: 0,\n    pageButtonItemGap: 5,\n    pageButtonGap: null,\n    pageButtonPosition: 'end',\n    pageFormatter: '{current}/{total}',\n    pageIcons: {\n      horizontal: ['M0,0L12,-10L12,10z', 'M0,0L-12,-10L-12,10z'],\n      vertical: ['M0,0L20,0L10,-20z', 'M0,0L20,0L10,20z']\n    },\n    pageIconColor: '#2f4554',\n    pageIconInactiveColor: '#aaa',\n    pageIconSize: 15,\n    pageTextStyle: {\n      color: '#333'\n    },\n    animationDurationUpdate: 800\n  });\n  return ScrollableLegendModel;\n}(LegendModel);\n\n; // Do not `ignoreSize` to enable setting {left: 10, right: 10}.\n\nfunction mergeAndNormalizeLayoutParams(legendModel, target, raw) {\n  var orient = legendModel.getOrient();\n  var ignoreSize = [1, 1];\n  ignoreSize[orient.index] = 0;\n  mergeLayoutParam(target, raw, {\n    type: 'box',\n    ignoreSize: !!ignoreSize\n  });\n}\n\nexport default ScrollableLegendModel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\n/**\n * Separate legend and scrollable legend to reduce package size.\n */\n\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as graphic from '../../util/graphic';\nimport * as layoutUtil from '../../util/layout';\nimport LegendView from './LegendView';\nvar Group = graphic.Group;\nvar WH = ['width', 'height'];\nvar XY = ['x', 'y'];\n\nvar ScrollableLegendView =\n/** @class */\nfunction (_super) {\n  __extends(ScrollableLegendView, _super);\n\n  function ScrollableLegendView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ScrollableLegendView.type;\n    _this.newlineDisabled = true;\n    _this._currentIndex = 0;\n    return _this;\n  }\n\n  ScrollableLegendView.prototype.init = function () {\n    _super.prototype.init.call(this);\n\n    this.group.add(this._containerGroup = new Group());\n\n    this._containerGroup.add(this.getContentGroup());\n\n    this.group.add(this._controllerGroup = new Group());\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.resetInner = function () {\n    _super.prototype.resetInner.call(this);\n\n    this._controllerGroup.removeAll();\n\n    this._containerGroup.removeClipPath();\n\n    this._containerGroup.__rectSize = null;\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.renderInner = function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var self = this; // Render content items.\n\n    _super.prototype.renderInner.call(this, itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition);\n\n    var controllerGroup = this._controllerGroup; // FIXME: support be 'auto' adapt to size number text length,\n    // e.g., '3/12345' should not overlap with the control arrow button.\n\n    var pageIconSize = legendModel.get('pageIconSize', true);\n    var pageIconSizeArr = zrUtil.isArray(pageIconSize) ? pageIconSize : [pageIconSize, pageIconSize];\n    createPageButton('pagePrev', 0);\n    var pageTextStyleModel = legendModel.getModel('pageTextStyle');\n    controllerGroup.add(new graphic.Text({\n      name: 'pageText',\n      style: {\n        // Placeholder to calculate a proper layout.\n        text: 'xx/xx',\n        fill: pageTextStyleModel.getTextColor(),\n        font: pageTextStyleModel.getFont(),\n        verticalAlign: 'middle',\n        align: 'center'\n      },\n      silent: true\n    }));\n    createPageButton('pageNext', 1);\n\n    function createPageButton(name, iconIdx) {\n      var pageDataIndexName = name + 'DataIndex';\n      var icon = graphic.createIcon(legendModel.get('pageIcons', true)[legendModel.getOrient().name][iconIdx], {\n        // Buttons will be created in each render, so we do not need\n        // to worry about avoiding using legendModel kept in scope.\n        onclick: zrUtil.bind(self._pageGo, self, pageDataIndexName, legendModel, api)\n      }, {\n        x: -pageIconSizeArr[0] / 2,\n        y: -pageIconSizeArr[1] / 2,\n        width: pageIconSizeArr[0],\n        height: pageIconSizeArr[1]\n      });\n      icon.name = name;\n      controllerGroup.add(icon);\n    }\n  };\n  /**\n   * @override\n   */\n\n\n  ScrollableLegendView.prototype.layoutInner = function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n    var hw = WH[1 - orientIdx];\n    var yx = XY[1 - orientIdx];\n    selector && layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n    'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n    var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n    var selectorRect = selectorGroup.getBoundingRect();\n    var selectorPos = [-selectorRect.x, -selectorRect.y];\n    var processMaxSize = zrUtil.clone(maxSize);\n    selector && (processMaxSize[wh] = maxSize[wh] - selectorRect[wh] - selectorButtonGap);\n\n    var mainRect = this._layoutContentAndController(legendModel, isFirstRender, processMaxSize, orientIdx, wh, hw, yx, xy);\n\n    if (selector) {\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += mainRect[wh] + selectorButtonGap;\n      } else {\n        var offset = selectorRect[wh] + selectorButtonGap;\n        selectorPos[orientIdx] -= offset;\n        mainRect[xy] -= offset;\n      }\n\n      mainRect[wh] += selectorRect[wh] + selectorButtonGap;\n      selectorPos[1 - orientIdx] += mainRect[yx] + mainRect[hw] / 2 - selectorRect[hw] / 2;\n      mainRect[hw] = Math.max(mainRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(mainRect[yx], selectorRect[yx] + selectorPos[1 - orientIdx]);\n      selectorGroup.x = selectorPos[0];\n      selectorGroup.y = selectorPos[1];\n      selectorGroup.markRedraw();\n    }\n\n    return mainRect;\n  };\n\n  ScrollableLegendView.prototype._layoutContentAndController = function (legendModel, isFirstRender, maxSize, orientIdx, wh, hw, yx, xy) {\n    var contentGroup = this.getContentGroup();\n    var containerGroup = this._containerGroup;\n    var controllerGroup = this._controllerGroup; // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), !orientIdx ? null : maxSize.width, orientIdx ? null : maxSize.height);\n    layoutUtil.box( // Buttons in controller are layout always horizontally.\n    'horizontal', controllerGroup, legendModel.get('pageButtonItemGap', true));\n    var contentRect = contentGroup.getBoundingRect();\n    var controllerRect = controllerGroup.getBoundingRect();\n    var showController = this._showController = contentRect[wh] > maxSize[wh]; // In case that the inner elements of contentGroup layout do not based on [0, 0]\n\n    var contentPos = [-contentRect.x, -contentRect.y]; // Remain contentPos when scroll animation perfroming.\n    // If first rendering, `contentGroup.position` is [0, 0], which\n    // does not make sense and may cause unexepcted animation if adopted.\n\n    if (!isFirstRender) {\n      contentPos[orientIdx] = contentGroup[xy];\n    } // Layout container group based on 0.\n\n\n    var containerPos = [0, 0];\n    var controllerPos = [-controllerRect.x, -controllerRect.y];\n    var pageButtonGap = zrUtil.retrieve2(legendModel.get('pageButtonGap', true), legendModel.get('itemGap', true)); // Place containerGroup and controllerGroup and contentGroup.\n\n    if (showController) {\n      var pageButtonPosition = legendModel.get('pageButtonPosition', true); // controller is on the right / bottom.\n\n      if (pageButtonPosition === 'end') {\n        controllerPos[orientIdx] += maxSize[wh] - controllerRect[wh];\n      } // controller is on the left / top.\n      else {\n          containerPos[orientIdx] += controllerRect[wh] + pageButtonGap;\n        }\n    } // Always align controller to content as 'middle'.\n\n\n    controllerPos[1 - orientIdx] += contentRect[hw] / 2 - controllerRect[hw] / 2;\n    contentGroup.setPosition(contentPos);\n    containerGroup.setPosition(containerPos);\n    controllerGroup.setPosition(controllerPos); // Calculate `mainRect` and set `clipPath`.\n    // mainRect should not be calculated by `this.group.getBoundingRect()`\n    // for sake of the overflow.\n\n    var mainRect = {\n      x: 0,\n      y: 0\n    }; // Consider content may be overflow (should be clipped).\n\n    mainRect[wh] = showController ? maxSize[wh] : contentRect[wh];\n    mainRect[hw] = Math.max(contentRect[hw], controllerRect[hw]); // `containerRect[yx] + containerPos[1 - orientIdx]` is 0.\n\n    mainRect[yx] = Math.min(0, controllerRect[yx] + controllerPos[1 - orientIdx]);\n    containerGroup.__rectSize = maxSize[wh];\n\n    if (showController) {\n      var clipShape = {\n        x: 0,\n        y: 0\n      };\n      clipShape[wh] = Math.max(maxSize[wh] - controllerRect[wh] - pageButtonGap, 0);\n      clipShape[hw] = mainRect[hw];\n      containerGroup.setClipPath(new graphic.Rect({\n        shape: clipShape\n      })); // Consider content may be larger than container, container rect\n      // can not be obtained from `containerGroup.getBoundingRect()`.\n\n      containerGroup.__rectSize = clipShape[wh];\n    } else {\n      // Do not remove or ignore controller. Keep them set as placeholders.\n      controllerGroup.eachChild(function (child) {\n        child.attr({\n          invisible: true,\n          silent: true\n        });\n      });\n    } // Content translate animation.\n\n\n    var pageInfo = this._getPageInfo(legendModel);\n\n    pageInfo.pageIndex != null && graphic.updateProps(contentGroup, {\n      x: pageInfo.contentPosition[0],\n      y: pageInfo.contentPosition[1]\n    }, // When switch from \"show controller\" to \"not show controller\", view should be\n    // updated immediately without animation, otherwise causes weird effect.\n    showController ? legendModel : null);\n\n    this._updatePageInfoView(legendModel, pageInfo);\n\n    return mainRect;\n  };\n\n  ScrollableLegendView.prototype._pageGo = function (to, legendModel, api) {\n    var scrollDataIndex = this._getPageInfo(legendModel)[to];\n\n    scrollDataIndex != null && api.dispatchAction({\n      type: 'legendScroll',\n      scrollDataIndex: scrollDataIndex,\n      legendId: legendModel.id\n    });\n  };\n\n  ScrollableLegendView.prototype._updatePageInfoView = function (legendModel, pageInfo) {\n    var controllerGroup = this._controllerGroup;\n    zrUtil.each(['pagePrev', 'pageNext'], function (name) {\n      var key = name + 'DataIndex';\n      var canJump = pageInfo[key] != null;\n      var icon = controllerGroup.childOfName(name);\n\n      if (icon) {\n        icon.setStyle('fill', canJump ? legendModel.get('pageIconColor', true) : legendModel.get('pageIconInactiveColor', true));\n        icon.cursor = canJump ? 'pointer' : 'default';\n      }\n    });\n    var pageText = controllerGroup.childOfName('pageText');\n    var pageFormatter = legendModel.get('pageFormatter');\n    var pageIndex = pageInfo.pageIndex;\n    var current = pageIndex != null ? pageIndex + 1 : 0;\n    var total = pageInfo.pageCount;\n    pageText && pageFormatter && pageText.setStyle('text', zrUtil.isString(pageFormatter) ? pageFormatter.replace('{current}', current == null ? '' : current + '').replace('{total}', total == null ? '' : total + '') : pageFormatter({\n      current: current,\n      total: total\n    }));\n  };\n  /**\n   *  contentPosition: Array.<number>, null when data item not found.\n   *  pageIndex: number, null when data item not found.\n   *  pageCount: number, always be a number, can be 0.\n   *  pagePrevDataIndex: number, null when no previous page.\n   *  pageNextDataIndex: number, null when no next page.\n   * }\n   */\n\n\n  ScrollableLegendView.prototype._getPageInfo = function (legendModel) {\n    var scrollDataIndex = legendModel.get('scrollDataIndex', true);\n    var contentGroup = this.getContentGroup();\n    var containerRectSize = this._containerGroup.__rectSize;\n    var orientIdx = legendModel.getOrient().index;\n    var wh = WH[orientIdx];\n    var xy = XY[orientIdx];\n\n    var targetItemIndex = this._findTargetItemIndex(scrollDataIndex);\n\n    var children = contentGroup.children();\n    var targetItem = children[targetItemIndex];\n    var itemCount = children.length;\n    var pCount = !itemCount ? 0 : 1;\n    var result = {\n      contentPosition: [contentGroup.x, contentGroup.y],\n      pageCount: pCount,\n      pageIndex: pCount - 1,\n      pagePrevDataIndex: null,\n      pageNextDataIndex: null\n    };\n\n    if (!targetItem) {\n      return result;\n    }\n\n    var targetItemInfo = getItemInfo(targetItem);\n    result.contentPosition[orientIdx] = -targetItemInfo.s; // Strategy:\n    // (1) Always align based on the left/top most item.\n    // (2) It is user-friendly that the last item shown in the\n    // current window is shown at the begining of next window.\n    // Otherwise if half of the last item is cut by the window,\n    // it will have no chance to display entirely.\n    // (3) Consider that item size probably be different, we\n    // have calculate pageIndex by size rather than item index,\n    // and we can not get page index directly by division.\n    // (4) The window is to narrow to contain more than\n    // one item, we should make sure that the page can be fliped.\n\n    for (var i = targetItemIndex + 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i <= itemCount; ++i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // Half of the last item is out of the window.\n      !currItemInfo && winEndItemInfo.e > winStartItemInfo.s + containerRectSize || // If the current item does not intersect with the window, the new page\n      // can be started at the current item or the last item.\n      currItemInfo && !intersect(currItemInfo, winStartItemInfo.s)) {\n        if (winEndItemInfo.i > winStartItemInfo.i) {\n          winStartItemInfo = winEndItemInfo;\n        } else {\n          // e.g., when page size is smaller than item size.\n          winStartItemInfo = currItemInfo;\n        }\n\n        if (winStartItemInfo) {\n          if (result.pageNextDataIndex == null) {\n            result.pageNextDataIndex = winStartItemInfo.i;\n          }\n\n          ++result.pageCount;\n        }\n      }\n\n      winEndItemInfo = currItemInfo;\n    }\n\n    for (var i = targetItemIndex - 1, winStartItemInfo = targetItemInfo, winEndItemInfo = targetItemInfo, currItemInfo = null; i >= -1; --i) {\n      currItemInfo = getItemInfo(children[i]);\n\n      if ( // If the the end item does not intersect with the window started\n      // from the current item, a page can be settled.\n      (!currItemInfo || !intersect(winEndItemInfo, currItemInfo.s)) && // e.g., when page size is smaller than item size.\n      winStartItemInfo.i < winEndItemInfo.i) {\n        winEndItemInfo = winStartItemInfo;\n\n        if (result.pagePrevDataIndex == null) {\n          result.pagePrevDataIndex = winStartItemInfo.i;\n        }\n\n        ++result.pageCount;\n        ++result.pageIndex;\n      }\n\n      winStartItemInfo = currItemInfo;\n    }\n\n    return result;\n\n    function getItemInfo(el) {\n      if (el) {\n        var itemRect = el.getBoundingRect();\n        var start = itemRect[xy] + el[xy];\n        return {\n          s: start,\n          e: start + itemRect[wh],\n          i: el.__legendDataIndex\n        };\n      }\n    }\n\n    function intersect(itemInfo, winStart) {\n      return itemInfo.e >= winStart && itemInfo.s <= winStart + containerRectSize;\n    }\n  };\n\n  ScrollableLegendView.prototype._findTargetItemIndex = function (targetDataIndex) {\n    if (!this._showController) {\n      return 0;\n    }\n\n    var index;\n    var contentGroup = this.getContentGroup();\n    var defaultIndex;\n    contentGroup.eachChild(function (child, idx) {\n      var legendDataIdx = child.__legendDataIndex; // FIXME\n      // If the given targetDataIndex (from model) is illegal,\n      // we use defaultIndex. But the index on the legend model and\n      // action payload is still illegal. That case will not be\n      // changed until some scenario requires.\n\n      if (defaultIndex == null && legendDataIdx != null) {\n        defaultIndex = idx;\n      }\n\n      if (legendDataIdx === targetDataIndex) {\n        index = idx;\n      }\n    });\n    return index != null ? index : defaultIndex;\n  };\n\n  ScrollableLegendView.type = 'legend.scroll';\n  return ScrollableLegendView;\n}(LegendView);\n\nexport default ScrollableLegendView;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nexport default function installScrollableLegendAction(registers) {\n  /**\n   * @event legendScroll\n   * @type {Object}\n   * @property {string} type 'legendScroll'\n   * @property {string} scrollDataIndex\n   */\n  registers.registerAction('legendScroll', 'legendscroll', function (payload, ecModel) {\n    var scrollDataIndex = payload.scrollDataIndex;\n    scrollDataIndex != null && ecModel.eachComponent({\n      mainType: 'legend',\n      subType: 'scroll',\n      query: payload\n    }, function (legendModel) {\n      legendModel.setScrollDataIndex(scrollDataIndex);\n    });\n  });\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installLegendPlain } from './installLegendPlain';\nimport ScrollableLegendModel from './ScrollableLegendModel';\nimport ScrollableLegendView from './ScrollableLegendView';\nimport installScrollableLegendAction from './scrollableLegendAction';\nexport function install(registers) {\n  use(installLegendPlain);\n  registers.registerComponentModel(ScrollableLegendModel);\n  registers.registerComponentView(ScrollableLegendView);\n  installScrollableLegendAction(registers);\n}","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { use } from '../../extension';\nimport { install as installLegendPlain } from './installLegendPlain';\nimport { install as installLegendScroll } from './installLegendScroll';\nexport function install(registers) {\n  use(installLegendPlain);\n  use(installLegendScroll);\n}"],"sourceRoot":""}