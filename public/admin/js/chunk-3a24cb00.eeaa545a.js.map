{"version":3,"sources":["webpack:///./src/api/setting/system_maintain/system_maintain.ts","webpack:///./src/views/setting/task/task_edit.vue","webpack:///./src/views/setting/task/task_edit.vue?a1e5","webpack:///./src/views/setting/task/task_edit.vue?09a6","webpack:///./src/views/setting/task/task_edit.vue?14b2","webpack:///./src/views/setting/task/task_edit.vue?882f"],"names":["apiSystemlogList","params","request","get","apiSystemCacheClear","post","apiCrontabLists","apiCrontabAdd","apiCrontabDetail","apiCrontabEdit","apiCrontabDel","apiCrontabExpression","apiSrontabOperate","apiSystemUpgradeLists","apiSystemUpgradeDownloadPkg","apiSystemUpgrade","render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","mode","on","$event","$router","go","ref","rules","form","model","value","name","callback","$$v","$set","expression","type","_v","command","styleConfig","primary","status","blur","staticStyle","lists","remark","onSubmit","staticRenderFns","HelpEdit","Vue","constructor","PageMode","required","message","trigger","formName","refs","$refs","validate","valid","handleNoticeAdd","handleNoticeEdit","getExpressionFun","then","res","console","log","setTimeout","catch","$message","error","status_desc","type_desc","initFormDataForNoticeEdit","id","Object","keys","map","item","created","query","$route","Component","component"],"mappings":"2IAAA,waAKO,MAAMA,EAAoBC,GAC7BC,OAAQC,IAAI,6BAA8B,CAACF,WAIlCG,EAAsB,IAAMF,OAAQG,KAAK,gCAGzCC,EAAkB,IAAMJ,OAAQC,IAAI,0BAGpCI,EAAiBN,GAAgBC,OAAQG,KAAK,uBAAwBJ,GAGtEO,EAAoBP,GAAgBC,OAAQC,IAAI,0BAA2B,CAACF,WAG5EQ,EAAkBR,GAAgBC,OAAQG,KAAK,wBAAyBJ,GAGxES,EAAiBT,GAAgBC,OAAQG,KAAK,0BAA2BJ,GAGzEU,EAAwBV,GAAgBC,OAAQC,IAAI,8BAA+B,CAACF,WAGpFW,EAAqBX,GAAgBC,OAAQG,KAAK,2BAA4BJ,GAM9EY,EAAyBZ,GAAgBC,OAAQC,IAAI,kCAGrDW,EAA+Bb,GAAgBC,OAAQG,KAAK,uCAAwCJ,GAGpGc,EAAoBd,GAAgBC,OAAQG,KAAK,mCAAoCJ,I,yCC3ClG,IAAIe,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAUF,EAAIG,MAAMC,YAAY,OAAOF,EAAG,MAAM,CAACG,YAAY,uBAAuB,CAACH,EAAG,MAAM,CAACG,YAAY,WAAW,CAACH,EAAG,iBAAiB,CAACI,MAAM,CAAC,QAAqB,OAAXL,KAAKM,KAAY,SAAS,UAAUC,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAOT,EAAIU,QAAQC,IAAI,QAAQ,GAAGT,EAAG,MAAM,CAACG,YAAY,iCAAiC,CAACH,EAAG,UAAU,CAACU,IAAI,OAAON,MAAM,CAAC,MAAQN,EAAIa,MAAM,MAAQb,EAAIc,KAAK,cAAc,QAAQ,KAAO,UAAU,CAACZ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,KAAK,KAAO,SAAS,CAACJ,EAAG,WAAW,CAACG,YAAY,WAAWC,MAAM,CAAC,kBAAkB,GAAG,YAAc,SAASS,MAAM,CAACC,MAAOhB,EAAIc,KAAKG,KAAMC,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIc,KAAM,OAAQK,IAAME,WAAW,gBAAgB,GAAGnB,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACI,MAAM,CAAC,MAAQ,GAAGS,MAAM,CAACC,MAAOhB,EAAIc,KAAKQ,KAAMJ,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIc,KAAM,OAAQK,IAAME,WAAW,cAAc,CAACrB,EAAIuB,GAAG,WAAW,GAAGrB,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,KAAK,KAAO,YAAY,CAACJ,EAAG,WAAW,CAACG,YAAY,WAAWC,MAAM,CAAC,YAAc,0BAA0BS,MAAM,CAACC,MAAOhB,EAAIc,KAAKU,QAASN,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIc,KAAM,UAAWK,IAAME,WAAW,mBAAmB,GAAGnB,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACG,YAAY,WAAWC,MAAM,CAAC,YAAc,4BAA4BS,MAAM,CAACC,MAAOhB,EAAIc,KAAK9B,OAAQkC,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIc,KAAM,SAAUK,IAAME,WAAW,kBAAkB,GAAGnB,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,YAAY,CAACI,MAAM,CAAC,eAAe,EAAE,iBAAiB,EAAE,eAAeN,EAAIyB,YAAYC,QAAQ,iBAAiB,WAAWX,MAAM,CAACC,MAAOhB,EAAIc,KAAKa,OAAQT,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIc,KAAM,SAAUK,IAAME,WAAW,kBAAkB,GAAGnB,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,KAAK,KAAO,eAAe,CAACJ,EAAG,WAAW,CAACG,YAAY,WAAWC,MAAM,CAAC,YAAc,2BAA2BE,GAAG,CAAC,KAAOR,EAAI4B,MAAMb,MAAM,CAACC,MAAOhB,EAAIc,KAAKO,WAAYH,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIc,KAAM,aAAcK,IAAME,WAAW,qBAAqBnB,EAAG,WAAW,CAACU,IAAI,YAAYP,YAAY,SAASwB,YAAY,CAAC,MAAQ,QAAQvB,MAAM,CAAC,KAAON,EAAI8B,MAAM,KAAO,SAAS,CAAC5B,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,OAAO,MAAQ,KAAK,YAAY,QAAQJ,EAAG,kBAAkB,CAACI,MAAM,CAAC,KAAO,OAAO,MAAQ,OAAO,YAAY,UAAU,IAAI,GAAGJ,EAAG,eAAe,CAACI,MAAM,CAAC,MAAQ,OAAO,CAACJ,EAAG,WAAW,CAACG,YAAY,WAAWC,MAAM,CAAC,KAAO,WAAW,YAAc,SAASS,MAAM,CAACC,MAAOhB,EAAIc,KAAKiB,OAAQb,SAAS,SAAUC,GAAMnB,EAAIoB,KAAKpB,EAAIc,KAAM,SAAUK,IAAME,WAAW,kBAAkB,IAAI,IAAI,GAAGnB,EAAG,MAAM,CAACG,YAAY,4BAA4B,CAACH,EAAG,MAAM,CAACG,YAAY,kBAAkBwB,YAAY,CAAC,OAAS,SAAS,CAAC3B,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,SAASE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,QAAQC,IAAI,MAAM,CAACX,EAAIuB,GAAG,QAAQrB,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,QAAQ,KAAO,WAAWE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIgC,SAAS,WAAW,CAAChC,EAAIuB,GAAG,SAAS,QAEx5FU,EAAkB,G,gDCItB,IAAqBC,EAArB,cAAsCC,OAAtCC,c,oBAEI,KAAA7B,KAAe8B,OAAS,OAGxB,KAAAP,MAAuB,GAGvB,KAAAhB,KAAY,CACRG,KAAM,GACNK,KAAM,EACNE,QAAS,GACTH,WAAY,GACZM,OAAQ,EACRI,OAAQ,GACR/C,OAAQ,IAIZ,KAAA6B,MAAgB,CACZI,KAAM,CAAC,CAAEqB,UAAU,EAAMC,QAAS,QAASC,QAAS,SACpDhB,QAAS,CAAC,CAAEc,UAAU,EAAMC,QAAS,QAASC,QAAS,SACvDxD,OAAQ,CAAC,CAAEsD,UAAU,EAAMC,QAAS,QAASC,QAAS,SACtDnB,WAAY,CAAC,CAAEiB,UAAU,EAAMC,QAAS,QAASC,QAAS,UAO9DR,SAASS,GACL,MAAMC,EAAOzC,KAAK0C,MAAMF,GACxBC,EAAKE,SAAUC,IACX,GAAKA,EAGL,OAAQ5C,KAAKM,MACT,KAAK8B,OAAS,OACV,OAAOpC,KAAK6C,kBAChB,KAAKT,OAAS,QACV,OAAOpC,KAAK8C,sBAK5BnB,OAC+B,IAAxB3B,KAAKa,KAAKO,YACTpB,KAAK+C,mBAIbA,mBACItD,eAAqB,CACjB2B,WAAYpB,KAAKa,KAAKO,aACvB4B,KAAKC,IACJC,QAAQC,IAAIF,GACZjD,KAAK6B,MAAQoB,IAKrBJ,kBACI,MAAM9D,EAASiB,KAAKa,KACpBqC,QAAQC,IAAIpE,GACZM,eAAcN,GACTiE,KAAK,KACFI,WAAW,IAAMpD,KAAKS,QAAQC,IAAI,GAAI,OAEzC2C,MAAM,KACHrD,KAAKsD,SAASC,MAAM,WAKhCT,0BACW9C,KAAKa,KAAK2C,mBACVxD,KAAKa,KAAK4C,UACjB,MAAM1E,EAASiB,KAAKa,KACpBtB,eAAeR,GACViE,KAAK,KAEFI,WAAW,IAAMpD,KAAKS,QAAQC,IAAI,GAAI,OAEzC2C,MAAM,KACHrD,KAAKsD,SAASC,MAAM,WAKhCG,4BACIpE,eAAiB,CACbqE,GAAI3D,KAAKa,KAAK8C,KAEbX,KAAMC,IACHW,OAAOC,KAAKZ,GAAKa,IAAKC,IAClB/D,KAAKmB,KAAKnB,KAAKa,KAAMkD,EAAMd,EAAIc,MAEnC/D,KAAK+C,qBAERM,MAAM,KACHrD,KAAKsD,SAASC,MAAM,oBAOhCS,UACI,MAAMC,EAAajE,KAAKkE,OAAOD,MAC3BA,EAAM3D,OAAMN,KAAKM,KAAO2D,EAAM3D,MAE9BN,KAAKM,OAAS8B,OAAS,UACvBpC,KAAKa,KAAK8C,GAAgB,EAAXM,EAAMN,GACrB3D,KAAK0D,+BAjHIzB,EAAQ,gBAD5BkC,QACoBlC,WCNmZ,I,wBCQpamC,EAAY,eACd,EACAtE,EACAkC,GACA,EACA,KACA,WACA,MAIa,aAAAoC,E,2CCnBf","file":"js/chunk-3a24cb00.eeaa545a.js","sourcesContent":["import request from '@/plugins/axios'\nimport * as Interface from '@/api/setting/system_maintain/system_maintain.d.ts'\n\n/** S 系统维护 **/\n// 获取系统日志列表\nexport const apiSystemlogList = (params: Interface.Journal_Req): Promise<Interface.Journal_Res> =>\n    request.get('/settings.system.log/lists', {params})\n\t\n\n// 清除系统缓存\nexport const apiSystemCacheClear = () => request.post('/settings.system.cache/clear')\n\n// 定时任务列表\nexport const apiCrontabLists = () => request.get('/crontab.crontab/lists')\n\n// 添加定时任务\nexport const apiCrontabAdd = (params: any) => request.post('/crontab.crontab/add', params)\n\n// 查看详情\nexport const apiCrontabDetail = (params: any) => request.get('/crontab.crontab/detail', {params})\n\n// 编辑定时任务\nexport const apiCrontabEdit = (params: any) => request.post('/crontab.crontab/edit', params)\n\n// 删除定时任务\nexport const apiCrontabDel = (params: any) => request.post('/crontab.crontab/delete', params)\n\n// 获取规则执行时间\nexport const apiCrontabExpression = (params: any) => request.get('/crontab.crontab/expression', {params})\n\n// 操作定时任务\nexport const apiSrontabOperate = (params: any) => request.post('/crontab.crontab/operate', params)\n\n/** E 系统维护 **/\n\n/** S 系统更新 **/\n// 系统更新列表\nexport const apiSystemUpgradeLists = (params: any) => request.get('/settings.system.upgrade/lists')\n\n// 下载更新包\nexport const apiSystemUpgradeDownloadPkg = (params: any) => request.post('/settings.system.upgrade/downloadPkg', params)\n\n// 一键更新\nexport const apiSystemUpgrade = (params: any) => request.post('/settings.system.upgrade/upgrade', params)\n/** E 系统更新 **/\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"substance_edit-help\"},[_c('div',{staticClass:\"ls-card\"},[_c('el-page-header',{attrs:{\"content\":this.mode=='add'?'新增定时任务':'编辑定时任务'},on:{\"back\":function($event){return _vm.$router.go(-1)}}})],1),_c('div',{staticClass:\"ls-card m-t-16 form-container\"},[_c('el-form',{ref:\"form\",attrs:{\"rules\":_vm.rules,\"model\":_vm.form,\"label-width\":\"120px\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{staticClass:\"ls-input\",attrs:{\"show-word-limit\":\"\",\"placeholder\":\"请输入名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类型\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.form.type),callback:function ($$v) {_vm.$set(_vm.form, \"type\", $$v)},expression:\"form.type\"}},[_vm._v(\"定时任务\")])],1),_c('el-form-item',{attrs:{\"label\":\"命令\",\"prop\":\"command\"}},[_c('el-input',{staticClass:\"ls-input\",attrs:{\"placeholder\":\"请输入thankphp命令，如vresion\"},model:{value:(_vm.form.command),callback:function ($$v) {_vm.$set(_vm.form, \"command\", $$v)},expression:\"form.command\"}})],1),_c('el-form-item',{attrs:{\"label\":\"参数\"}},[_c('el-input',{staticClass:\"ls-input\",attrs:{\"placeholder\":\"请输入参数，例:--id 8 --name 测试\"},model:{value:(_vm.form.params),callback:function ($$v) {_vm.$set(_vm.form, \"params\", $$v)},expression:\"form.params\"}})],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0,\"active-color\":_vm.styleConfig.primary,\"inactive-color\":\"#f4f4f5\"},model:{value:(_vm.form.status),callback:function ($$v) {_vm.$set(_vm.form, \"status\", $$v)},expression:\"form.status\"}})],1),_c('el-form-item',{attrs:{\"label\":\"规则\",\"prop\":\"expression\"}},[_c('el-input',{staticClass:\"ls-input\",attrs:{\"placeholder\":\"请输入crontab规则，例：59 * * *\"},on:{\"blur\":_vm.blur},model:{value:(_vm.form.expression),callback:function ($$v) {_vm.$set(_vm.form, \"expression\", $$v)},expression:\"form.expression\"}}),_c('el-table',{ref:\"paneTable\",staticClass:\"m-t-24\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.lists,\"size\":\"mini\"}},[_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"序号\",\"min-width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"date\",\"label\":\"执行时间\",\"min-width\":\"180\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{staticClass:\"ls-input\",attrs:{\"type\":\"textarea\",\"placeholder\":\"请输入备注\"},model:{value:(_vm.form.remark),callback:function ($$v) {_vm.$set(_vm.form, \"remark\", $$v)},expression:\"form.remark\"}})],1)],1)],1),_c('div',{staticClass:\"bg-white ls-fixed-footer\"},[_c('div',{staticClass:\"row-center flex\",staticStyle:{\"height\":\"100%\"}},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit('form')}}},[_vm._v(\"保存\")])],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { apiCrontabAdd, apiCrontabEdit, apiCrontabDetail, apiCrontabExpression } from \"@/api/setting/system_maintain/system_maintain\";\nimport { PageMode } from \"@/utils/type\";\n\n@Component\nexport default class HelpEdit extends Vue {\n    /** S Data **/\n    mode: string = PageMode[\"ADD\"]; // 当前页面: add-添加角色 edit-编辑角色\n\n    // 表\n    lists: Array<object> = [];\n\n    // 表单数据\n    form: any = {\n        name: '',//\t是\tstring\t名称\n        type: 1,//\t是\tinteger\t类型\n        command: '',//\t是\tstring\t命令\n        expression: '',//\t是\tstring\t运行规则\n        status: 1,//\t是\tinteger\t状态\n        remark: '',//\t否\tstring\t备注\n        params: '',//\t否\tstring\t参数\n    };\n\n    // 表单校验\n    rules: object = {\n        name: [{ required: true, message: \"请输入名称\", trigger: \"blur\" }],\n        command: [{ required: true, message: \"请输入命令\", trigger: \"blur\" }],\n        params: [{ required: true, message: \"请输入参数\", trigger: \"blur\" }],\n        expression: [{ required: true, message: \"请输入规则\", trigger: \"blur\" }],\n    };\n\n    /** E Data **/\n\n    /** S Methods **/\n    // 提交表单\n    onSubmit(formName: string) {\n        const refs = this.$refs[formName] as HTMLFormElement;\n        refs.validate((valid: boolean): void => {\n            if (!valid) return;\n\n            // 请求发送\n            switch (this.mode) {\n                case PageMode[\"ADD\"]:\n                    return this.handleNoticeAdd();\n                case PageMode[\"EDIT\"]:\n                    return this.handleNoticeEdit();\n            }\n        });\n    }\n\n    blur() {\n        if(this.form.expression != '') {\n            this.getExpressionFun();\n        }\n    }\n\n    getExpressionFun() {\n        apiCrontabExpression({\n            expression: this.form.expression\n        }).then(res => {\n            console.log(res)\n            this.lists = res;\n        })\n    }\n\n    // 添加定时任务\n    handleNoticeAdd() {\n        const params = this.form;\n        console.log(params)\n        apiCrontabAdd(params)\n            .then(() => {\n                setTimeout(() => this.$router.go(-1), 500);\n            })\n            .catch(() => {\n                this.$message.error(\"添加失败!\");\n            });\n    }\n\n    // 编辑帮助文章\n    handleNoticeEdit() {\n        delete this.form.status_desc\n        delete this.form.type_desc\n        const params = this.form;\n        apiCrontabEdit(params)\n            .then(() => {\n                // this.$message.success(\"修改成功!\");\n                setTimeout(() => this.$router.go(-1), 500);\n            })\n            .catch(() => {\n                this.$message.error(\"修改失败!\");\n            });\n    }\n\n    // 初始化表单数据\n    initFormDataForNoticeEdit() {\n        apiCrontabDetail({\n            id: this.form.id,\n        })\n            .then((res:any) => {\n                Object.keys(res).map((item) => {\n                    this.$set(this.form, item, res[item]);\n                });\n                this.getExpressionFun();\n            })\n            .catch(() => {\n                this.$message.error(\"数据初始化失败，请刷新重载！\");\n            });\n    }\n\n    /** E Methods **/\n\n    /** S Life Cycle **/\n    created() {\n        const query: any = this.$route.query;\n        if (query.mode) this.mode = query.mode;\n\n        if (this.mode === PageMode[\"EDIT\"]) {\n            this.form.id = query.id * 1;\n            this.initFormDataForNoticeEdit();\n        }\n    }\n\n    /** E Life Cycle **/\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./task_edit.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./task_edit.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./task_edit.vue?vue&type=template&id=44c8c8ee&scoped=true&\"\nimport script from \"./task_edit.vue?vue&type=script&lang=ts&\"\nexport * from \"./task_edit.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./task_edit.vue?vue&type=style&index=0&id=44c8c8ee&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44c8c8ee\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./task_edit.vue?vue&type=style&index=0&id=44c8c8ee&prod&lang=scss&scoped=true&\""],"sourceRoot":""}