(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51e4b332"],{"0465":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"ls-card"},[e("el-page-header",{attrs:{content:t.identity?"编辑小票模版":"新增小票模版"},on:{back:function(e){return t.$router.go(-1)}}})],1),e("div",{staticClass:"flex col-top"},[e("div",{staticClass:"ls-card m-t-24 m-b-60 m-r-24"},[e("div",{staticClass:"title"},[t._v("基本信息")]),e("el-form",{ref:"printData",staticClass:"m-l-24",staticStyle:{width:"500px"},attrs:{"hide-required-asterisk":!1,rules:t.rules,model:t.printData,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"模版名称",prop:"template_name","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入模版名称"},model:{value:t.printData.template_name,callback:function(e){t.$set(t.printData,"template_name",e)},expression:"printData.template_name"}})],1),e("el-form-item",{attrs:{label:"小票名称",prop:"ticket_name","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入小票名称"},model:{value:t.printData.ticket_name,callback:function(e){t.$set(t.printData,"ticket_name",e)},expression:"printData.ticket_name"}})],1),e("el-form-item",{attrs:{label:"商城名称","label-position":"right",required:""}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":t.styleConfig.primary,"inactive-color":"#f4f4f5"},model:{value:t.printData.show_shop_name,callback:function(e){t.$set(t.printData,"show_shop_name",e)},expression:"printData.show_shop_name"}}),e("span",{staticClass:"muted m-l-20"},[t._v("隐藏和显示商城名称，默认显示")])],1),e("el-form-item",{attrs:{label:"自提门店","label-position":"right",required:""}},[e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.selffetch_shop.shop_name,callback:function(e){t.$set(t.printData.selffetch_shop,"shop_name",e)},expression:"printData.selffetch_shop.shop_name"}},[t._v("自提门店 ")]),e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.selffetch_shop.contacts,callback:function(e){t.$set(t.printData.selffetch_shop,"contacts",e)},expression:"printData.selffetch_shop.contacts"}},[t._v("联系人 ")]),e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.selffetch_shop.shop_address,callback:function(e){t.$set(t.printData.selffetch_shop,"shop_address",e)},expression:"printData.selffetch_shop.shop_address"}},[t._v(" 门店地址 ")]),e("span",{staticClass:"desc"},[t._v("门店自提时，勾选需要显示的门店信息")])],1),e("el-form-item",{attrs:{label:"买家留言","label-position":"right",required:""}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":t.styleConfig.primary,"inactive-color":"#f4f4f5"},model:{value:t.printData.show_buyer_message,callback:function(e){t.$set(t.printData,"show_buyer_message",e)},expression:"printData.show_buyer_message"}}),e("span",{staticClass:"muted m-l-20"},[t._v("隐藏和显示买家留言，默认显示")])],1),e("el-form-item",{attrs:{label:"收货信息","label-position":"right",required:""}},[e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.consignee_info.name,callback:function(e){t.$set(t.printData.consignee_info,"name",e)},expression:"printData.consignee_info.name"}},[t._v("收货人 ")]),e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.consignee_info.mobile,callback:function(e){t.$set(t.printData.consignee_info,"mobile",e)},expression:"printData.consignee_info.mobile"}},[t._v("联系方式 ")]),e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.printData.consignee_info.address,callback:function(e){t.$set(t.printData.consignee_info,"address",e)},expression:"printData.consignee_info.address"}},[t._v("收货地址 ")]),e("span",{staticClass:"desc"},[t._v("门店自提时，勾选需要显示的门店信息")])],1),e("el-form-item",{attrs:{label:"二维码","label-position":"right",required:""}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":t.styleConfig.primary,"inactive-color":"#f4f4f5"},model:{value:t.printData.show_qrcode,callback:function(e){t.$set(t.printData,"show_qrcode",e)},expression:"printData.show_qrcode"}}),e("span",{staticClass:"muted m-l-20"},[t._v("关闭和开启打印小票尾部二维码，默认关闭")])],1),e("el-form-item",{attrs:{label:"二维码链接","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入二维码链接"},model:{value:t.printData.qrcode_content,callback:function(e){t.$set(t.printData,"qrcode_content",e)},expression:"printData.qrcode_content"}})],1),e("el-form-item",{attrs:{label:"二维码名称","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入二维码名称"},model:{value:t.printData.qrcode_name,callback:function(e){t.$set(t.printData,"qrcode_name",e)},expression:"printData.qrcode_name"}})],1),e("el-form-item",{attrs:{label:"底部信息",prop:"bottom","label-position":"right",required:""}},[e("el-input",{staticClass:"ls-input",attrs:{placeholder:"谢谢惠顾，欢迎下次光临"},model:{value:t.printData.bottom,callback:function(e){t.$set(t.printData,"bottom",e)},expression:"printData.bottom"}})],1)],1)],1),e("div",{staticClass:"ls-card m-b-60 m-t-24"},[e("div",{staticClass:"title"},[t._v("小票预览")]),e("div",{staticClass:"phone"},[e("div",{staticClass:"bb flex row-center sm m-t-5 p-b-12"},[t._v(t._s(t.printData.ticket_name||"小票名称"))]),t.printData.show_shop_name?e("div",{staticClass:"bb flex row-center m-t-12 xl p-b-12"},[t._v("商城名称")]):t._e(),t._m(0),t._m(1),t._m(2),t.handleShopInfo?e("div",{staticClass:"bb p-b-12 p-l-10 p-r-10"},[e("div",{staticClass:"bold m-t-12 weight-500"},[t._v("门店信息")]),t.printData.selffetch_shop.shop_name?e("div",{staticClass:"m-t-12"},[t._v(" 自提门店: 商业街店铺 ")]):t._e(),t.printData.selffetch_shop.contacts?e("div",{staticClass:"m-t-12"},[t._v(" 联系人: 刘先生 ")]):t._e(),t.printData.selffetch_shop.shop_address?e("div",{staticClass:"m-t-12"},[t._v(" 门店地址: 广东省番禺区 小店街 ")]):t._e()]):t._e(),t.handleUserInfo?e("div",{staticClass:"bb p-b-12 p-l-10 p-r-10"},[e("div",{staticClass:"bold m-t-12 weight-500"},[t._v("买家信息")]),t.printData.consignee_info.name?e("div",{staticClass:"m-t-12"},[t._v(" 收货人: 米先生 ")]):t._e(),t.printData.consignee_info.mobile?e("div",{staticClass:"m-t-12"},[t._v(" 联系方式: 18778786555 ")]):t._e(),t.printData.consignee_info.address?e("div",{staticClass:"m-t-12"},[t._v(" 收货地址: 山西省 太原市 小区店 创业街 ")]):t._e()]):t._e(),t.printData.show_buyer_message?e("div",{staticClass:"m-t-12 p-b-12 bb p-l-10"},[t._v(" 买家留言: 请发申通快递，谢谢 ")]):t._e(),t.printData.show_qrcode?e("div",{staticClass:"flex row-center bb m-t-12 p-b-12"},[e("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:i("11087")}})]):t._e(),e("div",{staticClass:"m-t-12 p-b-5 flex row-center"},[t._v(" "+t._s(t.printData.bottom)+" ")])])])]),e("div",{staticClass:"bg-white ls-fixed-footer"},[e("div",{staticClass:"row-center flex m-t-12"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("printData")}}},[t._v("保存")])],1)])])},s=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"sm bb p-l-10"},[e("div",{staticClass:"m-t-12"},[t._v("订单编号: MWE20012345738754657834")]),e("div",{staticClass:"m-t-12"},[t._v("支付方式: 微信支付")]),e("div",{staticClass:"m-t-12 p-b-12"},[t._v("配送方式: 门店自提")])])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"bb p-l-10 p-r-10"},[e("div",{staticClass:"m-t-12 flex row-between"},[e("div",[t._v("商品名称")]),e("div",[t._v("数量")]),e("div",[t._v("金额")])]),e("div",{staticClass:"m-t-12 flex row-between"},[e("div",[t._v("男子运动鞋")]),e("div",[t._v("2")]),e("div",[t._v("¥2987")])]),e("div",{staticClass:"m-t-12 flex row-between"},[e("div",[t._v("白色休闲鞋")]),e("div",[t._v("4")]),e("div",[t._v("¥2463")])]),e("div",{staticClass:"m-t-12 p-b-12 flex row-between"},[e("div",[t._v("运费")]),e("div",[t._v("¥5.00")])])])},function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"p-l-10 p-r-10 bb"},[e("div",{staticClass:"m-t-12 flex row-between"},[e("div",[t._v("订单原价")]),e("div",[t._v("¥5455.00")])]),e("div",{staticClass:"m-t-12 flex row-between"},[e("div",[t._v("优惠金额")]),e("div",[t._v("¥0.00")])]),e("div",{staticClass:"m-t-12 p-b-12 flex row-between"},[e("div",[t._v("实付金额")]),e("div",[t._v("¥5455.00")])])])}],r=i("9ab4"),l=i("1b40"),n=i("c136"),o=i("b3ad");let c=class extends l["e"]{constructor(){super(...arguments),this.identity=1,this.printData={template_name:"",ticket_name:"",show_shop_name:1,template_id:0,selffetch_shop:{shop_name:1,contacts:1,shop_address:1},show_buyer_message:1,consignee_info:{name:1,mobile:1,address:1},show_qrcode:1,bottom:"谢谢惠顾，欢迎下次光临",qrcode_name:"",qrcode_content:""},this.rules={template_name:[{required:!0,message:"请输入打印机名称",trigger:"blur"}],ticket_name:[{required:!0,message:"输入小票名称",trigger:"blur"}],bottom:[{required:!0,message:"请输入底部信息",trigger:"blur"}],qrcode_content:[{required:!0,message:"请输入二维码链接",trigger:"blur"}],qrcode_name:[{required:!0,message:"请输入二维码名称",trigger:"blur"}]}}async getTemplateDetail(){const t=await Object(n["l"])({id:this.identity});this.printData=t}onSubmit(t){const e=this.$refs[t];e.validate(t=>{t&&(this.identity?this.handleTemplateEdit():this.handleTemplateAdd())})}async handleTemplateAdd(){const t=this.printData;await Object(n["b"])({...t}),this.$router.back()}handleTemplateEdit(){const t=this.printData,e=this.identity;Object(n["g"])({...t,id:e}).then(()=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{this.$message.error("编辑失败!")})}created(){const t=this.$route.query;this.identity=t.id,this.identity&&this.getTemplateDetail()}get handleShopInfo(){let t=[],e=this.printData.selffetch_shop;for(const a in e)t.push(e[a]);const i=t.find(t=>1==t);return void 0!=i}get handleUserInfo(){let t=[],e=this.printData.consignee_info;for(const a in e)t.push(e[a]);const i=t.find(t=>1==t);return void 0!=i}};c=Object(r["a"])([Object(l["a"])({components:{MaterialSelect:o["a"]}})],c);var p=c,d=p,m=(i("4ffd"),i("2877")),u=Object(m["a"])(d,a,s,!1,null,"2fb201cd",null);e["default"]=u.exports},11087:function(t,e,i){t.exports=i.p+"img/qr_code.e6b2ad1c.png"},"1fb3":function(t,e,i){},"239d":function(t,e,i){},"4ffd":function(t,e,i){"use strict";i("1fb3")},b3ad:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():e("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[e("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(i,a){return e("div",{key:i+a,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,a)}}},[t.$scopedSlots.preview?e("div",[t._t("preview",null,{item:t.imageUri(i)})],2):e("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(i)},size:t.size}}),t.enableDelete?e("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(a)}}}):t._e()],1)})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?e("div",[t._t("upload")],2):e("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():e("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),e("div",{staticClass:"material-wrap"},[e("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},s=[],r=i("9ab4"),l=i("1b40"),n=i("0a6d"),o=i("c6fe"),c=i("e915"),p=i("b76a"),d=i.n(p);let m=class extends l["e"]{constructor(){super(...arguments),this.isAdd=!0,this.fileList=[]}get showUpload(){const{fileList:t,limit:e}=this;return e-t.length>0}get meterialLimit(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}get tipsText(){switch(this.type){case"image":return"图片";case"video":return"视频"}}get imageUri(){return t=>this.enableDomain?t:this.$getImageUri(t)}valueChange(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}showDialog(t=!0,e){var i;this.disabled||(this.isAdd=t,void 0!==e&&(this.currentIndex=e),null===(i=this.$refs.materialDialog)||void 0===i||i.onTrigger())}selectChange(t){this.select=t}handleConfirm(){this.$refs.material.clearSelectList();const t=this.select.map(t=>this.enableDomain?t.uri:t.url);this.isAdd?this.fileList=this.fileList.concat(t):this.fileList.splice(this.currentIndex,1,t.shift()),this.handleChange()}delImage(t){this.fileList.splice(t,1),this.handleChange()}handleChange(){const t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}};Object(r["a"])([Object(l["c"])({default:()=>[]})],m.prototype,"value",void 0),Object(r["a"])([Object(l["c"])({default:1})],m.prototype,"limit",void 0),Object(r["a"])([Object(l["c"])({default:"100"})],m.prototype,"size",void 0),Object(r["a"])([Object(l["c"])({default:!1})],m.prototype,"disabled",void 0),Object(r["a"])([Object(l["c"])({default:!1})],m.prototype,"dragDisabled",void 0),Object(r["a"])([Object(l["c"])({default:!1})],m.prototype,"hiddenTrigger",void 0),Object(r["a"])([Object(l["c"])({default:"image"})],m.prototype,"type",void 0),Object(r["a"])([Object(l["c"])({default:"transparent"})],m.prototype,"uploadBg",void 0),Object(r["a"])([Object(l["c"])({default:!0})],m.prototype,"enableDomain",void 0),Object(r["a"])([Object(l["c"])({default:!0})],m.prototype,"enableDelete",void 0),Object(r["a"])([Object(l["f"])("value",{immediate:!0})],m.prototype,"valueChange",null),m=Object(r["a"])([Object(l["a"])({components:{LsDialog:n["a"],LsMaterial:o["a"],Draggable:d.a,FileItem:c["a"]}})],m);var u=m,f=u,h=(i("fb48"),i("2877")),b=Object(h["a"])(f,a,s,!1,null,"1503bff6",null);e["a"]=b.exports},c136:function(t,e,i){"use strict";i.d(e,"j",(function(){return s})),i.d(e,"i",(function(){return r})),i.d(e,"k",(function(){return l})),i.d(e,"a",(function(){return n})),i.d(e,"f",(function(){return o})),i.d(e,"d",(function(){return c})),i.d(e,"n",(function(){return p})),i.d(e,"h",(function(){return d})),i.d(e,"c",(function(){return m})),i.d(e,"m",(function(){return u})),i.d(e,"b",(function(){return f})),i.d(e,"g",(function(){return h})),i.d(e,"e",(function(){return b})),i.d(e,"l",(function(){return _}));var a=i("f175");const s=t=>a["a"].get("/printer.printer/printerLists",{params:t}),r=t=>a["a"].get("/printer.printer/printerDetail",{params:t}),l=t=>a["a"].get("/printer.printer/getPrinterType",{params:t}),n=t=>a["a"].post("/printer.printer/addPrinter",t),o=t=>a["a"].post("/printer.printer/editPrinter",t),c=t=>a["a"].post("/printer.printer/deletePrinter",t),p=t=>a["a"].post("/printer.printer/testPrinter",t),d=t=>a["a"].post("/order.order/orderPrint",t),m=t=>a["a"].post("/printer.printer/autoPrint",t),u=t=>a["a"].get("/printer.printer/printerTemplateLists",{params:t}),f=t=>a["a"].post("/printer.printer/addTemplate",t),h=t=>a["a"].post("/printer.printer/editTemplate",t),b=t=>a["a"].post("/printer.printer/deleteTemplate",t),_=t=>a["a"].get("/printer.printer/templateDetail",{params:t})},fb48:function(t,e,i){"use strict";i("239d")}}]);
//# sourceMappingURL=chunk-51e4b332.42d9817a.js.map