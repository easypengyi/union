(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32d0d4f6"],{"079d":function(e,t,s){},"0ee2":function(e,t,s){},"14c6":function(e,t,s){"use strict";s.d(t,"q",(function(){return l})),s.d(t,"A",(function(){return i})),s.d(t,"B",(function(){return o})),s.d(t,"x",(function(){return r})),s.d(t,"F",(function(){return c})),s.d(t,"y",(function(){return n})),s.d(t,"E",(function(){return u})),s.d(t,"z",(function(){return d})),s.d(t,"C",(function(){return p})),s.d(t,"D",(function(){return m})),s.d(t,"c",(function(){return _})),s.d(t,"g",(function(){return v})),s.d(t,"h",(function(){return g})),s.d(t,"d",(function(){return b})),s.d(t,"e",(function(){return f})),s.d(t,"f",(function(){return h})),s.d(t,"H",(function(){return y})),s.d(t,"K",(function(){return x})),s.d(t,"I",(function(){return k})),s.d(t,"J",(function(){return w})),s.d(t,"G",(function(){return C})),s.d(t,"O",(function(){return O})),s.d(t,"L",(function(){return j})),s.d(t,"M",(function(){return S})),s.d(t,"N",(function(){return $})),s.d(t,"i",(function(){return D})),s.d(t,"o",(function(){return I})),s.d(t,"j",(function(){return q})),s.d(t,"p",(function(){return B})),s.d(t,"m",(function(){return N})),s.d(t,"k",(function(){return L})),s.d(t,"n",(function(){return z})),s.d(t,"l",(function(){return P})),s.d(t,"P",(function(){return V})),s.d(t,"S",(function(){return E})),s.d(t,"Q",(function(){return M})),s.d(t,"R",(function(){return A})),s.d(t,"u",(function(){return J})),s.d(t,"t",(function(){return F})),s.d(t,"v",(function(){return G})),s.d(t,"w",(function(){return T})),s.d(t,"s",(function(){return H})),s.d(t,"r",(function(){return K})),s.d(t,"a",(function(){return Q})),s.d(t,"b",(function(){return R}));var a=s("f175");const l=e=>a["a"].post("/goods.goods/add",e),i=e=>a["a"].post("/goods.goods/edit",e),o=e=>a["a"].get("/goods.goods/lists",{params:e}),r=e=>a["a"].get("/goods.goods/commonLists",{params:e}),c=e=>a["a"].post("/goods.goods/status",e),n=e=>a["a"].post("/goods.goods/del",e),u=e=>a["a"].post("/goods.goods/sort",e),d=e=>a["a"].get("/goods.goods/detail",{params:{id:e}}),p=e=>a["a"].get("/goods.goods/otherList",{params:e}),m=e=>a["a"].post("goods.goods/rename ",e),_=e=>a["a"].post("/goods.goods_brand/add",e),v=e=>a["a"].get("/goods.goods_brand/lists",{params:e}),g=e=>a["a"].post("/goods.goods_brand/status",e),b=e=>a["a"].post("/goods.goods_brand/del",e),f=e=>a["a"].get("/goods.goods_brand/detail",{params:{id:e}}),h=e=>a["a"].post("/goods.goods_brand/edit",e),y=e=>a["a"].post("/goods.goods_supplier_category/add",e),x=e=>a["a"].get("goods.goods_supplier_category/lists",{params:e}),k=e=>a["a"].post("goods.goods_supplier_category/del",{id:e}),w=e=>a["a"].post("goods.goods_supplier_category/edit",e),C=e=>a["a"].post("/goods.goods_supplier/add",e),O=e=>a["a"].get("/goods.goods_supplier/lists",{params:e}),j=e=>a["a"].post("goods.goods_supplier/del",{id:e}),S=e=>a["a"].get("/goods.goods_supplier/detail",{params:{id:e}}),$=e=>a["a"].post("/goods.goods_supplier/edit",e),D=e=>a["a"].post("/goods.goods_category/add",e),I=e=>a["a"].get("/goods.goods_category/lists",{params:e}),q=e=>a["a"].get("/goods.goods_category/commonLists",{params:e}),B=e=>a["a"].post("/goods.goods_category/status",e),N=e=>a["a"].post("/goods.goods_category/down_good",e),L=e=>a["a"].post("goods.goods_category/del",{id:e}),z=e=>a["a"].post("/goods.goods_category/edit",e),P=e=>a["a"].get("/goods.goods_category/detail",{params:{id:e}}),V=e=>a["a"].post("/goods.goods_unit/add",e),E=e=>a["a"].get("/goods.goods_unit/lists",{params:e}),M=e=>a["a"].post("goods.goods_unit/del",{id:e}),A=e=>a["a"].post("/goods.goods_unit/edit",e),J=e=>a["a"].get("goods.goods_comment/lists",{params:e}),F=e=>a["a"].post("goods.goods_comment/del",e),G=e=>a["a"].post("goods.goods_comment/reply",e),T=e=>a["a"].post("/goods.goods_comment/status",e),H=e=>a["a"].get("goods.goods_comment_assistant/lists",{params:e}),K=e=>a["a"].post("goods.goods_comment_assistant/add",e),Q=e=>a["a"].get("/goods.goods_activity/lists",{params:e}),R=e=>a["a"].post("/goods.goods_activity/status",e)},4791:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ls-release"},[t("el-form",{ref:"form",staticClass:"ls-form",attrs:{"label-width":"120px",model:e.form,rules:e.rules,size:"small"}},[t("div",{staticClass:"ls-card ls-release__header"},[t("el-page-header",{attrs:{content:e.id?"编辑商品":"新增商品"},on:{back:function(t){return e.$router.go(-1)}}})],1),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"ls-card ls-release__content m-t-16"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"基础设置",name:"basic"}},[t("add-basic",{attrs:{lists:e.otherList},on:{refresh:e.getGoodsOtherList},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),t("el-tab-pane",{attrs:{label:"价格库存",name:"price"}},[t("add-price",{model:{value:e.specData,callback:function(t){e.specData=t},expression:"specData"}})],1),t("el-tab-pane",{attrs:{label:"物流设置",name:"logistics"}},[t("add-logistics",{attrs:{lazy:"",lists:e.otherList},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),t("el-tab-pane",{attrs:{label:"商品详情",name:"details"}},[t("add-details",{attrs:{lazy:""},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),t("el-tab-pane",{attrs:{label:"销售设置",name:"sales"}},[t("add-sales",{attrs:{lazy:""},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)],1)],1),t("div",{staticClass:"ls-release__footer bg-white ls-fixed-footer"},[t("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},["basic"!=e.activeName?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.onNextStep(!1)}}},[e._v("上一步")]):e._e(),"sales"==e.activeName?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSave}},[e._v("保存")]):e._e(),"sales"!=e.activeName?t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.onNextStep}},[e._v("下一步")]):e._e()],1)])])],1)},l=[],i=s("9ab4"),o=s("1b40"),r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"add-basic"},[t("el-form-item",{attrs:{label:"商品编码",required:"",prop:"code"}},[t("el-input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入商品编码"},model:{value:e.value.code,callback:function(t){e.$set(e.value,"code",t)},expression:"value.code"}})],1),t("el-form-item",{attrs:{label:"商品名称",required:"",prop:"name"}},[t("el-input",{staticStyle:{width:"460px"},attrs:{type:"textarea",maxlength:"64",rows:"3","show-word-limit":"",placeholder:"请输入商品名称"},model:{value:e.value.name,callback:function(t){e.$set(e.value,"name",t)},expression:"value.name"}})],1),t("el-form-item",{attrs:{label:"商品分类",required:"",prop:"category_id"}},[t("el-cascader",{staticStyle:{width:"280px"},attrs:{options:e.categoryList,props:{multiple:!0,checkStrictly:!0,label:"name",value:"id",children:"sons",emitPath:!1},clearable:"",filterable:""},model:{value:e.value.category_id,callback:function(t){e.$set(e.value,"category_id",t)},expression:"value.category_id"}}),e._e(),t("span",{staticClass:"primary m-8"}),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),t("el-form-item",{attrs:{label:"商品轮播图",required:"",prop:"goods_image"}},[t("material-select",{attrs:{limit:5},model:{value:e.value.goods_image,callback:function(t){e.$set(e.value,"goods_image",t)},expression:"value.goods_image"}}),t("div",{staticClass:"muted"},[e._v(" 建议尺寸：800*800，可拖拽改变图片顺序，默认首张图为主图，最多上传5张 ")])],1),t("el-form-item",{attrs:{label:"添加视频"}},[t("el-switch",{model:{value:e.addVideo,callback:function(t){e.addVideo=t},expression:"addVideo"}})],1),e.addVideo?[t("el-form-item",{attrs:{label:"视频来源"}},[t("el-radio-group",{model:{value:e.value.video_source,callback:function(t){e.$set(e.value,"video_source",t)},expression:"value.video_source"}},[t("el-radio",{attrs:{label:1}},[e._v("视频素材库")]),t("el-radio",{attrs:{label:2}},[e._v("视频链接")])],1)],1),1==e.value.video_source?t("el-form-item",{attrs:{label:"选择视频",required:"",prop:"video"}},[t("material-select",{attrs:{type:"video"},model:{value:e.value.video,callback:function(t){e.$set(e.value,"video",t)},expression:"value.video"}}),t("div",{staticClass:"muted"},[e._v(" 手机端播放，建议时长：9-30秒，视频宽高比16:9 ")])],1):t("el-form-item",{attrs:{label:"视频链接",required:"",prop:"video"}},[t("el-input",{staticStyle:{width:"460px"},attrs:{placeholder:"请输入视频链接"},model:{value:e.value.video,callback:function(t){e.$set(e.value,"video",t)},expression:"value.video"}}),t("div",{staticClass:"muted"},[e._v(" 手机端播放，建议时长：9-30秒，视频宽高比16:9 ")])],1),t("el-form-item",{attrs:{label:"视频封面"}},[t("material-select",{model:{value:e.value.video_cover,callback:function(t){e.$set(e.value,"video_cover",t)},expression:"value.video_cover"}}),t("div",{staticClass:"muted"},[e._v("建议尺寸：800*800")])],1)]:e._e(),t("el-form-item",{attrs:{label:"商品品牌"}},[t("el-select",{attrs:{placeholder:"请选择品牌"},model:{value:e.value.brand_id,callback:function(t){e.$set(e.value,"brand_id",t)},expression:"value.brand_id"}},e._l(e.brandList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._e(),t("span",{staticClass:"primary m-8"}),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),t("el-form-item",{attrs:{label:"商品单位"}},[t("el-select",{attrs:{placeholder:"请选择单位"},model:{value:e.value.unit_id,callback:function(t){e.$set(e.value,"unit_id",t)},expression:"value.unit_id"}},e._l(e.unitList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._e(),t("span",{staticClass:"primary m-8"}),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),t("el-form-item",{attrs:{label:"供应商",required:"",prop:"supplier_id"}},[t("el-select",{attrs:{placeholder:"请选择供应商"},model:{value:e.value.supplier_id,callback:function(t){e.$set(e.value,"supplier_id",t)},expression:"value.supplier_id"}},e._l(e.supplierList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._e(),t("span",{staticClass:"primary m-8"}),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.$emit("refresh")}}},[e._v("刷新")])],1),t("el-form-item",{attrs:{label:"自定义分享海报"}},[t("material-select",{attrs:{limit:1},model:{value:e.value.poster,callback:function(t){e.$set(e.value,"poster",t)},expression:"value.poster"}}),t("div",{staticClass:"muted"},[e._v(" 建议尺寸：800*800 ")])],1)],2)},c=[],n=s("b3ad");let u=class extends o["e"]{constructor(){super(...arguments),this.addVideo=!1,this.form={},this.fileList=[]}videoChange(e){e&&(this.addVideo=!0)}get categoryList(){return this.lists.category_list||[]}get brandList(){return this.lists.brand_list||[]}get unitList(){return this.lists.unit_list||[]}get supplierList(){return this.lists.supplier_list||[]}created(){}};Object(i["a"])([Object(o["c"])()],u.prototype,"value",void 0),Object(i["a"])([Object(o["c"])({default:()=>({})})],u.prototype,"lists",void 0),Object(i["a"])([Object(o["f"])("value.video",{immediate:!0})],u.prototype,"videoChange",null),u=Object(i["a"])([Object(o["a"])({components:{MaterialSelect:n["a"]}})],u);var d=u,p=d,m=s("2877"),_=Object(m["a"])(p,r,c,!1,null,"38c2be3a",null),v=_.exports,g=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"add-price"},[t("el-form-item",{attrs:{label:"商品规格",required:""}},[t("el-radio-group",{model:{value:e.value.spec_type,callback:function(t){e.$set(e.value,"spec_type",t)},expression:"value.spec_type"}},[t("el-radio",{attrs:{label:1}},[e._v("单规格")]),t("el-radio",{attrs:{label:2}},[e._v("多规格")])],1)],1),t("specification",{directives:[{name:"show",rawName:"v-show",value:2==e.value.spec_type,expression:"value.spec_type == 2"}],model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:1==e.value.spec_type,expression:"value.spec_type == 1"}]},[t("el-form-item",{attrs:{label:"商品价格",required:"",prop:"spec_value_list[0].sell_price",rules:[{required:!0,message:"请输入商品金额",trigger:["blur","change"]}]}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.sell_price,callback:function(t){e.$set(e.value.specs_single,"sell_price",t)},expression:"value.specs_single.sell_price"}},[t("template",{slot:"append"},[e._v("元")])],2)],1),t("el-form-item",{attrs:{label:"划线价",required:"",prop:"spec_value_list[0].lineation_price",rules:[{required:!0,message:"请输入划线价",trigger:["blur","change"]}]}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.lineation_price,callback:function(t){e.$set(e.value.specs_single,"lineation_price",t)},expression:"value.specs_single.lineation_price"}},[t("template",{slot:"append"},[e._v("元")])],2)],1),t("el-form-item",{attrs:{label:"成本价",required:"",prop:"spec_value_list[0].cost_price",rules:[{required:!0,message:"请输入划成本价",trigger:["blur","change"]}]}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.cost_price,callback:function(t){e.$set(e.value.specs_single,"cost_price",t)},expression:"value.specs_single.cost_price"}},[t("template",{slot:"append"},[e._v("元")])],2)],1),t("el-form-item",{attrs:{label:"库存",required:"",prop:"spec_value_list[0].stock",rules:[{required:!0,message:"请输入库存",trigger:["blur","change"]}]}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.stock,callback:function(t){e.$set(e.value.specs_single,"stock",t)},expression:"value.specs_single.stock"}})],1),t("el-form-item",{attrs:{label:"体积"}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.volume,callback:function(t){e.$set(e.value.specs_single,"volume",t)},expression:"value.specs_single.volume"}})],1),t("el-form-item",{attrs:{label:"重量"}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.weight,callback:function(t){e.$set(e.value.specs_single,"weight",t)},expression:"value.specs_single.weight"}})],1),t("el-form-item",{attrs:{label:"条码"}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.specs_single.bar_code,callback:function(t){e.$set(e.value.specs_single,"bar_code",t)},expression:"value.specs_single.bar_code"}})],1)],1)],1)},b=[],f=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"specification"},[t("el-form-item",{attrs:{label:""}},[e._l(e.sepcItem,(function(s,a){return t("div",{key:a,staticClass:"spec-item flex p-16 m-b-16 col-top ls-del-wrap"},[t("div",{staticClass:"spec-item__label m-r-10 flex-none"},[e._v("规格名")]),t("div",{staticClass:"spec-item__content"},[t("div",[t("el-input",{staticStyle:{width:"240px"},attrs:{maxlength:"10","show-word-limit":""},model:{value:s.name,callback:function(t){e.$set(s,"name",t)},expression:"item.name"}}),t("el-checkbox",{staticClass:"m-l-16",on:{change:function(t){return e.addImage(a,t)}},model:{value:s.has_image,callback:function(t){e.$set(s,"has_image",t)},expression:"item.has_image"}},[e._v("添加规格图片")])],1),t("div",{staticClass:"flex flex-wrap col-top"},[e._l(s.spec_list,(function(l,i){return t("div",{key:i,staticClass:"m-r-10 m-t-10"},[t("div",{staticClass:"ls-del-wrap"},[t("el-input",{attrs:{maxlength:"20","show-word-limit":""},on:{blur:function(t){return e.checkValue(a,i)}},model:{value:l.value,callback:function(t){e.$set(l,"value",t)},expression:"sitem.value"}}),t("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return e.removeSpecValue(a,i)}}})],1),s.has_image?t("div",[t("material-select",{staticClass:"m-t-10",attrs:{size:"64"},model:{value:l.image,callback:function(t){e.$set(l,"image",t)},expression:"sitem.image"}})],1):e._e()])})),t("div",{staticClass:"m-t-10"},[t("el-button",{on:{click:function(t){return e.addSpecValue(a)}}},[e._v("+ 添加规格值")])],1)],2)]),t("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return e.removeSpecItem(a)}}})])})),t("div",[t("el-button",{attrs:{type:"primary",disabled:e.sepcItem.length>=3},on:{click:e.addSpecItem}},[e._v("添加规格项")]),t("span",{staticClass:"xs muted m-l-20"},[e._v("最多支持3个规格项")])],1)],2),e.tableData.length?t("el-form-item",{attrs:{label:"规格明细"}},[t("div",{staticClass:"ls-batch-setting m-b-16"},[t("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"sell_price")}}},[t("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置价格")])],1),t("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"lineation_price")}}},[t("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置划线价")])],1),t("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"cost_price")}}},[t("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置成本价")])],1),t("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"stock")}}},[t("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置库存")])],1),t("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"volume")}}},[t("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置体积")])],1),t("popover-input",{staticClass:"m-r-10",attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"weight")}}},[t("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置重量")])],1),t("popover-input",{attrs:{disabled:e.disabledBatchBtn},on:{confirm:function(t){return e.batchSetting(t,"bar_code")}}},[t("el-button",{attrs:{size:"small",disabled:e.disabledBatchBtn}},[e._v("设置条码")])],1)],1),t("u-table",{attrs:{data:e.tableData,"use-virtual":"",size:"small","max-height":"600","row-height":75,"tooltip-effect":"dark",border:!1,"big-data-checkbox":""},on:{"selection-change":e.selectDataChange}},[t("u-table-column",{attrs:{type:"selection",width:"55"}}),e._l(e.sepcItem,(function(s,a){return t("u-table-column",{key:a,attrs:{label:s.name,"min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.value[a])+" ")]}}],null,!0)})})),t("u-table-column",{attrs:{label:"规格图片","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(s){return[s.row.image?t("div",{staticClass:"spec-image ls-del-wrap m-t-8"},[t("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:s.row.image},on:{click:function(t){return e.addSpecImage(s.$index)}}}),t("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return e.removeSpecImage(s.$index)}}})],1):t("div",{staticClass:"add-spec-image flex row-center",on:{click:function(t){return e.addSpecImage(s.$index)}}},[t("i",{staticClass:"el-icon-plus"})])]}}],null,!1,77801995)}),t("u-table-column",{attrs:{label:"","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:s.row.sell_price,callback:function(t){e.$set(s.row,"sell_price",t)},expression:"scope.row.sell_price"}})]}}],null,!1,2595813538)},[t("template",{slot:"header"},[t("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 价格 ")])],2),t("u-table-column",{attrs:{"min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:s.row.lineation_price,callback:function(t){e.$set(s.row,"lineation_price",t)},expression:"scope.row.lineation_price"}})]}}],null,!1,806189223)},[t("template",{slot:"header"},[t("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 划线价 ")])],2),t("u-table-column",{attrs:{"min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:s.row.cost_price,callback:function(t){e.$set(s.row,"cost_price",t)},expression:"scope.row.cost_price"}})]}}],null,!1,2095880351)},[t("template",{slot:"header"},[t("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 成本价 ")])],2),t("u-table-column",{attrs:{"min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:s.row.stock,callback:function(t){e.$set(s.row,"stock",t)},expression:"scope.row.stock"}})]}}],null,!1,83199750)},[t("template",{slot:"header"},[t("span",{staticClass:"require-text"},[e._v("*")]),e._v(" 库存 ")])],2),t("u-table-column",{attrs:{label:"体积","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:s.row.volume,callback:function(t){e.$set(s.row,"volume",t)},expression:"scope.row.volume"}})]}}],null,!1,342924814)}),t("u-table-column",{attrs:{label:"重量","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:s.row.weight,callback:function(t){e.$set(s.row,"weight",t)},expression:"scope.row.weight"}})]}}],null,!1,2432239718)}),t("u-table-column",{attrs:{label:"条码","min-width":"130"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-input",{staticClass:"spec-input",attrs:{type:"number"},model:{value:s.row.bar_code,callback:function(t){e.$set(s.row,"bar_code",t)},expression:"scope.row.bar_code"}})]}}],null,!1,3777856101)})],2)],1):e._e(),t("material-select",{ref:"materialSelect",attrs:{"hidden-trigger":!0},on:{change:e.changeSpecImage}})],1)},h=[],y=(s("caad"),s("13d5"),s("d455")),x=s("6ddb");let k=class extends o["e"]{constructor(){super(...arguments),this.tableDataIndex=0,this.fileList=[],this.tableData=[],this.selectData=[]}get sepcItem(){return this.value.spec_value}get disabledBatchBtn(){return!this.selectData.length}defaultDataChange(e){this.tableData=e}sepcItemChange(e){this.setTableData()}tableDataChange(e){this.value.spec_value_list=e}addSpecItem(){this.sepcItem.length>=3||this.sepcItem.push({has_image:!1,id:"",name:"",spec_list:[{id:"",value:"",image:""}]})}removeSpecItem(e){if(this.sepcItem.length<=1)return this.$message.error("至少有一个规格项");this.sepcItem.splice(e,1)}addSpecValue(e){this.sepcItem[e].spec_list.push({id:"",value:"",image:""})}removeSpecValue(e,t){this.sepcItem[e].spec_list.splice(t,1)}addImage(e,t){this.sepcItem.forEach((s,a)=>{s.has_image=!1,e==a&&(s.has_image=t),s.spec_list.forEach(e=>{e.image=""})}),this.tableData.forEach(e=>{e.image=""})}checkValue(e,t){const s=this.sepcItem[e].spec_list[t].value;this.sepcItem[e].spec_list.forEach((a,l)=>{a.value&&t!=l&&a.value==s&&(this.sepcItem[e].spec_list[t].value="",this.$message({message:"已存在相同规格值",type:"warning"}))})}selectDataChange(e){this.selectData=e.map(e=>e.ids)}batchSetting(e,t){this.tableData.forEach(s=>{this.selectData.includes(s.ids)&&void 0!=s[t]&&(s[t]=e)})}setFields(e,t){let s=[e,t];s=s.filter(e=>void 0!==e.value);const a=Object(x["d"])(s.map(e=>e.ids)).join(),l=Object(x["d"])(s.map(e=>e.value));return{id:e.id?e.id:"",ids:a,value:l,spec_value_str:l.join(),image:e.image?e.image:t.image,sell_price:e.sell_price?e.sell_price:"",lineation_price:e.lineation_price?e.lineation_price:"",cost_price:e.cost_price?e.cost_price:"",stock:e.stock?e.stock:"",volume:e.volume?e.volume:"",weight:e.weight?e.weight:"",bar_code:e.bar_code?e.bar_code:""}}getTableData(e){return e=JSON.parse(JSON.stringify(e)),e.reduce((e,t)=>{const s=[];for(let a=0;a<e.length;a++){t.length||s.push(this.setFields(e[a],{}));for(let l=0;l<t.length;l++)t[l].ids=l,s.push(this.setFields(e[a],t[l]))}return s},[{}])}setTableData(){const{tableData:e,sepcItem:t}=this,s=t.map(e=>e.spec_list),a=this.getTableData(s),l=JSON.parse(JSON.stringify(e)),i={};l.forEach(e=>{void 0!==e.spec_value_str&&(i[e.spec_value_str]=e)}),console.log(a),this.tableData=a.map(e=>i[e.spec_value_str]?{...i[e.spec_value_str],value:e.value,ids:e.ids,image:e.image||i[e.spec_value_str].image}:e)}addSpecImage(e){this.tableDataIndex=e,this.$refs.materialSelect.showDialog()}changeSpecImage(e){this.tableData[this.tableDataIndex].image=e}removeSpecImage(e){this.tableData[e].image=""}};Object(i["a"])([Object(o["c"])()],k.prototype,"value",void 0),Object(i["a"])([Object(o["f"])("value.spec_value_list")],k.prototype,"defaultDataChange",null),Object(i["a"])([Object(o["f"])("sepcItem",{deep:!0,immediate:!0})],k.prototype,"sepcItemChange",null),Object(i["a"])([Object(o["f"])("tableData",{deep:!0})],k.prototype,"tableDataChange",null),k=Object(i["a"])([Object(o["a"])({components:{MaterialSelect:n["a"],PopoverInput:y["a"]}})],k);var w=k,C=w,O=(s("993a"),Object(m["a"])(C,f,h,!1,null,"100dc0fc",null)),j=O.exports;let S=class extends o["e"]{mounted(){}};Object(i["a"])([Object(o["c"])()],S.prototype,"value",void 0),Object(i["a"])([Object(o["c"])()],S.prototype,"specData",void 0),S=Object(i["a"])([Object(o["a"])({components:{MaterialSelect:n["a"],Specification:j}})],S);var $=S,D=$,I=(s("a27a"),Object(m["a"])(D,g,b,!1,null,"1e430584",null)),q=I.exports,B=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"add-details"},[t("div",{staticClass:"flex col-stretch"},[t("el-form-item",{staticClass:"form-edit",attrs:{label:"商品详情"}},[t("editor",{model:{value:e.value.content,callback:function(t){e.$set(e.value,"content",t)},expression:"value.content"}})],1),t("div",{staticClass:"preview m-l-30 flex-none"},[t("div",{staticClass:"title flex row-center"},[e._v("详情预览")]),t("el-scrollbar",{staticClass:"ls-scrollbar",staticStyle:{height:"600px"}},[t("div",{staticClass:"p-l-10 p-r-10",domProps:{innerHTML:e._s(e.value.content)}})])],1)],1),t("div",{staticClass:"flex col-stretch",staticStyle:{"margin-top":"20px"}},[t("el-form-item",{staticClass:"form-edit",attrs:{label:"素材"}},[t("editor",{model:{value:e.value.productMateria,callback:function(t){e.$set(e.value,"productMateria",t)},expression:"value.productMateria"}})],1)],1)])},N=[],L=s("a897");let z=class extends o["e"]{};Object(i["a"])([Object(o["c"])()],z.prototype,"value",void 0),z=Object(i["a"])([Object(o["a"])({components:{Editor:L["a"]}})],z);var P=z,V=P,E=(s("b23b"),Object(m["a"])(V,B,N,!1,null,"15a7be07",null)),M=E.exports,A=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"add-sales"},[t("el-form-item",{attrs:{label:"库存预警"}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.stock_warning,callback:function(t){e.$set(e.value,"stock_warning",t)},expression:"value.stock_warning"}}),t("div",{staticClass:"xs muted"},[e._v(" 设置最低库存预警值，不填或填0表示不做库存预警 ")])],1),t("el-form-item",{attrs:{label:"虚拟销量"}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.virtual_sales_num,callback:function(t){e.$set(e.value,"virtual_sales_num",t)},expression:"value.virtual_sales_num"}})],1),t("el-form-item",{attrs:{label:"浏览量"}},[t("el-input",{staticClass:"ls-input",attrs:{type:"number"},model:{value:e.value.click_num,callback:function(t){e.$set(e.value,"click_num",t)},expression:"value.click_num"}})],1),t("el-form-item",{attrs:{label:"商品状态",required:""}},[t("el-radio-group",{model:{value:e.value.status,callback:function(t){e.$set(e.value,"status",t)},expression:"value.status"}},[t("el-radio",{attrs:{label:1}},[e._v("立即上架")]),t("el-radio",{attrs:{label:0}},[e._v("放入仓库")])],1)],1)],1)},J=[];let F=class extends o["e"]{};Object(i["a"])([Object(o["c"])()],F.prototype,"value",void 0),F=Object(i["a"])([o["a"]],F);var G=F,T=G,H=Object(m["a"])(T,A,J,!1,null,"0fe2eb7a",null),K=H.exports,Q=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"add-logistics"},[t("el-form-item",{attrs:{label:"物流支持"}},[t("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:e.value.is_express,callback:function(t){e.$set(e.value,"is_express",t)},expression:"value.is_express"}},[e._v("快递发货")]),t("el-checkbox",{attrs:{"false-label":0,"true-label":1},model:{value:e.value.is_selffetch,callback:function(t){e.$set(e.value,"is_selffetch",t)},expression:"value.is_selffetch"}},[e._v("上门自提")])],1),t("el-form-item",{attrs:{label:"运费设置",required:""}},[t("el-radio-group",{model:{value:e.value.express_type,callback:function(t){e.$set(e.value,"express_type",t)},expression:"value.express_type"}},[t("el-radio",{attrs:{label:1}},[e._v("包邮")]),t("el-radio",{attrs:{label:2}},[e._v("统一运费")]),t("el-radio",{attrs:{label:3}},[e._v("运费模板")])],1)],1),2==e.value.express_type?t("el-form-item",{attrs:{prop:"express_money"}},[t("el-input",{model:{value:e.value.express_money,callback:function(t){e.$set(e.value,"express_money",t)},expression:"value.express_money"}},[t("template",{slot:"append"},[e._v("元")])],2)],1):e._e(),3==e.value.express_type?t("el-form-item",[t("el-select",{attrs:{placeholder:"请选择运费模板",prop:"express_template_id"},model:{value:e.value.express_template_id,callback:function(t){e.$set(e.value,"express_template_id",t)},expression:"value.express_template_id"}},e._l(e.freightList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e()],1)},R=[];let U=class extends o["e"]{get freightList(){return this.lists.freight_list||[]}};Object(i["a"])([Object(o["c"])()],U.prototype,"value",void 0),Object(i["a"])([Object(o["c"])({default:()=>({})})],U.prototype,"lists",void 0),U=Object(i["a"])([o["a"]],U);var W=U,X=W,Y=Object(m["a"])(X,Q,R,!1,null,null,null),Z=Y.exports,ee=s("14c6");let te=class extends o["e"]{constructor(){super(...arguments),this.loading=!0,this.activeName="basic",this.otherList={supplier_list:[],category_list:[],brand_list:[],unit_list:[],freight_list:[]},this.requireFields=[{fields:["code","name","category_id","goods_image"],activeName:"basic"},{fields:["spec_value_list[0].sell_price","spec_value_list[0].lineation_price","spec_value_list[0].stock"],activeName:"price"},{fields:["express_money","express_template_id"],activeName:"logistics"}],this.specData={spec_type:1,spec_value:[],spec_value_list:[],specs_single:{}},this.form={name:"",code:"",category_id:[],express_type:1,express_money:"",express_template_id:"",video_source:1,video_cover:"",video:"",supplier_id:"",brand_id:"",unit_id:"",poster:"",is_express:1,is_selffetch:1,delivery_type:1,goods_image:[],spec_value_list:[{id:"",image:"",sell_price:"",lineation_price:"",cost_price:"",stock:"",volume:"",weight:"",bar_code:""}],stock_warning:"",virtual_sales_num:"",click_num:"",status:0,content:"",productMateria:""},this.rules={name:[{required:!0,message:"请输入商品名称",trigger:["blur","change"]}],code:[{required:!0,message:"请输入商品编码",trigger:["blur","change"]}],category_id:[{type:"array",required:!0,message:"请选择分类",trigger:["blur","change"]}],goods_image:[{type:"array",required:!0,message:"请添加商品轮播图",trigger:["blur","change"]}],supplier_id:[{required:!0,message:"请选择供应商",trigger:["blur","change"]}],video:[{required:!0,message:"请添加视频",trigger:["blur","change"]}],express_money:[{required:!0,message:"请输入运费金额",trigger:["blur","change"]}],express_template_id:[{required:!0,message:"请选择运费模板",trigger:["blur","change"]}]}}formChange(e){console.log(e)}specDataChange(e){if(this.form.spec_type=e.spec_type,1==e.spec_type)return this.form.spec_value_list=[e.specs_single],void(this.form.spec_value=[]);this.form.spec_value_list=e.spec_value_list,this.form.spec_value=e.spec_value}getGoodsDetail(){Object(ee["z"])(this.id).then(e=>{this.initData(e),this.form=e})}onNextStep(e=!0){switch(this.activeName){case"basic":this.activeName="price";break;case"price":this.activeName=e?"logistics":"basic";break;case"logistics":this.activeName=e?"details":"price";break;case"details":this.activeName=e?"sales":"logistics";break;case"sales":this.activeName="details";break}}handleSave(){this.$refs.form.validate((e,t)=>{if(!e){const e=this.requireFields.find(e=>{for(let s of e.fields)if(t[s])return this.$message.error(t[s][0].message),!0});return e&&(this.activeName=e.activeName),!1}{const e=this.$loading({lock:!0,text:"保存中...",spinner:"el-icon-loading"}),t=this.id?Object(ee["A"])(this.form):Object(ee["q"])(this.form);t.then(()=>{this.$router.go(-1)}).finally(()=>{e.close()})}})}initData(e={}){const t=[{has_image:!1,id:"",name:"",spec_list:[{id:"",value:"",image:""}]}],s=[{id:"",image:"",sell_price:"",lineation_price:"",cost_price:"",stock:"",volume:"",weight:"",bar_code:""}],a={spec_value:e.spec_value||t,spec_value_list:e.spec_value_list||s,spec_type:e.spec_type||1,specs_single:s[0]};a.spec_value.forEach(e=>{e.has_image=!1,e.spec_list.forEach(e=>{e.image=""})}),1==e.spec_type&&(a.spec_value=t,a.specs_single=e.spec_value_list[0]),Object.assign(this.specData,a),this.loading=!1}getGoodsOtherList(){Object(ee["C"])({type:"all"}).then(e=>{this.otherList=e})}created(){this.id=this.$route.query.id,this.getGoodsOtherList(),this.id?this.getGoodsDetail():this.initData()}};Object(i["a"])([Object(o["f"])("form",{deep:!0})],te.prototype,"formChange",null),Object(i["a"])([Object(o["f"])("specData",{deep:!0})],te.prototype,"specDataChange",null),te=Object(i["a"])([Object(o["a"])({components:{AddBasic:v,AddPrice:q,AddDetails:M,AddSales:K,AddLogistics:Z}})],te);var se=te,ae=se,le=(s("5737"),Object(m["a"])(ae,a,l,!1,null,"9a85e4d6",null));t["default"]=le.exports},"4edb":function(e,t,s){},5737:function(e,t,s){"use strict";s("079d")},6124:function(e,t,s){},"993a":function(e,t,s){"use strict";s("4edb")},a27a:function(e,t,s){"use strict";s("6124")},b23b:function(e,t,s){"use strict";s("0ee2")}}]);
//# sourceMappingURL=chunk-32d0d4f6.f0b24294.js.map