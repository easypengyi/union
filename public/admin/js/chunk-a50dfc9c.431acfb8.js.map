{"version":3,"sources":["webpack:///./src/views/setting/system_maintain/updata.vue?d8b8","webpack:///./src/views/setting/system_maintain/updata.vue","webpack:///./src/views/setting/system_maintain/updata.vue?2834","webpack:///./src/views/setting/system_maintain/updata.vue?c948","webpack:///./src/views/setting/system_maintain/updata.vue?3050","webpack:///./src/api/setting/system_maintain/system_maintain.ts"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","slot","_v","directives","name","rawName","value","expression","staticStyle","pager","lists","scopedSlots","_u","key","fn","scope","$index","_e","_s","row","version_no","version_str","_l","add","item","index","optimize","repair","notice","able_update","on","$event","onOuterVisible","id","integral_package_link","toPackage","package_link","pc_package_link","uniapp_package_link","web_package_link","outerVisible","innerVisible","threeVisible","loading","isSecondaryDev","confirmUpdate","NotSecondaryDev","SecondaryDev","staticRenderFns","SystemUpdate","Vue","constructor","RequestPaging","timer","getSystemUpgradeLists","request","callback","apiSystemUpgradeLists","catch","$message","error","type","clearTimeout","setTimeout","apiSystemUpgradeDownloadPkg","update_type","then","res","window","open","line","location","href","systemUpgrade","apiSystemUpgrade","finally","created","Component","components","LsPagination","component","apiSystemlogList","params","get","apiSystemCacheClear","post","apiCrontabLists","apiCrontabAdd","apiCrontabDetail","apiCrontabEdit","apiCrontabDel","apiCrontabExpression","apiSrontabOperate"],"mappings":"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","file":"js/chunk-a50dfc9c.431acfb8.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=style&index=0&id=3d3d558c&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"system-update\"},[_c('div',{staticClass:\"ls-card\"},[_c('el-alert',{staticClass:\"xxl\",attrs:{\"type\":\"info\",\"closable\":false,\"show-icon\":\"\"}},[_c('template',{slot:\"title\"},[_c('div',{staticClass:\"iconSize\"},[_vm._v(\"温馨提示：\")]),_c('div',{staticClass:\"iconSize flex\"},[_vm._v(\"1.版本更新需要逐个版本更新，\"),_c('div',{staticClass:\"a-key\"},[_vm._v(\"更新前请备份好系统和数据库，更新成功后需要强制刷新站点；\")])]),_c('div',{staticClass:\"iconSize\"},[_vm._v(\"2.系统没有做二次开发，可以直接选择在线更新功能；\")]),_c('div',{staticClass:\"iconSize\"},[_vm._v(\"3.系统已做二次开发，进行了功能修改，请谨慎选择在线更新功能，推荐以更新包的形式手动更新；\")]),_c('div',{staticClass:\"iconSize\"},[_vm._v(\"4.由于更换新域名原因，1.3.1及以下版本，需修改server/app/adminapi/logic/settings/system/UpgradeLogic.php文件中的BASE_URL为https://server.likeshop.cn 否则系统更新列表会报错。\")])])],2)],1),_c('div',{staticClass:\"ls-card m-t-16\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(false),expression:\"false\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.pager.lists,\"size\":\"mini\",\"header-cell-style\":{'background':'#f5f8ff'}}},[_c('el-table-column',{attrs:{\"prop\":\"publish_time\",\"label\":\"发布日期\"}}),_c('el-table-column',{attrs:{\"label\":\"版本号\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"flex\"},[(scope.$index == 0)?_c('el-tag',{attrs:{\"size\":\"small\",\"type\":\"success\",\"effect\":\"plain\",\"round\":\"\"}},[_vm._v(\" new\")]):_vm._e(),_c('div',{staticClass:\"m-l-5\"},[_vm._v(_vm._s(scope.row.version_no))])],1),_c('div',{},[_vm._v(\" \"+_vm._s(scope.row.version_str)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"版本内容\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._l((scope.row.add),function(item,index){return _c('div',{},[_vm._v(\" \"+_vm._s(item)+\" \")])}),_vm._l((scope.row.optimize),function(item,index){return _c('div',{},[_vm._v(\" \"+_vm._s(item)+\" \")])}),_vm._l((scope.row.repair),function(item,index){return _c('div',{},[_vm._v(\" \"+_vm._s(item)+\" \")])})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"notice\",\"label\":\"注意事项\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return _vm._l((scope.row.notice),function(item,index){return _c('div',{key:index},[_vm._v(\" \"+_vm._s(item)+\" \")])})}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"200px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"operation flex flex-wrap\"},[(scope.row.able_update == 1)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.onOuterVisible(scope.row.id)}},slot:\"trigger\"},[_vm._v(\"一键更新 \")]):_vm._e(),(scope.row.integral_package_link)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 6)}},slot:\"trigger\"},[_vm._v(\"下载完整安装包 \")]):_vm._e(),(scope.row.package_link)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 2)}},slot:\"trigger\"},[_vm._v(\"下载服务端更新包\")]):_vm._e(),(scope.row.pc_package_link)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 3)}},slot:\"trigger\"},[_vm._v(\"下载pc端更新包\")]):_vm._e(),(scope.row.uniapp_package_link)?_c('el-button',{staticClass:\"m-r-10\",attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 4)}},slot:\"trigger\"},[_vm._v(\"下载uniapp更新包\")]):_vm._e(),(scope.row.web_package_link)?_c('el-button',{attrs:{\"slot\":\"trigger\",\"type\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.toPackage(scope.row.id, 5)}},slot:\"trigger\"},[_vm._v(\" 下载后台前端更新包\")]):_vm._e()],1)]}}])})],1)],1),_c('el-dialog',{staticClass:\"dialog\",attrs:{\"title\":\"\",\"visible\":_vm.outerVisible,\"width\":\"30%\",\"top\":\"40vh\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.outerVisible=$event}}},[_c('el-dialog',{staticClass:\"dialogTwo\",attrs:{\"width\":\"30%\",\"top\":\"40vh\",\"visible\":_vm.innerVisible,\"append-to-body\":\"\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.innerVisible=$event}}},[_c('el-dialog',{staticClass:\"dialogThree\",attrs:{\"width\":\"30%\",\"top\":\"40vh\",\"visible\":_vm.threeVisible,\"append-to-body\":\"\",\"center\":\"\",\"close-on-click-modal\":false,\"close-on-press-escape\":false},on:{\"update:visible\":function($event){_vm.threeVisible=$event}}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"height\":\"200px\",\"text-align\":\"center\"},attrs:{\"element-loading-text\":\"切勿关闭窗口或刷新页面\"}},[_c('div',[_vm._v(\"系统更新中，更新完毕后会自行刷新页面\")])])]),(_vm.isSecondaryDev == false)?_c('div',{staticStyle:{\"height\":\"200px\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" 一键更新导致的系统问题，欢迎前往社区反馈，请做好系统备份！ \")]),_c('div',{staticClass:\"btn-div flex-col\",staticStyle:{\"width\":\"160px\",\"margin\":\"auto\"}},[_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.confirmUpdate}},[_vm._v(\"确定更新\")]),_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.innerVisible = false}}},[_vm._v(\" 取消更新\")])],1)]):_vm._e(),(_vm.isSecondaryDev == true)?_c('div',{staticStyle:{\"height\":\"200px\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('div',[_vm._v(\"二次开发后请谨慎使用一键更新功能！\")]),_c('div',[_vm._v(\"二次开发后一键更新导致的系统问题，官方无法处理，请做好系统备份！\")])]),_c('div',{staticClass:\"btn-div flex-col\",staticStyle:{\"width\":\"160px\",\"margin\":\"auto\"}},[_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.confirmUpdate}},[_vm._v(\"确定更新\")]),_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.innerVisible = false}}},[_vm._v(\" 下载更新包，手动更新\")]),_c('el-button',{staticStyle:{\"margin-top\":\"15px\",\"margin-left\":\"0\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.innerVisible = false}}},[_vm._v(\" 取消更新\")])],1)]):_vm._e()],1),_c('div',{staticStyle:{\"height\":\"200px\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\" 系统是否进行二次开发 \")]),_c('div',{staticClass:\"flex-col\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.NotSecondaryDev}},[_vm._v(\"未做二次开发，直接更新\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.SecondaryDev}},[_vm._v(\"已做二次开发\")]),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.outerVisible = false}}},[_vm._v(\"取消更新\")])],1)])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\timport {\n\t\tComponent,\n\t\tVue\n\t} from \"vue-property-decorator\";\n\timport {\n\t\tapiSystemUpgradeLists,\n\t\tapiSystemUpgradeDownloadPkg,\n\t\tapiSystemUpgrade,\n\t} from \"@/api/setting/system_maintain/system_maintain\"\n\timport {\n\t\tRequestPaging,\n\t\tdebounce,\n\t\tthrottle,\n\t} from \"@/utils/util\"\n\timport LsPagination from \"@/components/ls-pagination.vue\"\n\t@Component({\n\t\tcomponents: {\n\t\t\tLsPagination\n\t\t},\n\t})\n\texport default class SystemUpdate extends Vue {\n\t\t/** S Data **/\n\t\t// 外层dialog\n\t\touterVisible = false\n\t\t// 第二层dialog\n\t\tinnerVisible = false\n\t\t// 第三层dialog\n\t\tthreeVisible = false\n\t\t// 是否二次开发\n\t\tisSecondaryDev = true\n\n\t\t// 加载动画 \n\t\tloading = true\n\n\t\tpager: RequestPaging = new RequestPaging()\n\n\t\t// 点击一键更新按钮的版本id\n\t\tid = 0\n\n\t\ttimer = 0\n\t\t/** E Data **/\n\n\t\t/** S Methods **/\n\n\t\t//系统更新列表\n\t\tgetSystemUpgradeLists() {\n\t\t\t// 分页请求\n\t\t\tthis.pager\n\t\t\t\t.request({\n\t\t\t\t\tcallback: apiSystemUpgradeLists,\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.$message.error(\"数据请求失败，刷新重载\")\n\t\t\t\t})\n\t\t}\n\n\t\t// // 下载完整安装包跳转页面\n\t\t// toIntegralPackage(url: any) {\n\t\t// \twindow.open(url, '_blank')\n\t\t// }\n\n\t\t// 非完整安装包下载\n\t\ttoPackage(id: any, type: any) {\n\t\t\t\n\t\t\tif (this.timer) {\n\t\t\t\tclearTimeout(this.timer)\n\t\t\t}\n\t\t\t\t\n\t\t\tthis.timer = setTimeout(() => {\n\t\t\t\t// console.log(\"防抖执行,这里就是你需要执行的操作\")\n\t\t\t\tapiSystemUpgradeDownloadPkg({\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tupdate_type: type, // 2:服务端更新包下载，3:pc端更新包下载，4:uniapp更新包下载,5:后台前端更新包下载, 6:完整包更新\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t// console.log(res)\n\t\t\t\t\t\t// console.log(res.line)\n\t\t\t\t\t\tif(type == 6) {\n\t\t\t\t\t\t\twindow.open(res.line, '_blank')\n\t\t\t\t\t\t}else {\n\t\t\t\t\t\t\twindow.location.href = res.line\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t}, 500)\n\t\t}\n\n\n\t\t// 一键更新请求\n\t\tsystemUpgrade() {\n\t\t\tapiSystemUpgrade({\n\t\t\t\t\tid: this.id,\n\t\t\t\t\tupdate_type: 1, // 1:一键更新\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tthis.getSystemUpgradeLists()\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\t// this.loading = false\n\t\t\t\t\tthis.threeVisible = false\n\t\t\t\t\tthis.innerVisible = false\n\t\t\t\t\tthis.outerVisible = false\n\t\t\t\t})\n\t\t}\n\n\t\t// 点击一键更新按钮\n\t\tonOuterVisible(id: any) {\n\t\t\tthis.outerVisible = true\n\t\t\tthis.id = id\n\t\t}\n\n\t\t// 未做二次开发\n\t\tNotSecondaryDev() {\n\t\t\tthis.isSecondaryDev = false\n\t\t\tthis.innerVisible = true\n\t\t}\n\t\t// 已做二次开发\n\t\tSecondaryDev() {\n\t\t\tthis.isSecondaryDev = true\n\t\t\tthis.innerVisible = true\n\t\t}\n\n\t\t// 点击确定更新\n\t\tconfirmUpdate() {\n\t\t\tthis.threeVisible = true\n\t\t\tthis.systemUpgrade()\n\t\t}\n\n\t\t/** E Methods **/\n\n\t\t/** S Life Cycle **/\n\t\tcreated() {\n\t\t\tthis.getSystemUpgradeLists()\n\t\t}\n\t\t/** E Life Cycle **/\n\t}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./updata.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./updata.vue?vue&type=template&id=3d3d558c&scoped=true&\"\nimport script from \"./updata.vue?vue&type=script&lang=ts&\"\nexport * from \"./updata.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./updata.vue?vue&type=style&index=0&id=3d3d558c&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d3d558c\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/plugins/axios'\nimport * as Interface from '@/api/setting/system_maintain/system_maintain.d.ts'\n\n/** S 系统维护 **/\n// 获取系统日志列表\nexport const apiSystemlogList = (params: Interface.Journal_Req): Promise<Interface.Journal_Res> =>\n    request.get('/settings.system.log/lists', {params})\n\t\n\n// 清除系统缓存\nexport const apiSystemCacheClear = () => request.post('/settings.system.cache/clear')\n\n// 定时任务列表\nexport const apiCrontabLists = () => request.get('/crontab.crontab/lists')\n\n// 添加定时任务\nexport const apiCrontabAdd = (params: any) => request.post('/crontab.crontab/add', params)\n\n// 查看详情\nexport const apiCrontabDetail = (params: any) => request.get('/crontab.crontab/detail', {params})\n\n// 编辑定时任务\nexport const apiCrontabEdit = (params: any) => request.post('/crontab.crontab/edit', params)\n\n// 删除定时任务\nexport const apiCrontabDel = (params: any) => request.post('/crontab.crontab/delete', params)\n\n// 获取规则执行时间\nexport const apiCrontabExpression = (params: any) => request.get('/crontab.crontab/expression', {params})\n\n// 操作定时任务\nexport const apiSrontabOperate = (params: any) => request.post('/crontab.crontab/operate', params)\n\n/** E 系统维护 **/\n\n/** S 系统更新 **/\n// 系统更新列表\nexport const apiSystemUpgradeLists = (params: any) => request.get('/settings.system.upgrade/lists')\n\n// 下载更新包\nexport const apiSystemUpgradeDownloadPkg = (params: any) => request.post('/settings.system.upgrade/downloadPkg', params)\n\n// 一键更新\nexport const apiSystemUpgrade = (params: any) => request.post('/settings.system.upgrade/upgrade', params)\n/** E 系统更新 **/\n"],"sourceRoot":""}