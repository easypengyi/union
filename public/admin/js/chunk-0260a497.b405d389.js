(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0260a497"],{"3a1b":function(t,i,e){"use strict";e("be5f")},4072:function(t,i,e){"use strict";e.d(i,"f",(function(){return a})),e.d(i,"z",(function(){return r})),e.d(i,"A",(function(){return o})),e.d(i,"m",(function(){return n})),e.d(i,"l",(function(){return d})),e.d(i,"k",(function(){return u})),e.d(i,"n",(function(){return l})),e.d(i,"u",(function(){return b})),e.d(i,"t",(function(){return c})),e.d(i,"c",(function(){return _})),e.d(i,"d",(function(){return m})),e.d(i,"e",(function(){return f})),e.d(i,"v",(function(){return p})),e.d(i,"y",(function(){return h})),e.d(i,"b",(function(){return g})),e.d(i,"a",(function(){return v})),e.d(i,"g",(function(){return w})),e.d(i,"i",(function(){return x})),e.d(i,"j",(function(){return D})),e.d(i,"s",(function(){return $})),e.d(i,"q",(function(){return y})),e.d(i,"r",(function(){return k})),e.d(i,"o",(function(){return C})),e.d(i,"p",(function(){return S})),e.d(i,"w",(function(){return z})),e.d(i,"h",(function(){return q})),e.d(i,"x",(function(){return j}));var s=e("f175");const a=()=>s["a"].get("/distribution.distribution_data/dataCenter"),r=()=>s["a"].get("/distribution.distribution_data/topMemberEarnings"),o=()=>s["a"].get("/distribution.distribution_data/topMemberFans"),n=t=>s["a"].get("/distribution.distribution_goods/lists",{params:t}),d=t=>s["a"].post("/distribution.distribution_goods/join",t),u=t=>s["a"].get("/distribution.distribution_goods/detail",{params:t}),l=t=>s["a"].post("/distribution.distribution_goods/set",t),b=t=>s["a"].get("/distribution.distribution_member/lists",{params:t}),c=t=>s["a"].get("/distribution.distribution_apply/detail",{params:t}),_=t=>s["a"].get("/distribution.distribution_apply/lists",{params:t}),m=t=>s["a"].post("/distribution.distribution_apply/pass",t),f=t=>s["a"].post("/distribution.distribution_apply/refuse",t),p=t=>s["a"].post("/distribution.distribution_member/open",t),h=t=>s["a"].post("/distribution.distribution_member/freeze",t),g=t=>s["a"].get("/distribution.distribution_member/adjustLevelInfo",{params:t}),v=t=>s["a"].post("/distribution.distribution_member/adjustLevel",t),w=t=>s["a"].get("/distribution.distribution_member/detail",{params:t}),x=t=>s["a"].get("/distribution.distribution_member/getFans",{params:t}),D=t=>s["a"].get("/distribution.distribution_member/getFansLists",{params:t}),$=t=>s["a"].get("/distribution.distribution_level/lists",t),y=t=>s["a"].get("/distribution.distribution_level/detail",{params:t}),k=t=>s["a"].post("/distribution.distribution_level/edit",t),C=t=>s["a"].post("/distribution.distribution_level/add",t),S=t=>s["a"].post("/distribution.distribution_level/delete",t),z=t=>s["a"].get("/distribution.distribution_order_goods/lists",{params:t}),q=t=>s["a"].get("/distribution.distribution_config/getConfig",{params:t}),j=t=>s["a"].post("/distribution.distribution_config/setConfig",t)},a4f6:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{staticClass:"ls-coupon-edit"},[i("div",{staticClass:"ls-card ls-coupon-edit__header"},[i("el-page-header",{attrs:{content:"设置分销佣金"},on:{back:function(i){return t.$router.go(-1)}}})],1),i("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10"},[i("div",{staticClass:"nr weight-500 m-b-20"},[t._v("商品信息")]),i("el-form",{ref:"distributionData",attrs:{model:t.distributionData,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"商品编号",prop:"",required:""}},[[t._v(" "+t._s(t.distributionData.id)+" ")]],2),i("el-form-item",{attrs:{label:"商品图片",prop:"",required:""}},[[i("el-image",{staticClass:"flex-none",staticStyle:{width:"58px",height:"58px"},attrs:{src:t.distributionData.image}})]],2),i("el-form-item",{attrs:{label:"商品名称",prop:"",required:""}},[[t._v(" "+t._s(t.distributionData.name)+" ")]],2)],1)],1),i("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10 m-b-50"},[i("div",{staticClass:"nr weight-500 m-b-20"},[t._v("佣金设置")]),i("el-form",{ref:"distributionData",attrs:{model:t.distributionData,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"分销状态",required:""}},[i("el-radio",{attrs:{label:1},model:{value:t.distributionData.is_distribution,callback:function(i){t.$set(t.distributionData,"is_distribution",i)},expression:"distributionData.is_distribution"}},[t._v("参与分销")]),i("el-radio",{attrs:{label:0},model:{value:t.distributionData.is_distribution,callback:function(i){t.$set(t.distributionData,"is_distribution",i)},expression:"distributionData.is_distribution"}},[t._v("不参与分销")]),i("span",{staticClass:"desc"},[t._v("是否参与分销，选择不参与分销将不产生分销佣金")])],1),i("el-form-item",{attrs:{label:"佣金规则",required:""}},[i("el-radio",{attrs:{label:1},model:{value:t.distributionData.rule,callback:function(i){t.$set(t.distributionData,"rule",i)},expression:"distributionData.rule"}},[t._v("默认分销等级佣金规则")]),i("el-radio",{attrs:{label:2},model:{value:t.distributionData.rule,callback:function(i){t.$set(t.distributionData,"rule",i)},expression:"distributionData.rule"}},[t._v("单独设置")]),i("el-table",{ref:"paneTable",staticClass:"m-t-24",staticStyle:{width:"100%"},attrs:{"cell-style":{background:"#fff"},data:t.distributionData.ratio_data,size:"mini"}},[i("el-table-column",{attrs:{prop:"name_desc",label:"分销等级","min-width":"140"}}),i("el-table-column",{attrs:{label:"商品规格","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:t.row.items,"show-header":!1,size:"mini"}},[i("el-table-column",{attrs:{prop:"spec_value_str"}})],1)]}}])}),i("el-table-column",{attrs:{label:"价格","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:t.row.items,"show-header":!1,size:"mini"}},[i("el-table-column",{attrs:{prop:"sell_price"}})],1)]}}])}),i("el-table-column",{attrs:{label:"自购佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:e.row.items,"show-header":!1,size:"mini"}},[i("el-table-column",{attrs:{prop:"self_ratio"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==t.distributionData.rule?i("span",[t._v(t._s(s.row.self_ratio))]):i("el-input",{staticStyle:{width:"50px",height:"10px"},attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[e.$index].items[s.$index].self_ratio,callback:function(i){t.$set(t.distributionData.ratio_data[e.$index].items[s.$index],"self_ratio",i)},expression:"distributionData.ratio_data[scope.$index].items[scopes.$index].self_ratio"}})]}}],null,!0)})],1)]}}])}),i("el-table-column",{attrs:{label:"一级佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:e.row.items,"show-header":!1,"highlight-current-row":!1,size:"mini"}},[i("el-table-column",{attrs:{prop:"first_ratio"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==t.distributionData.rule?i("span",[t._v(t._s(s.row.first_ratio))]):i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[e.$index].items[s.$index].first_ratio,callback:function(i){t.$set(t.distributionData.ratio_data[e.$index].items[s.$index],"first_ratio",i)},expression:"distributionData.ratio_data[scope.$index].items[scopes.$index].first_ratio"}})]}}],null,!0)})],1)]}}])}),i("el-table-column",{attrs:{label:"二级佣金比例(%)","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-table",{staticClass:"tab-item",staticStyle:{width:"100%"},attrs:{data:e.row.items,"show-header":!1,size:"mini"}},[i("el-table-column",{attrs:{prop:"second_ratio"},scopedSlots:t._u([{key:"default",fn:function(s){return[1==t.distributionData.rule?i("span",[t._v(t._s(s.row.second_ratio))]):i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.distributionData.ratio_data[e.$index].items[s.$index].second_ratio,callback:function(i){t.$set(t.distributionData.ratio_data[e.$index].items[s.$index],"second_ratio",i)},expression:"distributionData.ratio_data[scope.$index].items[scopes.$index].second_ratio"}})]}}],null,!0)})],1)]}}])})],1)],1)],1)],1),i("div",{staticClass:"ls-coupon-edit__footer bg-white ls-fixed-footer"},[i("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},[i("el-button",{attrs:{size:"small"},on:{click:function(i){return t.$router.go(-1)}}},[t._v("取消")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(i){return t.submit("distributionData")}}},[t._v("保存")])],1)])])},a=[],r=e("9ab4"),o=e("1b40"),n=e("4072");let d=class extends o["e"]{constructor(){super(...arguments),this.distributionData={ratio_data:[{level_id:1,item_id:1,self_ratio:10,first_ratio:10,second_ratio:10},{level_id:1,item_id:2,self_ratio:20,first_ratio:20,second_ratio:20},{level_id:4,item_id:1,self_ratio:30,first_ratio:30,second_ratio:30}],id:"",goods_id:"",rule:1,is_distribution:[]},this.goodsSelectData=[],this.rules={name:[{required:!0,message:"请输入优惠券名称",trigger:["blur","change"]}],money:[{required:!0,message:"请输入优惠券面额",trigger:["blur","change"]}],send_total:[{required:!0,message:"请输入发放数量",trigger:["blur","change"]}]}}submit(t){const i=this.$refs[t];i.validate(t=>{t&&this.couponAdd()})}base(t){let i={goods_id:t.id||t.goods_id,is_distribution:t.is_distribution,rule:t.rule,ratio_data:[]};return Object.keys(t.ratio_data).map((e,s)=>{for(let a=0;a<t.ratio_data[s].items.length;a++){const e=t.ratio_data[s].items[a];console.log(e),i.ratio_data.push({level_id:e.level_id,item_id:e.item_id,self_ratio:e.self_ratio,first_ratio:e.first_ratio,second_ratio:e.second_ratio})}}),i}couponAdd(){const t=this.base(this.distributionData);Object(n["n"])({...t}).then(t=>{this.$message.success("设置成功!"),setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{this.$message.error("设置失败!")})}getCouponInfo(){Object(n["k"])({id:this.id}).then(t=>{this.distributionData={...t}})}created(){this.id=this.$route.query.id,this.id&&this.getCouponInfo()}};d=Object(r["a"])([o["a"]],d);var u=d,l=u,b=(e("3a1b"),e("2877")),c=Object(b["a"])(l,s,a,!1,null,"e3380100",null);i["default"]=c.exports},be5f:function(t,i,e){}}]);
//# sourceMappingURL=chunk-0260a497.b405d389.js.map