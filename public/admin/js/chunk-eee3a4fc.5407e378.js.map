{"version":3,"sources":["webpack:///./src/views/setting/storage/storage.vue","webpack:///./src/views/setting/storage/storage.vue?3713","webpack:///./src/views/setting/storage/storage.vue?5f86","webpack:///./src/views/setting/storage/storage.vue?61ca","webpack:///./src/api/setting/storage/storage.ts","webpack:///./src/views/setting/storage/storage.vue?9393"],"names":["render","_vm","this","_c","_self","_setupProxy","staticClass","attrs","on","$event","$router","go","engine","_e","ref","form","formRules","_v","model","value","bucket","callback","$$v","$set","expression","access_key","secret_key","domain","region","status","staticStyle","onSubmit","staticRenderFns","Storage","Vue","constructor","required","message","trigger","$refs","formRef","validate","valid","apiStorageSetup","then","res","setTimeout","catch","console","log","getStorageIndex","apiStorageIndex","created","query","$route","Component","components","component","apiStorageList","request","get","params","post","apiStorageChange"],"mappings":"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","file":"js/chunk-eee3a4fc.5407e378.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"storage-setting\"},[_c('div',{staticClass:\"ls-card\"},[_c('el-page-header',{attrs:{\"content\":\"存储设置\"},on:{\"back\":function($event){return _vm.$router.go(-1)}}})],1),(_vm.engine !== 'local')?_c('div',{staticClass:\"ls-card m-t-16\"},[(_vm.engine == 'qiniu')?_c('el-alert',{attrs:{\"title\":\"温馨提示：切换七牛云存储后，素材库需要重新上传至七牛云。\",\"type\":\"info\",\"closable\":false,\"show-icon\":\"\"}}):_vm._e(),(_vm.engine == 'aliyun')?_c('el-alert',{attrs:{\"title\":\"温馨提示：切换阿里云OSS后，素材库需要重新上传至阿里云OSS。\",\"type\":\"info\",\"closable\":false,\"show-icon\":\"\"}}):_vm._e(),(_vm.engine == 'qcloud')?_c('el-alert',{attrs:{\"title\":\"温馨提示：切换腾讯云OSS后，素材库需要重新上传至腾讯云OSS。\",\"type\":\"info\",\"closable\":false,\"show-icon\":\"\"}}):_vm._e()],1):_vm._e(),_c('el-form',{ref:\"formRef\",attrs:{\"model\":_vm.form,\"rules\":_vm.formRules,\"label-width\":\"240px\",\"size\":\"small\"}},[_c('div',{staticClass:\"ls-card m-t-16\"},[_c('div',{staticClass:\"card-content m-t-24\"},[_c('el-form-item',{attrs:{\"label\":\"存储方式\"}},[(_vm.engine == 'local')?_c('div',[_vm._v(\"本地存储\")]):_vm._e(),(_vm.engine == 'qiniu')?_c('div',[_vm._v(\"七牛云存储\")]):_vm._e(),(_vm.engine == 'aliyun')?_c('div',[_vm._v(\"阿里云OSS\")]):_vm._e(),(_vm.engine == 'qcloud')?_c('div',[_vm._v(\"腾讯云OSS\")]):_vm._e(),(_vm.engine == 'local')?_c('div',{staticClass:\"muted xs m-r-16\"},[_vm._v(\" 本地存储方式不需要配置其他参数 \")]):_vm._e()])],1),(_vm.engine !== 'local')?_c('div',[_c('el-form-item',{attrs:{\"label\":\" 存储空间名称(Bucket)\",\"prop\":\"bucket\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入存储空间名称(Bucket)\"},model:{value:(_vm.form.bucket),callback:function ($$v) {_vm.$set(_vm.form, \"bucket\", $$v)},expression:\"form.bucket\"}})],1),_c('el-form-item',{attrs:{\"label\":\"ACCESS_KEY（AK）\",\"prop\":\"access_key\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入ACCESS_KEY\"},model:{value:(_vm.form.access_key),callback:function ($$v) {_vm.$set(_vm.form, \"access_key\", $$v)},expression:\"form.access_key\"}})],1),_c('el-form-item',{attrs:{\"label\":\"SECRET_KEY（SK）\",\"prop\":\"secret_key\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入SECRET_KEY\"},model:{value:(_vm.form.secret_key),callback:function ($$v) {_vm.$set(_vm.form, \"secret_key\", $$v)},expression:\"form.secret_key\"}})],1),_c('el-form-item',{attrs:{\"label\":\"空间域名（Domain）\",\"prop\":\"domain\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入空间域名\"},model:{value:(_vm.form.domain),callback:function ($$v) {_vm.$set(_vm.form, \"domain\", $$v)},expression:\"form.domain\"}}),_c('div',{staticClass:\"muted xs m-r-16\"},[_vm._v(\" 请补全http://或https://，例如https://static.cloud.com \")])],1),(_vm.engine == 'qcloud')?_c('el-form-item',{attrs:{\"label\":\"REGION\",\"prop\":\"region\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入region\"},model:{value:(_vm.form.region),callback:function ($$v) {_vm.$set(_vm.form, \"region\", $$v)},expression:\"form.region\"}})],1):_vm._e()],1):_vm._e(),_c('el-form-item',{attrs:{\"label\":\"状态\",\"prop\":\"status\"}},[_c('el-radio-group',{staticClass:\"m-r-16\",model:{value:(_vm.form.status),callback:function ($$v) {_vm.$set(_vm.form, \"status\", $$v)},expression:\"form.status\"}},[_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"停用·\")]),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"启用\")])],1)],1)],1)]),_c('div',{staticClass:\"bg-white ls-fixed-footer\"},[_c('div',{staticClass:\"row-center flex\",staticStyle:{\"height\":\"100%\"}},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit()}}},[_vm._v(\"保存\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\timport {\n\t\tVue,\n\t\tComponent\n\t} from 'vue-property-decorator'\n\timport {\n\t\tapiStorageIndex,\n\t\tapiStorageSetup,\n\t} from '@/api/setting/storage/storage'\n\t@Component({\n\t\tcomponents: {},\n\t})\n\texport default class Storage extends Vue {\n\t\t/** S Data **/\n\t\t// 存储方式\n\t\tengine = \"\" // 存储引擎名称：local-本地，qiniu-七牛云,aliyun-阿里云OSS,qcloud-腾讯云OS:\n\t\tform = {\n\t\t\tbucket: '',\n\t\t\taccess_key: '',\n\t\t\tsecret_key: '',\n\t\t\tdomain: '',\n\t\t\tregion: '', // 腾讯云需要\n\t\t\tstatus: 0,\n\t\t}\n\n\t\tformRules = {\n\t\t\tbucket: [{\n\t\t\t\trequired: true,\n\t\t\t\tmessage: '请输入存储空间名称',\n\t\t\t\ttrigger: 'blur'\n\t\t\t}],\n\t\t\taccess_key: [{\n\t\t\t\trequired: true,\n\t\t\t\tmessage: '请输入ACCESS_KEY',\n\t\t\t\ttrigger: 'blur'\n\t\t\t}],\n\t\t\tsecret_key: [{\n\t\t\t\trequired: true,\n\t\t\t\tmessage: '请输入SECRET_KEY',\n\t\t\t\ttrigger: 'blur'\n\t\t\t}],\n\t\t\tdomain: [{\n\t\t\t\trequired: true,\n\t\t\t\tmessage: '请输入空间域名',\n\t\t\t\ttrigger: 'blur'\n\t\t\t}],\n\t\t\tregion: [{\n\t\t\t\trequired: true,\n\t\t\t\tmessage: '请输入REGION',\n\t\t\t\ttrigger: 'blur'\n\t\t\t}],\n\t\t}\n\t\t$refs!: {\n\t\t\tformRef: any\n\t\t}\n\t\t/** E Data **/\n\n\t\t/** S Methods **/\n\t\tonSubmit() {\n\t\t\t// 验证表单格式是否正确\n\t\t\tthis.$refs.formRef.validate((valid: boolean): any => {\n\t\t\t\tif (!valid) return;\n\t\t\t\t// 请求发送\n\t\t\t\t apiStorageSetup({\n\t\t\t\t\t...this.form,\n\t\t\t\t\tengine: this.engine\n\t\t\t\t})\n\t\t\t\t.then((res: any) => {\n\t\t\t\t\tsetTimeout(() => this.$router.go(-1), 500)\t\t\t\n\t\t\t\t\t//this.$message.success('保存成功!')\n\t\t\t\t})\n\t\t\t\t.catch((res: any) => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\t//this.$message.error('保存失败!')\n\t\t\t\t})\n\t\t\t\t// setTimeout(()=> {\n\t\t\t\t// \tthis.getStorageIndex()\n\t\t\t\t// }, 100)\n\t\t\t})\n\t\t}\n\n\t\t// 获取引擎配置\n\t\tgetStorageIndex() {\n\t\t\tapiStorageIndex({engine: this.engine})\n\t\t\t.then((res: any) => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tthis.form = res\n\t\t\t})\n\t\t\t.catch((res: any) => {\n\t\t\t\tconsole.log(res)\n\t\t\t\t//this.$message.error('获取失败，请重试!')\n\t\t\t})\n\t\t}\n\t\t/** E Methods **/\n\t\t/** S Life Cycle **/\n\t\tcreated() {\n\t\t\tconst query: any = this.$route.query\n\t\t\tif (query.engine) this.engine = query.engine\n\t\t\tthis.getStorageIndex()\n\t\t}\n\t\t/** E Life Cycle **/\n\t}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./storage.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./storage.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./storage.vue?vue&type=template&id=f85c4a38&scoped=true&\"\nimport script from \"./storage.vue?vue&type=script&lang=ts&\"\nexport * from \"./storage.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./storage.vue?vue&type=style&index=0&id=f85c4a38&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f85c4a38\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/plugins/axios'\nimport * as Interface from '@/api/setting/system_maintain/system_maintain.d.ts'\n\n/** S 存储设置 **/\n// 获取存储引擎列表\nexport const apiStorageList = (): Promise<any> =>\n    request.get('/settings.shop.Storage/lists')\n\t\n// 获取存储配置信息\nexport const apiStorageIndex = (params:any): Promise<any> =>\n    request.get('/settings.shop.Storage/index',{params})\n\t\n// 更新配置\nexport const apiStorageSetup = (params:any): Promise<any> => \n\trequest.post('/settings.shop.Storage/setup', params)\n\n// 切换默认存储引擎\nexport const apiStorageChange = (params:any): Promise<any> => \n\trequest.post('/settings.shop.Storage/change', params)\n/** E 存储设置 **/","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./storage.vue?vue&type=style&index=0&id=f85c4a38&prod&lang=scss&scoped=true&\""],"sourceRoot":""}