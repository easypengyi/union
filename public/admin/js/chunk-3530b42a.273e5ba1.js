(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3530b42a"],{"337c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"user-withdrawal"},[e("div",{staticClass:"ls-card"},[e("el-alert",{staticClass:"xxl",attrs:{title:"温馨提示： 1.进行中的砍价商品可以修改名称和活动时间。",type:"info",closable:!1,"show-icon":""}}),e("div",{staticClass:"journal-search m-t-16"},[e("el-form",{ref:"formRef",staticClass:"ls-form",attrs:{inline:"",model:t.form,"label-width":"70px",size:"small"}},[e("el-form-item",{attrs:{label:"活动信息",prop:"sn"}},[e("el-input",{attrs:{placeholder:"请输入活动名称/活动编号查询"},model:{value:t.form.activity_info,callback:function(e){t.$set(t.form,"activity_info",e)},expression:"form.activity_info"}})],1),e("el-form-item",{attrs:{label:"商品信息"}},[e("el-input",{attrs:{placeholder:"请输入商品名称/编号查询"},model:{value:t.form.goods_info,callback:function(e){t.$set(t.form,"goods_info",e)},expression:"form.goods_info"}})],1),e("el-form-item",{attrs:{label:"活动时间"}},[e("el-date-picker",{attrs:{type:"datetimerange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","picker-options":t.pickerOptions,"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.splitTime},model:{value:t.tableData,callback:function(e){t.tableData=e},expression:"tableData"}})],1),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.getList(1)}}},[t._v("查询")]),e("el-button",{attrs:{size:"small"},on:{click:t.onReset}},[t._v("重置")])],1)],1)],1),e("div",{staticClass:"ls-withdrawal__centent ls-card m-t-16"},[e("el-tabs",{directives:[{name:"loading",rawName:"v-loading",value:t.pager.loading,expression:"pager.loading"}],on:{"tab-click":function(e){return t.getList(1)}},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[e("el-tab-pane",{attrs:{label:`全部(${t.tabCount.all})`,name:" "}},[e("bargain-pane",{attrs:{pager:t.pager},on:{refresh:function(e){return t.getList()}},model:{value:t.pager.lists,callback:function(e){t.$set(t.pager,"lists",e)},expression:"pager.lists"}})],1),e("el-tab-pane",{attrs:{label:`未开始(${t.tabCount.wait})`,name:"1"}},[e("bargain-pane",{attrs:{pager:t.pager},on:{refresh:function(e){return t.getList()}},model:{value:t.pager.lists,callback:function(e){t.$set(t.pager,"lists",e)},expression:"pager.lists"}})],1),e("el-tab-pane",{attrs:{lazy:"",label:`进行中(${t.tabCount.ing})`,name:"2"}},[e("bargain-pane",{attrs:{pager:t.pager},on:{refresh:function(e){return t.getList()}},model:{value:t.pager.lists,callback:function(e){t.$set(t.pager,"lists",e)},expression:"pager.lists"}})],1),e("el-tab-pane",{attrs:{lazy:"",label:`已结束(${t.tabCount.end})`,name:"3"}},[e("bargain-pane",{attrs:{pager:t.pager},on:{refresh:function(e){return t.getList()}},model:{value:t.pager.lists,callback:function(e){t.$set(t.pager,"lists",e)},expression:"pager.lists"}})],1)],1)],1)])},i=[],r=a("9ab4"),n=a("1b40"),o=a("fac6"),l=a("6ddb"),c=a("3c50"),u=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"withdraw-pane"},[e("div",{staticClass:"pane-table"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.toAdd}},[t._v("新增砍价活动")]),e("div",{staticClass:"list-table m-t-16"},[e("el-table",{ref:"valueRef",staticStyle:{width:"100%"},attrs:{data:t.value,size:"mini","header-cell-style":{background:"#f5f8ff"}}},[e("el-table-column",{attrs:{prop:"name",label:"活动名称"}}),e("el-table-column",{attrs:{prop:"",label:"活动时间","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v(t._s(a.row.start_time_desc)+"~"+t._s(a.row.end_time_desc))])]}}])}),e("el-table-column",{attrs:{prop:"order_count",label:"砍价订单"}}),e("el-table-column",{attrs:{prop:"total_amount",label:"砍价销售额"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",[t._v("¥"+t._s(a.row.total_amount))])]}}])}),e("el-table-column",{attrs:{prop:"total_num",label:"砍价销售量"}}),e("el-table-column",{attrs:{prop:"",label:"活动状态"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.status?e("el-tag",{attrs:{size:"medium",type:"danger"}},[t._v(t._s(a.row.status_desc))]):t._e(),2==a.row.status?e("el-tag",{attrs:{size:"medium",type:"success"}},[t._v(t._s(a.row.status_desc))]):t._e(),3==a.row.status?e("el-tag",{attrs:{size:"medium",type:"info"}},[t._v(t._s(a.row.status_desc))]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),e("el-table-column",{attrs:{label:"操作","min-width":"160",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{slot:"trigger",type:"text",size:"small"},on:{click:function(e){return t.toDetails(a.row)}},slot:"trigger"},[t._v("详情 ")]),3!=a.row.status?e("el-button",{attrs:{slot:"trigger",type:"text",size:"small"},on:{click:function(e){return t.toEdit(a.row)}},slot:"trigger"},[t._v("编辑 ")]):t._e(),1==a.row.status?e("ls-dialog",{staticClass:"m-l-10 inline",attrs:{title:`确定开始砍价：${a.row.name}(${a.row.sn}）`,content:"活动确认后不能编辑修改砍价商品价格信息, 请谨慎操作。"},on:{confirm:function(e){return t.onConfirm(a.row.id)}}},[e("el-button",{attrs:{slot:"trigger",type:"text",size:"small"},slot:"trigger"},[t._v("开始砍价 ")])],1):t._e(),2==a.row.status?e("ls-dialog",{staticClass:"m-l-10 inline",attrs:{title:`确定结束砍价：${a.row.name}(${a.row.sn}）`,content:"砍价活动结束后不能重新开始, 请谨慎操作。"},on:{confirm:function(e){return t.onStop(a.row.id)}}},[e("el-button",{attrs:{slot:"trigger",type:"text",size:"small"},slot:"trigger"},[t._v("结束砍价 ")])],1):t._e(),e("ls-dialog",{staticClass:"m-l-10 inline",attrs:{title:`确定删除：${a.row.name}(${a.row.sn}）`,content:"砍价活动删除时,未支付订单会被系统自动关闭。砍价活动删除后不能查看活动数据, 请谨慎操作。"},on:{confirm:function(e){return t.onDelete(a.row.id)}}},[e("el-button",{attrs:{slot:"trigger",type:"text",size:"small"},slot:"trigger"},[t._v("删除 ")])],1)]}}])})],1)],1),e("div",{staticClass:"flex row-right m-t-16 row-right"},[e("ls-pagination",{on:{change:function(e){return t.$emit("refresh")}},model:{value:t.pager,callback:function(e){t.pager=e},expression:"pager"}})],1)],1)])},p=[],d=a("0a6d"),g=a("4201");let m=class extends n["e"]{constructor(){super(...arguments),this.status=!0}toAdd(){this.$router.push({path:"/bargain/bargain_edit",query:{mode:g["f"]["ADD"]}})}toDetails(t){this.$router.push({path:"/bargain/bargain_edit",query:{mode:g["f"]["EDIT"],id:t.id,status:"0"}})}toEdit(t){this.$router.push({path:"/bargain/bargain_edit",query:{mode:g["f"]["EDIT"],id:t.id,status:t.status}})}toData(t){}onDelete(t){Object(o["c"])({id:t}).then(t=>{this.$emit("refresh")})}onStop(t){Object(o["i"])({id:t}).then(t=>{this.$emit("refresh")})}onConfirm(t){Object(o["b"])({id:t}).then(t=>{this.$emit("refresh")})}};Object(r["a"])([Object(n["c"])()],m.prototype,"value",void 0),Object(r["a"])([Object(n["c"])()],m.prototype,"pager",void 0),m=Object(r["a"])([Object(n["a"])({components:{LsDialog:d["a"],LsPagination:c["a"]}})],m);var f=m,b=f,_=a("2877"),h=Object(_["a"])(b,u,p,!1,null,"5107f6d2",null),v=h.exports;let w=class extends n["e"]{constructor(){super(...arguments),this.pickerOptions={shortcuts:[{text:"最近一周",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},this.tableData=[],this.pager=new l["a"],this.form={status:" ",start_time:"",end_time:"",activity_info:"",goods_info:""},this.tabCount={all:0,end:0,ing:0,wait:0}}splitTime(){null!=this.tableData&&(this.form.start_time=this.tableData[0],this.form.end_time=this.tableData[1])}onReset(){this.tableData=[],this.form.status=" ",this.form.start_time="",this.form.end_time="",this.form.activity_info="",this.form.goods_info="",this.getList()}getList(t){t&&(this.pager.page=t),this.pager.request({callback:o["g"],params:{...this.form}}).then(t=>{this.tabCount=null===t||void 0===t?void 0:t.extend})}created(){this.getList()}};w=Object(r["a"])([Object(n["a"])({components:{LsPagination:c["a"],BargainPane:v}})],w);var y=w,k=y,x=Object(_["a"])(k,s,i,!1,null,"051a24ef",null);e["default"]=x.exports},fac6:function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"i",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"e",(function(){return l})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"f",(function(){return p})),a.d(e,"h",(function(){return d})),a.d(e,"j",(function(){return g}));var s=a("f175");const i=t=>s["a"].get("/bargain.bargain_activity/lists",{params:t}),r=t=>s["a"].post("/bargain.bargain_activity/delete",t),n=t=>s["a"].post("/bargain.bargain_activity/stop",t),o=t=>s["a"].post("/bargain.bargain_activity/confirm",t),l=t=>s["a"].post("/bargain.bargain_activity/edit",t),c=t=>s["a"].get("/bargain.bargain_activity/detail",{params:t}),u=t=>s["a"].post("/bargain.bargain_activity/add",t),p=t=>s["a"].get("/bargain.bargain_activity/goodsLists",{params:t}),d=t=>s["a"].get("/bargain.bargain_activity/activityRecord",{params:t}),g=t=>s["a"].post("/bargain.bargain_activity/stopInitiate",t)}}]);
//# sourceMappingURL=chunk-3530b42a.273e5ba1.js.map