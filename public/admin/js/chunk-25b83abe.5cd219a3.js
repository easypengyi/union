(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25b83abe"],{"239d":function(t,e,a){},"5ef8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"ls-card"},[e("el-page-header",{attrs:{content:"设置支付方式"},on:{back:function(e){return t.$router.go(-1)}}})],1),e("div",{staticClass:"ls-card m-t-24 m-b-60"},[e("div",{staticClass:"nr m-b-30 card-title"},[t._v("支付信息")]),e("el-form",{ref:"paymentConfigData",staticClass:"m-l-24",attrs:{"hide-required-asterisk":!1,rules:t.rules,model:t.paymentConfigData,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"支付方式","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{disabled:!0},model:{value:t.PayWay,callback:function(e){t.PayWay=e},expression:"PayWay"}})],1),e("el-form-item",{attrs:{label:"显示名称",prop:"name","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.name,callback:function(e){t.$set(t.paymentConfigData,"name",e)},expression:"paymentConfigData.name"}})],1),e("el-form-item",{attrs:{label:"显示图标",prop:"icon","label-position":"right"}},[e("material-select",{attrs:{limit:1,disabled:!1},model:{value:t.paymentConfigData.icon,callback:function(e){t.$set(t.paymentConfigData,"icon",e)},expression:"paymentConfigData.icon"}}),e("span",{staticClass:"desc"},[t._v("建议尺寸：152*42像素，支持jpg，jpeg，png格式")])],1),2==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{prop:"interface_version",label:"微信支付接口版本","label-position":"right"}},[e("el-radio-group",{model:{value:t.paymentConfigData.interface_version,callback:function(e){t.$set(t.paymentConfigData,"interface_version",e)},expression:"paymentConfigData.interface_version"}},[e("el-radio",{attrs:{label:t.paymentConfigData.interface_version}})],1),e("span",{staticClass:"desc"},[t._v("暂时只支持V2版本")])],1):t._e(),2==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"商户类型",prop:"merchant_type","label-position":"right"}},[e("el-radio-group",{model:{value:t.paymentConfigData.merchant_type,callback:function(e){t.$set(t.paymentConfigData,"merchant_type",e)},expression:"paymentConfigData.merchant_type"}},[e("el-radio",{attrs:{label:t.paymentConfigData.merchant_type}},[t._v("普通商户")])],1),e("span",{staticClass:"desc"},[t._v("暂时只支持普通商户类型，服务商户类型模式暂不支持")])],1):t._e(),2==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"微信支付商户号",prop:"mch_id","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.mch_id,callback:function(e){t.$set(t.paymentConfigData,"mch_id",e)},expression:"paymentConfigData.mch_id"}}),e("span",{staticClass:"desc"},[t._v("微信支付商户号（MCHID）")])],1):t._e(),2==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"商户API密钥",prop:"pay_sign_key","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.pay_sign_key,callback:function(e){t.$set(t.paymentConfigData,"pay_sign_key",e)},expression:"paymentConfigData.pay_sign_key"}}),e("span",{staticClass:"desc"},[t._v("微信支付商户API密钥（paySignKey）")])],1):t._e(),2==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"微信支付证书",prop:"apiclient_cert","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{type:"textarea"},model:{value:t.paymentConfigData.apiclient_cert,callback:function(e){t.$set(t.paymentConfigData,"apiclient_cert",e)},expression:"paymentConfigData.apiclient_cert"}}),e("span",{staticClass:"desc"},[t._v("微信支付证书，前往微信商家平台生成并黏贴至此处")])],1):t._e(),2==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"微信支付证书密钥",prop:"apiclient_key","label-position":"right"}},[e("el-input",{staticClass:"ls-input",attrs:{type:"textarea"},model:{value:t.paymentConfigData.apiclient_key,callback:function(e){t.$set(t.paymentConfigData,"apiclient_key",e)},expression:"paymentConfigData.apiclient_key"}}),e("span",{staticClass:"desc"},[t._v("微信支付证书密钥，前往微信商家平台生成并黏贴至此处")])],1):t._e(),2==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"支付授权目录","label-position":"right"}},[e("div",[t._v(" http://xxx.com/pay/ "),e("span",{staticClass:"copy",on:{click:t.onCopy}},[t._v("复制")])]),e("span",{staticClass:"desc"},[t._v("支付授权目录仅用于参考，复制后前往微信商家平台填写")])]):t._e(),3==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"模式",prop:"pattern","label-position":"right"}},[e("el-radio-group",{model:{value:t.paymentConfigData.pattern,callback:function(e){t.$set(t.paymentConfigData,"pattern",e)},expression:"paymentConfigData.pattern"}},[e("el-radio",{attrs:{label:t.paymentConfigData.pattern}},[t._v("普通模式")])],1),e("span",{staticClass:"desc"},[t._v("暂时仅支持支付宝普通模式")])],1):t._e(),3==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"商户类型",prop:"merchant_type","label-position":"right"}},[e("el-radio-group",{model:{value:t.paymentConfigData.merchant_type,callback:function(e){t.$set(t.paymentConfigData,"merchant_type",e)},expression:"paymentConfigData.merchant_type"}},[e("el-radio",{attrs:{label:t.paymentConfigData.merchant_type}},[t._v("普通商户")])],1),e("span",{staticClass:"desc"},[t._v("暂时只支持普通商户类型，服务商户类型模式暂不支持")])],1):t._e(),3==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"应用ID",prop:"app_id","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.app_id,callback:function(e){t.$set(t.paymentConfigData,"app_id",e)},expression:"paymentConfigData.app_id"}})],1):t._e(),3==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"应用私钥",prop:"private_key","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.private_key,callback:function(e){t.$set(t.paymentConfigData,"private_key",e)},expression:"paymentConfigData.private_key"}})],1):t._e(),3==t.paymentConfigData.pay_way?e("el-form-item",{attrs:{label:"支付宝公钥",prop:"ali_public_key","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.ali_public_key,callback:function(e){t.$set(t.paymentConfigData,"ali_public_key",e)},expression:"paymentConfigData.ali_public_key"}})],1):t._e(),e("el-form-item",{attrs:{label:"排序",prop:"sort","label-position":"right"}},[e("el-input",{staticClass:"ls-input",model:{value:t.paymentConfigData.sort,callback:function(e){t.$set(t.paymentConfigData,"sort",t._n(e))},expression:"paymentConfigData.sort"}}),e("span",{staticClass:"desc"},[t._v("排序值越小，排序越前")])],1)],1)],1),e("div",{staticClass:"bg-white ls-fixed-footer"},[e("div",{staticClass:"row-center flex m-t-15"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit("paymentConfigData")}}},[t._v("保存")])],1)])])},s=[],n=a("9ab4"),l=a("1b40"),r=a("6460"),o=a("b3ad");let p=class extends l["e"]{constructor(){super(...arguments),this.identity=0,this.status="",this.paymentConfigData={name:"",icon:"",sort:"",remark:"",merchant_type:"",interface_version:"v2",mch_id:"",pay_sign_key:"",apiclient_cert:"",apiclient_key:"",pattern:"",app_id:"",private_key:"",ali_public_key:""},this.rules={name:[{required:!0,message:"请输入显示名称",trigger:"blur"}],icon:[{required:!0,message:"请输入上传图标",trigger:"change"}],mch_id:[{required:!0,message:"请输入微信支付商户号",trigger:"blur"}],pay_sign_key:[{required:!0,message:"请输入微信商户支付API密钥",trigger:"blur"}],apiclient_cert:[{required:!0,message:"请输入微信支付证书",trigger:"blur"}],apiclient_key:[{required:!0,message:"请输入微信支付证书密钥",trigger:"blur"}],private_key:[{required:!0,message:"请输入支付宝公钥",trigger:"blur"}],ali_public_key:[{required:!0,message:"请输入应用私钥",trigger:"blur"}],app_id:[{required:!0,message:"请输入应用ID",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"},{type:"number",pattern:!1,message:"请输入正确的排序",trigger:"blur"}]}}getPaymentConfigDetail(){Object(r["a"])({id:this.identity}).then(t=>{const e={...t.config,...t};delete e.config,2==e.pay_way&&(e.interface_version="v2"),3==e.pay_way&&(e.mode="normal_mode"),e.merchant_type="ordinary_merchant",this.paymentConfigData=e}).catch(()=>{this.$message.error("数据初始化失败，请刷新重载！")})}onSubmit(t){const e=this.$refs[t];e.validate(t=>{if(t)return this.paymentConfigData.sort<=0?this.$message.error("请输入正整数"):void this.handlePayConfigEdit()})}handlePayConfigEdit(){const t=this.paymentConfigData,e=this.identity;Object(r["c"])({...t,id:e}).then(()=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{this.$message.error("保存失败!")})}onCopy(){let t=document.createElement("input");t.value="http://xxx.com/pay/",document.body.appendChild(t),t.select(),document.execCommand("Copy"),t.style.display="none",this.$message({message:"复制成功",type:"success"})}created(){const t=this.$route.query;this.identity=t.id,this.getPaymentConfigDetail()}get PayWay(){const t=Number(this.paymentConfigData.pay_way);switch(t){case 1:return"余额支付";case 2:return"微信支付";case 3:return"支付宝支付";case 4:return"字节支付"}}};p=Object(n["a"])([Object(l["a"])({components:{MaterialSelect:o["a"]}})],p);var c=p,m=c,g=(a("8897"),a("2877")),d=Object(g["a"])(m,i,s,!1,null,"0830f0b2",null);e["default"]=d.exports},6460:function(t,e,a){"use strict";a.d(e,"d",(function(){return s})),a.d(e,"e",(function(){return n})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o}));var i=a("f175");const s=()=>i["a"].get("/settings.pay.pay_way/getPayWay"),n=t=>i["a"].post("/settings.pay.pay_way/setPayWay",t),l=t=>i["a"].post("/settings.pay.pay_config/setConfig",t),r=t=>i["a"].get("/settings.pay.pay_config/getConfig",{params:t}),o=()=>i["a"].get("/settings.pay.pay_config/lists")},8897:function(t,e,a){"use strict";a("b3db")},b3ad:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():e("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[e("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(a,i){return e("div",{key:a+i,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,i)}}},[t.$scopedSlots.preview?e("div",[t._t("preview",null,{item:t.imageUri(a)})],2):e("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(a)},size:t.size}}),t.enableDelete?e("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(i)}}}):t._e()],1)})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?e("div",[t._t("upload")],2):e("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():e("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),e("div",{staticClass:"material-wrap"},[e("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},s=[],n=a("9ab4"),l=a("1b40"),r=a("0a6d"),o=a("c6fe"),p=a("e915"),c=a("b76a"),m=a.n(c);let g=class extends l["e"]{constructor(){super(...arguments),this.isAdd=!0,this.fileList=[]}get showUpload(){const{fileList:t,limit:e}=this;return e-t.length>0}get meterialLimit(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}get tipsText(){switch(this.type){case"image":return"图片";case"video":return"视频"}}get imageUri(){return t=>this.enableDomain?t:this.$getImageUri(t)}valueChange(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}showDialog(t=!0,e){var a;this.disabled||(this.isAdd=t,void 0!==e&&(this.currentIndex=e),null===(a=this.$refs.materialDialog)||void 0===a||a.onTrigger())}selectChange(t){this.select=t}handleConfirm(){this.$refs.material.clearSelectList();const t=this.select.map(t=>this.enableDomain?t.uri:t.url);this.isAdd?this.fileList=this.fileList.concat(t):this.fileList.splice(this.currentIndex,1,t.shift()),this.handleChange()}delImage(t){this.fileList.splice(t,1),this.handleChange()}handleChange(){const t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}};Object(n["a"])([Object(l["c"])({default:()=>[]})],g.prototype,"value",void 0),Object(n["a"])([Object(l["c"])({default:1})],g.prototype,"limit",void 0),Object(n["a"])([Object(l["c"])({default:"100"})],g.prototype,"size",void 0),Object(n["a"])([Object(l["c"])({default:!1})],g.prototype,"disabled",void 0),Object(n["a"])([Object(l["c"])({default:!1})],g.prototype,"dragDisabled",void 0),Object(n["a"])([Object(l["c"])({default:!1})],g.prototype,"hiddenTrigger",void 0),Object(n["a"])([Object(l["c"])({default:"image"})],g.prototype,"type",void 0),Object(n["a"])([Object(l["c"])({default:"transparent"})],g.prototype,"uploadBg",void 0),Object(n["a"])([Object(l["c"])({default:!0})],g.prototype,"enableDomain",void 0),Object(n["a"])([Object(l["c"])({default:!0})],g.prototype,"enableDelete",void 0),Object(n["a"])([Object(l["f"])("value",{immediate:!0})],g.prototype,"valueChange",null),g=Object(n["a"])([Object(l["a"])({components:{LsDialog:r["a"],LsMaterial:o["a"],Draggable:m.a,FileItem:p["a"]}})],g);var d=g,y=d,u=(a("fb48"),a("2877")),f=Object(u["a"])(y,i,s,!1,null,"1503bff6",null);e["a"]=f.exports},b3db:function(t,e,a){},fb48:function(t,e,a){"use strict";a("239d")}}]);
//# sourceMappingURL=chunk-25b83abe.5cd219a3.js.map