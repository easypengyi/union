(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ff4bb0d"],{"14c6":function(t,e,s){"use strict";s.d(e,"q",(function(){return i})),s.d(e,"A",(function(){return a})),s.d(e,"B",(function(){return r})),s.d(e,"x",(function(){return l})),s.d(e,"F",(function(){return n})),s.d(e,"y",(function(){return d})),s.d(e,"E",(function(){return c})),s.d(e,"z",(function(){return u})),s.d(e,"C",(function(){return p})),s.d(e,"D",(function(){return g})),s.d(e,"c",(function(){return m})),s.d(e,"g",(function(){return f})),s.d(e,"h",(function(){return h})),s.d(e,"d",(function(){return b})),s.d(e,"e",(function(){return v})),s.d(e,"f",(function(){return _})),s.d(e,"H",(function(){return y})),s.d(e,"K",(function(){return C})),s.d(e,"I",(function(){return w})),s.d(e,"J",(function(){return x})),s.d(e,"G",(function(){return k})),s.d(e,"O",(function(){return O})),s.d(e,"L",(function(){return j})),s.d(e,"M",(function(){return L})),s.d(e,"N",(function(){return $})),s.d(e,"i",(function(){return z})),s.d(e,"o",(function(){return R})),s.d(e,"j",(function(){return D})),s.d(e,"p",(function(){return S})),s.d(e,"m",(function(){return T})),s.d(e,"k",(function(){return G})),s.d(e,"n",(function(){return A})),s.d(e,"l",(function(){return P})),s.d(e,"P",(function(){return U})),s.d(e,"S",(function(){return q})),s.d(e,"Q",(function(){return I})),s.d(e,"R",(function(){return E})),s.d(e,"u",(function(){return B})),s.d(e,"t",(function(){return J})),s.d(e,"v",(function(){return M})),s.d(e,"w",(function(){return N})),s.d(e,"s",(function(){return F})),s.d(e,"r",(function(){return H})),s.d(e,"a",(function(){return K})),s.d(e,"b",(function(){return Q}));var o=s("f175");const i=t=>o["a"].post("/goods.goods/add",t),a=t=>o["a"].post("/goods.goods/edit",t),r=t=>o["a"].get("/goods.goods/lists",{params:t}),l=t=>o["a"].get("/goods.goods/commonLists",{params:t}),n=t=>o["a"].post("/goods.goods/status",t),d=t=>o["a"].post("/goods.goods/del",t),c=t=>o["a"].post("/goods.goods/sort",t),u=t=>o["a"].get("/goods.goods/detail",{params:{id:t}}),p=t=>o["a"].get("/goods.goods/otherList",{params:t}),g=t=>o["a"].post("goods.goods/rename ",t),m=t=>o["a"].post("/goods.goods_brand/add",t),f=t=>o["a"].get("/goods.goods_brand/lists",{params:t}),h=t=>o["a"].post("/goods.goods_brand/status",t),b=t=>o["a"].post("/goods.goods_brand/del",t),v=t=>o["a"].get("/goods.goods_brand/detail",{params:{id:t}}),_=t=>o["a"].post("/goods.goods_brand/edit",t),y=t=>o["a"].post("/goods.goods_supplier_category/add",t),C=t=>o["a"].get("goods.goods_supplier_category/lists",{params:t}),w=t=>o["a"].post("goods.goods_supplier_category/del",{id:t}),x=t=>o["a"].post("goods.goods_supplier_category/edit",t),k=t=>o["a"].post("/goods.goods_supplier/add",t),O=t=>o["a"].get("/goods.goods_supplier/lists",{params:t}),j=t=>o["a"].post("goods.goods_supplier/del",{id:t}),L=t=>o["a"].get("/goods.goods_supplier/detail",{params:{id:t}}),$=t=>o["a"].post("/goods.goods_supplier/edit",t),z=t=>o["a"].post("/goods.goods_category/add",t),R=t=>o["a"].get("/goods.goods_category/lists",{params:t}),D=t=>o["a"].get("/goods.goods_category/commonLists",{params:t}),S=t=>o["a"].post("/goods.goods_category/status",t),T=t=>o["a"].post("/goods.goods_category/down_good",t),G=t=>o["a"].post("goods.goods_category/del",{id:t}),A=t=>o["a"].post("/goods.goods_category/edit",t),P=t=>o["a"].get("/goods.goods_category/detail",{params:{id:t}}),U=t=>o["a"].post("/goods.goods_unit/add",t),q=t=>o["a"].get("/goods.goods_unit/lists",{params:t}),I=t=>o["a"].post("goods.goods_unit/del",{id:t}),E=t=>o["a"].post("/goods.goods_unit/edit",t),B=t=>o["a"].get("goods.goods_comment/lists",{params:t}),J=t=>o["a"].post("goods.goods_comment/del",t),M=t=>o["a"].post("goods.goods_comment/reply",t),N=t=>o["a"].post("/goods.goods_comment/status",t),F=t=>o["a"].get("goods.goods_comment_assistant/lists",{params:t}),H=t=>o["a"].post("goods.goods_comment_assistant/add",t),K=t=>o["a"].get("/goods.goods_activity/lists",{params:t}),Q=t=>o["a"].post("/goods.goods_activity/status",t)},"239d":function(t,e,s){},"623a":function(t,e,s){"use strict";s.d(e,"f",(function(){return i})),s.d(e,"d",(function(){return a})),s.d(e,"e",(function(){return r})),s.d(e,"c",(function(){return l})),s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return d}));var o=s("f175");const i=t=>o["a"].get("/live.LiveRoom/lists",{params:t}),a=t=>o["a"].post("/live.LiveRoom/add",t),r=t=>o["a"].post("/live.LiveRoom/del",t),l=t=>o["a"].get("/live.LiveGoods/lists",{params:t}),n=t=>o["a"].post("/live.LiveGoods/add",t),d=t=>o["a"].post("/live.LiveGoods/del",t)},9652:function(t,e,s){"use strict";s("e7a7")},"98c2":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"add-broadcast-goods"},[e("div",{staticClass:"ls-card"},[e("el-page-header",{attrs:{content:"add"===t.mode?"添加直播商品":""},on:{back:function(e){return t.$router.go(-1)}}})],1),e("el-form",{ref:"formRef",attrs:{rules:t.formRules,model:t.form,"label-width":"120px",size:"small"}},[e("div",{staticClass:"ls-card m-t-16"},[e("div",{staticClass:"card-content m-t-24"},[e("el-form-item",{attrs:{label:"产品来源",prop:"",required:""}},[e("el-select",{attrs:{placeholder:"请选择产品来源"},model:{value:t.goodsType,callback:function(e){t.goodsType=e},expression:"goodsType"}},[e("el-option",{attrs:{label:"商品库",value:"1"}}),e("el-option",{attrs:{label:"自定义",value:"2"}})],1),"1"==t.goodsType?e("div",{staticClass:"m-t-16"},[e("ls-goods-select",{attrs:{title:"选择商品"},on:{getGoods:t.getGoods}},[e("el-button",{attrs:{slot:"trigger",type:"primary",size:"small"},slot:"trigger"},[t._v("选择商品")])],1)],1):t._e()],1),e("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"商品封面",prop:"image"}},[e("el-upload",{class:t.ishide?"hide":"",attrs:{action:t.action,headers:{token:t.$store.getters.token,version:t.version},"list-type":"picture-card",limit:1,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,"on-error":t.handleError}},[e("i",{staticClass:"el-icon-plus"})]),e("div",{staticClass:"muted xs m-r-16"},[t._v("建议尺寸：200像素 * 200像素，图片尺寸不能超过300像素 * 300像素。")])],1),e("el-form-item",{attrs:{label:"价格形式",prop:"price_type"}},[e("div",{},[e("el-radio",{attrs:{label:1},model:{value:t.form.price_type,callback:function(e){t.$set(t.form,"price_type",e)},expression:"form.price_type"}},[e("span",{staticClass:"m-r-30 first-desc"},[t._v("一口价")]),e("span",{staticClass:"m-r-5"},[t._v("价格")]),e("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),e("span",{staticClass:"m-l-5"},[t._v("元")])],1)],1),e("div",{staticClass:"m-t-16"},[e("el-radio",{attrs:{label:2},model:{value:t.form.price_type,callback:function(e){t.$set(t.form,"price_type",e)},expression:"form.price_type"}},[e("span",{staticClass:"m-r-20 first-desc"},[t._v("价格区间")]),e("span",{staticClass:"m-r-5"},[t._v("价格")]),e("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),e("span",{staticClass:"m-l-5"},[t._v("元")]),e("span",{staticClass:"m-l-5 m-r-5"},[t._v("-")]),e("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price2,callback:function(e){t.$set(t.form,"price2",e)},expression:"form.price2"}}),e("span",{staticClass:"m-l-5"},[t._v("元")])],1)],1),e("div",{staticClass:"m-t-16"},[e("el-radio",{attrs:{label:3},model:{value:t.form.price_type,callback:function(e){t.$set(t.form,"price_type",e)},expression:"form.price_type"}},[e("span",{staticClass:"m-r-10 first-desc"},[t._v("显示折扣价")]),e("span",{staticClass:"m-r-5"},[t._v("原价")]),e("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),e("span",{staticClass:"m-l-5"},[t._v("元")]),e("span",{staticClass:"m-l-5 m-r-5"},[t._v("现价")]),e("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.price2,callback:function(e){t.$set(t.form,"price2",e)},expression:"form.price2"}}),e("span",{staticClass:"m-l-5"},[t._v("元")])],1)],1)]),e("el-form-item",{attrs:{label:"商品链接",prop:"url"}},[e("el-input",{attrs:{placeholder:"请输入商品链接"},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}}),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 请确保小程序页面路径可被访问，例如：pages/goods_details/goods_details?id=goods_id ")])],1)],1)])]),e("div",{staticClass:"bg-white ls-fixed-footer"},[e("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.onSubmit()}}},[t._v("保存")])],1)])],1)},i=[],a=s("9ab4"),r=s("1b40"),l=s("4201"),n=s("b3ad"),d=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("div",{staticClass:"ls-dialog__trigger",on:{click:t.onTrigger}},[t._t("trigger")],2),e("el-dialog",{attrs:{"coustom-class":"ls-dialog__content",title:t.title,visible:t.visible,width:t.width,top:t.top,"modal-append-to-body":!1,center:"","before-close":t.close,"close-on-click-modal":!1,"append-to-body":!0}},[e("div",{},[e("el-form",{staticClass:"ls-form",attrs:{inline:"",model:t.form,"label-width":"70px",size:"small"}},[e("el-form-item",{attrs:{label:"商品名称"}},[e("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}})],1),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getList}},[t._v("查询")]),e("el-button",{attrs:{size:"small"},on:{click:t.onReset}},[t._v("重置")])],1),e("div",{staticClass:"list-table m-t-16"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.pager.loading,expression:"pager.loading"}],staticStyle:{width:"100%"},attrs:{height:"420",data:t.pager.lists,size:"mini","header-cell-style":{background:"#f5f8ff"},"highlight-current-row":""},on:{"current-change":t.handleCurrentChange}},[e("el-table-column",{attrs:{prop:"",label:"商品名称"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("div",{staticClass:"flex"},[e("el-image",{staticStyle:{width:"40px",height:"40px"},attrs:{src:s.row.image}}),e("div",{staticClass:"m-l-10"},[t._v(t._s(s.row.name))])],1)]}}])}),e("el-table-column",{attrs:{prop:"price",label:"价格"}}),e("el-table-column",{attrs:{prop:"total_stock",label:"库存"}})],1)],1),e("div",{staticClass:"flex row-right m-t-16 row-right"},[e("ls-pagination",{on:{change:function(e){return t.getList()}},model:{value:t.pager,callback:function(e){t.pager=e},expression:"pager"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small"},on:{click:t.close}},[t._v("取消")]),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.onSubmit}},[t._v("确认")])],1)])],1)},c=[],u=s("14c6"),p=s("6ddb"),g=s("3c50");let m=class extends r["e"]{constructor(){super(...arguments),this.visible=!1,this.form={keyword:""},this.pager=new p["a"],this.currentRow={}}onTrigger(){this.getList(),this.visible=!0}close(){this.visible=!1,this.form.keyword=""}onSubmit(){return"{}"==JSON.stringify(this.currentRow)||null==this.currentRow?this.$message.error("请选择商品"):(console.log("确定选中",this.currentRow),this.$emit("getGoods",this.currentRow),void(this.visible=!1))}getList(){this.pager.request({callback:u["B"],params:{...this.form}}).then(t=>{})}onReset(){this.form.keyword="",this.getList()}handleCurrentChange(t){this.currentRow=t}};Object(a["a"])([Object(r["c"])({default:"选择商品"})],m.prototype,"title",void 0),Object(a["a"])([Object(r["c"])({default:"880px"})],m.prototype,"width",void 0),Object(a["a"])([Object(r["c"])({default:"10vh"})],m.prototype,"top",void 0),m=Object(a["a"])([Object(r["a"])({components:{LsPagination:g["a"]}})],m);var f=m,h=f,b=s("2877"),v=Object(b["a"])(h,d,c,!1,null,"14fd3644",null),_=v.exports,y=s("623a"),C=s("d70b");let w=class extends r["e"]{constructor(){super(...arguments),this.action=C["a"].baseURL+"/adminapi/upload/wechatMaterial",this.version=C["a"].version,this.ishide=!1,this.mode=l["f"]["ADD"],this.goodsType="1",this.form={name:"",image:"",price_type:1,price:0,price2:0,url:""},this.allPrice={},this.formRules={name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],image:[{required:!0,message:"请选择图片",trigger:"blur"}],url:[{required:!0,message:"请输入商品链接",trigger:"change"}],price_type:[{required:!0,message:"请选择价格类型",trigger:"change"}]},this.selecGoods={}}getGoods(t){null!=t&&(console.log("确定选中商品",t),this.selecGoods=t,this.form.url="pages/goods_details/goods_details?id="+t.id,this.form.name=t.name,this.form.price=t.min_price)}onSubmit(){this.$refs.formRef.validate(t=>{t&&(console.log("发送请求"),this.liveGoodsAdd())})}liveGoodsAdd(){Object(y["a"])(this.form).then(t=>{setTimeout(()=>this.$router.go(-1),500)}).catch(t=>{console.log("err:",t)})}handleRemove(t,e){console.log("删除成功",t,e),this.ishide=!1}handleSuccess(t,e,s){this.form.image=t.data.media_id,console.log("上传成功",t),this.ishide=!0}handleError(t,e){this.$message.error(e.name+"文件上传失败")}handleExceed(){this.$message.error("超出上传上限，请重新上传")}};w=Object(a["a"])([Object(r["a"])({components:{MaterialSelect:n["a"],LsGoodsSelect:_}})],w);var x=w,k=x,O=(s("9652"),Object(b["a"])(k,o,i,!1,null,"7b24fd97",null));e["default"]=O.exports},b3ad:function(t,e,s){"use strict";var o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():e("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[e("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(s,o){return e("div",{key:s+o,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,o)}}},[t.$scopedSlots.preview?e("div",[t._t("preview",null,{item:t.imageUri(s)})],2):e("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(s)},size:t.size}}),t.enableDelete?e("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(o)}}}):t._e()],1)})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?e("div",[t._t("upload")],2):e("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():e("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),e("div",{staticClass:"material-wrap"},[e("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},i=[],a=s("9ab4"),r=s("1b40"),l=s("0a6d"),n=s("c6fe"),d=s("e915"),c=s("b76a"),u=s.n(c);let p=class extends r["e"]{constructor(){super(...arguments),this.isAdd=!0,this.fileList=[]}get showUpload(){const{fileList:t,limit:e}=this;return e-t.length>0}get meterialLimit(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}get tipsText(){switch(this.type){case"image":return"图片";case"video":return"视频"}}get imageUri(){return t=>this.enableDomain?t:this.$getImageUri(t)}valueChange(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}showDialog(t=!0,e){var s;this.disabled||(this.isAdd=t,void 0!==e&&(this.currentIndex=e),null===(s=this.$refs.materialDialog)||void 0===s||s.onTrigger())}selectChange(t){this.select=t}handleConfirm(){this.$refs.material.clearSelectList();const t=this.select.map(t=>this.enableDomain?t.uri:t.url);this.isAdd?this.fileList=this.fileList.concat(t):this.fileList.splice(this.currentIndex,1,t.shift()),this.handleChange()}delImage(t){this.fileList.splice(t,1),this.handleChange()}handleChange(){const t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}};Object(a["a"])([Object(r["c"])({default:()=>[]})],p.prototype,"value",void 0),Object(a["a"])([Object(r["c"])({default:1})],p.prototype,"limit",void 0),Object(a["a"])([Object(r["c"])({default:"100"})],p.prototype,"size",void 0),Object(a["a"])([Object(r["c"])({default:!1})],p.prototype,"disabled",void 0),Object(a["a"])([Object(r["c"])({default:!1})],p.prototype,"dragDisabled",void 0),Object(a["a"])([Object(r["c"])({default:!1})],p.prototype,"hiddenTrigger",void 0),Object(a["a"])([Object(r["c"])({default:"image"})],p.prototype,"type",void 0),Object(a["a"])([Object(r["c"])({default:"transparent"})],p.prototype,"uploadBg",void 0),Object(a["a"])([Object(r["c"])({default:!0})],p.prototype,"enableDomain",void 0),Object(a["a"])([Object(r["c"])({default:!0})],p.prototype,"enableDelete",void 0),Object(a["a"])([Object(r["f"])("value",{immediate:!0})],p.prototype,"valueChange",null),p=Object(a["a"])([Object(r["a"])({components:{LsDialog:l["a"],LsMaterial:n["a"],Draggable:u.a,FileItem:d["a"]}})],p);var g=p,m=g,f=(s("fb48"),s("2877")),h=Object(f["a"])(m,o,i,!1,null,"1503bff6",null);e["a"]=h.exports},e7a7:function(t,e,s){},fb48:function(t,e,s){"use strict";s("239d")}}]);
//# sourceMappingURL=chunk-5ff4bb0d.4b750806.js.map