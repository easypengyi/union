(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f86a226"],{"239d":function(t,e,s){},ab8c:function(t,e,s){},b325:function(t,e,s){"use strict";s("ab8c")},b3ad:function(t,e,s){"use strict";var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+t.tipsText,width:"1050px",top:"15vh"},on:{confirm:t.handleConfirm}},[t.hiddenTrigger?t._e():e("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(t){t.stopPropagation()}},slot:"trigger"},[e("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:t.disabled||t.dragDisabled},on:{update:t.handleChange},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}},t._l(t.fileList,(function(s,i){return e("div",{key:s+i,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!1,i)}}},[t.$scopedSlots.preview?e("div",[t._t("preview",null,{item:t.imageUri(s)})],2):e("file-item",{attrs:{type:t.type,item:{uri:t.imageUri(s)},size:t.size}}),t.enableDelete?e("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(e){return e.stopPropagation(),t.delImage(i)}}}):t._e()],1)})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":t.disabled,"is-one":1==t.limit},on:{click:function(e){return t.showDialog(!0)}}},[t.$slots.upload?e("div",[t._t("upload")],2):e("div",{staticClass:"upload-btn flex row-center",style:{width:t.size+"px",height:t.size+"px",background:t.uploadBg}},[t._t("default"),t.$slots.default?t._e():e("span",[t._v("添加"+t._s(t.tipsText))])],2)])],1),e("div",{staticClass:"material-wrap"},[e("ls-material",{ref:"material",attrs:{"page-size":15,type:t.type,limit:t.meterialLimit},on:{change:t.selectChange}})],1)])},a=[],l=s("9ab4"),o=s("1b40"),r=s("0a6d"),n=s("c6fe"),c=s("e915"),d=s("b76a"),m=s.n(d);let u=class extends o["e"]{constructor(){super(...arguments),this.isAdd=!0,this.fileList=[]}get showUpload(){const{fileList:t,limit:e}=this;return e-t.length>0}get meterialLimit(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}get tipsText(){switch(this.type){case"image":return"图片";case"video":return"视频"}}get imageUri(){return t=>this.enableDomain?t:this.$getImageUri(t)}valueChange(t){this.fileList=Array.isArray(t)?t:""==t?[]:[t]}showDialog(t=!0,e){var s;this.disabled||(this.isAdd=t,void 0!==e&&(this.currentIndex=e),null===(s=this.$refs.materialDialog)||void 0===s||s.onTrigger())}selectChange(t){this.select=t}handleConfirm(){this.$refs.material.clearSelectList();const t=this.select.map(t=>this.enableDomain?t.uri:t.url);this.isAdd?this.fileList=this.fileList.concat(t):this.fileList.splice(this.currentIndex,1,t.shift()),this.handleChange()}delImage(t){this.fileList.splice(t,1),this.handleChange()}handleChange(){const t=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",t),this.$emit("change",t),this.fileList=[]}};Object(l["a"])([Object(o["c"])({default:()=>[]})],u.prototype,"value",void 0),Object(l["a"])([Object(o["c"])({default:1})],u.prototype,"limit",void 0),Object(l["a"])([Object(o["c"])({default:"100"})],u.prototype,"size",void 0),Object(l["a"])([Object(o["c"])({default:!1})],u.prototype,"disabled",void 0),Object(l["a"])([Object(o["c"])({default:!1})],u.prototype,"dragDisabled",void 0),Object(l["a"])([Object(o["c"])({default:!1})],u.prototype,"hiddenTrigger",void 0),Object(l["a"])([Object(o["c"])({default:"image"})],u.prototype,"type",void 0),Object(l["a"])([Object(o["c"])({default:"transparent"})],u.prototype,"uploadBg",void 0),Object(l["a"])([Object(o["c"])({default:!0})],u.prototype,"enableDomain",void 0),Object(l["a"])([Object(o["c"])({default:!0})],u.prototype,"enableDelete",void 0),Object(l["a"])([Object(o["f"])("value",{immediate:!0})],u.prototype,"valueChange",null),u=Object(l["a"])([Object(o["a"])({components:{LsDialog:r["a"],LsMaterial:n["a"],Draggable:m.a,FileItem:c["a"]}})],u);var p=u,f=p,b=(s("fb48"),s("2877")),h=Object(b["a"])(f,i,a,!1,null,"1503bff6",null);e["a"]=h.exports},f6c7:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"mp-toutiao"},[e("div",{staticClass:"ls-card"},[e("el-alert",{attrs:{title:"温馨提示：请先前往字节小程序开发平台申请认证字节小程序。",type:"info",closable:!1,"show-icon":""}})],1),e("el-form",{ref:"formRef",attrs:{model:t.form,rules:t.formRules,"label-width":"140px",size:"small"}},[e("div",{staticClass:"ls-card m-t-16"},[e("div",{staticClass:"card-title"},[t._v("开发者ID")]),e("div",{staticClass:"card-content m-t-24"},[e("el-form-item",{attrs:{label:"AppID",prop:"appid"}},[e("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.appid,callback:function(e){t.$set(t.form,"appid",e)},expression:"form.appid"}})],1),e("el-form-item",{attrs:{label:"AppSecret",prop:"secret"}},[e("el-input",{staticClass:"ls-input",attrs:{size:"small"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,"secret",e)},expression:"form.secret"}}),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录字节小程序开发平台，点击开发管理>开发设置->小程序Key，设置AppID和AppSecret ")])],1),e("el-form-item",{attrs:{label:"SALT",prop:"pay_salt"}},[e("el-input",{staticClass:"ls-input m-r-10",attrs:{size:"small"},model:{value:t.form.pay_salt,callback:function(e){t.$set(t.form,"pay_salt",e)},expression:"form.pay_salt"}}),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录字节小程序开发平台进入对应的小程序，点击功能管理>支付->担保交易->担保交易设置->支付回调信息配置，设置SALT ")])],1)],1)]),e("div",{staticClass:"ls-card m-t-16"},[e("div",{staticClass:"card-title"},[t._v("服务器域名")]),e("div",{staticClass:"card-content m-t-24"},[e("el-form-item",{attrs:{label:"request合法域名"}},[e("el-input",{staticClass:"ls-input m-r-10",attrs:{size:"small",disabled:""},model:{value:t.form.request_domain,callback:function(e){t.$set(t.form,"request_domain",e)},expression:"form.request_domain"}}),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.onCopy(t.form.request_domain)}}},[t._v("复制")]),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录字节小程序开发平台进入对应的小程序，点击开发管理>开发设置->服务器域名，填写https协议域名 ")])],1),e("el-form-item",{attrs:{label:"socket合法域名"}},[e("el-input",{staticClass:"ls-input m-r-10",attrs:{size:"small",disabled:""},model:{value:t.form.socket_domain,callback:function(e){t.$set(t.form,"socket_domain",e)},expression:"form.socket_domain"}}),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.onCopy(t.form.socket_domain)}}},[t._v("复制")]),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录字节小程序开发平台进入对应的小程序，点击开发管理>开发设置->服务器域名，填写wss协议域名 ")])],1),e("el-form-item",{attrs:{label:"uploadFile合法域名"}},[e("el-input",{staticClass:"ls-input m-r-10",attrs:{size:"small",disabled:""},model:{value:t.form.upload_file_domain,callback:function(e){t.$set(t.form,"upload_file_domain",e)},expression:"form.upload_file_domain"}}),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.onCopy(t.form.upload_file_domain)}}},[t._v("复制")]),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录字节小程序开发平台进入对应的小程序，点击开发管理>开发设置->服务器域名，填写https协议域名 ")])],1),e("el-form-item",{attrs:{label:"downloadFile合法域名"}},[e("el-input",{staticClass:"ls-input m-r-10",attrs:{size:"small",disabled:""},model:{value:t.form.download_file_domain,callback:function(e){t.$set(t.form,"download_file_domain",e)},expression:"form.download_file_domain"}}),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.onCopy(t.form.download_file_domain)}}},[t._v("复制")]),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录字节小程序开发平台进入对应的小程序，点击开发管理>开发设置->服务器域名，填写https协议域名 ")])],1)],1)]),e("div",{staticClass:"ls-card m-t-16"},[e("div",{staticClass:"card-title"},[t._v("业务域名")]),e("div",{staticClass:"card-content m-t-24"},[e("el-form-item",{attrs:{label:"业务域名"}},[e("el-input",{staticClass:"ls-input m-r-10",attrs:{size:"small",disabled:""},model:{value:t.form.business_domain,callback:function(e){t.$set(t.form,"business_domain",e)},expression:"form.business_domain"}}),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.onCopy(t.form.business_domain)}}},[t._v("复制")]),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录字节小程序开发平台进入对应的小程序，点击开发管理>开发设置->业务域名，填写业务域名 ")])],1)],1)]),e("div",{staticClass:"ls-card m-t-16"},[e("div",{staticClass:"card-title"},[t._v("支付回调信息配置")]),e("div",{staticClass:"card-content m-t-24"},[e("el-form-item",{attrs:{label:"URL(服务器地址)"}},[e("el-input",{staticClass:"ls-input m-r-10",attrs:{size:"small",disabled:""},model:{value:t.form.notify,callback:function(e){t.$set(t.form,"notify",e)},expression:"form.notify"}}),e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.onCopy(t.form.notify)}}},[t._v("复制")]),e("div",{staticClass:"muted xs m-r-16"},[t._v(" 登录字节小程序开发平台进入对应的小程序，点击功能管理>支付->担保交易->担保交易设置->支付回调信息配置，填写URL(服务器地址) ")])],1)],1)])]),e("div",{staticClass:"bg-white ls-fixed-footer"},[e("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.putWechatAppSetting()}}},[t._v("保存")])],1)])],1)},a=[],l=s("9ab4"),o=s("1b40"),r=s("b3ad"),n=s("f175");const c=()=>n["a"].get("/toutiao.toutiao_setting/getConfig"),d=t=>n["a"].post("/toutiao.toutiao_setting/setConfig",t);var m=s("6ddb");let u=class extends o["e"]{constructor(){super(...arguments),this.form={name:"",original_id:"",qr_code:"",appid:"",secret:"",pay_salt:"",request_domain:"",socket_domain:"",upload_file_domain:"",download_file_domain:"",udp_domain:"",business_domain:"",url:"",token:"",encoding_aes_key:"",encryption_type:1,data_format:1},this.formRules={appid:[{required:!0,message:"必填项不能为空",trigger:"blur"}],secret:[{required:!0,message:"必填项不能为空",trigger:"blur"}],pay_salt:[{required:!0,message:"必填项不能为空",trigger:"blur"}]}}getWechatAppSetting(){c().then(t=>{this.form=t}).catch(()=>{console.log("数据请求失败!")})}putWechatAppSetting(){this.$refs.formRef.validate(t=>{if(!t)return this.$message.error("请完善信息");d(this.form).then(t=>{this.getWechatAppSetting()}).catch(()=>{})})}onCopy(t){Object(m["b"])(t).then(()=>{this.$message.success("复制成功")}).catch(t=>{this.$message.error("复制失败"),console.log(t)})}created(){this.getWechatAppSetting()}};u=Object(l["a"])([Object(o["a"])({components:{MaterialSelect:r["a"]}})],u);var p=u,f=p,b=(s("b325"),s("2877")),h=Object(b["a"])(f,i,a,!1,null,"334dc1a6",null);e["default"]=h.exports},fb48:function(t,e,s){"use strict";s("239d")}}]);
//# sourceMappingURL=chunk-2f86a226.2e5285c9.js.map