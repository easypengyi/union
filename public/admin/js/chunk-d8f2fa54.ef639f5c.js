(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8f2fa54"],{"5cf7":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"area-select"},[e("el-cascader",{style:{width:t.width},attrs:{options:t.options},model:{value:t.areaValue,callback:function(e){t.areaValue=e},expression:"areaValue"}})],1)},i=[],l=a("9ab4"),r=a("0463"),o=a("1b40");let c=class extends o["e"]{constructor(){super(...arguments),this.options=r["a"]}get areaValue(){return[this.province,this.city,this.district]}set areaValue(t){this.$emit("update:province",t[0]),this.$emit("update:city",t[1]),this.$emit("update:district",t[2])}};Object(l["a"])([Object(o["c"])()],c.prototype,"province",void 0),Object(l["a"])([Object(o["c"])()],c.prototype,"city",void 0),Object(l["a"])([Object(o["c"])()],c.prototype,"district",void 0),Object(l["a"])([Object(o["c"])({default:"380px"})],c.prototype,"width",void 0),c=Object(l["a"])([o["a"]],c);var n=c,d=n,m=a("2877"),u=Object(m["a"])(d,s,i,!1,null,null,null);e["a"]=u.exports},"5f8a":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("el-date-picker",{attrs:{type:t.type,"picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",align:"right","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.changeDate},model:{value:t.pickerValue,callback:function(e){t.pickerValue=e},expression:"pickerValue"}})},i=[],l=a("9ab4"),r=a("1b40");let o=class extends r["e"]{constructor(){super(...arguments),this.pickerValue=[],this.pickerOptions={shortcuts:[{text:"最近一周",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}changeDate(){const t=this.pickerValue?this.pickerValue:this.pickerValue=["",""];this.$emit("update:start-time",t[0]),this.$emit("update:end-time",t[1])}handleStartTime(t){!this.pickerValue&&(this.pickerValue=[]),this.$set(this.pickerValue,0,t)}handleEndTime(t){!this.pickerValue&&(this.pickerValue=[]),this.$set(this.pickerValue,1,t)}};Object(l["a"])([Object(r["c"])()],o.prototype,"startTime",void 0),Object(l["a"])([Object(r["c"])()],o.prototype,"endTime",void 0),Object(l["a"])([Object(r["c"])({default:"datetimerange"})],o.prototype,"type",void 0),Object(l["a"])([Object(r["f"])("startTime",{immediate:!0})],o.prototype,"handleStartTime",null),Object(l["a"])([Object(r["f"])("endTime",{immediate:!0})],o.prototype,"handleEndTime",null),o=Object(l["a"])([r["a"]],o);var c=o,n=c,d=a("2877"),m=Object(d["a"])(n,s,i,!1,null,null,null);e["a"]=m.exports},"6eb4":function(t,e,a){"use strict";a("76b9")},"76b9":function(t,e,a){},afc6:function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"d",(function(){return l})),a.d(e,"i",(function(){return r})),a.d(e,"c",(function(){return o})),a.d(e,"f",(function(){return c})),a.d(e,"e",(function(){return n})),a.d(e,"a",(function(){return d})),a.d(e,"j",(function(){return m})),a.d(e,"h",(function(){return u})),a.d(e,"b",(function(){return p}));var s=a("f175");const i=t=>s["a"].get("/marketing.team/lists",{params:t}),l=t=>s["a"].post("/marketing.team/delete",t),r=t=>s["a"].post("/marketing.team/stop",t),o=t=>s["a"].post("/marketing.team/open",t),c=t=>s["a"].post("/marketing.team/edit",t),n=t=>s["a"].get("/marketing.team/detail",{params:t}),d=t=>s["a"].post("/marketing.team/add",t),m=t=>s["a"].get("/marketing.team/survey",{params:t}),u=t=>s["a"].get("/marketing.team/record",{params:t}),p=t=>s["a"].post("/marketing.team/cancel",t)},fa14:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"ls-team-edit"},[e("div",{staticClass:"ls-card ls-team-edit__header"},[0==t.status?e("el-page-header",{attrs:{content:"拼团活动详情"},on:{back:function(e){return t.$router.go(-1)}}}):e("el-page-header",{attrs:{content:t.id?"编辑拼团活动":"新增拼团活动"},on:{back:function(e){return t.$router.go(-1)}}})],1),e("div",{staticClass:"ls-card ls-team-edit__form m-t-10"},[e("div",{staticClass:"lg weight-500 m-b-20"},[t._v("基本信息")]),e("el-form",{ref:"teamList",attrs:{model:t.teamList,"label-width":"120px",size:"small"}},[e("el-form-item",{attrs:{label:"活动名称",required:""}},[e("el-input",{staticClass:"ls-input",attrs:{disabled:2!=t.status&&t.disabled,placeholder:"请输入活动名称",size:"small"},model:{value:t.teamList.name,callback:function(e){t.$set(t.teamList,"name",e)},expression:"teamList.name"}})],1),e("el-form-item",{attrs:{label:"活动时间",required:""}},[e("date-picker",{attrs:{type:"datetimerange",disabled:2!=t.status&&t.disabled,"start-time":t.teamList.start_time,"end-time":t.teamList.end_time},on:{"update:startTime":function(e){return t.$set(t.teamList,"start_time",e)},"update:start-time":function(e){return t.$set(t.teamList,"start_time",e)},"update:endTime":function(e){return t.$set(t.teamList,"end_time",e)},"update:end-time":function(e){return t.$set(t.teamList,"end_time",e)}}}),e("span",{staticClass:"desc"},[t._v("拼团活动开始和结束时间，可以手动提前结束活动")])],1),e("el-form-item",{attrs:{label:"活动说明"}},[e("el-input",{staticClass:"m-t-10",staticStyle:{width:"530px"},attrs:{disabled:2!=t.status&&t.disabled,type:"textarea",rows:7,placeholder:"请输入活动说明"},model:{value:t.teamList.explain,callback:function(e){t.$set(t.teamList,"explain",e)},expression:"teamList.explain"}})],1)],1)],1),e("div",{staticClass:"ls-card ls-team-edit__form m-t-10"},[e("div",{staticClass:"lg weight-500 m-b-20"},[t._v("活动商品")]),e("el-form",{ref:"teamList",attrs:{model:t.teamList,"label-width":"120px",size:"small",disabled:2!=t.status&&t.disabled}},[e("el-form-item",{attrs:{label:"拼团商品"}},[e("goods-select",{attrs:{mode:"table","is-spec":!0,limit:25,extend:{name:"拼团",price:[{title:"拼团价格",key:"team_price"}]}},model:{value:t.selectGoods,callback:function(e){t.selectGoods=e},expression:"selectGoods"}},[e("el-button",{attrs:{size:"mini",type:"primary"}},[t._v("选择拼团商品")])],1)],1)],1)],1),e("div",{staticClass:"ls-card ls-team-edit__form m-t-10"},[e("div",{staticClass:"lg weight-500 m-b-20"},[t._v("活动规则")]),e("el-form",{ref:"teamList",attrs:{model:t.teamList,"label-width":"120px",size:"small"}},[e("el-form-item",{attrs:{label:"成团有效期",required:""}},[e("el-input",{staticClass:"ls-input",attrs:{disabled:t.disabled,placeholder:"请输入成团有效期"},model:{value:t.teamList.effective_time,callback:function(e){t.$set(t.teamList,"effective_time",e)},expression:"teamList.effective_time"}},[e("template",{slot:"append"},[t._v("分钟")])],2),e("span",{staticClass:"desc"},[t._v("开团后的成团有效期，超出时间还未成团则拼团失败")])],1),e("el-form-item",{attrs:{label:"成团人数",required:""}},[e("el-input",{staticClass:"ls-input",attrs:{disabled:t.disabled,placeholder:"请输入成团人数"},model:{value:t.teamList.people_num,callback:function(e){t.$set(t.teamList,"people_num",e)},expression:"teamList.people_num"}},[e("template",{slot:"append"},[t._v("人")])],2),e("span",{staticClass:"desc"},[t._v("设置商品拼团人数，最少两人成团")])],1),e("el-form-item",{attrs:{label:"虚拟成团",required:""}},[e("el-radio",{attrs:{border:"",disabled:t.disabled,label:1},model:{value:t.teamList.is_automatic,callback:function(e){t.$set(t.teamList,"is_automatic",e)},expression:"teamList.is_automatic"}},[t._v("开启")]),e("el-radio",{attrs:{border:"",disabled:t.disabled,label:0},model:{value:t.teamList.is_automatic,callback:function(e){t.$set(t.teamList,"is_automatic",e)},expression:"teamList.is_automatic"}},[t._v("关闭")]),e("span",{staticClass:"desc"},[t._v("开启虚拟成团后，在成团有效期内人数不够的团，系统会虚拟用户使拼团成功。虚拟用户不生成订单，只需对买家发货。")])],1),e("el-form-item",{attrs:{label:"每单限制",required:""}},[e("el-radio-group",{model:{value:t.teamList.max_buy,callback:function(e){t.$set(t.teamList,"max_buy",e)},expression:"teamList.max_buy"}},[e("div",{staticClass:"m-t-10"},[e("el-radio",{attrs:{border:"",disabled:t.disabled,label:0}},[t._v("不限制")])],1),e("div",{staticClass:"m-t-24 flex"},[e("el-radio",{attrs:{border:"",disabled:t.disabled,label:0==t.teamList.max_buy?1:t.teamList.max_buy}},[t._v(" 限制 ")]),e("el-input",{attrs:{disabled:t.disabled||0==t.teamList.max_buy,size:"small"},on:{change:t.buyBuy2},model:{value:t.teamList.max_buy,callback:function(e){t.$set(t.teamList,"max_buy",e)},expression:"teamList.max_buy"}},[e("template",{slot:"append"},[t._v("件")])],2)],1)]),e("span",{staticClass:"desc"},[t._v("每件商品单笔订单最多购买的件数。起购限制会影响每单限制，请合理设置。")])],1)],1)],1),e("div",{staticClass:"ls-team-edit__footer bg-white ls-fixed-footer"},[e("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("取消")]),e("el-button",{attrs:{size:"small",disabled:2!=t.status&&t.disabled,type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("保存")])],1)])])},i=[],l=a("9ab4"),r=a("1b40"),o=a("5cf7"),c=a("f50c"),n=a("5f8a"),d=a("afc6");let m=class extends r["e"]{constructor(){super(...arguments),this.disabled=!1,this.status=0,this.teamList={name:"",min_buy:1,max_buy:1,people_num:"",is_coupon:1,is_distribution:1,is_automatic:1,goods:[],explain:"",effective_time:"",start_time:"",end_time:""},this.selectGoods=[]}selectGoodsChange(t){this.teamList.goods=t.map(t=>({goods_id:t.id,items:t.item.map(t=>({item_id:t.id,team_price:t.team_price}))}))}checkGoods(){let t=this.teamList.goods;if(!t.length)return this.$message.error("请选择拼团商品"),!1;for(let e=0;e<t.length;e++)for(let a=0;a<t[e].items.length;a++)if(!t[e].items[a].team_price)return this.$message.error("请输入商品拼团价"),!1;return!0}buyBuy(t){""===t.detail&&(this.teamList.min_buy=0)}buyBuy2(t){""===t&&(this.teamList.max_buy=0)}submit(){this.checkGoods()&&(this.id?this.teamEdit():this.teamAdd())}teamEdit(){Object(d["f"])({...this.teamList}).then(t=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{this.$message.error("修改失败!")})}teamAdd(){Object(d["a"])({...this.teamList}).then(t=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{this.$message.error("添加失败!")})}getteamDetail(){Object(d["e"])({id:this.id}).then(t=>{this.teamList=t,this.selectGoods=t.goods})}created(){this.status=this.$route.query.status,this.disabled="true"==this.$route.query.disabled,this.id=this.$route.query.id,this.id&&this.getteamDetail()}};Object(l["a"])([Object(r["f"])("selectGoods",{deep:!0})],m.prototype,"selectGoodsChange",null),m=Object(l["a"])([Object(r["a"])({components:{AreaSelect:o["a"],GoodsSelect:c["a"],DatePicker:n["a"]}})],m);var u=m,p=u,b=(a("6eb4"),a("2877")),h=Object(b["a"])(p,s,i,!1,null,"f93fd89e",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-d8f2fa54.ef639f5c.js.map