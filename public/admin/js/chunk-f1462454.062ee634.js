(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f1462454"],{"0cbf":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"g",(function(){return n})),s.d(t,"c",(function(){return o})),s.d(t,"h",(function(){return l})),s.d(t,"l",(function(){return u})),s.d(t,"k",(function(){return c})),s.d(t,"d",(function(){return d})),s.d(t,"f",(function(){return p})),s.d(t,"m",(function(){return f})),s.d(t,"i",(function(){return m})),s.d(t,"n",(function(){return h})),s.d(t,"j",(function(){return b})),s.d(t,"b",(function(){return g}));var r=s("f175");const a=e=>r["a"].post("/marketing.coupon/add",e),i=e=>r["a"].post("/marketing.coupon/edit",e),n=e=>r["a"].get("/marketing.coupon/lists",{params:e}),o=e=>r["a"].post("/marketing.coupon/delete",e),l=e=>r["a"].post("/marketing.coupon/open",e),u=e=>r["a"].post("/marketing.coupon/stop",e),c=e=>r["a"].post("/marketing.coupon/sort",e),d=e=>r["a"].get("/marketing.coupon/detail",{params:{id:e}}),p=e=>r["a"].get("/marketing.coupon/info",{params:{id:e}}),f=()=>r["a"].get("/marketing.coupon/survey"),m=e=>r["a"].get("/marketing.coupon/record",{params:e}),h=e=>r["a"].post("/marketing.coupon/void",e),b=e=>r["a"].post("/marketing.coupon/send",e),g=e=>r["a"].get("/marketing.coupon/commonLists",{params:e})},"5cf7":function(e,t,s){"use strict";var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"area-select"},[t("el-cascader",{style:{width:e.width},attrs:{options:e.options},model:{value:e.areaValue,callback:function(t){e.areaValue=t},expression:"areaValue"}})],1)},a=[],i=s("9ab4"),n=s("0463"),o=s("1b40");let l=class extends o["e"]{constructor(){super(...arguments),this.options=n["a"]}get areaValue(){return[this.province,this.city,this.district]}set areaValue(e){this.$emit("update:province",e[0]),this.$emit("update:city",e[1]),this.$emit("update:district",e[2])}};Object(i["a"])([Object(o["c"])()],l.prototype,"province",void 0),Object(i["a"])([Object(o["c"])()],l.prototype,"city",void 0),Object(i["a"])([Object(o["c"])()],l.prototype,"district",void 0),Object(i["a"])([Object(o["c"])({default:"380px"})],l.prototype,"width",void 0),l=Object(i["a"])([o["a"]],l);var u=l,c=u,d=s("2877"),p=Object(d["a"])(c,r,a,!1,null,null,null);t["a"]=p.exports},"65a4":function(e,t,s){"use strict";var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{staticClass:"ls-dialog__trigger",on:{click:e.onTrigger}},[e._t("trigger")],2),t("el-dialog",{attrs:{"coustom-class":"ls-dialog__content",title:"用户选择",visible:e.visible,width:"70vw",top:e.top,"modal-append-to-body":!1,center:"","before-close":e.close,"close-on-click-modal":!1,"append-to-body":""}},[t("div",{staticClass:"user-search m-t-16 flex row-between"},[t("div",{staticStyle:{height:"53px"}},[t("el-checkbox",{model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[e._v("全选")])],1),t("el-form",{ref:"form",attrs:{inline:"",model:e.userSearchData,"label-width":"80px",size:"small"}},[t("el-form-item",{attrs:{label:"用户搜索"}},[t("el-input",{staticClass:"header-input",attrs:{placeholder:"请输入用户名称"},model:{value:e.userSearchData.nickname,callback:function(t){e.$set(e.userSearchData,"nickname",t)},expression:"userSearchData.nickname"}})],1),t("el-form-item",{staticClass:"m-l-6",attrs:{label:""}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.getUserInfoList(1)}}},[e._v("查询")]),t("el-button",{attrs:{size:"small"},on:{click:e.resetuserSearchData}},[e._v("重置")])],1)],1)],1),t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pager.loading,expression:"pager.loading"}],ref:"paneTable",staticStyle:{width:"100%"},attrs:{height:"500",size:"mini",data:e.pager.lists}},[t("el-table-column",{attrs:{fixed:"left",width:"55"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-checkbox",{attrs:{value:e.selectItem(s.row)},on:{change:function(t){return e.handleSelect(t,s.row)}}})]}}])}),t("el-table-column",{attrs:{prop:"sn",label:"用户编号","min-width":"120"}}),t("el-table-column",{attrs:{label:"用户昵称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"flex"},[t("el-image",{staticStyle:{width:"34px",height:"34px"},attrs:{src:s.row.avatar}}),t("div",{staticClass:"m-l-10"},[e._v(" "+e._s(s.row.nickname)+" ")])],1)]}}])}),t("el-table-column",{attrs:{prop:"user_money",label:"用户余额","min-width":"120"}}),t("el-table-column",{attrs:{prop:"mobile",label:"手机号码","min-width":"120"}}),t("el-table-column",{attrs:{prop:"is_distribution",label:"分销商","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.is_distribution?"是":"否")+" ")]}}])}),t("el-table-column",{attrs:{prop:"create_time",label:"注册时间","min-width":"120"}})],1)],1),t("div",{staticClass:"m-t-24 flex row-center"},[t("ls-pagination",{on:{change:function(t){return e.getUserInfoList()}},model:{value:e.pager,callback:function(t){e.pager=t},expression:"pager"}})],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleEvent("cancel")}}},[e._v("取消并关闭")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.handleEvent("confirm")}}},[e._v("确认选择")])],1)]),0!=e.selectIds.length?t("el-table",{ref:"paneTable",staticClass:"m-t-24",staticStyle:{width:"100%"},attrs:{height:"250",size:"mini",data:e.selectIds}},[t("el-table-column",{attrs:{prop:"sn",label:"用户编号"}}),t("el-table-column",{attrs:{label:"用户昵称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"flex"},[t("el-image",{staticStyle:{width:"34px",height:"34px"},attrs:{src:s.row.avatar}}),t("div",{staticClass:"m-l-10"},[e._v(" "+e._s(s.row.nickname)+" ")])],1)]}}],null,!1,3993698936)}),t("el-table-column",{attrs:{prop:"is_distribution",label:"分销商",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1==t.row.is_distribution?"是":"否")+" ")]}}],null,!1,1179022239)}),t("el-table-column",{attrs:{prop:"mobile",label:"手机号码"}}),t("el-table-column",{attrs:{label:"操作",width:"110"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.removeSelectGoods(s.row.id)}}},[e._v("移除")])]}}],null,!1,3764884895)})],1):e._e()],1)},a=[],i=(s("caad"),s("9ab4")),n=s("1b40"),o=s("6ddb"),l=s("3c50"),u=s("f633");let c=class extends n["e"]{constructor(){super(...arguments),this.visible=!1,this.userSearchData={nickname:""},this.pager=new o["a"],this.selectIds=[]}get selectItem(){return e=>this.selectIds.some(t=>t.id===e.id)}get selectAll(){let e=this.selectIds.map(e=>e.id);return this.pager.lists.every(t=>e.includes(t.id))}set selectAll(e){this.selectIds=e?JSON.parse(JSON.stringify(this.pager.lists)):[]}handleSelect(e,t){if(e)this.selectIds.push(t);else{const e=this.selectIds.findIndex(e=>e.id===t.id);-1!=e&&this.selectIds.splice(e,1)}}removeSelectGoods(e){const t=this.selectIds.map(t=>t.id==e);-1!=t&&this.selectIds.splice(t,1)}getUserInfoList(e){e&&(this.pager.page=e),this.pager.request({callback:u["a"],params:{...this.userSearchData,is_distribution:this.is_distribution}})}resetuserSearchData(){Object.keys(this.userSearchData).map(e=>{this.$set(this.userSearchData,e,"")}),this.getUserInfoList()}selectionChange(e){this.selectIds=e.map(e=>e)}handleEvent(e){"cancel"===e&&(this.selectIds=[],this.close()),"confirm"===e&&(this.$emit("input",this.selectIds),this.close())}onTrigger(){this.visible=!0,this.getUserInfoList()}close(){this.visible=!1}created(){this.getUserInfoList()}};Object(i["a"])([Object(n["c"])({default:"5vh"})],c.prototype,"top",void 0),Object(i["a"])([Object(n["c"])({default:0})],c.prototype,"is_distribution",void 0),c=Object(i["a"])([Object(n["a"])({components:{LsPagination:l["a"]}})],c);var d=c,p=d,f=(s("eda2f"),s("2877")),m=Object(f["a"])(p,r,a,!1,null,"1de17008",null);t["a"]=m.exports},a0bf:function(e,t,s){},eda2f:function(e,t,s){"use strict";s("a0bf")},f633:function(e,t,s){"use strict";s.d(t,"o",(function(){return a})),s.d(t,"k",(function(){return i})),s.d(t,"m",(function(){return n})),s.d(t,"n",(function(){return o})),s.d(t,"l",(function(){return l})),s.d(t,"j",(function(){return u})),s.d(t,"f",(function(){return c})),s.d(t,"h",(function(){return d})),s.d(t,"i",(function(){return p})),s.d(t,"g",(function(){return f})),s.d(t,"p",(function(){return m})),s.d(t,"q",(function(){return h})),s.d(t,"b",(function(){return b})),s.d(t,"s",(function(){return g})),s.d(t,"t",(function(){return _})),s.d(t,"u",(function(){return v})),s.d(t,"r",(function(){return k})),s.d(t,"c",(function(){return w})),s.d(t,"d",(function(){return y})),s.d(t,"e",(function(){return I})),s.d(t,"v",(function(){return x})),s.d(t,"a",(function(){return S}));var r=s("f175");const a=e=>r["a"].get("/user.user_level/lists",{params:e}),i=e=>r["a"].post("/user.user_level/add",e),n=e=>r["a"].get("/user.user_level/detail",{params:e}),o=e=>r["a"].post("/user.user_level/edit",e),l=e=>r["a"].post("/user.user_level/del",e),u=e=>r["a"].get("/user.user_label/lists",{params:e}),c=e=>r["a"].post("/user.user_label/add",e),d=e=>r["a"].get("/user.user_label/detail",{params:e}),p=e=>r["a"].post("/user.user_label/edit",e),f=e=>r["a"].post("/user.user_label/del",e),m=e=>r["a"].get("/user.user/lists",{params:e}),h=()=>r["a"].get("/user.user/otherList"),b=e=>r["a"].get("/user.user/detail",{params:e}),g=e=>r["a"].post("/user.user/setInfo",e),_=e=>r["a"].post("/user.user/setLabel",e),v=e=>r["a"].post("/user.user/setUserLabel",e),k=e=>r["a"].post("/user.user/adjustUserWallet",e),w=()=>r["a"].get("/user.user/index"),y=e=>r["a"].get("/user.user/info",{params:e}),I=e=>r["a"].get("/user.user/userInviterLists",{params:e}),x=e=>r["a"].post("/user.user/adjustFirstLeader",e),S=e=>r["a"].get("/user.user/selectUserLists",{params:e})},f9e6:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"ls-coupon-edit"},[t("div",{staticClass:"ls-card ls-coupon-edit__header"},[t("el-page-header",{attrs:{content:"发放优惠券"},on:{back:function(t){return e.$router.go(-1)}}})],1),t("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10"},[t("div",{staticClass:"lg weight-500 m-b-20"},[e._v("优惠券信息")]),t("el-form",{ref:"couponInfo",attrs:{model:e.couponInfo,"label-width":"120px",size:"small"}},[t("el-form-item",{attrs:{label:"优惠券编号：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.sn)+" ")]],2),t("el-form-item",{attrs:{label:"优惠券名称：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.name)+" ")]],2),t("el-form-item",{attrs:{label:"推广方式：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.get_method)+" ")]],2),t("el-form-item",{attrs:{label:"用券时间：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.use_time_text)+" ")]],2),t("el-form-item",{attrs:{label:"发放总量：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.send_total)+" ")]],2),t("el-form-item",{attrs:{label:"剩余发放量：",prop:"",required:""}},[[e._v(" "+e._s(this.couponInfo.surplus_number)+" ")]],2)],1)],1),t("div",{staticClass:"ls-card ls-coupon-edit__form m-t-10 m-b-60"},[t("div",{staticClass:"lg weight-500 m-b-20"},[e._v("发放设置")]),t("el-form",{ref:"couponInfo",attrs:{model:e.couponInfo,"label-width":"120px",size:"small"}},[t("el-form-item",{attrs:{label:"每人发放张数"}},[t("el-input",{staticStyle:{width:"280px"},attrs:{placeholder:"请输入发放的优惠券数量"},model:{value:e.couponInfo.send_user_num,callback:function(t){e.$set(e.couponInfo,"send_user_num",t)},expression:"couponInfo.send_user_num"}})],1),t("el-form-item",{attrs:{label:"发放范围"}},[t("div",[t("user-select",{attrs:{is_distribution:""},model:{value:e.userSelectData,callback:function(t){e.userSelectData=t},expression:"userSelectData"}},[t("el-button",{attrs:{slot:"trigger",size:"mini",type:"primary"},slot:"trigger"},[e._v("选择用户")])],1)],1)])],1)],1),t("div",{staticClass:"ls-coupon-edit__footer bg-white ls-fixed-footer"},[t("div",{staticClass:"btns row-center flex",staticStyle:{height:"100%"}},[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submit("couponInfo")}}},[e._v("保存 ")])],1)])])},a=[],i=s("9ab4"),n=s("1b40"),o=s("5cf7"),l=s("65a4"),u=s("0cbf");let c=class extends n["e"]{constructor(){super(...arguments),this.couponInfo={id:this.id,send_user_num:"",send_user:[]},this.userSelectData=[]}submit(e){const t=this.$refs[e];t.validate(e=>{e&&this.couponSend()})}couponSend(){if(void 0==this.couponInfo.send_user_num)return this.$message.error("请输入要发放的优惠券数量！!");const e={id:this.id,send_user_num:this.couponInfo.send_user_num,send_user:this.userSelectData.map(e=>e.id)};Object(u["j"])({...e}).then(e=>{this.$message.success("发放成功!"),setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{this.$message.error("发放失败!")})}getCouponInfo(){Object(u["f"])(this.id).then(e=>{this.couponInfo=e})}created(){this.id=this.$route.query.id,this.id&&this.getCouponInfo()}};c=Object(i["a"])([Object(n["a"])({components:{AreaSelect:o["a"],UserSelect:l["a"]}})],c);var d=c,p=d,f=s("2877"),m=Object(f["a"])(p,r,a,!1,null,"fb27ad8e",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-f1462454.062ee634.js.map