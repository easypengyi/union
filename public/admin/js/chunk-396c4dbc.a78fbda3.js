(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-396c4dbc"],{"0ce5":function(e,t,s){},"239d":function(e,t,s){},a3ee:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"user-grade-edit"},[t("div",{staticClass:"ls-card"},[e.disabled?t("el-page-header",{attrs:{content:"用户等级详情"},on:{back:function(t){return e.$router.go(-1)}}}):t("el-page-header",{attrs:{content:"add"==e.mode?"新增用户等级":"编辑用户等级"},on:{back:function(t){return e.$router.go(-1)}}})],1),t("el-form",{ref:"formRef",attrs:{rules:e.formRules,model:e.form,"label-width":"120px",size:"small"}},[t("div",{staticClass:"ls-card m-t-16"},[t("div",{staticClass:"card-title"},[e._v(" 等级信息 ")]),t("div",{staticClass:"card-content m-t-24"},[t("el-form-item",{attrs:{label:"等级名称",prop:"name"}},[t("el-input",{attrs:{disabled:e.disabled,placeholder:"请输入等级名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"等级级别",prop:"rank"}},[t("el-input",{staticClass:"ls-input",attrs:{placeholder:"请输入等级级别",disabled:"edit"===e.mode&&1===e.isLevel||e.disabled},model:{value:e.form.rank,callback:function(t){e.$set(e.form,"rank",e._n(t))},expression:"form.rank"}}),t("span",{staticClass:"m-l-10"},[e._v("级")]),t("div",{staticClass:"muted xs m-r-16"},[e._v(" 权重数字越大表示等级越高，等级权重不能相同。填写大于1的整数 ")])],1),t("el-form-item",{attrs:{label:"等级图标"}},[t("material-select",{attrs:{limit:1,disabled:e.disabled},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}}),t("div",{staticClass:"flex"},[t("div",{staticClass:"muted xs m-r-16"},[e._v("建议尺寸：100*100像素，jpg，jpeg，png图片类型")])])],1),t("el-form-item",{attrs:{label:"等级背景图"}},[t("material-select",{attrs:{limit:1,disabled:e.disabled},model:{value:e.form.background_image,callback:function(t){e.$set(e.form,"background_image",t)},expression:"form.background_image"}}),t("div",{staticClass:"flex"},[t("div",{staticClass:"muted xs m-r-16"},[e._v("建议尺寸：800*500像素，jpg，jpeg，png图片类型")])])],1),t("el-form-item",{attrs:{label:"等级描述",prop:"remark"}},[t("el-input",{staticClass:"ls-input-textarea",attrs:{disabled:e.disabled,placeholder:"请输入等级描述",type:"textarea",rows:3},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1)]),t("div",{staticClass:"ls-card m-t-16"},[t("div",{staticClass:"card-title"},[e._v(" 等级权益 ")]),t("div",{staticClass:"card-content m-t-24"},[t("el-form-item",{attrs:{label:"等级折扣",prop:"level_discount"}},[t("div",[t("el-radio",{attrs:{label:0,disabled:e.disabled},model:{value:e.form.level_discount,callback:function(t){e.$set(e.form,"level_discount",t)},expression:"form.level_discount"}},[e._v("无等级折扣")])],1),t("div",[t("el-radio",{attrs:{label:1,disabled:e.disabled},model:{value:e.form.level_discount,callback:function(t){e.$set(e.form,"level_discount",t)},expression:"form.level_discount"}},[t("span",{staticClass:"m-r-5"},[e._v("参与等级折扣")]),t("el-input",{staticClass:"ls-input",attrs:{size:"small",disabled:e.disabled},model:{value:e.form.discount,callback:function(t){e.$set(e.form,"discount",t)},expression:"form.discount"}}),t("span",{staticClass:"m-l-5"},[e._v("折")])],1)],1),t("div",{staticClass:"muted xs m-r-16"},[e._v(" 购买符合条件的商品时，可以使用等级折扣进行优惠。填写0到10之间的数字，可以保留小数点2位数字 ")])])],1)]),"edit"!==e.mode||1!==e.form.rank?t("div",{staticClass:"ls-card m-t-16"},[t("div",{staticClass:"card-title"},[e._v(" 等级条件 ")]),t("div",{staticClass:"card-content m-t-24"},[t("el-form-item",{attrs:{label:"等级条件",prop:"condition_type"}},[t("el-radio-group",{staticClass:"m-r-16",attrs:{disabled:e.disabled},model:{value:e.form.condition_type,callback:function(t){e.$set(e.form,"condition_type",t)},expression:"form.condition_type"}},[t("el-radio",{staticClass:"m-r-16",attrs:{label:0}},[e._v("满足以下任意条件")]),t("el-radio",{staticClass:"m-r-16",attrs:{label:1}},[e._v("满足以下全部条件")])],1),t("div",{staticClass:"flex-col"},[t("el-checkbox",{staticClass:"m-t-18",attrs:{disabled:e.disabled},model:{value:e.is_single_money,callback:function(t){e.is_single_money=t},expression:"is_single_money"}},[t("div",{staticClass:"flex"},[t("span",{staticClass:"m-r-5"},[e._v("单笔消费金额")]),t("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled},model:{value:e.form.single_money,callback:function(t){e.$set(e.form,"single_money",t)},expression:"form.single_money"}},[t("template",{slot:"append"},[e._v("元")])],2)],1)]),t("el-checkbox",{staticClass:"m-t-18",attrs:{disabled:e.disabled},model:{value:e.is_total_money,callback:function(t){e.is_total_money=t},expression:"is_total_money"}},[t("div",{staticClass:"flex"},[t("span",{staticClass:"m-r-5"},[e._v("累计消费金额")]),t("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled},model:{value:e.form.total_money,callback:function(t){e.$set(e.form,"total_money",t)},expression:"form.total_money"}},[t("template",{slot:"append"},[e._v("元")])],2)],1)]),t("el-checkbox",{staticClass:"m-t-18",attrs:{disabled:e.disabled},model:{value:e.is_total_num,callback:function(t){e.is_total_num=t},expression:"is_total_num"}},[t("div",{staticClass:"flex"},[t("span",{staticClass:"m-r-5"},[e._v("累计消费次数")]),t("el-input",{staticClass:"ls-input",attrs:{disabled:e.disabled},model:{value:e.form.total_num,callback:function(t){e.$set(e.form,"total_num",t)},expression:"form.total_num"}},[t("template",{slot:"append"},[e._v("次")])],2)],1)])],1)],1)],1)]):e._e()]),t("div",{staticClass:"bg-white ls-fixed-footer"},[t("div",{staticClass:"row-center flex",staticStyle:{height:"100%"}},[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("取消")]),t("el-button",{attrs:{size:"small",type:"primary",disabled:e.disabled},on:{click:function(t){return e.onSubmit()}}},[e._v("保存")])],1)])],1)},i=[],l=s("9ab4"),r=s("1b40"),o=s("b3ad"),n=s("4201"),d=s("f633");let c=class extends r["e"]{constructor(){super(...arguments),this.mode=n["f"]["ADD"],this.identity=null,this.isLevel=null,this.disabled=!1,this.form={name:"",rank:0,image:"",background_image:"",remark:"",level_discount:0,discount:10,condition_type:0,single_money:0,total_money:0,total_num:0},this.is_single_money=!1,this.is_total_money=!1,this.is_total_num=!1,this.formRules={name:[{required:!0,message:"请输入等级名称",trigger:"blur"}],rank:[{required:!0,message:"请输入等级级别",trigger:"blur"},{type:"number",required:!0,message:"请输入大于1的整数",trigger:"blur"}],level_discount:[{required:!0,message:"请选择等级折扣",trigger:"change"}],condition_type:[{required:!0,message:"请选择等级条件",trigger:"change"}]}}onSubmit(){this.$refs.formRef.validate(e=>{if(e)switch(this.mode){case n["f"]["ADD"]:return this.handleUserLevelAdd();case n["f"]["EDIT"]:return this.handleUserLevelEdit()}})}handleUserLevelAdd(){const e=this.form;Object(d["k"])(e).then(()=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{})}handleUserLevelEdit(){const e=this.form,t=this.identity;Object(d["n"])({...e,id:t}).then(()=>{setTimeout(()=>this.$router.go(-1),500)}).catch(()=>{})}initFormDataForUserLevelEdit(){Object(d["m"])({id:this.identity}).then(e=>{Object.keys(e).map(t=>{this.$set(this.form,t,e[t])})}).catch(()=>{})}created(){const e=this.$route.query;e.mode&&(this.mode=e.mode),this.disabled=null!=this.$route.query.disabled,this.mode===n["f"]["EDIT"]&&(this.identity=1*e.id,this.isLevel=1*e.level,this.initFormDataForUserLevelEdit())}changeSingleMoney(e){this.is_single_money=0!=e}changeTotalMoney(e){this.is_total_money=0!=e}changeTotalNum(e){this.is_total_num=0!=e}};Object(l["a"])([Object(r["f"])("form.single_money")],c.prototype,"changeSingleMoney",null),Object(l["a"])([Object(r["f"])("form.total_money")],c.prototype,"changeTotalMoney",null),Object(l["a"])([Object(r["f"])("form.total_num")],c.prototype,"changeTotalNum",null),c=Object(l["a"])([Object(r["a"])({components:{MaterialSelect:o["a"]}})],c);var u=c,m=u,f=(s("c63c"),s("2877")),p=Object(f["a"])(m,a,i,!1,null,"8ac383f0",null);t["default"]=p.exports},b3ad:function(e,t,s){"use strict";var a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("ls-dialog",{ref:"materialDialog",staticClass:"material-select",attrs:{title:"选择"+e.tipsText,width:"1050px",top:"15vh"},on:{confirm:e.handleConfirm}},[e.hiddenTrigger?e._e():t("div",{staticClass:"material-select__trigger clearfix",attrs:{slot:"trigger"},on:{click:function(e){e.stopPropagation()}},slot:"trigger"},[t("draggable",{staticClass:"ls-draggable",attrs:{animation:"300",disabled:e.disabled||e.dragDisabled},on:{update:e.handleChange},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}},e._l(e.fileList,(function(s,a){return t("div",{key:s+a,staticClass:"material-preview ls-del-wrap",class:{"is-disabled":e.disabled,"is-one":1==e.limit},on:{click:function(t){return e.showDialog(!1,a)}}},[e.$scopedSlots.preview?t("div",[e._t("preview",null,{item:e.imageUri(s)})],2):t("file-item",{attrs:{type:e.type,item:{uri:e.imageUri(s)},size:e.size}}),e.enableDelete?t("i",{staticClass:"el-icon-close ls-icon-del",on:{click:function(t){return t.stopPropagation(),e.delImage(a)}}}):e._e()],1)})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showUpload,expression:"showUpload"}],staticClass:"material-upload",class:{"is-disabled":e.disabled,"is-one":1==e.limit},on:{click:function(t){return e.showDialog(!0)}}},[e.$slots.upload?t("div",[e._t("upload")],2):t("div",{staticClass:"upload-btn flex row-center",style:{width:e.size+"px",height:e.size+"px",background:e.uploadBg}},[e._t("default"),e.$slots.default?e._e():t("span",[e._v("添加"+e._s(e.tipsText))])],2)])],1),t("div",{staticClass:"material-wrap"},[t("ls-material",{ref:"material",attrs:{"page-size":15,type:e.type,limit:e.meterialLimit},on:{change:e.selectChange}})],1)])},i=[],l=s("9ab4"),r=s("1b40"),o=s("0a6d"),n=s("c6fe"),d=s("e915"),c=s("b76a"),u=s.n(c);let m=class extends r["e"]{constructor(){super(...arguments),this.isAdd=!0,this.fileList=[]}get showUpload(){const{fileList:e,limit:t}=this;return t-e.length>0}get meterialLimit(){return this.isAdd?this.limit?this.limit-this.fileList.length:null:1}get tipsText(){switch(this.type){case"image":return"图片";case"video":return"视频"}}get imageUri(){return e=>this.enableDomain?e:this.$getImageUri(e)}valueChange(e){this.fileList=Array.isArray(e)?e:""==e?[]:[e]}showDialog(e=!0,t){var s;this.disabled||(this.isAdd=e,void 0!==t&&(this.currentIndex=t),null===(s=this.$refs.materialDialog)||void 0===s||s.onTrigger())}selectChange(e){this.select=e}handleConfirm(){this.$refs.material.clearSelectList();const e=this.select.map(e=>this.enableDomain?e.uri:e.url);this.isAdd?this.fileList=this.fileList.concat(e):this.fileList.splice(this.currentIndex,1,e.shift()),this.handleChange()}delImage(e){this.fileList.splice(e,1),this.handleChange()}handleChange(){const e=1!=this.limit?this.fileList:this.fileList[0]||"";this.$emit("input",e),this.$emit("change",e),this.fileList=[]}};Object(l["a"])([Object(r["c"])({default:()=>[]})],m.prototype,"value",void 0),Object(l["a"])([Object(r["c"])({default:1})],m.prototype,"limit",void 0),Object(l["a"])([Object(r["c"])({default:"100"})],m.prototype,"size",void 0),Object(l["a"])([Object(r["c"])({default:!1})],m.prototype,"disabled",void 0),Object(l["a"])([Object(r["c"])({default:!1})],m.prototype,"dragDisabled",void 0),Object(l["a"])([Object(r["c"])({default:!1})],m.prototype,"hiddenTrigger",void 0),Object(l["a"])([Object(r["c"])({default:"image"})],m.prototype,"type",void 0),Object(l["a"])([Object(r["c"])({default:"transparent"})],m.prototype,"uploadBg",void 0),Object(l["a"])([Object(r["c"])({default:!0})],m.prototype,"enableDomain",void 0),Object(l["a"])([Object(r["c"])({default:!0})],m.prototype,"enableDelete",void 0),Object(l["a"])([Object(r["f"])("value",{immediate:!0})],m.prototype,"valueChange",null),m=Object(l["a"])([Object(r["a"])({components:{LsDialog:o["a"],LsMaterial:n["a"],Draggable:u.a,FileItem:d["a"]}})],m);var f=m,p=f,b=(s("fb48"),s("2877")),h=Object(b["a"])(p,a,i,!1,null,"1503bff6",null);t["a"]=h.exports},c63c:function(e,t,s){"use strict";s("0ce5")},f633:function(e,t,s){"use strict";s.d(t,"o",(function(){return i})),s.d(t,"k",(function(){return l})),s.d(t,"m",(function(){return r})),s.d(t,"n",(function(){return o})),s.d(t,"l",(function(){return n})),s.d(t,"j",(function(){return d})),s.d(t,"f",(function(){return c})),s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return m})),s.d(t,"g",(function(){return f})),s.d(t,"p",(function(){return p})),s.d(t,"q",(function(){return b})),s.d(t,"b",(function(){return h})),s.d(t,"s",(function(){return g})),s.d(t,"t",(function(){return v})),s.d(t,"u",(function(){return _})),s.d(t,"r",(function(){return y})),s.d(t,"c",(function(){return C})),s.d(t,"d",(function(){return x})),s.d(t,"e",(function(){return k})),s.d(t,"v",(function(){return j})),s.d(t,"a",(function(){return O}));var a=s("f175");const i=e=>a["a"].get("/user.user_level/lists",{params:e}),l=e=>a["a"].post("/user.user_level/add",e),r=e=>a["a"].get("/user.user_level/detail",{params:e}),o=e=>a["a"].post("/user.user_level/edit",e),n=e=>a["a"].post("/user.user_level/del",e),d=e=>a["a"].get("/user.user_label/lists",{params:e}),c=e=>a["a"].post("/user.user_label/add",e),u=e=>a["a"].get("/user.user_label/detail",{params:e}),m=e=>a["a"].post("/user.user_label/edit",e),f=e=>a["a"].post("/user.user_label/del",e),p=e=>a["a"].get("/user.user/lists",{params:e}),b=()=>a["a"].get("/user.user/otherList"),h=e=>a["a"].get("/user.user/detail",{params:e}),g=e=>a["a"].post("/user.user/setInfo",e),v=e=>a["a"].post("/user.user/setLabel",e),_=e=>a["a"].post("/user.user/setUserLabel",e),y=e=>a["a"].post("/user.user/adjustUserWallet",e),C=()=>a["a"].get("/user.user/index"),x=e=>a["a"].get("/user.user/info",{params:e}),k=e=>a["a"].get("/user.user/userInviterLists",{params:e}),j=e=>a["a"].post("/user.user/adjustFirstLeader",e),O=e=>a["a"].get("/user.user/selectUserLists",{params:e})},fb48:function(e,t,s){"use strict";s("239d")}}]);
//# sourceMappingURL=chunk-396c4dbc.a78fbda3.js.map