(window.webpackJsonp=window.webpackJsonp||[]).push([[56,9],{438:function(e,t,r){"use strict";var n=r(19),o=r(2),c=r(3),l=r(135),f=r(28),d=r(20),m=r(273),v=r(53),h=r(134),w=r(272),x=r(4),_=r(90).f,y=r(44).f,C=r(27).f,k=r(439),S=r(440).trim,I="Number",N=o.Number,P=N.prototype,O=o.TypeError,$=c("".slice),j=c("".charCodeAt),M=function(e){var t=w(e,"number");return"bigint"==typeof t?t:T(t)},T=function(e){var t,r,n,o,c,l,f,code,d=w(e,"number");if(h(d))throw O("Cannot convert a Symbol value to a number");if("string"==typeof d&&d.length>2)if(d=S(d),43===(t=j(d,0))||45===t){if(88===(r=j(d,2))||120===r)return NaN}else if(48===t){switch(j(d,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+d}for(l=(c=$(d,2)).length,f=0;f<l;f++)if((code=j(c,f))<48||code>o)return NaN;return parseInt(c,n)}return+d};if(l(I,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var E,R=function(e){var t=arguments.length<1?0:N(M(e)),r=this;return v(P,r)&&x((function(){k(r)}))?m(Object(t),r,R):t},A=n?_(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),D=0;A.length>D;D++)d(N,E=A[D])&&!d(R,E)&&C(R,E,y(N,E));R.prototype=P,P.constructor=R,f(o,I,R)}},439:function(e,t,r){var n=r(3);e.exports=n(1..valueOf)},440:function(e,t,r){var n=r(3),o=r(26),c=r(15),l=r(441),f=n("".replace),d="["+l+"]",m=RegExp("^"+d+d+"*"),v=RegExp(d+d+"*$"),h=function(e){return function(t){var r=c(o(t));return 1&e&&(r=f(r,m,"")),2&e&&(r=f(r,v,"")),r}};e.exports={start:h(1),end:h(2),trim:h(3)}},441:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},443:function(e,t,r){"use strict";r(18),r(60);t.a={head:function(){var e=this.$store.getters.headerMeta;return{title:e.title,link:[{rel:"icon",type:"image/x-icon",href:e.ico}],meta:[{hid:"description",name:"description",content:e.description},{hid:"keywords",name:"keywords",content:e.keywords}]}}}},448:function(e,t,r){"use strict";r.r(t);r(438),r(62),r(61),r(11),r(92),r(38),r(91);var n=6e4,o=36e5,c=24*o;function l(e){return(0+e.toString()).slice(-2)}var f={components:{},props:{isSlot:{type:Boolean,default:!1},time:{type:Number,default:0},format:{type:String,default:"hh:mm:ss"},autoStart:{type:Boolean,default:!0}},watch:{time:{immediate:!0,handler:function(e){e&&this.reset()}}},data:function(){return{timeObj:{},formateTime:0}},created:function(){},computed:{},methods:{createTimer:function(e){return setTimeout(e,100)},isSameSecond:function(e,t){return Math.floor(e)===Math.floor(t)},start:function(){this.counting||(this.counting=!0,this.endTime=Date.now()+1e3*this.remain,this.setTimer())},setTimer:function(){var e=this;this.tid=this.createTimer((function(){var t=e.getRemain();e.isSameSecond(t,e.remain)&&0!==t||e.setRemain(t),0!==e.remain&&e.setTimer()}))},getRemain:function(){return Math.max(this.endTime-Date.now(),0)},pause:function(){this.counting=!1,clearTimeout(this.tid)},reset:function(){this.pause(),this.remain=this.time,this.setRemain(this.remain),this.autoStart&&this.start()},setRemain:function(e){var t=this.format;this.remain=e;var time,r=(time=e,{days:Math.floor(time/c),hours:l(Math.floor(time%c/o)),minutes:l(Math.floor(time%o/n)),seconds:l(Math.floor(time%n/1e3))});this.formateTime=function(e,t){var r=t.days,n=t.hours,o=t.minutes,c=t.seconds;return-1!==e.indexOf("dd")&&(e=e.replace("dd",r)),-1!==e.indexOf("hh")&&(e=e.replace("hh",l(n))),-1!==e.indexOf("mm")&&(e=e.replace("mm",l(o))),-1!==e.indexOf("ss")&&(e=e.replace("ss",l(c))),e}(t,r),this.$emit("change",r),0===e&&(this.pause(),this.$emit("finish"))}}},d=r(10),component=Object(d.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.time>=0?r("div",[r("client-only",[e.isSlot?e._t("default"):r("span",[e._v(e._s(e.formateTime))])],2)],1):e._e()}),[],!1,null,null,null);t.default=component.exports},454:function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"e",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return f}));var n=4,o={SMS:0,ACCOUNT:1},c={REGISTER:"ZCYZ",FINDPWD:"ZHMM",LOGIN:"YZMDL",SJSQYZ:"SJSQYZ",CHANGE_MOBILE:"BGSJHM",BIND:"BDSJHM"},l={NONE:"",SEX:"sex",NICKNAME:"nickname",AVATAR:"avatar",MOBILE:"mobile"},f={NORMAL:"apply",HANDLING:"status_ing",FINISH:"status_success_fail"}},547:function(e,t,r){var content=r(620);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(17).default)("98ca9702",content,!0,{sourceMap:!1})},619:function(e,t,r){"use strict";r(547)},620:function(e,t,r){var n=r(16)(!1);n.push([e.i,'.user-profile{padding:10px}.user-profile .user-header{padding:10px 5px;border-bottom:1px solid #e5e5e5}.user-profile .user-container{margin-top:35px}.user-profile .user-container .user-form-item{padding-left:13px;margin-top:24px}.user-profile .user-container .user-form-item .user-form-label{width:60px;text-align:left;margin-right:24px}.user-profile .user-container .user-form-item .user-avatar-upload .avatar-uploader:hover .avatar .mask{display:flex}.user-profile .user-container .user-form-item .user-avatar-upload .avatar-uploader:hover .avatar:after{opacity:1}.user-profile .user-container .user-form-item .user-avatar-upload .avatar-uploader .avatar{position:relative}.user-profile .user-container .user-form-item .user-avatar-upload .avatar-uploader .avatar .mask{display:none;position:absolute}.user-profile .user-container .user-form-item .user-avatar-upload .avatar-uploader .avatar:after{content:"更换头像";position:absolute;transition:opacity .3s ease;opacity:0;width:100%;height:64px;left:0;top:0;border-radius:60px;background-color:rgba(0,0,0,.3);color:#fff;display:flex;flex-direction:row;justify-content:center;align-items:center;font-size:12px}.user-profile .user-container .user-form-item .user-input{width:240px}.user-profile .user-container .user-form-item .el-radio__input.is-checked+.el-radio__label{color:#007aff}.user-profile .user-container .user-form-item .el-input__inner:focus{border-color:#007aff}.user-profile .user-container .user-form-item .el-radio__input.is-checked .el-radio__inner{border-color:#007aff;background:#007aff}.user-profile .user-container .user-form-item .el-radio__inner:hover{border-color:#007aff}.user-profile .user-container .primary-btn{background-color:#ff2c3c;height:32px;width:100px;margin-top:32px;border-radius:4px;border:none;cursor:pointer}.user-profile .user-container .primary-btn:focus{border:none;outline:none}',""]),e.exports=n},672:function(e,t,r){"use strict";r.r(t);r(23),r(18),r(22),r(11),r(29),r(21),r(30);var n=r(9),o=r(8),c=(r(45),r(38),r(91),r(52),r(454)),l=r(448),f=r(117),d=r.n(f),m=r(12),v=r(136),h=r.n(v);function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _={mixins:[r(443).a],layout:"user-layout",components:{CountDown:l.default},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$get,e.$post,n={},o="",t.next=4,r("user/info");case 4:return 1==(c=t.sent).code&&(n=c.data,o="男"==c.data.sex?1:"女"==c.data.sex?2:0),t.abrupt("return",{userInfo:n,radio:o});case 7:case"end":return t.stop()}}),t)})))()},data:function(){return{config:h.a,action:h.a.config.baseUrl+"/shopapi/Upload/image",radio:1,showChangeNumber:!1,showPwdPop:!1,telephone:"",verifyCode:"",pwd:"",againPwd:"",canSendNumber:!0,canSendPwd:!0,fileList:[]}},methods:x(x({beforeAvatarUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1);console.log("fdsadsf");var r="jpg"===t,n="png"===t;return r||n?r||n||"jpeg"===t:(this.$message({message:"上传文件只能是 jpg, jpeg, png格式!",type:"warning"}),!1)}},Object(m.b)(["getPublicData"])),{},{saveUserInfo:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$post("pc/setUserInfo",{sex:e.radio,nickname:e.userInfo.nickname});case 2:1==(r=t.sent).code&&(e.$message.success(r.msg),e.getPublicData());case 4:case"end":return t.stop()}}),t)})))()},closeChangeNumber:function(){this.telephone="",this.verifyCode="",this.showChangeNumber=!1},closePwdPop:function(){this.telephone="",this.verifyCode="",this.showPwdPop=!1},sndSmsToPhone:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=e.showChangeNumber||e.telephone){t.next=2;break}return t.abrupt("return",e.$message.error("请输入手机号"));case 2:if(r="",1!=e.showChangeNumber){t.next=9;break}return t.next=6,e.$post("user/bindMobileCaptcha",{mobile:e.telephone,key:e.smsType});case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,e.$post("user/resetPasswordCaptcha",{mobile:e.userInfo.mobile,key:e.smsType});case 11:r=t.sent;case 12:1==r.code&&(1==e.showChangeNumber?e.canSendNumber=!1:e.canSendPwd=!1,e.$message.success("发送成功"));case 13:case"end":return t.stop()}}),t)})))()},changeUserMobile:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.telephone){t.next=2;break}return t.abrupt("return",e.$message.error("请输入新的手机号码"));case 2:if(e.verifyCode){t.next=4;break}return t.abrupt("return",e.$message.error("请输入验证码"));case 4:return t.next=6,e.$post("user/bindMobile",{mobile:e.telephone,code:e.verifyCode,client:c.d});case 6:1==(r=t.sent).code&&(e.showChangeNumber=!1,e.$message.success(r.msg),e.getPublicData());case 8:case"end":return t.stop()}}),t)})))()},setPassWord:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.verifyCode){t.next=2;break}return t.abrupt("return",e.$message.error("请输入验证码"));case 2:if(e.pwd){t.next=4;break}return t.abrupt("return",e.$message.error("请输入密码"));case 4:if(e.againPwd){t.next=6;break}return t.abrupt("return",e.$message.error("请输入确认密码"));case 6:if(e.pwd==e.againPwd){t.next=8;break}return t.abrupt("return",e.$message.error("两次密码输入不一致"));case 8:return t.next=10,e.$post("user/resetPassword",{mobile:e.userInfo.mobile,code:e.verifyCode,password:e.pwd,client:c.d});case 10:1==t.sent.code&&(e.$message.success("修改成功"),e.showPwdPop=!1,e.$store.state.token="",d.a.remove("token"),e.$router.replace("/account/login"));case 12:case"end":return t.stop()}}),t)})))()},uploadFileSuccess:function(e,t){var r=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.$post("user/setInfo",{field:c.b.AVATAR,value:e.data.uri});case 2:if(1!=(n=t.sent).code){t.next=9;break}return r.$message.success(n.msg),t.next=7,r.$get("user/info");case 7:1==(o=t.sent).code&&(r.userInfo=o.data,r.radio=r.userRes.data.sex);case 9:case"end":return t.stop()}}),t)})))()}})},y=(r(619),r(10)),component=Object(y.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-profile"},[r("div",{staticClass:"user-header lg"},[e._v("\n        个人资料\n    ")]),e._v(" "),r("div",{staticClass:"user-container"},[r("div",{staticClass:"user-form-item flex"},[r("label",{staticClass:"user-form-label nr"},[e._v("头像")]),e._v(" "),r("div",{staticClass:"user-avatar-upload"},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:{version:e.config.version,token:e.$store.state.token},action:e.action,"show-file-list":!1,"file-list":e.fileList,"on-success":e.uploadFileSuccess,accept:"image/jpg,image/jpeg,image/png","before-upload":e.beforeAvatarUpload}},[r("div",{staticClass:"avatar"},[r("el-image",{staticStyle:{width:"64px",height:"64px","border-radius":"60px"},attrs:{src:e.userInfo.avatar}}),e._v(" "),r("div",{staticClass:"mask white"})],1)])],1)]),e._v(" "),r("div",{staticClass:"user-form-item flex"},[r("label",{staticClass:"user-form-label nr"},[e._v("用户ID")]),e._v(" "),r("div",{staticClass:"normal nr"},[e._v(e._s(e.userInfo.sn))])]),e._v(" "),r("div",{staticClass:"user-form-item flex"},[r("label",{staticClass:"user-form-label nr"},[e._v("昵称")]),e._v(" "),r("el-input",{staticClass:"user-input",attrs:{"suffix-icon":"el-icon-edit"},model:{value:e.userInfo.nickname,callback:function(t){e.$set(e.userInfo,"nickname",t)},expression:"userInfo.nickname"}})],1),e._v(" "),r("div",{staticClass:"user-form-item flex"},[r("label",{staticClass:"user-form-label nr"},[e._v("性别")]),e._v(" "),r("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[r("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),r("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),r("div",{staticClass:"user-form-item flex"},[r("label",{staticClass:"user-form-label nr"},[e._v("手机号")]),e._v(" "),r("div",{staticClass:"normal nr"},[e._v(e._s(e.userInfo.mobile))]),e._v(" "),r("div",{staticStyle:{color:"#6699CC","margin-left":"13px",cursor:"pointer"},on:{click:function(t){e.showChangeNumber=!0}}},[e._v("修改号码")])]),e._v(" "),r("div",{staticClass:"user-form-item flex"},[r("label",{staticClass:"user-form-label nr"},[e._v("注册时间")]),e._v(" "),r("div",{staticClass:"normal nr"},[e._v(e._s(e.userInfo.create_time))])]),e._v(" "),r("div",{staticClass:"user-form-item flex"},[r("label",{staticClass:"user-form-label nr"},[e._v("登录密码")]),e._v(" "),r("div",{staticClass:"nr",staticStyle:{color:"#6699CC",cursor:"pointer"},on:{click:function(t){e.showPwdPop=!0}}},[e._v(e._s("未设置"==e.userInfo.has_password?"设置密码":"修改密码"))])]),e._v(" "),r("button",{staticClass:"primary-btn flex row-center white",on:{click:e.saveUserInfo}},[e._v("\n            保存\n        ")])]),e._v(" "),r("el-dialog",{attrs:{title:e.userInfo.mobile?"更换手机号":"绑定手机",visible:e.showChangeNumber,width:"40%"},on:{"update:visible":function(t){e.showChangeNumber=t}}},[r("div",[r("el-form",{staticStyle:{width:"50%",margin:"0 auto"}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入新的手机号码"},model:{value:e.telephone,callback:function(t){e.telephone=t},expression:"telephone"}})],1),e._v(" "),r("el-form-item",[r("div",{staticClass:"flex"},[r("el-input",{attrs:{placeholder:"短信验证码"},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}}),e._v(" "),r("el-button",{staticStyle:{"margin-left":"14px"},on:{click:e.sndSmsToPhone}},[e.canSendNumber?r("div",[e._v("获取验证码")]):r("count-down",{attrs:{time:60,format:"ss秒",autoStart:""},on:{finish:function(t){e.canSendNumber=!0}}})],1)],1)])],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.changeUserMobile}},[e._v("确认")]),e._v(" "),r("el-button",{on:{click:e.closeChangeNumber}},[e._v("取消")])],1)]),e._v(" "),r("el-dialog",{attrs:{title:"设置登录密码",visible:e.showPwdPop,width:"40%"},on:{"update:visible":function(t){e.showPwdPop=t}}},[r("div",[r("el-form",{staticStyle:{width:"50%",margin:"0 auto"}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入手机号码",disabled:""},model:{value:e.userInfo.mobile,callback:function(t){e.$set(e.userInfo,"mobile",t)},expression:"userInfo.mobile"}})],1),e._v(" "),r("el-form-item",[r("div",{staticClass:"flex"},[r("el-input",{attrs:{placeholder:"短信验证码"},model:{value:e.verifyCode,callback:function(t){e.verifyCode=t},expression:"verifyCode"}}),e._v(" "),r("el-button",{staticStyle:{"margin-left":"14px"},on:{click:e.sndSmsToPhone}},[e.canSendPwd?r("div",[e._v("获取验证码")]):r("count-down",{attrs:{time:60,format:"ss秒",autoStart:""},on:{finish:function(t){e.canSendPwd=!0}}})],1)],1)]),e._v(" "),r("el-form-item",[r("el-input",{attrs:{type:"password",placeholder:"请输入密码 (数字与字母自由组合)"},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:"pwd"}})],1),e._v(" "),r("el-form-item",[r("el-input",{attrs:{type:"password",placeholder:"再次输入密码"},model:{value:e.againPwd,callback:function(t){e.againPwd=t},expression:"againPwd"}})],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.setPassWord}},[e._v("确认")]),e._v(" "),r("el-button",{on:{click:e.closePwdPop}},[e._v("取消")])],1)])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CountDown:r(448).default})}}]);