(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{561:function(e,t,o){var content=o(639);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(17).default)("6ab4852a",content,!0,{sourceMap:!1})},638:function(e,t,o){"use strict";o(561)},639:function(e,t,o){var r=o(16),n=o(188),d=o(559),c=o(560),l=r(!1),m=n(d),v=n(c);l.push([e.i,".goods-details{padding:16px 0 44px}.goods-details .goods-info{align-items:flex-start}.goods-details .goods-info .goods-swiper{width:400px;border-radius:4px}.goods-details .goods-info .goods-swiper .swiper{margin:10px 0;padding:0 25px;--swiper-navigation-size:15px;--swiper-navigation-color:#888}.goods-details .goods-info .goods-swiper .swiper .swiper-button-next,.goods-details .goods-info .goods-swiper .swiper .swiper-button-prev{top:0;width:25px;height:100%;margin-top:0;background-size:12px 22px}.goods-details .goods-info .goods-swiper .swiper .swiper-button-prev{left:0}.goods-details .goods-info .goods-swiper .swiper .swiper-button-next{right:0}.goods-details .goods-info .goods-swiper .swiper .swiper-item{cursor:pointer;height:66px;width:66px;border:2px solid transparent}.goods-details .goods-info .goods-swiper .swiper .swiper-item~.swiper-item{margin-left:10px}.goods-details .goods-info .goods-swiper .swiper .swiper-item.active{border-color:#ff2c3c}.goods-details .goods-info .goods-swiper .current-img{width:100%;height:400px}.goods-details .goods-info .info-wrap{min-height:486px;border-radius:4px;padding:20px}.goods-details .goods-info .info-wrap .name{font-size:20px}.goods-details .goods-info .info-wrap .price-wrap{background:url("+m+") no-repeat;background-size:100%;height:80px;padding:0 50px 0 20px;margin-bottom:26px}.goods-details .goods-info .info-wrap .price-wrap.seckill{background-image:url("+v+")}.goods-details .goods-info .info-wrap .price-wrap.seckill .count-down .item{width:30px;height:30px;background:rgba(0,0,0,.5);text-align:center;line-height:30px;border-radius:4px}.goods-details .goods-info .info-wrap .spec-wrap .spec{align-items:flex-start}.goods-details .goods-info .info-wrap .spec-wrap .spec .spec-name{margin-right:20px;margin-top:6px;flex:none}.goods-details .goods-info .info-wrap .spec-wrap .spec .spec-item{padding:0 20px;line-height:32px;border:1px solid hsla(0,0%,89.8%,.89804);border-radius:2px;margin-right:10px;margin-bottom:10px;cursor:pointer}.goods-details .goods-info .info-wrap .spec-wrap .spec .spec-item.active{color:#ff2c3c;background-color:#ffeeef;border-color:currentColor}.goods-details .goods-info .info-wrap .goods-num{margin-bottom:30px}.goods-details .goods-info .info-wrap .goods-num .num{margin-right:20px}.goods-details .goods-info .info-wrap .goods-btns .btn{line-height:42px;border-radius:2px;margin-right:14px;text-align:center;width:120px;border:1px solid #ff2c3c;cursor:pointer}.goods-details .goods-info .info-wrap .goods-btns .btn.addcart{color:#ff2c3c;background-color:#ffeeef;border-color:currentColor}.goods-details .goods-info .info-wrap .goods-btns .btn.collection{width:146px;color:#666;background-color:transparent;border-color:hsla(0,0%,89.8%,.89804)}.goods-details .goods-info .info-wrap .goods-btns .btn.collection .start-icon{width:18.5px;height:18px}.goods-details .details-wrap{align-items:stretch}.goods-details .details-wrap .details{padding:15px 10px;overflow:hidden}.goods-details .details-wrap .details .rich-text{padding:0 10px;width:100%;overflow:hidden}.goods-details .details-wrap .details .rich-text img{width:100%}.goods-details .details-wrap .details .rich-text p{margin:0}.goods-details .details-wrap .details .evaluation .evaluation-hd{background-color:#f2f2f2;height:80px;margin:0 10px}.goods-details .details-wrap .details .evaluation .evaluation-hd .rate{height:60px;width:220px;border-right:1px solid #e5e5e5;padding-left:10px;margin-right:40px}.goods-details .details-wrap .details .evaluation .evaluation-tab{margin:16px 20px}.goods-details .details-wrap .details .evaluation .evaluation-tab .item{border-radius:2px;cursor:pointer;height:32px;padding:6px 20px;color:#666;background-color:#f2f2f2;margin-right:10px}.goods-details .details-wrap .details .evaluation .evaluation-tab .item.active{color:#fff;background-color:#ff2c3c}.goods-details .goods-like{width:264px}.goods-details .goods-like .title{border-bottom:1px solid hsla(0,0%,89.8%,.89804)}.goods-details .goods-like .title>img{width:100%;height:100%}.goods-details .goods-like .goods-list .item{padding:10px;display:block}.goods-details .goods-like .goods-list .item .goods-img{width:244px;height:244px;margin-bottom:10px}",""]),e.exports=l},681:function(e,t,o){"use strict";o.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title bg-white"},[t("img",{attrs:{src:o(557),alt:""}})])}],n=(o(23),o(18),o(22),o(29),o(30),o(459)),d=o(9),c=o(8),l=(o(52),o(62),o(11),o(21),o(61),o(190),o(498),o(497)),m=o(448),v=o(12),f=o(85);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,o)}return t}function w(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(d.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var x={mixins:[o(443).a],components:{NumberBox:l.default,CountDown:m.default},asyncData:function(e){return Object(c.a)(regeneratorRuntime.mark((function t(){var o,r,n,d,data,code,c,l,m,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.params,o=e.$get,r=e.app,n=e.query,t.next=3,o("pc/goodsDetail",{params:{goods_id:n.id,visit:1}});case 3:return d=t.sent,data=d.data,code=d.code,c=d.msg,0==code&&(Object(f.Message)({message:c,type:"error"}),setTimeout((function(){return r.router.back()}),1500)),l={},m=0,t.next=12,o("/pc/goodsCommentCategory",{params:{goods_id:n.id}});case 12:return 1==(v=t.sent).code&&(l=v.data,m=v.data.comment[0].id,console.log("dataC",v)),t.abrupt("return",{goodsDetails:data,goodsImage:data.goods_image,commentActive:m,comment:l,id:n.id});case 15:case"end":return t.stop()}}),t)})))()},watchQuery:["id"],data:function(){return{goodsDetails:{},goodsImage:[],activity:{},swiperOptions:{pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},preventClicks:!0,slidesPerView:"auto"},active:"0",commentActive:0,swiperIndex:0,comment:{},checkedGoods:{},goodsNum:1,goodsSpec:[],id:"",timeData:{}}},created:function(){this.id=this.$route.query.id},methods:w(w({},Object(v.b)(["getPublicData"])),{},{toOther:function(e){this.$router.push("/goods_details?id="+e)},onChoseSpecItem:function(e,t){console.log("id",e),console.log("specid",t);var o=this.goodsSpec;o.forEach((function(o){o.spec_list&&o.id==e&&o.spec_list.forEach((function(e){e.checked=0,e.id==t&&(e.checked=1)}))})),this.goodsSpec=Object(n.a)(o)},onAddCart:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var o,r,n,code,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.token){t.next=3;break}return e.$message({message:"请先登陆",type:"error"}),t.abrupt("return",e.$router.push("account/login"));case 3:return o=e.goodsNum,r=e.checkedGoods.id,t.next=6,e.$post("/cart/add",{item_id:r,goods_num:o});case 6:n=t.sent,code=n.code,n.data,d=n.msg,1==code&&(e.getPublicData(),e.$message({message:d,type:"success"}));case 11:case"end":return t.stop()}}),t)})))()},onBuyNow:function(){if(!this.token)return this.$message({message:"请先登陆",type:"error"}),this.$router.push("account/login");if(this.checkedGoods.stock<=0)return this.$message({message:"商品库存不足",type:"error"});var e=this.goodsNum,t=[{item_id:this.checkedGoods.id,goods_num:e,num:e}];this.$router.push({path:"/confirm_order",query:{data:encodeURIComponent(JSON.stringify({goods:t})),source:"buy_now",order_type:0}})},getGoodsDetail:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("pc/goodsDetail",{params:{goods_id:e.id,visit:1}});case 2:o=t.sent,data=o.data,1==o.code&&(e.goodsDetails=data);case 6:case"end":return t.stop()}}),t)})))()},onCollectionGoods:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var o,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.token){t.next=3;break}return e.$message({message:"请先登陆",type:"error"}),t.abrupt("return",e.$router.push("account/login"));case 3:return o=e.goodsDetails.is_collect,t.next=6,e.$post("collect/handleCollectgoods",{is_collect:0==o?1:0,goods_id:e.id});case 6:r=t.sent,r.data,1==r.code&&(0==o?e.$message({message:"收藏成功",type:"success"}):e.$message({message:"取消收藏成功",type:"success"}),e.getGoodsDetail());case 10:case"end":return t.stop()}}),t)})))()},getComment:function(){var e=this;return Object(c.a)(regeneratorRuntime.mark((function t(){var o,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$get("/pc/goodsCommentCategory",{params:{goods_id:e.id}});case 2:o=t.sent,data=o.data,1==o.code&&(e.comment=data,e.commentActive=data.comment[0].id);case 6:case"end":return t.stop()}}),t)})))()},onChangeDate:function(e){var t={};for(var o in e)"milliseconds"!==o&&(t[o]=("0"+e[o]).slice(-2));this.timeData=t}}),watch:{goodsSpec:{immediate:!0,handler:function(e){var t=this.goodsDetails.spec_value_list,o=[];if(e.forEach((function(e){e.spec_list&&e.spec_list.forEach((function(e){e.checked&&o.push(e.id)}))})),o.length){var r=o.join(","),n=t.findIndex((function(e){return e.spec_value_ids==r}));-1==n&&(n=0),this.checkedGoods=t[n],console.log(this.checkedGoods)}}},goodsDetails:{immediate:!0,handler:function(e){e.spec_value&&(e.spec_value.forEach((function(e){e.spec_list.forEach((function(e,t){e.checked=0==t?1:0}))})),this.goodsSpec=Object(n.a)(e.spec_value))}}},computed:w({countTime:function(){var e=this.activity.info;return e?e.end_time-Date.now()/1e3:0}},Object(v.d)(["token"]))},_=(o(638),o(10)),component=Object(_.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.goodsDetails.id?r("div",{staticClass:"goods-details"},[r("div",{staticClass:"goods-info flex"},[r("div",{staticClass:"goods-swiper m-r-16 bg-white flex-col"},[r("el-image",{staticClass:"current-img",attrs:{"preview-src-list":e.goodsImage.map((function(e){return e})),src:e.goodsImage[e.swiperIndex]}}),e._v(" "),r("client-only",[r("swiper",{ref:"mySwiper",staticClass:"swiper",attrs:{options:e.swiperOptions}},[e._l(e.goodsImage,(function(t,o){return r("swiper-slide",{key:o,class:{"swiper-item":!0,active:o===e.swiperIndex}},[r("div",{staticStyle:{width:"100%",height:"100%"},on:{mouseover:function(t){e.swiperIndex=o}}},[r("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t}})],1)])})),e._v(" "),r("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),e._v(" "),r("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})],2)],1)],1),e._v(" "),r("div",{staticClass:"info-wrap bg-white flex-1"},[r("div",{staticClass:"name bold m-b-16"},[e._v("\n                "+e._s(e.goodsDetails.name)+"\n            ")]),e._v(" "),1==e.activity.type?r("div",{staticClass:"price-wrap flex-between white seckill"},[r("div",{staticClass:"price flex",staticStyle:{"align-items":"baseline"}},[r("div",{staticClass:"m-r-8"},[e._v("价格")]),e._v(" "),r("div",[r("price-formate",{attrs:{price:e.checkedGoods.price||e.goodsDetails.price,"subscript-size":16,"first-size":30,"second-size":16}})],1),e._v(" "),r("div",{staticClass:"line-through m-l-8 flex"},[e._v("\n                        原价\n                        "),r("price-formate",{attrs:{price:e.checkedGoods.market_price||e.goodsDetails.market_price}})],1)]),e._v(" "),r("div",{staticClass:"flex"},[r("div",{staticClass:"white m-r-16"},[e._v("距离结束还有")]),e._v(" "),r("count-down",{attrs:{time:e.countTime,"is-slot":!0},on:{change:e.onChangeDate}},[r("div",{staticClass:"flex flex-center count-down xxl"},[r("div",{staticClass:"item white"},[e._v(e._s(e.timeData.hours))]),e._v(" "),r("div",{staticClass:"white",staticStyle:{margin:"0 4px"}},[e._v(":")]),e._v(" "),r("div",{staticClass:"item white"},[e._v("\n                                "+e._s(e.timeData.minutes)+"\n                            ")]),e._v(" "),r("div",{staticClass:"white",staticStyle:{margin:"0 4px"}},[e._v(":")]),e._v(" "),r("div",{staticClass:"item white"},[e._v("\n                                "+e._s(e.timeData.seconds)+"\n                            ")])])])],1)]):r("div",{staticClass:"price-wrap  flex  flex row-between lighter"},[r("div",{staticClass:"price flex",staticStyle:{"align-items":"baseline"}},[r("div",{staticClass:"m-r-8"},[e._v("价格")]),e._v(" "),r("div",{staticClass:"primary"},[r("price-formate",{attrs:{price:e.checkedGoods.price||e.goodsDetails.sell_price,"subscript-size":16,"first-size":30,"second-size":16}})],1),e._v(" "),r("div",{staticClass:"line-through m-l-8 muted"},[r("price-formate",{attrs:{price:e.checkedGoods.market_price||e.goodsDetails.lineation_price}})],1)]),e._v(" "),r("div",{staticClass:"flex"},[r("div",{staticStyle:{"margin-right":"60px"}},[r("div",{staticClass:"m-b-8"},[e._v("浏览量")]),e._v(" "),r("div",[e._v(e._s(e.goodsDetails.click_num))])]),e._v(" "),r("div",[r("div",{staticClass:"m-b-8"},[e._v("销量")]),e._v(" "),r("div",[e._v(e._s(e.goodsDetails.sales_num))])])])]),e._v(" "),r("div",{staticClass:"spec-wrap"},e._l(e.goodsSpec,(function(t,o){return r("div",{key:o,staticClass:"spec flex m-b-16"},[r("div",{staticClass:"lighter spec-name"},[e._v(e._s(t.name))]),e._v(" "),r("div",{staticClass:"spec-list flex flex-wrap"},e._l(t.spec_list,(function(o,n){return r("div",{key:n,class:["spec-item lighter",{active:o.checked}],on:{click:function(r){return e.onChoseSpecItem(t.id,o.id)}}},[e._v("\n                            "+e._s(o.value)+"\n                        ")])})),0)])})),0),e._v(" "),r("div",{staticClass:"goods-num flex"},[r("div",{staticClass:"num lighter"},[e._v("数量")]),e._v(" "),r("number-box",{attrs:{min:1,max:e.checkedGoods.stock},model:{value:e.goodsNum,callback:function(t){e.goodsNum=t},expression:"goodsNum"}}),e._v(" "),r("div",{staticClass:"m-l-10"},[e._v("\n                    库存: "+e._s(e.checkedGoods.stock)+"\n                ")])],1),e._v(" "),r("div",{staticClass:"goods-btns flex lg"},[r("div",{staticClass:"btn bg-primary white",on:{click:e.onBuyNow}},[e._v("立即购买")]),e._v(" "),1!=e.activity.type?r("div",{staticClass:"btn primary addcart",on:{click:e.onAddCart}},[e._v("加入购物车")]):e._e(),e._v(" "),r("div",{staticClass:"btn lighter collection flex row-center",on:{click:e.onCollectionGoods}},[r("img",{staticClass:"start-icon m-r-8",attrs:{src:e.goodsDetails.is_collect?o(555):o(556)}}),e._v(" "),r("div",[e._v("收藏该商品")])])])])]),e._v(" "),r("div",{staticClass:"details-wrap flex m-t-16"},[r("div",{staticClass:"details bg-white flex-1"},[r("el-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[r("el-tab-pane",{attrs:{label:"商品详情"}},[r("div",{staticClass:"rich-text",domProps:{innerHTML:e._s(e.goodsDetails.content)}})]),e._v(" "),r("el-tab-pane",{attrs:{label:"商品评价"}},[r("div",{staticClass:"evaluation"},[r("div",{staticClass:"evaluation-hd flex"},[r("div",{staticClass:"rate flex"},[r("div",{staticClass:"lighter m-r-8"},[e._v("好评率")]),e._v(" "),r("div",{staticClass:"primary",staticStyle:{"font-size":"30px"}},[e._v("\n                                    "+e._s(e.comment.percent)+"\n                                ")])]),e._v(" "),r("div",{staticClass:"score lighter flex"},[r("span",{staticClass:"m-r-8"},[e._v("评分")]),e._v(" "),r("el-rate",{attrs:{disabled:"","allow-half":""},model:{value:e.comment.star,callback:function(t){e.$set(e.comment,"star",t)},expression:"comment.star"}})],1)]),e._v(" "),r("div",{staticClass:"evaluation-tab flex"},e._l(e.comment.comment,(function(t,o){return r("div",{key:o,class:["item",{active:e.commentActive==t.id}],on:{click:function(o){e.commentActive=t.id}}},[e._v("\n                                "+e._s(t.name)+"("+e._s(t.count)+")\n                            ")])})),0)]),e._v(" "),r("div",[e._l(e.comment.comment,(function(t,o){return[r("comment-list",{directives:[{name:"show",rawName:"v-show",value:e.commentActive==t.id,expression:"commentActive == item.id"}],key:o,attrs:{"goods-id":e.goodsDetails.id,type:t.id}})]}))],2)])],1)],1),e._v(" "),r("div",{staticClass:"goods-like m-l-16"},[e._m(0),e._v(" "),r("div",{staticClass:"goods-list"},[e._l(e.goodsDetails.recommend,(function(t,o){return[o<5?r("div",{key:o,staticClass:"item bg-white",class:4==o?"":"m-b-16",on:{click:function(o){return e.toOther(t.id)}}},[r("el-image",{staticClass:"goods-img",attrs:{src:t.image}}),e._v(" "),r("div",{staticClass:"goods-name line2"},[e._v("\n                            "+e._s(t.name)+"\n                        ")]),e._v(" "),r("div",{staticClass:"price flex m-t-8"},[r("div",{staticClass:"primary m-r-8"},[r("price-formate",{attrs:{price:t.min_price,"first-size":16}})],1),e._v(" "),r("div",{staticClass:"muted sm line-through"},[r("price-formate",{attrs:{price:t.min_lineation_price}})],1)])],1):e._e()]}))],2)])])]):e._e()}),r,!1,null,null,null);t.default=component.exports;installComponents(component,{PriceFormate:o(444).default,CountDown:o(448).default,CommentList:o(527).default})}}]);